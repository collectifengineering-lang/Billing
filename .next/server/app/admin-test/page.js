(()=>{var e={};e.id=7552,e.ids=[7552],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},21006:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(83588),t(2571),t(35866);var n=t(23191),i=t(88716),a=t(37922),r=t.n(a),l=t(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["admin-test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,83588)),"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\admin-test\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2571)),"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Jonathan\\Desktop\\Billing\\app\\admin-test\\page.tsx"],m="/admin-test/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin-test/page",pathname:"/admin-test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},14876:(e,s,t)=>{Promise.resolve().then(t.bind(t,61061))},61061:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var n=t(10326),i=t(33835),a=t(17577);function r(){let{user:e,loading:s}=(0,i.a)(),[t,r]=(0,a.useState)({}),[l,d]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),m=async()=>{if(e?.email){c(!0);try{let s=await fetch(`/api/auth/admin-test?email=${encodeURIComponent(e.email)}`),t=await s.json();d(t),console.log("Server admin test result:",t)}catch(e){d({error:e instanceof Error?e.message:"Unknown error"})}finally{c(!1)}}};return s?n.jsx("div",{children:"Loading..."}):e?(0,n.jsxs)("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Admin Access Test"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"p-4 border rounded",children:[n.jsx("h2",{className:"font-semibold",children:"Environment Variables (Client Side)"}),n.jsx("pre",{className:"text-sm bg-gray-100 p-2 rounded",children:JSON.stringify(t,null,2)})]}),(0,n.jsxs)("div",{className:"p-4 border rounded",children:[n.jsx("h2",{className:"font-semibold",children:"User Status"}),(0,n.jsxs)("p",{children:["Email: ",e.email]}),(0,n.jsxs)("p",{children:["Is Admin: ",e.isAdmin?"Yes":"No"]}),(0,n.jsxs)("p",{children:["Is Basic: ",e.isBasic?"Yes":"No"]})]}),(0,n.jsxs)("div",{className:"p-4 border rounded",children:[n.jsx("h2",{className:"font-semibold",children:"Server-Side Admin Check"}),n.jsx("button",{onClick:m,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded disabled:bg-gray-400",children:o?"Testing...":"Test Server Admin Check"}),l&&(0,n.jsxs)("div",{className:"mt-4",children:[n.jsx("h3",{className:"font-medium",children:"Server Response:"}),n.jsx("pre",{className:"text-sm bg-gray-100 p-2 rounded mt-2",children:JSON.stringify(l,null,2)})]})]}),(0,n.jsxs)("div",{className:"p-4 border rounded",children:[n.jsx("h2",{className:"font-semibold",children:"Access Test"}),e.isAdmin?n.jsx("div",{className:"text-green-600",children:"✅ You have admin access! You should be able to view the settings and financial dashboard."}):n.jsx("div",{className:"text-red-600",children:"❌ You do not have admin access. Check the environment variable NEXT_PUBLIC_ADMIN_EMAILS."})]}),(0,n.jsxs)("div",{className:"p-4 border rounded bg-yellow-50",children:[n.jsx("h2",{className:"font-semibold",children:"Troubleshooting Steps"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[(0,n.jsxs)("li",{children:["Check that ",n.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"NEXT_PUBLIC_ADMIN_EMAILS=jonathan@collectif.nyc"})," is set in your Vercel environment variables"]}),n.jsx("li",{children:"Verify the environment variable is deployed (may take a few minutes after setting)"}),(0,n.jsxs)("li",{children:["Check that your email ends with ",n.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"@collectif.nyc"})]}),n.jsx("li",{children:"Look at the browser console for debug information"}),n.jsx("li",{children:"Try the server-side admin check above"})]})]})]})]}):n.jsx("div",{children:"Not authenticated"})}},83588:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});let n=(0,t(68570).createProxy)(String.raw`C:\Users\Jonathan\Desktop\Billing\app\admin-test\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[9276,892,7053],()=>t(21006));module.exports=n})();