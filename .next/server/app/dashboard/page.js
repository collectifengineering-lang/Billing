(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84997:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(69521),t(2571),t(35866);var a=t(23191),l=t(88716),r=t(37922),i=t.n(r),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,69521)),"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2571)),"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Jonathan\\Desktop\\Billing\\app\\dashboard\\page.tsx"],x="/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61524:(e,s,t)=>{Promise.resolve().then(t.bind(t,33385))},33385:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(10326),l=t(17577),r=t(90434),i=t(17069),n=t(76557);let c=(0,n.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),d=(0,n.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var o=t(86333),x=t(76464),m=t(54689);let h=(0,n.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var j=t(37202),u=t(71821);let p=(0,n.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var f=t(53468),g=t(24061),b=t(59734),y=t(54659),v=t(33071),N=t(79210),w=t(567),C=t(60064);function k(){let[e,s]=(0,l.useState)(null),[t,n]=(0,l.useState)(null),[k,P]=(0,l.useState)([]),[Z,S]=(0,l.useState)(""),[D,M]=(0,l.useState)(!0),[O,A]=(0,l.useState)(!1),[Y,E]=(0,l.useState)(null),[R,F]=(0,l.useState)(new Set),_=(0,l.useRef)("");(0,l.useRef)(null);let U=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),T=e=>`${(100*e).toFixed(1)}%`,I=async e=>{try{if(!(await fetch("/api/closed-projects",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e})})).ok)throw Error("Failed to remove project from database");let s=new Set(R);s.delete(e),F(s),localStorage.setItem("closedProjects",JSON.stringify(Array.from(s)));let t=new CustomEvent("projectStatusChanged",{detail:{projectId:e,status:"reopened",closedProjects:s}});window.dispatchEvent(t),console.log(`Project ${e} reopened`)}catch(s){console.error("Error reopening project:",s);try{let s=new Set(R);s.delete(e),F(s),localStorage.setItem("closedProjects",JSON.stringify(Array.from(s)));let t=new CustomEvent("projectStatusChanged",{detail:{projectId:e,status:"reopened",closedProjects:s}});window.dispatchEvent(t)}catch(e){console.error("Fallback error:",e)}}},B=async e=>{try{if(!(await fetch("/api/closed-projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e})})).ok)throw Error("Failed to add project to database");let s=new Set(R);s.add(e),F(s),localStorage.setItem("closedProjects",JSON.stringify(Array.from(s)));let t=new CustomEvent("projectStatusChanged",{detail:{projectId:e,status:"closed",closedProjects:s}});window.dispatchEvent(t),console.log(`Project ${e} closed`)}catch(s){console.error("Error closing project:",s);try{let s=new Set(R);s.add(e),F(s),localStorage.setItem("closedProjects",JSON.stringify(Array.from(s)));let t=new CustomEvent("projectStatusChanged",{detail:{projectId:e,status:"closed",closedProjects:s}});window.dispatchEvent(t)}catch(e){console.error("Fallback error:",e)}}};return Y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-900 mb-4",children:"Dashboard Error"}),a.jsx("p",{className:"text-red-600 mb-4",children:Y}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Page"})]})}):D?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Fetching financial data from Zoho and Clockify..."}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:[a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:a.jsx("strong",{children:"What's happening:"})}),(0,a.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Connecting to Zoho Books API"}),a.jsx("li",{children:"• Fetching financial metrics (may take 10-20 seconds)"}),a.jsx("li",{children:"• Loading project data"}),a.jsx("li",{children:"• Calculating performance indicators"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-3",children:"This process includes rate limiting to respect API limits."})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Refresh if stuck"})})]})}):e?a.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(r.default,{href:"/",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[a.jsx(o.Z,{className:"h-4 w-4 mr-1"}),"Back to Home"]})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-2",children:"Financial Dashboard"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Comprehensive financial metrics and performance indicators"})]}),a.jsx("div",{className:"flex space-x-3",children:(0,a.jsxs)(w.C,{variant:"outline",className:"flex items-center",children:[a.jsx(x.Z,{className:"h-4 w-4 mr-1"}),"Financial Analytics"]})})]})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{htmlFor:"project-select",className:"text-sm font-medium text-gray-700",children:"Select Project:"}),(0,a.jsxs)("select",{id:"project-select",value:Z,onChange:e=>{try{let s=e.target.value;console.log("Project selection changed to:",s),s!==Z&&S(s)}catch(e){console.error("Error in project selection change:",e),S(""),n(null),_.current=""}},className:"block w-80 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[a.jsx("option",{value:"",children:"All Projects (Company Overview)"}),a.jsx("optgroup",{label:"Active Projects",children:Array.isArray(k)&&k.filter(e=>!R.has(e?.project_id||"")).map(e=>(0,a.jsxs)("option",{value:e?.project_id||"",children:[e?.project_name||"Unknown Project"," - ",e?.customer_name||"Unknown Customer"]},e?.project_id||"unknown"))}),Array.isArray(k)&&k.filter(e=>R.has(e?.project_id||"")).length>0&&a.jsx("optgroup",{label:"Closed Projects",children:Array.isArray(k)&&k.filter(e=>R.has(e?.project_id||"")).map(e=>(0,a.jsxs)("option",{value:e?.project_id||"",children:[e?.project_name||"Unknown Project"," - ",e?.customer_name||"Unknown Customer"," (Closed)"]},e?.project_id||"unknown"))})]}),O&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Loading project data..."]})]}),Z&&(0,a.jsxs)("div",{className:"mt-3 flex items-center space-x-3",children:[R.has(Z)?(0,a.jsxs)("button",{onClick:()=>I(Z),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200",children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Reopen Project"]}):(0,a.jsxs)("button",{onClick:()=>B(Z),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(h,{className:"h-4 w-4 mr-2"}),"Close Project"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Status: ",R.has(Z)?"Closed":"Active"]})]})]}),Y&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(j.Z,{className:"h-5 w-5 text-red-400"})}),(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Dashboard Error"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{children:Y})}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:()=>{E(null),window.location.reload()},className:"bg-red-100 text-red-800 px-3 py-2 rounded-md text-sm font-medium hover:bg-red-200",children:"Retry"})})]})]})}),(0,a.jsxs)(N.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(N.dr,{className:"grid w-full grid-cols-6",children:[a.jsx(N.SP,{value:"overview",children:"Overview"}),a.jsx(N.SP,{value:"profitability",children:"Profitability"}),a.jsx(N.SP,{value:"cashflow",children:"Cashflow"}),a.jsx(N.SP,{value:"forecasting",children:"Forecasting"}),a.jsx(N.SP,{value:"financial-data",children:"Financial Data"}),Z&&a.jsx(N.SP,{value:"project",children:"Project Details"})]}),(0,a.jsxs)(N.nU,{value:"overview",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"YTD Profit"}),a.jsx(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:U(e?.ytdProfit||0)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["vs ",U(e?.lastYearYtdProfit||0)," last year"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Gross Margin"}),a.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:T(e?.currentYearGrossMargin||0)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["vs ",T(e?.lastYearGrossMargin||0)," last year"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Utilization Rate"}),a.jsx(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:T(e?.utilizationRate||0)}),a.jsx(C.E,{value:100*(e?.utilizationRate||0),className:"mt-2"})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Active Projects"}),a.jsx(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e?.totalActiveProjects||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e?.totalEmployees||0," employees"]})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Project Status Overview"}),a.jsx(v.SZ,{children:"Active and closed projects"})]}),(0,a.jsxs)(v.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700",children:"Active Projects"}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:Array.isArray(k)?k.filter(e=>!R.has(e?.project_id||"")).length:0}),a.jsx("p",{className:"text-xs text-gray-500",children:"Currently in progress"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700",children:"Closed Projects"}),a.jsx("div",{className:"text-2xl font-bold text-red-600",children:R.size}),a.jsx("p",{className:"text-xs text-gray-500",children:"Completed or on hold"})]})]}),R.size>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"Recently Closed Projects"}),a.jsx("div",{className:"space-y-2",children:Array.isArray(k)&&k.filter(e=>R.has(e?.project_id||"")).slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:e?.project_name||"Unknown Project"}),a.jsx("button",{onClick:()=>I(e?.project_id||""),className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Reopen"})]},e?.project_id))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Multipliers"}),a.jsx(v.SZ,{children:"Project multipliers by year"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Current Year"}),(0,a.jsxs)(w.C,{variant:"default",children:[e?.currentYearMultiplier.toFixed(1)||"N/A","x"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Last Year"}),(0,a.jsxs)(w.C,{variant:"secondary",children:[e?.lastYearMultiplier.toFixed(1)||"N/A","x"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Two Years Ago"}),(0,a.jsxs)(w.C,{variant:"outline",children:[e?.twoYearsAgoMultiplier.toFixed(1)||"N/A","x"]})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Overhead Rates"}),a.jsx(v.SZ,{children:"Overhead rates by year"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Current Year"}),a.jsx(w.C,{variant:"default",children:T(e?.currentYearOverhead||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Last Year"}),a.jsx(w.C,{variant:"secondary",children:T(e?.lastYearOverhead||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Two Years Ago"}),a.jsx(w.C,{variant:"outline",children:T(e?.twoYearsAgoOverhead||0)})]})]})]})]})]}),a.jsx(N.nU,{value:"profitability",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Profit Metrics"}),a.jsx(v.SZ,{children:"Year-to-date profitability analysis"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"YTD Operating Income"}),a.jsx("span",{className:"font-semibold",children:U(e?.ytdOperatingIncome||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Last Year YTD Operating Income"}),a.jsx("span",{className:"font-semibold",children:U(e?.lastYearYtdOperatingIncome||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Revenue per Employee"}),a.jsx("span",{className:"font-semibold",children:U(e?.currentYearRevenuePerEmployee||0)})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Client Retention"}),a.jsx(v.SZ,{children:"Client retention and project metrics"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Client Retention Rate"}),a.jsx(w.C,{variant:"default",children:T(e?.clientRetentionRate||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Average Project Size"}),a.jsx("span",{className:"font-semibold",children:U(e?.averageProjectSize||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Average Billing Rate"}),(0,a.jsxs)("span",{className:"font-semibold",children:[U(e?.averageBillingRate||0),"/hr"]})]})]})]})]})}),a.jsx(N.nU,{value:"cashflow",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Cashflow Overview"}),a.jsx(v.SZ,{children:"Current cashflow status"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Current Cashflow"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-semibold",children:U(e?.currentCashflow||0)}),(e=>{switch(e){case"up":return a.jsx(i.Z,{className:"h-4 w-4 text-green-600"});case"down":return a.jsx(c,{className:"h-4 w-4 text-red-600"});default:return a.jsx(d,{className:"h-4 w-4 text-gray-600"})}})(e?.cashflowTrend||"stable")]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Previous Month"}),a.jsx("span",{className:"font-semibold",children:U(e?.previousMonthCashflow||0)})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Invoice Status"}),a.jsx(v.SZ,{children:"Outstanding invoices and payment metrics"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Overdue Invoices"}),a.jsx("span",{className:"font-semibold text-red-600",children:U(e?.overdueInvoiceValue||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Total Outstanding"}),a.jsx("span",{className:"font-semibold",children:U(e?.totalOutstandingInvoices||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Avg Days to Payment"}),(0,a.jsxs)("span",{className:"font-semibold",children:[e?.averageDaysToPayment||0," days"]})]})]})]})]})}),a.jsx(N.nU,{value:"forecasting",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Trailing 12 Months"}),a.jsx(v.SZ,{children:"Revenue and profit trends"})]}),a.jsx(v.aY,{children:a.jsx("div",{className:"space-y-2",children:e?.trailing12Months?.slice(-6).map((e,s)=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{children:e.month}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{children:U(e.revenue)}),a.jsx(w.C,{variant:e.profitMargin>.2?"default":"secondary",children:T(e.profitMargin)})]})]},s))})})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"6-Month Forecast"}),a.jsx(v.SZ,{children:"Projected revenue and expenses"})]}),a.jsx(v.aY,{children:a.jsx("div",{className:"space-y-2",children:e?.forecast?.map((e,s)=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{children:e.month}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{children:U(e.projectedRevenue)}),a.jsx(w.C,{variant:"outline",children:U(e.projectedProfit)})]})]},s))})})]})]})}),a.jsx(N.nU,{value:"financial-data",className:"space-y-6",children:a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Zoho Financial Data Integration"}),a.jsx(v.SZ,{children:"Test and verify the connection to Zoho Books for accurate financial metrics"})]}),a.jsx(v.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:async()=>{try{E(null);let e=await fetch("/api/financial-data"),s=await e.json();if(s.success)console.log("Financial data test result:",s),alert(`Financial data test completed!

Successful endpoints: ${s.summary.successfulEndpoints}/${s.summary.totalEndpoints}
Errors: ${s.summary.failedEndpoints}

Check browser console for detailed results.`);else throw Error(s.error)}catch(e){console.error("Financial data test failed:",e),E(`Financial data test failed: ${e instanceof Error?e.message:"Unknown error"}`)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Test Zoho Financial Integration"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Click to test all Zoho financial endpoints and verify data accuracy"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Current Data Sources"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"YTD Profit:"}),a.jsx("span",{className:"font-semibold",children:e?.ytdProfit?"✅ Real Zoho Data":"❌ Mock Data"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Cash Flow:"}),a.jsx("span",{className:"font-semibold",children:e?.currentCashflow&&0!==e.currentCashflow?"✅ Real Zoho Data":"❌ Mock Data"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Revenue:"}),a.jsx("span",{className:"font-semibold",children:e?.trailing12Months?.[0]?.revenue?"✅ Real Zoho Data":"❌ Mock Data"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Expenses:"}),a.jsx("span",{className:"font-semibold",children:e?.trailing12Months?.[0]?.expenses?"✅ Real Zoho Data":"❌ Mock Data"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Integration Status"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Zoho API:"}),a.jsx("span",{className:"font-semibold text-green-600",children:"✅ Connected"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Financial Reports:"}),a.jsx("span",{className:"font-semibold text-blue-600",children:"\uD83D\uDD04 Testing Required"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Data Accuracy:"}),a.jsx("span",{className:"font-semibold text-yellow-600",children:"⚠️ Verify Required"})]})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-sm text-blue-800 mb-2",children:"How to Verify Data Accuracy"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsxs)("p",{children:["1. ",a.jsx("strong",{children:'Click "Test Zoho Financial Integration"'})," above"]}),(0,a.jsxs)("p",{children:["2. ",a.jsx("strong",{children:"Check browser console"})," for detailed API responses"]}),(0,a.jsxs)("p",{children:["3. ",a.jsx("strong",{children:"Compare dashboard metrics"})," with your Zoho Books reports"]}),(0,a.jsxs)("p",{children:["4. ",a.jsx("strong",{children:"Verify YTD Profit"})," matches your P&L statement"]}),(0,a.jsxs)("p",{children:["5. ",a.jsx("strong",{children:"Check Cash Flow"})," matches your cash flow statement"]})]})]}),Y&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-sm text-red-800 mb-2",children:"Integration Error"}),a.jsx("p",{className:"text-sm text-red-700",children:Y})]})]})})]})})}),Z&&t&&(0,a.jsxs)(N.nU,{value:"project",className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?.projectName||"Unknown Project"}),a.jsx("p",{className:"text-gray-600",children:t?.customerName||"Unknown Customer"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[a.jsx(w.C,{variant:R.has(Z)?"secondary":"default",className:R.has(Z)?"bg-red-100 text-red-800 border-red-200":"",children:R.has(Z)?"Closed":"Active"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t?.startDate?new Date(t.startDate).toLocaleDateString():"Unknown Date",t?.endDate&&` - ${new Date(t.endDate).toLocaleDateString()}`]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:U(t?.totalBudget||0)}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Budget"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Current Multiplier"}),a.jsx(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(t?.currentMultiplier||0).toFixed(1),"x"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t?.profitabilityTrend==="improving"&&"↗ Improving",t?.profitabilityTrend==="declining"&&"↘ Declining",t?.profitabilityTrend==="stable"&&"→ Stable"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Efficiency"}),a.jsx(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:T(t?.efficiency||0)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t?.billableHours||0,"h billable / ",t?.totalHours||0,"h total"]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Budget Utilization"}),a.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold",children:T((t?.budgetUtilization||0)/100)}),a.jsx(C.E,{value:t?.budgetUtilization||0,className:"mt-2"})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(v.ll,{className:"text-sm font-medium",children:"Risk Level"}),t?.riskLevel==="low"&&a.jsx(y.Z,{className:"h-4 w-4 text-green-600"}),t?.riskLevel==="medium"&&a.jsx(j.Z,{className:"h-4 w-4 text-yellow-600"}),t?.riskLevel==="high"&&a.jsx(h,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(v.aY,{children:[a.jsx("div",{className:"text-2xl font-bold capitalize",children:t?.riskLevel||"unknown"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t?.schedulePerformance||0,"% schedule performance"]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Financial Summary"}),a.jsx(v.SZ,{children:"Cash vs Accrual basis"})]}),(0,a.jsxs)(v.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Cash Basis"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Collected"}),a.jsx("span",{className:"font-semibold",children:U(t?.cashBasis?.totalCollected||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Outstanding"}),a.jsx("span",{className:"font-semibold",children:U(t?.cashBasis?.outstandingReceivables||0)})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Accrual Basis"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total Earned"}),a.jsx("span",{className:"font-semibold",children:U(t?.accrualBasis?.totalEarned||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Work in Progress"}),a.jsx("span",{className:"font-semibold",children:U(t?.accrualBasis?.workInProgress||0)})]})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-semibold",children:"Gross Profit"}),a.jsx("span",{className:"text-lg font-bold text-green-600",children:U(t?.grossProfit||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Profit Margin"}),a.jsx("span",{className:"text-sm font-semibold",children:T(t?.profitMargin||0)})]})]})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Employee Analysis"}),a.jsx(v.SZ,{children:"Hours and efficiency by employee"})]}),a.jsx(v.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[t?.employeeBreakdown?.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:e?.employeeName||"Unknown Employee"}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e?.billableHours||0,"h billable / ",e?.totalHours||0,"h total"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"font-semibold",children:U(e?.billableValue||0)}),a.jsxs("div",{className:"text-xs text-gray-500",children:[T(e?.efficiency||0)," efficient"]})]})]},s)),(!t?.employeeBreakdown||0===t.employeeBreakdown.length)&&a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No employee data available"})]})})]})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Project Phases"}),a.jsx(v.SZ,{children:"Architectural/Engineering phase breakdown"})]}),a.jsx(v.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[t?.phases?.map((e,s)=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold",children:e?.phaseName||"Unknown Phase"}),a.jsxs(w.C,{variant:100===(e?.completion||0)?"default":"secondary",children:[e?.completion||0,"% Complete"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Budget:"}),a.jsx("div",{className:"font-semibold",children:U(e?.budget||0)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Actual Cost:"}),a.jsx("div",{className:"font-semibold",children:U(e?.actualCost||0)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Hours:"}),a.jsxs("div",{className:"font-semibold",children:[e?.hours||0,"h"]})]})]}),a.jsx(C.E,{value:e?.completion||0,className:"mt-2"})]},s)),(!t?.phases||0===t.phases.length)&&a.jsx("div",{className:"text-center text-gray-500 py-4",children:"No phase data available"})]})})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Change Orders"}),a.jsx(v.SZ,{children:"Additional scope and value"})]}),a.jsx(v.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:t?.changeOrders?.count||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Changes"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:U(t?.changeOrders?.totalValue||0)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:U(t?.changeOrders?.approvedValue||0)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:U(t?.changeOrders?.pendingValue||0)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})]})})]}),(0,a.jsxs)(v.Zb,{children:[(0,a.jsxs)(v.Ol,{children:[a.jsx(v.ll,{children:"Project Forecasting"}),a.jsx(v.SZ,{children:"Projected completion and final metrics"})]}),a.jsx(v.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Projected Completion"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Target Date:"}),a.jsx("span",{className:"font-semibold",children:t?.projectedCompletion?new Date(t.projectedCompletion).toLocaleDateString():"Unknown Date"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Projected Final Cost:"}),a.jsx("span",{className:"font-semibold",children:U(t?.projectedFinalCost||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Projected Profit:"}),a.jsx("span",{className:"font-semibold text-green-600",children:U(t?.projectedProfit||0)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Projected Margin:"}),a.jsx("span",{className:"font-semibold",children:T(t?.projectedMargin||0)})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Historical Multipliers"}),(0,a.jsxs)("div",{className:"space-y-2",children:[t?.historicalMultipliers?.map((e,s)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold",children:[(e?.multiplier||0).toFixed(1),"x"]}),a.jsx("div",{className:"text-xs text-gray-500",children:e?.notes||"No notes"})]}),a.jsx("div",{className:"text-xs text-gray-500",children:e?.date?new Date(e.date).toLocaleDateString():"Unknown Date"})]},s)),(!t?.historicalMultipliers||0===t.historicalMultipliers.length)&&a.jsx("div",{className:"text-center text-gray-500 py-2",children:"No historical multiplier data available"})]})]})]})})]})]})]})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Financial Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data"})]})})}function P(){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"relative mb-12",children:[a.jsx("div",{className:"absolute top-0 left-0",children:a.jsx(r.default,{href:"/",className:"inline-flex items-center justify-center w-12 h-12 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border border-gray-200 dark:border-slate-700 rounded-full hover:bg-white dark:hover:bg-slate-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:a.jsx(o.Z,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})})}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-4",children:"Financial Dashboard"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Comprehensive financial insights, profitability analysis, and performance metrics"})]})]}),a.jsx(k,{})]})})}},567:(e,s,t)=>{"use strict";t.d(s,{C:()=>n});var a=t(10326);t(17577);var l=t(79360),r=t(77863);let i=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return a.jsx("div",{className:(0,r.cn)(i({variant:s}),e),...t})}},33071:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>n,SZ:()=>d,Zb:()=>i,aY:()=>o,ll:()=>c});var a=t(10326),l=t(17577),r=t(77863);let i=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let n=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let c=l.forwardRef(({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=l.forwardRef(({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,r.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",l.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},60064:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(10326),l=t(17577),r=t(87273),i=t(77863);let n=l.forwardRef(({className:e,value:s,...t},l)=>a.jsx(r.fC,{ref:l,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx(r.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));n.displayName=r.fC.displayName},79210:(e,s,t)=>{"use strict";t.d(s,{SP:()=>d,dr:()=>c,mQ:()=>n,nU:()=>o});var a=t(10326),l=t(17577),r=t(58291),i=t(77863);let n=r.fC,c=l.forwardRef(({className:e,...s},t)=>a.jsx(r.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=r.aV.displayName;let d=l.forwardRef(({className:e,...s},t)=>a.jsx(r.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=r.xz.displayName;let o=l.forwardRef(({className:e,...s},t)=>a.jsx(r.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=r.VY.displayName},77863:(e,s,t)=>{"use strict";t.d(s,{K0:()=>f,UF:()=>h,ab:()=>j,bh:()=>p,cn:()=>o,ji:()=>m,xG:()=>u});var a=t(95492),l=t(72578),r=t(65160),i=t(40803),n=t(9445),c=t(41135),d=t(31009);function o(...e){return(0,d.m6)((0,c.W)(e))}function x(e,s){let t=[],n=(0,a.Z)(e),c=(0,l.Z)(s);for(;n<=c;)t.push((0,r.Z)(n,"yyyy-MM")),n=(0,i.Z)(n,1);return t}function m(){let e=new Date(2022,0,1),s=new Date;return x(e,(0,i.Z)(s,24))}function h(){let e=new Date;return x((0,n.Z)(e,12),(0,i.Z)(e,12))}function j(e,s,t,a){let l=e||[],i=t||{};if(0===l.length)return[];let n=m(),c=new Map;return(s||[]).forEach(e=>{let s=e.project_id;c.has(s)||c.set(s,[]),c.get(s).push(e)}),l.map(e=>{let s=c.get(e.project_id)||[],t=new Map;s.forEach(e=>{let s=(0,r.Z)(new Date(e.date),"yyyy-MM"),a=t.get(s)||{billed:0,unbilled:0};a.billed+=e.billed_amount,a.unbilled+=e.unbilled_amount,t.set(s,a)});let l=n.map(s=>{let a=t.get(s)||{billed:0,unbilled:0},l=i[e.project_id]?.months?.[s]?.value||0,r=a.billed+a.unbilled;return{month:s,billed:a.billed,unbilled:a.unbilled,projected:l,actual:r}}),d=l.reduce((e,s)=>e+s.billed,0),o=l.reduce((e,s)=>e+s.unbilled,0),x=l.reduce((e,s)=>e+s.projected,0),m=!!a&&a.has(e.project_id);return{projectId:e.project_id,projectName:e.project_name,customerName:e.customer_name,signedFee:void 0,monthlyData:l,totalBilled:d,totalUnbilled:o,totalProjected:x,status:m?"closed":"active",isClosed:m}})}function u(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function p(e){let[s,t]=e.split("-"),a=new Date(parseInt(s),parseInt(t)-1);return(0,r.Z)(a,"MMM yyyy")}function f(e){let s=m(),t={};return(e||[]).forEach(e=>{t[e.project_id]={months:{},asrFee:0},s.forEach(s=>{let a=s>(0,r.Z)(new Date,"yyyy-MM");t[e.project_id].months[s]={value:0,isEditable:a,isProjected:a}})}),t}},86333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},59734:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},54689:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(76557).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},69521:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\Users\Jonathan\Desktop\Billing\app\dashboard\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[9276,892,3599,6821,5976,7053],()=>t(84997));module.exports=a})();