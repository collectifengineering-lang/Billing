"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/payroll/bamboohr/route";
exports.ids = ["app/api/payroll/bamboohr/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fbamboohr%2Froute&page=%2Fapi%2Fpayroll%2Fbamboohr%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fbamboohr%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fbamboohr%2Froute&page=%2Fapi%2Fpayroll%2Fbamboohr%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fbamboohr%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _workspace_app_api_payroll_bamboohr_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/payroll/bamboohr/route.ts */ \"(rsc)/./app/api/payroll/bamboohr/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/payroll/bamboohr/route\",\n        pathname: \"/api/payroll/bamboohr\",\n        filename: \"route\",\n        bundlePath: \"app/api/payroll/bamboohr/route\"\n    },\n    resolvedPagePath: \"/workspace/app/api/payroll/bamboohr/route.ts\",\n    nextConfigOutput,\n    userland: _workspace_app_api_payroll_bamboohr_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/payroll/bamboohr/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwYXlyb2xsJTJGYmFtYm9vaHIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnBheXJvbGwlMkZiYW1ib29ociUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnBheXJvbGwlMkZiYW1ib29ociUyRnJvdXRlLnRzJmFwcERpcj0lMkZ3b3Jrc3BhY2UlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRndvcmtzcGFjZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDSjtBQUN6RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8/YmI1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvd29ya3NwYWNlL2FwcC9hcGkvcGF5cm9sbC9iYW1ib29oci9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGF5cm9sbC9iYW1ib29oci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BheXJvbGwvYmFtYm9vaHJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3BheXJvbGwvYmFtYm9vaHIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvd29ya3NwYWNlL2FwcC9hcGkvcGF5cm9sbC9iYW1ib29oci9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcGF5cm9sbC9iYW1ib29oci9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fbamboohr%2Froute&page=%2Fapi%2Fpayroll%2Fbamboohr%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fbamboohr%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/payroll/bamboohr/route.ts":
/*!*******************************************!*\
  !*** ./app/api/payroll/bamboohr/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_payroll__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/payroll */ \"(rsc)/./lib/payroll.ts\");\n\n\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { action, data } = body;\n        switch(action){\n            case \"configure\":\n                {\n                    const config = data;\n                    await _lib_payroll__WEBPACK_IMPORTED_MODULE_1__.payrollService.configureBambooHR(config);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        message: `BambooHR configured for subdomain: ${config.subdomain}`\n                    });\n                }\n            case \"import-data\":\n                {\n                    // Auto-configure from env if not already configured\n                    try {\n                        const status = _lib_payroll__WEBPACK_IMPORTED_MODULE_1__.payrollService.bamboohrConfig;\n                        if (!status && process.env.BAMBOOHR_SUBDOMAIN && process.env.BAMBOOHR_API_KEY) {\n                            await _lib_payroll__WEBPACK_IMPORTED_MODULE_1__.payrollService.configureBambooHR({\n                                subdomain: process.env.BAMBOOHR_SUBDOMAIN,\n                                apiKey: process.env.BAMBOOHR_API_KEY,\n                                webhookSecret: process.env.BAMBOOHR_WEBHOOK_SECRET || undefined\n                            });\n                        }\n                    } catch  {}\n                    const importResult = await _lib_payroll__WEBPACK_IMPORTED_MODULE_1__.payrollService.importSalariesFromBambooHR();\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        result: importResult\n                    });\n                }\n            case \"test-connection\":\n                {\n                    // Test the BambooHR connection by trying to get company info\n                    const { configureBambooHR } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../lib/bamboohr */ \"(rsc)/./lib/bamboohr.ts\"));\n                    const testConfig = data || {\n                        subdomain: process.env.BAMBOOHR_SUBDOMAIN || \"\",\n                        apiKey: process.env.BAMBOOHR_API_KEY || \"\",\n                        webhookSecret: process.env.BAMBOOHR_WEBHOOK_SECRET || undefined\n                    };\n                    configureBambooHR(testConfig);\n                    const { getBambooHRService } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../lib/bamboohr */ \"(rsc)/./lib/bamboohr.ts\"));\n                    const service = getBambooHRService();\n                    const companyInfo = await service.getCompanyInfo();\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        message: \"BambooHR connection successful\",\n                        companyInfo\n                    });\n                }\n            case \"get-employees\":\n                {\n                    const { configureBambooHR: configureTest, getBambooHRService: getTestService } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../lib/bamboohr */ \"(rsc)/./lib/bamboohr.ts\"));\n                    const testConfig = data;\n                    configureTest(testConfig);\n                    const testService = getTestService();\n                    // Handle pagination if BambooHR returns partial results over time; the directory returns all by default\n                    const employees = await testService.getAllEmployees();\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        employees\n                    });\n                }\n            case \"get-compensation\":\n                {\n                    const { configureBambooHR: configureTest2, getBambooHRService: getTestService2 } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../lib/bamboohr */ \"(rsc)/./lib/bamboohr.ts\"));\n                    const testConfig = data.config;\n                    const employeeId = data.employeeId;\n                    configureTest2(testConfig);\n                    const testService2 = getTestService2();\n                    const compensation = await testService2.getEmployeeCompensation(employeeId);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        compensation\n                    });\n                }\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid action\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Error in BambooHR integration:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3BheXJvbGwvYmFtYm9vaHIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdEO0FBQ0M7QUFHbEQsZUFBZUUsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTUQsUUFBUUUsSUFBSTtRQUMvQixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUdIO1FBRXpCLE9BQVFFO1lBQ04sS0FBSztnQkFBYTtvQkFDaEIsTUFBTUUsU0FBeUJEO29CQUMvQixNQUFNTix3REFBY0EsQ0FBQ1EsaUJBQWlCLENBQUNEO29CQUN2QyxPQUFPUixxREFBWUEsQ0FBQ0ssSUFBSSxDQUFDO3dCQUN2QkssU0FBUzt3QkFDVEMsU0FBUyxDQUFDLG1DQUFtQyxFQUFFSCxPQUFPSSxTQUFTLENBQUMsQ0FBQztvQkFDbkU7Z0JBQ0Y7WUFFQSxLQUFLO2dCQUFlO29CQUNsQixvREFBb0Q7b0JBQ3BELElBQUk7d0JBQ0YsTUFBTUMsU0FBUyx5REFBd0JDLGNBQWM7d0JBQ3JELElBQUksQ0FBQ0QsVUFBVUUsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0IsSUFBSUYsUUFBUUMsR0FBRyxDQUFDRSxnQkFBZ0IsRUFBRTs0QkFDN0UsTUFBTWpCLHdEQUFjQSxDQUFDUSxpQkFBaUIsQ0FBQztnQ0FDckNHLFdBQVdHLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCO2dDQUN6Q0UsUUFBUUosUUFBUUMsR0FBRyxDQUFDRSxnQkFBZ0I7Z0NBQ3BDRSxlQUFlTCxRQUFRQyxHQUFHLENBQUNLLHVCQUF1QixJQUFJQzs0QkFDeEQ7d0JBQ0Y7b0JBQ0YsRUFBRSxPQUFNLENBQUM7b0JBQ1QsTUFBTUMsZUFBZSxNQUFNdEIsd0RBQWNBLENBQUN1QiwwQkFBMEI7b0JBQ3BFLE9BQU94QixxREFBWUEsQ0FBQ0ssSUFBSSxDQUFDO3dCQUN2QkssU0FBUzt3QkFDVGUsUUFBUUY7b0JBQ1Y7Z0JBQ0Y7WUFFQSxLQUFLO2dCQUFtQjtvQkFDdEIsNkRBQTZEO29CQUM3RCxNQUFNLEVBQUVkLGlCQUFpQixFQUFFLEdBQUcsTUFBTSwrSUFBTztvQkFDM0MsTUFBTWlCLGFBQTZCbkIsUUFBUTt3QkFDekNLLFdBQVdHLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCLElBQUk7d0JBQzdDRSxRQUFRSixRQUFRQyxHQUFHLENBQUNFLGdCQUFnQixJQUFJO3dCQUN4Q0UsZUFBZUwsUUFBUUMsR0FBRyxDQUFDSyx1QkFBdUIsSUFBSUM7b0JBQ3hEO29CQUNBYixrQkFBa0JpQjtvQkFFbEIsTUFBTSxFQUFFQyxrQkFBa0IsRUFBRSxHQUFHLE1BQU0sK0lBQU87b0JBQzVDLE1BQU1DLFVBQVVEO29CQUNoQixNQUFNRSxjQUFjLE1BQU1ELFFBQVFFLGNBQWM7b0JBRWhELE9BQU85QixxREFBWUEsQ0FBQ0ssSUFBSSxDQUFDO3dCQUN2QkssU0FBUzt3QkFDVEMsU0FBUzt3QkFDVGtCO29CQUNGO2dCQUNGO1lBRUEsS0FBSztnQkFBaUI7b0JBQ3BCLE1BQU0sRUFBRXBCLG1CQUFtQnNCLGFBQWEsRUFBRUosb0JBQW9CSyxjQUFjLEVBQUUsR0FBRyxNQUFNLCtJQUFPO29CQUM5RixNQUFNTixhQUE2Qm5CO29CQUNuQ3dCLGNBQWNMO29CQUNkLE1BQU1PLGNBQWNEO29CQUNwQix3R0FBd0c7b0JBQ3hHLE1BQU1FLFlBQVksTUFBTUQsWUFBWUUsZUFBZTtvQkFFbkQsT0FBT25DLHFEQUFZQSxDQUFDSyxJQUFJLENBQUM7d0JBQ3ZCSyxTQUFTO3dCQUNUd0I7b0JBQ0Y7Z0JBQ0Y7WUFFQSxLQUFLO2dCQUFvQjtvQkFDdkIsTUFBTSxFQUFFekIsbUJBQW1CMkIsY0FBYyxFQUFFVCxvQkFBb0JVLGVBQWUsRUFBRSxHQUFHLE1BQU0sK0lBQU87b0JBQ2hHLE1BQU1YLGFBQTZCbkIsS0FBS0MsTUFBTTtvQkFDOUMsTUFBTThCLGFBQWEvQixLQUFLK0IsVUFBVTtvQkFDbENGLGVBQWVWO29CQUNmLE1BQU1hLGVBQWVGO29CQUNyQixNQUFNRyxlQUFlLE1BQU1ELGFBQWFFLHVCQUF1QixDQUFDSDtvQkFFaEUsT0FBT3RDLHFEQUFZQSxDQUFDSyxJQUFJLENBQUM7d0JBQ3ZCSyxTQUFTO3dCQUNUOEI7b0JBQ0Y7Z0JBQ0Y7WUFFQTtnQkFDRSxPQUFPeEMscURBQVlBLENBQUNLLElBQUksQ0FBQztvQkFBRXFDLE9BQU87Z0JBQWlCLEdBQUc7b0JBQUU3QixRQUFRO2dCQUFJO1FBQ3hFO0lBQ0YsRUFBRSxPQUFPNkIsT0FBWTtRQUNuQkMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBTzFDLHFEQUFZQSxDQUFDSyxJQUFJLENBQUM7WUFBRXFDLE9BQU9BLE1BQU0vQixPQUFPO1FBQUMsR0FBRztZQUFFRSxRQUFRO1FBQUk7SUFDbkU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8uL2FwcC9hcGkvcGF5cm9sbC9iYW1ib29oci9yb3V0ZS50cz8wOWE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBwYXlyb2xsU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL2xpYi9wYXlyb2xsJztcbmltcG9ydCB7IEJhbWJvb0hSQ29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vLi4vbGliL3R5cGVzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBhY3Rpb24sIGRhdGEgfSA9IGJvZHk7XG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnY29uZmlndXJlJzoge1xuICAgICAgICBjb25zdCBjb25maWc6IEJhbWJvb0hSQ29uZmlnID0gZGF0YTtcbiAgICAgICAgYXdhaXQgcGF5cm9sbFNlcnZpY2UuY29uZmlndXJlQmFtYm9vSFIoY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgICAgbWVzc2FnZTogYEJhbWJvb0hSIGNvbmZpZ3VyZWQgZm9yIHN1YmRvbWFpbjogJHtjb25maWcuc3ViZG9tYWlufWAgXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbXBvcnQtZGF0YSc6IHtcbiAgICAgICAgLy8gQXV0by1jb25maWd1cmUgZnJvbSBlbnYgaWYgbm90IGFscmVhZHkgY29uZmlndXJlZFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IChwYXlyb2xsU2VydmljZSBhcyBhbnkpLmJhbWJvb2hyQ29uZmlnO1xuICAgICAgICAgIGlmICghc3RhdHVzICYmIHByb2Nlc3MuZW52LkJBTUJPT0hSX1NVQkRPTUFJTiAmJiBwcm9jZXNzLmVudi5CQU1CT09IUl9BUElfS0VZKSB7XG4gICAgICAgICAgICBhd2FpdCBwYXlyb2xsU2VydmljZS5jb25maWd1cmVCYW1ib29IUih7XG4gICAgICAgICAgICAgIHN1YmRvbWFpbjogcHJvY2Vzcy5lbnYuQkFNQk9PSFJfU1VCRE9NQUlOLFxuICAgICAgICAgICAgICBhcGlLZXk6IHByb2Nlc3MuZW52LkJBTUJPT0hSX0FQSV9LRVksXG4gICAgICAgICAgICAgIHdlYmhvb2tTZWNyZXQ6IHByb2Nlc3MuZW52LkJBTUJPT0hSX1dFQkhPT0tfU0VDUkVUIHx8IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgIGNvbnN0IGltcG9ydFJlc3VsdCA9IGF3YWl0IHBheXJvbGxTZXJ2aWNlLmltcG9ydFNhbGFyaWVzRnJvbUJhbWJvb0hSKCk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICAgIHJlc3VsdDogaW1wb3J0UmVzdWx0IFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndGVzdC1jb25uZWN0aW9uJzoge1xuICAgICAgICAvLyBUZXN0IHRoZSBCYW1ib29IUiBjb25uZWN0aW9uIGJ5IHRyeWluZyB0byBnZXQgY29tcGFueSBpbmZvXG4gICAgICAgIGNvbnN0IHsgY29uZmlndXJlQmFtYm9vSFIgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vLi4vbGliL2JhbWJvb2hyJyk7XG4gICAgICAgIGNvbnN0IHRlc3RDb25maWc6IEJhbWJvb0hSQ29uZmlnID0gZGF0YSB8fCB7XG4gICAgICAgICAgc3ViZG9tYWluOiBwcm9jZXNzLmVudi5CQU1CT09IUl9TVUJET01BSU4gfHwgJycsXG4gICAgICAgICAgYXBpS2V5OiBwcm9jZXNzLmVudi5CQU1CT09IUl9BUElfS0VZIHx8ICcnLFxuICAgICAgICAgIHdlYmhvb2tTZWNyZXQ6IHByb2Nlc3MuZW52LkJBTUJPT0hSX1dFQkhPT0tfU0VDUkVUIHx8IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICBjb25maWd1cmVCYW1ib29IUih0ZXN0Q29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHsgZ2V0QmFtYm9vSFJTZXJ2aWNlIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uLy4uL2xpYi9iYW1ib29ocicpO1xuICAgICAgICBjb25zdCBzZXJ2aWNlID0gZ2V0QmFtYm9vSFJTZXJ2aWNlKCk7XG4gICAgICAgIGNvbnN0IGNvbXBhbnlJbmZvID0gYXdhaXQgc2VydmljZS5nZXRDb21wYW55SW5mbygpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgICAgbWVzc2FnZTogJ0JhbWJvb0hSIGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCcsXG4gICAgICAgICAgY29tcGFueUluZm8gXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdnZXQtZW1wbG95ZWVzJzoge1xuICAgICAgICBjb25zdCB7IGNvbmZpZ3VyZUJhbWJvb0hSOiBjb25maWd1cmVUZXN0LCBnZXRCYW1ib29IUlNlcnZpY2U6IGdldFRlc3RTZXJ2aWNlIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uLy4uLy4uL2xpYi9iYW1ib29ocicpO1xuICAgICAgICBjb25zdCB0ZXN0Q29uZmlnOiBCYW1ib29IUkNvbmZpZyA9IGRhdGE7XG4gICAgICAgIGNvbmZpZ3VyZVRlc3QodGVzdENvbmZpZyk7XG4gICAgICAgIGNvbnN0IHRlc3RTZXJ2aWNlID0gZ2V0VGVzdFNlcnZpY2UoKTtcbiAgICAgICAgLy8gSGFuZGxlIHBhZ2luYXRpb24gaWYgQmFtYm9vSFIgcmV0dXJucyBwYXJ0aWFsIHJlc3VsdHMgb3ZlciB0aW1lOyB0aGUgZGlyZWN0b3J5IHJldHVybnMgYWxsIGJ5IGRlZmF1bHRcbiAgICAgICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgdGVzdFNlcnZpY2UuZ2V0QWxsRW1wbG95ZWVzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgICBlbXBsb3llZXMgXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdnZXQtY29tcGVuc2F0aW9uJzoge1xuICAgICAgICBjb25zdCB7IGNvbmZpZ3VyZUJhbWJvb0hSOiBjb25maWd1cmVUZXN0MiwgZ2V0QmFtYm9vSFJTZXJ2aWNlOiBnZXRUZXN0U2VydmljZTIgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vLi4vLi4vbGliL2JhbWJvb2hyJyk7XG4gICAgICAgIGNvbnN0IHRlc3RDb25maWc6IEJhbWJvb0hSQ29uZmlnID0gZGF0YS5jb25maWc7XG4gICAgICAgIGNvbnN0IGVtcGxveWVlSWQgPSBkYXRhLmVtcGxveWVlSWQ7XG4gICAgICAgIGNvbmZpZ3VyZVRlc3QyKHRlc3RDb25maWcpO1xuICAgICAgICBjb25zdCB0ZXN0U2VydmljZTIgPSBnZXRUZXN0U2VydmljZTIoKTtcbiAgICAgICAgY29uc3QgY29tcGVuc2F0aW9uID0gYXdhaXQgdGVzdFNlcnZpY2UyLmdldEVtcGxveWVlQ29tcGVuc2F0aW9uKGVtcGxveWVlSWQpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgICAgY29tcGVuc2F0aW9uIFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFjdGlvbicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBCYW1ib29IUiBpbnRlZ3JhdGlvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBheXJvbGxTZXJ2aWNlIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsImFjdGlvbiIsImRhdGEiLCJjb25maWciLCJjb25maWd1cmVCYW1ib29IUiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic3ViZG9tYWluIiwic3RhdHVzIiwiYmFtYm9vaHJDb25maWciLCJwcm9jZXNzIiwiZW52IiwiQkFNQk9PSFJfU1VCRE9NQUlOIiwiQkFNQk9PSFJfQVBJX0tFWSIsImFwaUtleSIsIndlYmhvb2tTZWNyZXQiLCJCQU1CT09IUl9XRUJIT09LX1NFQ1JFVCIsInVuZGVmaW5lZCIsImltcG9ydFJlc3VsdCIsImltcG9ydFNhbGFyaWVzRnJvbUJhbWJvb0hSIiwicmVzdWx0IiwidGVzdENvbmZpZyIsImdldEJhbWJvb0hSU2VydmljZSIsInNlcnZpY2UiLCJjb21wYW55SW5mbyIsImdldENvbXBhbnlJbmZvIiwiY29uZmlndXJlVGVzdCIsImdldFRlc3RTZXJ2aWNlIiwidGVzdFNlcnZpY2UiLCJlbXBsb3llZXMiLCJnZXRBbGxFbXBsb3llZXMiLCJjb25maWd1cmVUZXN0MiIsImdldFRlc3RTZXJ2aWNlMiIsImVtcGxveWVlSWQiLCJ0ZXN0U2VydmljZTIiLCJjb21wZW5zYXRpb24iLCJnZXRFbXBsb3llZUNvbXBlbnNhdGlvbiIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/payroll/bamboohr/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/bamboohr.ts":
/*!*************************!*\
  !*** ./lib/bamboohr.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BambooHRService: () => (/* binding */ BambooHRService),\n/* harmony export */   bamboohrService: () => (/* binding */ bamboohrService),\n/* harmony export */   configureBambooHR: () => (/* binding */ configureBambooHR),\n/* harmony export */   getBambooHRService: () => (/* binding */ getBambooHRService),\n/* harmony export */   importBambooHRData: () => (/* binding */ importBambooHRData),\n/* harmony export */   importBambooHREmployees: () => (/* binding */ importBambooHREmployees),\n/* harmony export */   importBambooHRSalaries: () => (/* binding */ importBambooHRSalaries)\n/* harmony export */ });\nclass BambooHRService {\n    constructor(config){\n        this.config = config;\n        // Use versioned BambooHR API base\n        this.baseUrl = `https://api.bamboohr.com/api/gateway.php/${config.subdomain}/v1`;\n    }\n    async makeRequest(endpoint, options = {}) {\n        const url = `${this.baseUrl}${endpoint}`;\n        const basic = Buffer.from(`${this.config.apiKey}:x`).toString(\"base64\");\n        const headers = {\n            \"Authorization\": `Basic ${basic}`,\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\",\n            ...options.headers\n        };\n        try {\n            const response = await fetch(url, {\n                ...options,\n                headers\n            });\n            if (!response.ok) {\n                const body = await response.text().catch(()=>\"\");\n                throw new Error(`BambooHR API error: ${response.status} ${response.statusText} ${body ? `- ${body}` : \"\"}`);\n            }\n            return await response.json();\n        } catch (error) {\n            console.error(\"BambooHR API request failed:\", error);\n            throw error;\n        }\n    }\n    // Employee Management\n    async getAllEmployees() {\n        // Attempt to fetch all employees, handling pagination if the API limits to 500 per page\n        const all = [];\n        let page = 1;\n        const pageSize = 500;\n        while(true){\n            const suffix = page > 1 ? `?page=${page}` : \"\";\n            const response = await this.makeRequest(`/employees/directory${suffix}`);\n            const employees = response.employees || [];\n            console.log(`BambooHR: fetched ${employees.length} employees from /v1/employees/directory (page ${page})`);\n            all.push(...employees);\n            if (employees.length < pageSize) {\n                break;\n            }\n            page += 1;\n        }\n        console.log(`BambooHR: total employees aggregated = ${all.length}`);\n        return all;\n    }\n    async getEmployee(employeeId) {\n        const response = await this.makeRequest(`/employees/${employeeId}`);\n        return response.employee;\n    }\n    async getEmployeeDirectory() {\n        const response = await this.makeRequest(\"/employees/directory\");\n        return response.employees || [];\n    }\n    // Compensation Management\n    async getEmployeeCompensation(employeeId) {\n        const response = await this.makeRequest(`/employees/${employeeId}/compensation`);\n        return response.compensation || [];\n    }\n    async getCompensationHistory(employeeId, startDate, endDate) {\n        let endpoint = `/employees/${employeeId}/compensation/history`;\n        const params = new URLSearchParams();\n        if (startDate) params.append(\"startDate\", startDate);\n        if (endDate) params.append(\"endDate\", endDate);\n        if (params.toString()) {\n            endpoint += `?${params.toString()}`;\n        }\n        const response = await this.makeRequest(endpoint);\n        return response.compensation || [];\n    }\n    // Time Off Management\n    async getEmployeeTimeOff(employeeId) {\n        const response = await this.makeRequest(`/employees/${employeeId}/timeoff`);\n        return response.timeOff || [];\n    }\n    async getAllTimeOff(startDate, endDate) {\n        let endpoint = \"/timeoff\";\n        const params = new URLSearchParams();\n        if (startDate) params.append(\"startDate\", startDate);\n        if (endDate) params.append(\"endDate\", endDate);\n        if (params.toString()) {\n            endpoint += `?${params.toString()}`;\n        }\n        const response = await this.makeRequest(endpoint);\n        return response.timeOff || [];\n    }\n    // Reports\n    async getCustomReport(reportId) {\n        const response = await this.makeRequest(`/reports/${reportId}`);\n        return response.report;\n    }\n    async createCustomReport(reportData) {\n        const response = await this.makeRequest(\"/reports\", {\n            method: \"POST\",\n            body: JSON.stringify(reportData)\n        });\n        return response.report;\n    }\n    // Company Information\n    async getCompanyInfo() {\n        const response = await this.makeRequest(\"/company\");\n        return response.company;\n    }\n    // Webhook Management\n    async createWebhook(webhookData) {\n        const response = await this.makeRequest(\"/webhooks\", {\n            method: \"POST\",\n            body: JSON.stringify(webhookData)\n        });\n        return response.webhook;\n    }\n    async getWebhooks() {\n        const response = await this.makeRequest(\"/webhooks\");\n        return response.webhooks || [];\n    }\n    async deleteWebhook(webhookId) {\n        await this.makeRequest(`/webhooks/${webhookId}`, {\n            method: \"DELETE\"\n        });\n    }\n    // Utility Methods\n    calculateHourlyRate(annualSalary, paySchedule) {\n        let hoursPerYear;\n        switch(paySchedule){\n            case \"weekly\":\n                hoursPerYear = 52 * 40; // 40 hours per week\n                break;\n            case \"bi-weekly\":\n                hoursPerYear = 26 * 80; // 80 hours per 2 weeks\n                break;\n            case \"semi-monthly\":\n                hoursPerYear = 24 * 86.67; // 86.67 hours per pay period\n                break;\n            case \"monthly\":\n                hoursPerYear = 12 * 173.33; // 173.33 hours per month\n                break;\n            default:\n                hoursPerYear = 2080; // Standard 40-hour work week\n        }\n        return annualSalary / hoursPerYear;\n    }\n    // Data Import Methods\n    async importEmployees() {\n        const bamboohrEmployees = await this.getAllEmployees();\n        console.log(`BambooHR import: preparing to upsert ${bamboohrEmployees.length} employees`);\n        return bamboohrEmployees.map((emp)=>({\n                id: emp.id,\n                name: emp.displayName,\n                email: emp.email,\n                status: emp.status === \"active\" ? \"active\" : \"inactive\",\n                department: emp.department,\n                position: emp.jobTitle,\n                hireDate: emp.hireDate,\n                terminationDate: emp.terminationDate\n            }));\n    }\n    async importSalaries() {\n        const employees = await this.getAllEmployees();\n        console.log(`BambooHR import: fetching compensation for ${employees.length} employees`);\n        const salaries = [];\n        for (const employee of employees){\n            const compensations = await this.getEmployeeCompensation(employee.id);\n            for (const comp of compensations){\n                // Log the upsert intent; actual DB upsert occurs in saveEmployeeSalary\n                console.log(`BambooHR upsert salary -> employeeId=${comp.employeeId} effectiveDate=${comp.effectiveDate} annualSalary=${comp.annualSalary} hourlyRate=${comp.hourlyRate}`);\n                salaries.push({\n                    employeeId: comp.employeeId,\n                    effectiveDate: comp.effectiveDate,\n                    endDate: comp.endDate,\n                    annualSalary: comp.annualSalary,\n                    hourlyRate: comp.hourlyRate,\n                    currency: comp.currency,\n                    notes: `Imported from BambooHR - ${comp.payType} (${comp.paySchedule})`\n                });\n            }\n        }\n        return salaries;\n    }\n    async importAllData() {\n        try {\n            const employees = await this.importEmployees();\n            const salaries = await this.importSalaries();\n            return {\n                source: \"bamboohr\",\n                importDate: new Date().toISOString(),\n                recordsImported: employees.length + salaries.length,\n                errors: []\n            };\n        } catch (error) {\n            return {\n                source: \"bamboohr\",\n                importDate: new Date().toISOString(),\n                recordsImported: 0,\n                errors: [\n                    error.message\n                ]\n            };\n        }\n    }\n    // Helper Methods\n    async searchEmployees(query) {\n        const employees = await this.getAllEmployees();\n        return employees.filter((emp)=>emp.displayName.toLowerCase().includes(query.toLowerCase()) || emp.email.toLowerCase().includes(query.toLowerCase()));\n    }\n    async getEmployeesByDepartment(department) {\n        const employees = await this.getAllEmployees();\n        return employees.filter((emp)=>emp.department === department);\n    }\n    async getActiveEmployees() {\n        const employees = await this.getAllEmployees();\n        return employees.filter((emp)=>emp.status === \"active\");\n    }\n}\nlet bamboohrService = null;\nconst configureBambooHR = (config)=>{\n    bamboohrService = new BambooHRService(config);\n    console.log(`BambooHR service configured for subdomain: ${config.subdomain}`);\n};\nconst getBambooHRService = ()=>{\n    if (!bamboohrService) {\n        throw new Error(\"BambooHR service not configured. Call configureBambooHR first.\");\n    }\n    return bamboohrService;\n};\nconst importBambooHREmployees = async ()=>{\n    const service = getBambooHRService();\n    return await service.importEmployees();\n};\nconst importBambooHRSalaries = async ()=>{\n    const service = getBambooHRService();\n    return await service.importSalaries();\n};\nconst importBambooHRData = async ()=>{\n    const service = getBambooHRService();\n    return await service.importAllData();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYmFtYm9vaHIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQVdPLE1BQU1BO0lBSVhDLFlBQVlDLE1BQXNCLENBQUU7UUFDbEMsSUFBSSxDQUFDQSxNQUFNLEdBQUdBO1FBQ2Qsa0NBQWtDO1FBQ2xDLElBQUksQ0FBQ0MsT0FBTyxHQUFHLENBQUMseUNBQXlDLEVBQUVELE9BQU9FLFNBQVMsQ0FBQyxHQUFHLENBQUM7SUFDbEY7SUFFQSxNQUFjQyxZQUFZQyxRQUFnQixFQUFFQyxVQUF1QixDQUFDLENBQUMsRUFBZ0I7UUFDbkYsTUFBTUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDTCxPQUFPLENBQUMsRUFBRUcsU0FBUyxDQUFDO1FBQ3hDLE1BQU1HLFFBQVFDLE9BQU9DLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDVCxNQUFNLENBQUNVLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRUMsUUFBUSxDQUFDO1FBQzlELE1BQU1DLFVBQVU7WUFDZCxpQkFBaUIsQ0FBQyxNQUFNLEVBQUVMLE1BQU0sQ0FBQztZQUNqQyxVQUFVO1lBQ1YsZ0JBQWdCO1lBQ2hCLEdBQUdGLFFBQVFPLE9BQU87UUFDcEI7UUFFQSxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNUixLQUFLO2dCQUNoQyxHQUFHRCxPQUFPO2dCQUNWTztZQUNGO1lBRUEsSUFBSSxDQUFDQyxTQUFTRSxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU1DLE9BQU8sTUFBTUgsU0FBU0ksSUFBSSxHQUFHQyxLQUFLLENBQUMsSUFBTTtnQkFDL0MsTUFBTSxJQUFJQyxNQUFNLENBQUMsb0JBQW9CLEVBQUVOLFNBQVNPLE1BQU0sQ0FBQyxDQUFDLEVBQUVQLFNBQVNRLFVBQVUsQ0FBQyxDQUFDLEVBQUVMLE9BQU8sQ0FBQyxFQUFFLEVBQUVBLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUM1RztZQUVBLE9BQU8sTUFBTUgsU0FBU1MsSUFBSTtRQUM1QixFQUFFLE9BQU9DLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDOUMsTUFBTUE7UUFDUjtJQUNGO0lBRUEsc0JBQXNCO0lBQ3RCLE1BQU1FLGtCQUErQztRQUNuRCx3RkFBd0Y7UUFDeEYsTUFBTUMsTUFBMEIsRUFBRTtRQUNsQyxJQUFJQyxPQUFPO1FBQ1gsTUFBTUMsV0FBVztRQUNqQixNQUFPLEtBQU07WUFDWCxNQUFNQyxTQUFTRixPQUFPLElBQUksQ0FBQyxNQUFNLEVBQUVBLEtBQUssQ0FBQyxHQUFHO1lBQzVDLE1BQU1kLFdBQVcsTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQyxDQUFDLG9CQUFvQixFQUFFMEIsT0FBTyxDQUFDO1lBQ3ZFLE1BQU1DLFlBQWdDakIsU0FBU2lCLFNBQVMsSUFBSSxFQUFFO1lBQzlETixRQUFRTyxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsRUFBRUQsVUFBVUUsTUFBTSxDQUFDLDhDQUE4QyxFQUFFTCxLQUFLLENBQUMsQ0FBQztZQUN6R0QsSUFBSU8sSUFBSSxJQUFJSDtZQUNaLElBQUlBLFVBQVVFLE1BQU0sR0FBR0osVUFBVTtnQkFDL0I7WUFDRjtZQUNBRCxRQUFRO1FBQ1Y7UUFDQUgsUUFBUU8sR0FBRyxDQUFDLENBQUMsdUNBQXVDLEVBQUVMLElBQUlNLE1BQU0sQ0FBQyxDQUFDO1FBQ2xFLE9BQU9OO0lBQ1Q7SUFFQSxNQUFNUSxZQUFZQyxVQUFrQixFQUE2QjtRQUMvRCxNQUFNdEIsV0FBVyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDLENBQUMsV0FBVyxFQUFFZ0MsV0FBVyxDQUFDO1FBQ2xFLE9BQU90QixTQUFTdUIsUUFBUTtJQUMxQjtJQUVBLE1BQU1DLHVCQUFvRDtRQUN4RCxNQUFNeEIsV0FBVyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDO1FBQ3hDLE9BQU9VLFNBQVNpQixTQUFTLElBQUksRUFBRTtJQUNqQztJQUVBLDBCQUEwQjtJQUMxQixNQUFNUSx3QkFBd0JILFVBQWtCLEVBQW1DO1FBQ2pGLE1BQU10QixXQUFXLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUVnQyxXQUFXLGFBQWEsQ0FBQztRQUMvRSxPQUFPdEIsU0FBUzBCLFlBQVksSUFBSSxFQUFFO0lBQ3BDO0lBRUEsTUFBTUMsdUJBQXVCTCxVQUFrQixFQUFFTSxTQUFrQixFQUFFQyxPQUFnQixFQUFtQztRQUN0SCxJQUFJdEMsV0FBVyxDQUFDLFdBQVcsRUFBRStCLFdBQVcscUJBQXFCLENBQUM7UUFDOUQsTUFBTVEsU0FBUyxJQUFJQztRQUNuQixJQUFJSCxXQUFXRSxPQUFPRSxNQUFNLENBQUMsYUFBYUo7UUFDMUMsSUFBSUMsU0FBU0MsT0FBT0UsTUFBTSxDQUFDLFdBQVdIO1FBRXRDLElBQUlDLE9BQU9oQyxRQUFRLElBQUk7WUFDckJQLFlBQVksQ0FBQyxDQUFDLEVBQUV1QyxPQUFPaEMsUUFBUSxHQUFHLENBQUM7UUFDckM7UUFFQSxNQUFNRSxXQUFXLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUNDO1FBQ3hDLE9BQU9TLFNBQVMwQixZQUFZLElBQUksRUFBRTtJQUNwQztJQUVBLHNCQUFzQjtJQUN0QixNQUFNTyxtQkFBbUJYLFVBQWtCLEVBQThCO1FBQ3ZFLE1BQU10QixXQUFXLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUMsQ0FBQyxXQUFXLEVBQUVnQyxXQUFXLFFBQVEsQ0FBQztRQUMxRSxPQUFPdEIsU0FBU2tDLE9BQU8sSUFBSSxFQUFFO0lBQy9CO0lBRUEsTUFBTUMsY0FBY1AsU0FBa0IsRUFBRUMsT0FBZ0IsRUFBOEI7UUFDcEYsSUFBSXRDLFdBQVc7UUFDZixNQUFNdUMsU0FBUyxJQUFJQztRQUNuQixJQUFJSCxXQUFXRSxPQUFPRSxNQUFNLENBQUMsYUFBYUo7UUFDMUMsSUFBSUMsU0FBU0MsT0FBT0UsTUFBTSxDQUFDLFdBQVdIO1FBRXRDLElBQUlDLE9BQU9oQyxRQUFRLElBQUk7WUFDckJQLFlBQVksQ0FBQyxDQUFDLEVBQUV1QyxPQUFPaEMsUUFBUSxHQUFHLENBQUM7UUFDckM7UUFFQSxNQUFNRSxXQUFXLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUNDO1FBQ3hDLE9BQU9TLFNBQVNrQyxPQUFPLElBQUksRUFBRTtJQUMvQjtJQUVBLFVBQVU7SUFDVixNQUFNRSxnQkFBZ0JDLFFBQWdCLEVBQWdCO1FBQ3BELE1BQU1yQyxXQUFXLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUMsQ0FBQyxTQUFTLEVBQUUrQyxTQUFTLENBQUM7UUFDOUQsT0FBT3JDLFNBQVNzQyxNQUFNO0lBQ3hCO0lBRUEsTUFBTUMsbUJBQW1CQyxVQUEwQixFQUEyQjtRQUM1RSxNQUFNeEMsV0FBVyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDLFlBQVk7WUFDbERtRCxRQUFRO1lBQ1J0QyxNQUFNdUMsS0FBS0MsU0FBUyxDQUFDSDtRQUN2QjtRQUNBLE9BQU94QyxTQUFTc0MsTUFBTTtJQUN4QjtJQUVBLHNCQUFzQjtJQUN0QixNQUFNTSxpQkFBK0I7UUFDbkMsTUFBTTVDLFdBQVcsTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQztRQUN4QyxPQUFPVSxTQUFTNkMsT0FBTztJQUN6QjtJQUVBLHFCQUFxQjtJQUNyQixNQUFNQyxjQUFjQyxXQUE4QyxFQUFnQjtRQUNoRixNQUFNL0MsV0FBVyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDLGFBQWE7WUFDbkRtRCxRQUFRO1lBQ1J0QyxNQUFNdUMsS0FBS0MsU0FBUyxDQUFDSTtRQUN2QjtRQUNBLE9BQU8vQyxTQUFTZ0QsT0FBTztJQUN6QjtJQUVBLE1BQU1DLGNBQThCO1FBQ2xDLE1BQU1qRCxXQUFXLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUM7UUFDeEMsT0FBT1UsU0FBU2tELFFBQVEsSUFBSSxFQUFFO0lBQ2hDO0lBRUEsTUFBTUMsY0FBY0MsU0FBaUIsRUFBaUI7UUFDcEQsTUFBTSxJQUFJLENBQUM5RCxXQUFXLENBQUMsQ0FBQyxVQUFVLEVBQUU4RCxVQUFVLENBQUMsRUFBRTtZQUMvQ1gsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxrQkFBa0I7SUFDbEJZLG9CQUFvQkMsWUFBb0IsRUFBRUMsV0FBbUIsRUFBVTtRQUNyRSxJQUFJQztRQUVKLE9BQVFEO1lBQ04sS0FBSztnQkFDSEMsZUFBZSxLQUFLLElBQUksb0JBQW9CO2dCQUM1QztZQUNGLEtBQUs7Z0JBQ0hBLGVBQWUsS0FBSyxJQUFJLHVCQUF1QjtnQkFDL0M7WUFDRixLQUFLO2dCQUNIQSxlQUFlLEtBQUssT0FBTyw2QkFBNkI7Z0JBQ3hEO1lBQ0YsS0FBSztnQkFDSEEsZUFBZSxLQUFLLFFBQVEseUJBQXlCO2dCQUNyRDtZQUNGO2dCQUNFQSxlQUFlLE1BQU0sNkJBQTZCO1FBQ3REO1FBRUEsT0FBT0YsZUFBZUU7SUFDeEI7SUFFQSxzQkFBc0I7SUFDdEIsTUFBTUMsa0JBQXVDO1FBQzNDLE1BQU1DLG9CQUFvQixNQUFNLElBQUksQ0FBQzlDLGVBQWU7UUFDcERELFFBQVFPLEdBQUcsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFd0Msa0JBQWtCdkMsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUV4RixPQUFPdUMsa0JBQWtCQyxHQUFHLENBQUNDLENBQUFBLE1BQVE7Z0JBQ25DQyxJQUFJRCxJQUFJQyxFQUFFO2dCQUNWQyxNQUFNRixJQUFJRyxXQUFXO2dCQUNyQkMsT0FBT0osSUFBSUksS0FBSztnQkFDaEJ6RCxRQUFRcUQsSUFBSXJELE1BQU0sS0FBSyxXQUFXLFdBQVc7Z0JBQzdDMEQsWUFBWUwsSUFBSUssVUFBVTtnQkFDMUJDLFVBQVVOLElBQUlPLFFBQVE7Z0JBQ3RCQyxVQUFVUixJQUFJUSxRQUFRO2dCQUN0QkMsaUJBQWlCVCxJQUFJUyxlQUFlO1lBQ3RDO0lBQ0Y7SUFFQSxNQUFNQyxpQkFBNEM7UUFDaEQsTUFBTXJELFlBQVksTUFBTSxJQUFJLENBQUNMLGVBQWU7UUFDNUNELFFBQVFPLEdBQUcsQ0FBQyxDQUFDLDJDQUEyQyxFQUFFRCxVQUFVRSxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ3RGLE1BQU1vRCxXQUE2QixFQUFFO1FBRXJDLEtBQUssTUFBTWhELFlBQVlOLFVBQVc7WUFDaEMsTUFBTXVELGdCQUFnQixNQUFNLElBQUksQ0FBQy9DLHVCQUF1QixDQUFDRixTQUFTc0MsRUFBRTtZQUVwRSxLQUFLLE1BQU1ZLFFBQVFELGNBQWU7Z0JBQ2hDLHVFQUF1RTtnQkFDdkU3RCxRQUFRTyxHQUFHLENBQUMsQ0FBQyxxQ0FBcUMsRUFBRXVELEtBQUtuRCxVQUFVLENBQUMsZUFBZSxFQUFFbUQsS0FBS0MsYUFBYSxDQUFDLGNBQWMsRUFBRUQsS0FBS25CLFlBQVksQ0FBQyxZQUFZLEVBQUVtQixLQUFLRSxVQUFVLENBQUMsQ0FBQztnQkFDektKLFNBQVNuRCxJQUFJLENBQUM7b0JBQ1pFLFlBQVltRCxLQUFLbkQsVUFBVTtvQkFDM0JvRCxlQUFlRCxLQUFLQyxhQUFhO29CQUNqQzdDLFNBQVM0QyxLQUFLNUMsT0FBTztvQkFDckJ5QixjQUFjbUIsS0FBS25CLFlBQVk7b0JBQy9CcUIsWUFBWUYsS0FBS0UsVUFBVTtvQkFDM0JDLFVBQVVILEtBQUtHLFFBQVE7b0JBQ3ZCQyxPQUFPLENBQUMseUJBQXlCLEVBQUVKLEtBQUtLLE9BQU8sQ0FBQyxFQUFFLEVBQUVMLEtBQUtsQixXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUN6RTtZQUNGO1FBQ0Y7UUFFQSxPQUFPZ0I7SUFDVDtJQUVBLE1BQU1RLGdCQUF1QztRQUMzQyxJQUFJO1lBQ0YsTUFBTTlELFlBQVksTUFBTSxJQUFJLENBQUN3QyxlQUFlO1lBQzVDLE1BQU1jLFdBQVcsTUFBTSxJQUFJLENBQUNELGNBQWM7WUFFMUMsT0FBTztnQkFDTFUsUUFBUTtnQkFDUkMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO2dCQUNsQ0MsaUJBQWlCbkUsVUFBVUUsTUFBTSxHQUFHb0QsU0FBU3BELE1BQU07Z0JBQ25Ea0UsUUFBUSxFQUFFO1lBQ1o7UUFDRixFQUFFLE9BQU8zRSxPQUFZO1lBQ25CLE9BQU87Z0JBQ0xzRSxRQUFRO2dCQUNSQyxZQUFZLElBQUlDLE9BQU9DLFdBQVc7Z0JBQ2xDQyxpQkFBaUI7Z0JBQ2pCQyxRQUFRO29CQUFDM0UsTUFBTTRFLE9BQU87aUJBQUM7WUFDekI7UUFDRjtJQUNGO0lBRUEsaUJBQWlCO0lBQ2pCLE1BQU1DLGdCQUFnQkMsS0FBYSxFQUErQjtRQUNoRSxNQUFNdkUsWUFBWSxNQUFNLElBQUksQ0FBQ0wsZUFBZTtRQUM1QyxPQUFPSyxVQUFVd0UsTUFBTSxDQUFDN0IsQ0FBQUEsTUFDdEJBLElBQUlHLFdBQVcsQ0FBQzJCLFdBQVcsR0FBR0MsUUFBUSxDQUFDSCxNQUFNRSxXQUFXLE9BQ3hEOUIsSUFBSUksS0FBSyxDQUFDMEIsV0FBVyxHQUFHQyxRQUFRLENBQUNILE1BQU1FLFdBQVc7SUFFdEQ7SUFFQSxNQUFNRSx5QkFBeUIzQixVQUFrQixFQUErQjtRQUM5RSxNQUFNaEQsWUFBWSxNQUFNLElBQUksQ0FBQ0wsZUFBZTtRQUM1QyxPQUFPSyxVQUFVd0UsTUFBTSxDQUFDN0IsQ0FBQUEsTUFBT0EsSUFBSUssVUFBVSxLQUFLQTtJQUNwRDtJQUVBLE1BQU00QixxQkFBa0Q7UUFDdEQsTUFBTTVFLFlBQVksTUFBTSxJQUFJLENBQUNMLGVBQWU7UUFDNUMsT0FBT0ssVUFBVXdFLE1BQU0sQ0FBQzdCLENBQUFBLE1BQU9BLElBQUlyRCxNQUFNLEtBQUs7SUFDaEQ7QUFDRjtBQUVPLElBQUl1RixrQkFBMEMsS0FBSztBQUVuRCxNQUFNQyxvQkFBb0IsQ0FBQzVHO0lBQ2hDMkcsa0JBQWtCLElBQUk3RyxnQkFBZ0JFO0lBQ3RDd0IsUUFBUU8sR0FBRyxDQUFDLENBQUMsMkNBQTJDLEVBQUUvQixPQUFPRSxTQUFTLENBQUMsQ0FBQztBQUM5RSxFQUFFO0FBRUssTUFBTTJHLHFCQUFxQjtJQUNoQyxJQUFJLENBQUNGLGlCQUFpQjtRQUNwQixNQUFNLElBQUl4RixNQUFNO0lBQ2xCO0lBQ0EsT0FBT3dGO0FBQ1QsRUFBRTtBQUVLLE1BQU1HLDBCQUEwQjtJQUNyQyxNQUFNQyxVQUFVRjtJQUNoQixPQUFPLE1BQU1FLFFBQVF6QyxlQUFlO0FBQ3RDLEVBQUU7QUFFSyxNQUFNMEMseUJBQXlCO0lBQ3BDLE1BQU1ELFVBQVVGO0lBQ2hCLE9BQU8sTUFBTUUsUUFBUTVCLGNBQWM7QUFDckMsRUFBRTtBQUVLLE1BQU04QixxQkFBcUI7SUFDaEMsTUFBTUYsVUFBVUY7SUFDaEIsT0FBTyxNQUFNRSxRQUFRbkIsYUFBYTtBQUNwQyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vbGliL2JhbWJvb2hyLnRzPzhkMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQmFtYm9vSFJDb25maWcsXG4gIEJhbWJvb0hSRW1wbG95ZWUsXG4gIEJhbWJvb2hyQ29tcGVuc2F0aW9uLFxuICBCYW1ib29IUlRpbWVPZmYsXG4gIEJhbWJvb0hSUmVwb3J0LFxuICBFbXBsb3llZSxcbiAgRW1wbG95ZWVTYWxhcnksXG4gIFNhbGFyeUltcG9ydFxufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEJhbWJvb0hSU2VydmljZSB7XG4gIHByaXZhdGUgY29uZmlnOiBCYW1ib29IUkNvbmZpZztcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBCYW1ib29IUkNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIC8vIFVzZSB2ZXJzaW9uZWQgQmFtYm9vSFIgQVBJIGJhc2VcbiAgICB0aGlzLmJhc2VVcmwgPSBgaHR0cHM6Ly9hcGkuYmFtYm9vaHIuY29tL2FwaS9nYXRld2F5LnBocC8ke2NvbmZpZy5zdWJkb21haW59L3YxYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZW5kcG9pbnR9YDtcbiAgICBjb25zdCBiYXNpYyA9IEJ1ZmZlci5mcm9tKGAke3RoaXMuY29uZmlnLmFwaUtleX06eGApLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmFzaWMgJHtiYXNpY31gLFxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICB9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVyc1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQmFtYm9vSFIgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAke2JvZHkgPyBgLSAke2JvZHl9YCA6ICcnfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdCYW1ib29IUiBBUEkgcmVxdWVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gRW1wbG95ZWUgTWFuYWdlbWVudFxuICBhc3luYyBnZXRBbGxFbXBsb3llZXMoKTogUHJvbWlzZTxCYW1ib29IUkVtcGxveWVlW10+IHtcbiAgICAvLyBBdHRlbXB0IHRvIGZldGNoIGFsbCBlbXBsb3llZXMsIGhhbmRsaW5nIHBhZ2luYXRpb24gaWYgdGhlIEFQSSBsaW1pdHMgdG8gNTAwIHBlciBwYWdlXG4gICAgY29uc3QgYWxsOiBCYW1ib29IUkVtcGxveWVlW10gPSBbXTtcbiAgICBsZXQgcGFnZSA9IDE7XG4gICAgY29uc3QgcGFnZVNpemUgPSA1MDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IHBhZ2UgPiAxID8gYD9wYWdlPSR7cGFnZX1gIDogJyc7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYC9lbXBsb3llZXMvZGlyZWN0b3J5JHtzdWZmaXh9YCk7XG4gICAgICBjb25zdCBlbXBsb3llZXM6IEJhbWJvb0hSRW1wbG95ZWVbXSA9IHJlc3BvbnNlLmVtcGxveWVlcyB8fCBbXTtcbiAgICAgIGNvbnNvbGUubG9nKGBCYW1ib29IUjogZmV0Y2hlZCAke2VtcGxveWVlcy5sZW5ndGh9IGVtcGxveWVlcyBmcm9tIC92MS9lbXBsb3llZXMvZGlyZWN0b3J5IChwYWdlICR7cGFnZX0pYCk7XG4gICAgICBhbGwucHVzaCguLi5lbXBsb3llZXMpO1xuICAgICAgaWYgKGVtcGxveWVlcy5sZW5ndGggPCBwYWdlU2l6ZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHBhZ2UgKz0gMTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coYEJhbWJvb0hSOiB0b3RhbCBlbXBsb3llZXMgYWdncmVnYXRlZCA9ICR7YWxsLmxlbmd0aH1gKTtcbiAgICByZXR1cm4gYWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0RW1wbG95ZWUoZW1wbG95ZWVJZDogc3RyaW5nKTogUHJvbWlzZTxCYW1ib29IUkVtcGxveWVlPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGAvZW1wbG95ZWVzLyR7ZW1wbG95ZWVJZH1gKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZW1wbG95ZWU7XG4gIH1cblxuICBhc3luYyBnZXRFbXBsb3llZURpcmVjdG9yeSgpOiBQcm9taXNlPEJhbWJvb0hSRW1wbG95ZWVbXT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2VtcGxveWVlcy9kaXJlY3RvcnknKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZW1wbG95ZWVzIHx8IFtdO1xuICB9XG5cbiAgLy8gQ29tcGVuc2F0aW9uIE1hbmFnZW1lbnRcbiAgYXN5bmMgZ2V0RW1wbG95ZWVDb21wZW5zYXRpb24oZW1wbG95ZWVJZDogc3RyaW5nKTogUHJvbWlzZTxCYW1ib29ockNvbXBlbnNhdGlvbltdPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGAvZW1wbG95ZWVzLyR7ZW1wbG95ZWVJZH0vY29tcGVuc2F0aW9uYCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmNvbXBlbnNhdGlvbiB8fCBbXTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbXBlbnNhdGlvbkhpc3RvcnkoZW1wbG95ZWVJZDogc3RyaW5nLCBzdGFydERhdGU/OiBzdHJpbmcsIGVuZERhdGU/OiBzdHJpbmcpOiBQcm9taXNlPEJhbWJvb2hyQ29tcGVuc2F0aW9uW10+IHtcbiAgICBsZXQgZW5kcG9pbnQgPSBgL2VtcGxveWVlcy8ke2VtcGxveWVlSWR9L2NvbXBlbnNhdGlvbi9oaXN0b3J5YDtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgaWYgKHN0YXJ0RGF0ZSkgcGFyYW1zLmFwcGVuZCgnc3RhcnREYXRlJywgc3RhcnREYXRlKTtcbiAgICBpZiAoZW5kRGF0ZSkgcGFyYW1zLmFwcGVuZCgnZW5kRGF0ZScsIGVuZERhdGUpO1xuICAgIFxuICAgIGlmIChwYXJhbXMudG9TdHJpbmcoKSkge1xuICAgICAgZW5kcG9pbnQgKz0gYD8ke3BhcmFtcy50b1N0cmluZygpfWA7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChlbmRwb2ludCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmNvbXBlbnNhdGlvbiB8fCBbXTtcbiAgfVxuXG4gIC8vIFRpbWUgT2ZmIE1hbmFnZW1lbnRcbiAgYXN5bmMgZ2V0RW1wbG95ZWVUaW1lT2ZmKGVtcGxveWVlSWQ6IHN0cmluZyk6IFByb21pc2U8QmFtYm9vSFJUaW1lT2ZmW10+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYC9lbXBsb3llZXMvJHtlbXBsb3llZUlkfS90aW1lb2ZmYCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnRpbWVPZmYgfHwgW107XG4gIH1cblxuICBhc3luYyBnZXRBbGxUaW1lT2ZmKHN0YXJ0RGF0ZT86IHN0cmluZywgZW5kRGF0ZT86IHN0cmluZyk6IFByb21pc2U8QmFtYm9vSFJUaW1lT2ZmW10+IHtcbiAgICBsZXQgZW5kcG9pbnQgPSAnL3RpbWVvZmYnO1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICBpZiAoc3RhcnREYXRlKSBwYXJhbXMuYXBwZW5kKCdzdGFydERhdGUnLCBzdGFydERhdGUpO1xuICAgIGlmIChlbmREYXRlKSBwYXJhbXMuYXBwZW5kKCdlbmREYXRlJywgZW5kRGF0ZSk7XG4gICAgXG4gICAgaWYgKHBhcmFtcy50b1N0cmluZygpKSB7XG4gICAgICBlbmRwb2ludCArPSBgPyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGVuZHBvaW50KTtcbiAgICByZXR1cm4gcmVzcG9uc2UudGltZU9mZiB8fCBbXTtcbiAgfVxuXG4gIC8vIFJlcG9ydHNcbiAgYXN5bmMgZ2V0Q3VzdG9tUmVwb3J0KHJlcG9ydElkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL3JlcG9ydHMvJHtyZXBvcnRJZH1gKTtcbiAgICByZXR1cm4gcmVzcG9uc2UucmVwb3J0O1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ3VzdG9tUmVwb3J0KHJlcG9ydERhdGE6IEJhbWJvb0hSUmVwb3J0KTogUHJvbWlzZTxCYW1ib29IUlJlcG9ydD4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL3JlcG9ydHMnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcG9ydERhdGEpXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnJlcG9ydDtcbiAgfVxuXG4gIC8vIENvbXBhbnkgSW5mb3JtYXRpb25cbiAgYXN5bmMgZ2V0Q29tcGFueUluZm8oKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9jb21wYW55Jyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmNvbXBhbnk7XG4gIH1cblxuICAvLyBXZWJob29rIE1hbmFnZW1lbnRcbiAgYXN5bmMgY3JlYXRlV2ViaG9vayh3ZWJob29rRGF0YTogeyB1cmw6IHN0cmluZzsgZXZlbnRzOiBzdHJpbmdbXSB9KTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy93ZWJob29rcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkod2ViaG9va0RhdGEpXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLndlYmhvb2s7XG4gIH1cblxuICBhc3luYyBnZXRXZWJob29rcygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvd2ViaG9va3MnKTtcbiAgICByZXR1cm4gcmVzcG9uc2Uud2ViaG9va3MgfHwgW107XG4gIH1cblxuICBhc3luYyBkZWxldGVXZWJob29rKHdlYmhvb2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL3dlYmhvb2tzLyR7d2ViaG9va0lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgTWV0aG9kc1xuICBjYWxjdWxhdGVIb3VybHlSYXRlKGFubnVhbFNhbGFyeTogbnVtYmVyLCBwYXlTY2hlZHVsZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgaG91cnNQZXJZZWFyOiBudW1iZXI7XG4gICAgXG4gICAgc3dpdGNoIChwYXlTY2hlZHVsZSkge1xuICAgICAgY2FzZSAnd2Vla2x5JzpcbiAgICAgICAgaG91cnNQZXJZZWFyID0gNTIgKiA0MDsgLy8gNDAgaG91cnMgcGVyIHdlZWtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiaS13ZWVrbHknOlxuICAgICAgICBob3Vyc1BlclllYXIgPSAyNiAqIDgwOyAvLyA4MCBob3VycyBwZXIgMiB3ZWVrc1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbWktbW9udGhseSc6XG4gICAgICAgIGhvdXJzUGVyWWVhciA9IDI0ICogODYuNjc7IC8vIDg2LjY3IGhvdXJzIHBlciBwYXkgcGVyaW9kXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbW9udGhseSc6XG4gICAgICAgIGhvdXJzUGVyWWVhciA9IDEyICogMTczLjMzOyAvLyAxNzMuMzMgaG91cnMgcGVyIG1vbnRoXG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaG91cnNQZXJZZWFyID0gMjA4MDsgLy8gU3RhbmRhcmQgNDAtaG91ciB3b3JrIHdlZWtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGFubnVhbFNhbGFyeSAvIGhvdXJzUGVyWWVhcjtcbiAgfVxuXG4gIC8vIERhdGEgSW1wb3J0IE1ldGhvZHNcbiAgYXN5bmMgaW1wb3J0RW1wbG95ZWVzKCk6IFByb21pc2U8RW1wbG95ZWVbXT4ge1xuICAgIGNvbnN0IGJhbWJvb2hyRW1wbG95ZWVzID0gYXdhaXQgdGhpcy5nZXRBbGxFbXBsb3llZXMoKTtcbiAgICBjb25zb2xlLmxvZyhgQmFtYm9vSFIgaW1wb3J0OiBwcmVwYXJpbmcgdG8gdXBzZXJ0ICR7YmFtYm9vaHJFbXBsb3llZXMubGVuZ3RofSBlbXBsb3llZXNgKTtcblxuICAgIHJldHVybiBiYW1ib29ockVtcGxveWVlcy5tYXAoZW1wID0+ICh7XG4gICAgICBpZDogZW1wLmlkLFxuICAgICAgbmFtZTogZW1wLmRpc3BsYXlOYW1lLFxuICAgICAgZW1haWw6IGVtcC5lbWFpbCxcbiAgICAgIHN0YXR1czogZW1wLnN0YXR1cyA9PT0gJ2FjdGl2ZScgPyAnYWN0aXZlJyA6ICdpbmFjdGl2ZScsXG4gICAgICBkZXBhcnRtZW50OiBlbXAuZGVwYXJ0bWVudCxcbiAgICAgIHBvc2l0aW9uOiBlbXAuam9iVGl0bGUsXG4gICAgICBoaXJlRGF0ZTogZW1wLmhpcmVEYXRlLFxuICAgICAgdGVybWluYXRpb25EYXRlOiBlbXAudGVybWluYXRpb25EYXRlXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgaW1wb3J0U2FsYXJpZXMoKTogUHJvbWlzZTxFbXBsb3llZVNhbGFyeVtdPiB7XG4gICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgdGhpcy5nZXRBbGxFbXBsb3llZXMoKTtcbiAgICBjb25zb2xlLmxvZyhgQmFtYm9vSFIgaW1wb3J0OiBmZXRjaGluZyBjb21wZW5zYXRpb24gZm9yICR7ZW1wbG95ZWVzLmxlbmd0aH0gZW1wbG95ZWVzYCk7XG4gICAgY29uc3Qgc2FsYXJpZXM6IEVtcGxveWVlU2FsYXJ5W10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgZW1wbG95ZWUgb2YgZW1wbG95ZWVzKSB7XG4gICAgICBjb25zdCBjb21wZW5zYXRpb25zID0gYXdhaXQgdGhpcy5nZXRFbXBsb3llZUNvbXBlbnNhdGlvbihlbXBsb3llZS5pZCk7XG5cbiAgICAgIGZvciAoY29uc3QgY29tcCBvZiBjb21wZW5zYXRpb25zKSB7XG4gICAgICAgIC8vIExvZyB0aGUgdXBzZXJ0IGludGVudDsgYWN0dWFsIERCIHVwc2VydCBvY2N1cnMgaW4gc2F2ZUVtcGxveWVlU2FsYXJ5XG4gICAgICAgIGNvbnNvbGUubG9nKGBCYW1ib29IUiB1cHNlcnQgc2FsYXJ5IC0+IGVtcGxveWVlSWQ9JHtjb21wLmVtcGxveWVlSWR9IGVmZmVjdGl2ZURhdGU9JHtjb21wLmVmZmVjdGl2ZURhdGV9IGFubnVhbFNhbGFyeT0ke2NvbXAuYW5udWFsU2FsYXJ5fSBob3VybHlSYXRlPSR7Y29tcC5ob3VybHlSYXRlfWApO1xuICAgICAgICBzYWxhcmllcy5wdXNoKHtcbiAgICAgICAgICBlbXBsb3llZUlkOiBjb21wLmVtcGxveWVlSWQsXG4gICAgICAgICAgZWZmZWN0aXZlRGF0ZTogY29tcC5lZmZlY3RpdmVEYXRlLFxuICAgICAgICAgIGVuZERhdGU6IGNvbXAuZW5kRGF0ZSxcbiAgICAgICAgICBhbm51YWxTYWxhcnk6IGNvbXAuYW5udWFsU2FsYXJ5LFxuICAgICAgICAgIGhvdXJseVJhdGU6IGNvbXAuaG91cmx5UmF0ZSxcbiAgICAgICAgICBjdXJyZW5jeTogY29tcC5jdXJyZW5jeSxcbiAgICAgICAgICBub3RlczogYEltcG9ydGVkIGZyb20gQmFtYm9vSFIgLSAke2NvbXAucGF5VHlwZX0gKCR7Y29tcC5wYXlTY2hlZHVsZX0pYFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2FsYXJpZXM7XG4gIH1cblxuICBhc3luYyBpbXBvcnRBbGxEYXRhKCk6IFByb21pc2U8U2FsYXJ5SW1wb3J0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVtcGxveWVlcyA9IGF3YWl0IHRoaXMuaW1wb3J0RW1wbG95ZWVzKCk7XG4gICAgICBjb25zdCBzYWxhcmllcyA9IGF3YWl0IHRoaXMuaW1wb3J0U2FsYXJpZXMoKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc291cmNlOiAnYmFtYm9vaHInLFxuICAgICAgICBpbXBvcnREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJlY29yZHNJbXBvcnRlZDogZW1wbG95ZWVzLmxlbmd0aCArIHNhbGFyaWVzLmxlbmd0aCxcbiAgICAgICAgZXJyb3JzOiBbXVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzb3VyY2U6ICdiYW1ib29ocicsXG4gICAgICAgIGltcG9ydERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcmVjb3Jkc0ltcG9ydGVkOiAwLFxuICAgICAgICBlcnJvcnM6IFtlcnJvci5tZXNzYWdlXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWxwZXIgTWV0aG9kc1xuICBhc3luYyBzZWFyY2hFbXBsb3llZXMocXVlcnk6IHN0cmluZyk6IFByb21pc2U8QmFtYm9vSFJFbXBsb3llZVtdPiB7XG4gICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgdGhpcy5nZXRBbGxFbXBsb3llZXMoKTtcbiAgICByZXR1cm4gZW1wbG95ZWVzLmZpbHRlcihlbXAgPT4gXG4gICAgICBlbXAuZGlzcGxheU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKSB8fFxuICAgICAgZW1wLmVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgZ2V0RW1wbG95ZWVzQnlEZXBhcnRtZW50KGRlcGFydG1lbnQ6IHN0cmluZyk6IFByb21pc2U8QmFtYm9vSFJFbXBsb3llZVtdPiB7XG4gICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgdGhpcy5nZXRBbGxFbXBsb3llZXMoKTtcbiAgICByZXR1cm4gZW1wbG95ZWVzLmZpbHRlcihlbXAgPT4gZW1wLmRlcGFydG1lbnQgPT09IGRlcGFydG1lbnQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWN0aXZlRW1wbG95ZWVzKCk6IFByb21pc2U8QmFtYm9vSFJFbXBsb3llZVtdPiB7XG4gICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgdGhpcy5nZXRBbGxFbXBsb3llZXMoKTtcbiAgICByZXR1cm4gZW1wbG95ZWVzLmZpbHRlcihlbXAgPT4gZW1wLnN0YXR1cyA9PT0gJ2FjdGl2ZScpO1xuICB9XG59XG5cbmV4cG9ydCBsZXQgYmFtYm9vaHJTZXJ2aWNlOiBCYW1ib29IUlNlcnZpY2UgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZ3VyZUJhbWJvb0hSID0gKGNvbmZpZzogQmFtYm9vSFJDb25maWcpID0+IHtcbiAgYmFtYm9vaHJTZXJ2aWNlID0gbmV3IEJhbWJvb0hSU2VydmljZShjb25maWcpO1xuICBjb25zb2xlLmxvZyhgQmFtYm9vSFIgc2VydmljZSBjb25maWd1cmVkIGZvciBzdWJkb21haW46ICR7Y29uZmlnLnN1YmRvbWFpbn1gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRCYW1ib29IUlNlcnZpY2UgPSAoKTogQmFtYm9vSFJTZXJ2aWNlID0+IHtcbiAgaWYgKCFiYW1ib29oclNlcnZpY2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhbWJvb0hSIHNlcnZpY2Ugbm90IGNvbmZpZ3VyZWQuIENhbGwgY29uZmlndXJlQmFtYm9vSFIgZmlyc3QuJyk7XG4gIH1cbiAgcmV0dXJuIGJhbWJvb2hyU2VydmljZTtcbn07XG5cbmV4cG9ydCBjb25zdCBpbXBvcnRCYW1ib29IUkVtcGxveWVlcyA9IGFzeW5jICgpOiBQcm9taXNlPEVtcGxveWVlW10+ID0+IHtcbiAgY29uc3Qgc2VydmljZSA9IGdldEJhbWJvb0hSU2VydmljZSgpO1xuICByZXR1cm4gYXdhaXQgc2VydmljZS5pbXBvcnRFbXBsb3llZXMoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBpbXBvcnRCYW1ib29IUlNhbGFyaWVzID0gYXN5bmMgKCk6IFByb21pc2U8RW1wbG95ZWVTYWxhcnlbXT4gPT4ge1xuICBjb25zdCBzZXJ2aWNlID0gZ2V0QmFtYm9vSFJTZXJ2aWNlKCk7XG4gIHJldHVybiBhd2FpdCBzZXJ2aWNlLmltcG9ydFNhbGFyaWVzKCk7XG59O1xuXG5leHBvcnQgY29uc3QgaW1wb3J0QmFtYm9vSFJEYXRhID0gYXN5bmMgKCk6IFByb21pc2U8U2FsYXJ5SW1wb3J0PiA9PiB7XG4gIGNvbnN0IHNlcnZpY2UgPSBnZXRCYW1ib29IUlNlcnZpY2UoKTtcbiAgcmV0dXJuIGF3YWl0IHNlcnZpY2UuaW1wb3J0QWxsRGF0YSgpO1xufTtcbiJdLCJuYW1lcyI6WyJCYW1ib29IUlNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImJhc2VVcmwiLCJzdWJkb21haW4iLCJtYWtlUmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsImJhc2ljIiwiQnVmZmVyIiwiZnJvbSIsImFwaUtleSIsInRvU3RyaW5nIiwiaGVhZGVycyIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsImJvZHkiLCJ0ZXh0IiwiY2F0Y2giLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0QWxsRW1wbG95ZWVzIiwiYWxsIiwicGFnZSIsInBhZ2VTaXplIiwic3VmZml4IiwiZW1wbG95ZWVzIiwibG9nIiwibGVuZ3RoIiwicHVzaCIsImdldEVtcGxveWVlIiwiZW1wbG95ZWVJZCIsImVtcGxveWVlIiwiZ2V0RW1wbG95ZWVEaXJlY3RvcnkiLCJnZXRFbXBsb3llZUNvbXBlbnNhdGlvbiIsImNvbXBlbnNhdGlvbiIsImdldENvbXBlbnNhdGlvbkhpc3RvcnkiLCJzdGFydERhdGUiLCJlbmREYXRlIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwiZ2V0RW1wbG95ZWVUaW1lT2ZmIiwidGltZU9mZiIsImdldEFsbFRpbWVPZmYiLCJnZXRDdXN0b21SZXBvcnQiLCJyZXBvcnRJZCIsInJlcG9ydCIsImNyZWF0ZUN1c3RvbVJlcG9ydCIsInJlcG9ydERhdGEiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0Q29tcGFueUluZm8iLCJjb21wYW55IiwiY3JlYXRlV2ViaG9vayIsIndlYmhvb2tEYXRhIiwid2ViaG9vayIsImdldFdlYmhvb2tzIiwid2ViaG9va3MiLCJkZWxldGVXZWJob29rIiwid2ViaG9va0lkIiwiY2FsY3VsYXRlSG91cmx5UmF0ZSIsImFubnVhbFNhbGFyeSIsInBheVNjaGVkdWxlIiwiaG91cnNQZXJZZWFyIiwiaW1wb3J0RW1wbG95ZWVzIiwiYmFtYm9vaHJFbXBsb3llZXMiLCJtYXAiLCJlbXAiLCJpZCIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwiZGVwYXJ0bWVudCIsInBvc2l0aW9uIiwiam9iVGl0bGUiLCJoaXJlRGF0ZSIsInRlcm1pbmF0aW9uRGF0ZSIsImltcG9ydFNhbGFyaWVzIiwic2FsYXJpZXMiLCJjb21wZW5zYXRpb25zIiwiY29tcCIsImVmZmVjdGl2ZURhdGUiLCJob3VybHlSYXRlIiwiY3VycmVuY3kiLCJub3RlcyIsInBheVR5cGUiLCJpbXBvcnRBbGxEYXRhIiwic291cmNlIiwiaW1wb3J0RGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlY29yZHNJbXBvcnRlZCIsImVycm9ycyIsIm1lc3NhZ2UiLCJzZWFyY2hFbXBsb3llZXMiLCJxdWVyeSIsImZpbHRlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJnZXRFbXBsb3llZXNCeURlcGFydG1lbnQiLCJnZXRBY3RpdmVFbXBsb3llZXMiLCJiYW1ib29oclNlcnZpY2UiLCJjb25maWd1cmVCYW1ib29IUiIsImdldEJhbWJvb0hSU2VydmljZSIsImltcG9ydEJhbWJvb0hSRW1wbG95ZWVzIiwic2VydmljZSIsImltcG9ydEJhbWJvb0hSU2FsYXJpZXMiLCJpbXBvcnRCYW1ib29IUkRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/bamboohr.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDatabaseSchema: () => (/* binding */ createDatabaseSchema),\n/* harmony export */   ensureDatabaseSchema: () => (/* binding */ ensureDatabaseSchema),\n/* harmony export */   getAllEmployeeSalaries: () => (/* binding */ getAllEmployeeSalaries),\n/* harmony export */   getAllEmployeeTimeEntries: () => (/* binding */ getAllEmployeeTimeEntries),\n/* harmony export */   getAllEmployees: () => (/* binding */ getAllEmployees),\n/* harmony export */   getAllProjectMultipliers: () => (/* binding */ getAllProjectMultipliers),\n/* harmony export */   getBambooHRConfig: () => (/* binding */ getBambooHRConfig),\n/* harmony export */   prisma: () => (/* reexport safe */ _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   saveBambooHRConfig: () => (/* binding */ saveBambooHRConfig),\n/* harmony export */   saveEmployee: () => (/* binding */ saveEmployee),\n/* harmony export */   saveEmployeeSalary: () => (/* binding */ saveEmployeeSalary),\n/* harmony export */   saveEmployeeTimeEntry: () => (/* binding */ saveEmployeeTimeEntry),\n/* harmony export */   saveProjectMultiplier: () => (/* binding */ saveProjectMultiplier),\n/* harmony export */   testDatabaseConnection: () => (/* binding */ testDatabaseConnection)\n/* harmony export */ });\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\nasync function ensureDatabaseSchema() {\n    try {\n        // Check if tables already exist by trying to query them\n        await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].projection.findFirst();\n        console.log(\"Database schema already exists\");\n        return true; // Tables exist\n    } catch (error) {\n        console.log(\"Tables do not exist, attempting to create schema...\");\n        // If it's a table doesn't exist error, we need to create the schema\n        if (error.code === \"P2021\" || error.message?.includes(\"does not exist\")) {\n            try {\n                // Try to create the schema by running a simple operation\n                // This will trigger Prisma to create the tables if using Prisma Accelerate\n                console.log(\"Attempting to create database schema...\");\n                // Try to create a test record to trigger table creation\n                await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].projection.create({\n                    data: {\n                        projectId: \"__test__\",\n                        month: \"__test__\",\n                        value: 0\n                    }\n                });\n                // If successful, delete the test record\n                await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].projection.deleteMany({\n                    where: {\n                        projectId: \"__test__\",\n                        month: \"__test__\"\n                    }\n                });\n                console.log(\"Database schema created successfully\");\n                return true;\n            } catch (createError) {\n                console.error(\"Failed to create database schema:\", createError);\n                return false;\n            }\n        }\n        console.log(\"Tables do not exist, but Prisma Accelerate will create them automatically\");\n        console.log(\"Note: With Prisma Accelerate, tables are created automatically when you first insert data\");\n        return false; // Tables don't exist yet\n    }\n}\nasync function createDatabaseSchema() {\n    try {\n        console.log(\"Creating database schema...\");\n        // This will create all tables defined in the schema\n        // We'll use a more direct approach by trying to create the schema\n        const result = await ensureDatabaseSchema();\n        if (result) {\n            console.log(\"Database schema creation completed successfully\");\n            return true;\n        } else {\n            console.error(\"Database schema creation failed\");\n            return false;\n        }\n    } catch (error) {\n        console.error(\"Database schema creation failed:\", error);\n        return false;\n    }\n}\nasync function testDatabaseConnection() {\n    try {\n        // Test basic connection\n        await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$connect();\n        console.log(\"Database connection successful\");\n        // Test a simple query\n        const result = await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$queryRaw`SELECT 1 as test`;\n        console.log(\"Database query test successful:\", result);\n        return true;\n    } catch (error) {\n        console.error(\"Database connection test failed:\", error);\n        // Provide specific error guidance\n        if (error.message?.includes(\"ENOTFOUND\")) {\n            console.error(\"Network error: Check your DATABASE_URL and network connectivity\");\n        } else if (error.message?.includes(\"authentication failed\")) {\n            console.error(\"Authentication error: Check your database credentials\");\n        } else if (error.message?.includes(\"does not exist\")) {\n            console.error(\"Database does not exist: Check your database name in the connection URL\");\n        } else if (error.message?.includes(\"connection timeout\")) {\n            console.error(\"Connection timeout: Check your network and database server status\");\n        }\n        return false;\n    } finally{\n        await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$disconnect();\n    }\n}\n// BambooHR Database Operations\nasync function saveBambooHRConfig(config) {\n    try {\n        const result = await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bambooHRConfig.upsert({\n            where: {\n                subdomain: config.subdomain\n            },\n            update: {\n                apiKey: config.apiKey,\n                webhookSecret: config.webhookSecret,\n                isActive: true,\n                lastSync: new Date(),\n                updatedAt: new Date()\n            },\n            create: {\n                subdomain: config.subdomain,\n                apiKey: config.apiKey,\n                webhookSecret: config.webhookSecret,\n                isActive: true,\n                lastSync: new Date()\n            }\n        });\n        console.log(`BambooHR config saved for subdomain: ${config.subdomain}`);\n        return result;\n    } catch (error) {\n        console.error(\"Error saving BambooHR config:\", error);\n        throw error;\n    }\n}\nasync function getBambooHRConfig(subdomain) {\n    try {\n        return await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bambooHRConfig.findUnique({\n            where: {\n                subdomain\n            }\n        });\n    } catch (error) {\n        console.error(\"Error getting BambooHR config:\", error);\n        throw error;\n    }\n}\nasync function saveEmployee(employee) {\n    try {\n        const result = await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employee.upsert({\n            where: {\n                id: employee.id\n            },\n            update: {\n                name: employee.name,\n                email: employee.email,\n                status: employee.status,\n                department: employee.department,\n                position: employee.position,\n                hireDate: employee.hireDate,\n                terminationDate: employee.terminationDate,\n                updatedAt: new Date()\n            },\n            create: {\n                id: employee.id,\n                name: employee.name,\n                email: employee.email,\n                status: employee.status,\n                department: employee.department,\n                position: employee.position,\n                hireDate: employee.hireDate,\n                terminationDate: employee.terminationDate\n            }\n        });\n        console.log(`Employee saved: ${employee.name} (${employee.id})`);\n        return result;\n    } catch (error) {\n        console.error(\"Error saving employee:\", error);\n        throw error;\n    }\n}\nasync function saveEmployeeSalary(salary) {\n    try {\n        const result = await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employeeSalary.upsert({\n            where: {\n                employeeId_effectiveDate: {\n                    employeeId: salary.employeeId,\n                    effectiveDate: salary.effectiveDate\n                }\n            },\n            update: {\n                endDate: salary.endDate,\n                annualSalary: salary.annualSalary,\n                hourlyRate: salary.hourlyRate,\n                currency: salary.currency,\n                notes: salary.notes,\n                source: salary.source,\n                updatedAt: new Date()\n            },\n            create: {\n                employeeId: salary.employeeId,\n                effectiveDate: salary.effectiveDate,\n                endDate: salary.endDate,\n                annualSalary: salary.annualSalary,\n                hourlyRate: salary.hourlyRate,\n                currency: salary.currency || \"USD\",\n                notes: salary.notes,\n                source: salary.source || \"bamboohr\"\n            }\n        });\n        console.log(`Employee salary saved for ${salary.employeeId} effective ${salary.effectiveDate}`);\n        return result;\n    } catch (error) {\n        console.error(\"Error saving employee salary:\", error);\n        throw error;\n    }\n}\nasync function saveProjectMultiplier(multiplier) {\n    try {\n        const result = await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].projectMultiplier.upsert({\n            where: {\n                projectId_effectiveDate: {\n                    projectId: multiplier.projectId,\n                    effectiveDate: multiplier.effectiveDate\n                }\n            },\n            update: {\n                projectName: multiplier.projectName,\n                multiplier: multiplier.multiplier,\n                endDate: multiplier.endDate,\n                notes: multiplier.notes,\n                updatedAt: new Date()\n            },\n            create: {\n                projectId: multiplier.projectId,\n                projectName: multiplier.projectName,\n                multiplier: multiplier.multiplier,\n                effectiveDate: multiplier.effectiveDate,\n                endDate: multiplier.endDate,\n                notes: multiplier.notes\n            }\n        });\n        console.log(`Project multiplier saved for ${multiplier.projectName} effective ${multiplier.effectiveDate}`);\n        return result;\n    } catch (error) {\n        console.error(\"Error saving project multiplier:\", error);\n        throw error;\n    }\n}\nasync function saveEmployeeTimeEntry(timeEntry) {\n    try {\n        const result = await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employeeTimeEntry.upsert({\n            where: {\n                employeeId_projectId_date: {\n                    employeeId: timeEntry.employeeId,\n                    projectId: timeEntry.projectId,\n                    date: timeEntry.date\n                }\n            },\n            update: {\n                employeeName: timeEntry.employeeName,\n                projectName: timeEntry.projectName,\n                hours: timeEntry.hours,\n                billableHours: timeEntry.billableHours,\n                nonBillableHours: timeEntry.nonBillableHours,\n                hourlyRate: timeEntry.hourlyRate,\n                projectMultiplier: timeEntry.projectMultiplier,\n                totalCost: timeEntry.totalCost,\n                billableValue: timeEntry.billableValue,\n                efficiency: timeEntry.efficiency,\n                description: timeEntry.description,\n                tags: timeEntry.tags,\n                updatedAt: new Date()\n            },\n            create: {\n                employeeId: timeEntry.employeeId,\n                employeeName: timeEntry.employeeName,\n                projectId: timeEntry.projectId,\n                projectName: timeEntry.projectName,\n                date: timeEntry.date,\n                hours: timeEntry.hours,\n                billableHours: timeEntry.billableHours,\n                nonBillableHours: timeEntry.nonBillableHours,\n                hourlyRate: timeEntry.hourlyRate,\n                projectMultiplier: timeEntry.projectMultiplier,\n                totalCost: timeEntry.totalCost,\n                billableValue: timeEntry.billableValue,\n                efficiency: timeEntry.efficiency,\n                description: timeEntry.description,\n                tags: timeEntry.tags\n            }\n        });\n        console.log(`Time entry saved for ${timeEntry.employeeName} on ${timeEntry.date}`);\n        return result;\n    } catch (error) {\n        console.error(\"Error saving time entry:\", error);\n        throw error;\n    }\n}\nasync function getAllEmployees() {\n    try {\n        return await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employee.findMany({\n            include: {\n                salaries: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error getting all employees:\", error);\n        throw error;\n    }\n}\nasync function getAllEmployeeSalaries() {\n    try {\n        return await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employeeSalary.findMany({\n            include: {\n                employee: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error getting all employee salaries:\", error);\n        throw error;\n    }\n}\nasync function getAllProjectMultipliers() {\n    try {\n        return await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].projectMultiplier.findMany();\n    } catch (error) {\n        console.error(\"Error getting all project multipliers:\", error);\n        throw error;\n    }\n}\nasync function getAllEmployeeTimeEntries() {\n    try {\n        return await _db__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employeeTimeEntry.findMany({\n            include: {\n                employee: true\n            }\n        });\n    } catch (error) {\n        console.error(\"Error getting all time entries:\", error);\n        throw error;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNwQixJQUFJO1FBQ0YsT0FBTyxNQUFNckYsMkNBQU1BLENBQUNtRSxpQkFBaUIsQ0FBQ2EsUUFBUSxDQUFDO1lBQzdDQyxTQUFTO2dCQUNQMUMsVUFBVTtZQUNaO1FBQ0Y7SUFDRixFQUFFLE9BQU9qQyxPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ2pELE1BQU1BO0lBQ1I7QUFDRjtBQUVrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8uL2xpYi9kYXRhYmFzZS50cz80ZDQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwcmlzbWEgZnJvbSAnLi9kYic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEYXRhYmFzZVNjaGVtYSgpIHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiB0YWJsZXMgYWxyZWFkeSBleGlzdCBieSB0cnlpbmcgdG8gcXVlcnkgdGhlbVxuICAgIGF3YWl0IHByaXNtYS5wcm9qZWN0aW9uLmZpbmRGaXJzdCgpO1xuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBzY2hlbWEgYWxyZWFkeSBleGlzdHMnKTtcbiAgICByZXR1cm4gdHJ1ZTsgLy8gVGFibGVzIGV4aXN0XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZygnVGFibGVzIGRvIG5vdCBleGlzdCwgYXR0ZW1wdGluZyB0byBjcmVhdGUgc2NoZW1hLi4uJyk7XG4gICAgXG4gICAgLy8gSWYgaXQncyBhIHRhYmxlIGRvZXNuJ3QgZXhpc3QgZXJyb3IsIHdlIG5lZWQgdG8gY3JlYXRlIHRoZSBzY2hlbWFcbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1AyMDIxJyB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnZG9lcyBub3QgZXhpc3QnKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSB0aGUgc2NoZW1hIGJ5IHJ1bm5pbmcgYSBzaW1wbGUgb3BlcmF0aW9uXG4gICAgICAgIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIFByaXNtYSB0byBjcmVhdGUgdGhlIHRhYmxlcyBpZiB1c2luZyBQcmlzbWEgQWNjZWxlcmF0ZVxuICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byBjcmVhdGUgZGF0YWJhc2Ugc2NoZW1hLi4uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIGEgdGVzdCByZWNvcmQgdG8gdHJpZ2dlciB0YWJsZSBjcmVhdGlvblxuICAgICAgICBhd2FpdCBwcmlzbWEucHJvamVjdGlvbi5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHByb2plY3RJZDogJ19fdGVzdF9fJyxcbiAgICAgICAgICAgIG1vbnRoOiAnX190ZXN0X18nLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgc3VjY2Vzc2Z1bCwgZGVsZXRlIHRoZSB0ZXN0IHJlY29yZFxuICAgICAgICBhd2FpdCBwcmlzbWEucHJvamVjdGlvbi5kZWxldGVNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcHJvamVjdElkOiAnX190ZXN0X18nLFxuICAgICAgICAgICAgbW9udGg6ICdfX3Rlc3RfXydcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIHNjaGVtYSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGNyZWF0ZUVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBkYXRhYmFzZSBzY2hlbWE6JywgY3JlYXRlRXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdUYWJsZXMgZG8gbm90IGV4aXN0LCBidXQgUHJpc21hIEFjY2VsZXJhdGUgd2lsbCBjcmVhdGUgdGhlbSBhdXRvbWF0aWNhbGx5Jyk7XG4gICAgY29uc29sZS5sb2coJ05vdGU6IFdpdGggUHJpc21hIEFjY2VsZXJhdGUsIHRhYmxlcyBhcmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW4geW91IGZpcnN0IGluc2VydCBkYXRhJyk7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBUYWJsZXMgZG9uJ3QgZXhpc3QgeWV0XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhdGFiYXNlU2NoZW1hKCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBkYXRhYmFzZSBzY2hlbWEuLi4nKTtcbiAgICBcbiAgICAvLyBUaGlzIHdpbGwgY3JlYXRlIGFsbCB0YWJsZXMgZGVmaW5lZCBpbiB0aGUgc2NoZW1hXG4gICAgLy8gV2UnbGwgdXNlIGEgbW9yZSBkaXJlY3QgYXBwcm9hY2ggYnkgdHJ5aW5nIHRvIGNyZWF0ZSB0aGUgc2NoZW1hXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW5zdXJlRGF0YWJhc2VTY2hlbWEoKTtcbiAgICBcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2Ugc2NoZW1hIGNyZWF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBzY2hlbWEgY3JlYXRpb24gZmFpbGVkJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIHNjaGVtYSBjcmVhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdERhdGFiYXNlQ29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICAvLyBUZXN0IGJhc2ljIGNvbm5lY3Rpb25cbiAgICBhd2FpdCBwcmlzbWEuJGNvbm5lY3QoKTtcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGlvbiBzdWNjZXNzZnVsJyk7XG4gICAgXG4gICAgLy8gVGVzdCBhIHNpbXBsZSBxdWVyeVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaXNtYS4kcXVlcnlSYXdgU0VMRUNUIDEgYXMgdGVzdGA7XG4gICAgY29uc29sZS5sb2coJ0RhdGFiYXNlIHF1ZXJ5IHRlc3Qgc3VjY2Vzc2Z1bDonLCByZXN1bHQpO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gUHJvdmlkZSBzcGVjaWZpYyBlcnJvciBndWlkYW5jZVxuICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnRU5PVEZPVU5EJykpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldHdvcmsgZXJyb3I6IENoZWNrIHlvdXIgREFUQUJBU0VfVVJMIGFuZCBuZXR3b3JrIGNvbm5lY3Rpdml0eScpO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ2F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRoZW50aWNhdGlvbiBlcnJvcjogQ2hlY2sgeW91ciBkYXRhYmFzZSBjcmVkZW50aWFscycpO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ2RvZXMgbm90IGV4aXN0JykpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGRvZXMgbm90IGV4aXN0OiBDaGVjayB5b3VyIGRhdGFiYXNlIG5hbWUgaW4gdGhlIGNvbm5lY3Rpb24gVVJMJyk7XG4gICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnY29ubmVjdGlvbiB0aW1lb3V0JykpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nvbm5lY3Rpb24gdGltZW91dDogQ2hlY2sgeW91ciBuZXR3b3JrIGFuZCBkYXRhYmFzZSBzZXJ2ZXIgc3RhdHVzJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCBwcmlzbWEuJGRpc2Nvbm5lY3QoKTtcbiAgfVxufVxuXG4vLyBCYW1ib29IUiBEYXRhYmFzZSBPcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUJhbWJvb0hSQ29uZmlnKGNvbmZpZzoge1xuICBzdWJkb21haW46IHN0cmluZztcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIHdlYmhvb2tTZWNyZXQ/OiBzdHJpbmc7XG59KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLmJhbWJvb0hSQ29uZmlnLnVwc2VydCh7XG4gICAgICB3aGVyZTogeyBzdWJkb21haW46IGNvbmZpZy5zdWJkb21haW4gfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICBhcGlLZXk6IGNvbmZpZy5hcGlLZXksXG4gICAgICAgIHdlYmhvb2tTZWNyZXQ6IGNvbmZpZy53ZWJob29rU2VjcmV0LFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgbGFzdFN5bmM6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgfSxcbiAgICAgIGNyZWF0ZToge1xuICAgICAgICBzdWJkb21haW46IGNvbmZpZy5zdWJkb21haW4sXG4gICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcbiAgICAgICAgd2ViaG9va1NlY3JldDogY29uZmlnLndlYmhvb2tTZWNyZXQsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBsYXN0U3luYzogbmV3IERhdGUoKVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBCYW1ib29IUiBjb25maWcgc2F2ZWQgZm9yIHN1YmRvbWFpbjogJHtjb25maWcuc3ViZG9tYWlufWApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIEJhbWJvb0hSIGNvbmZpZzonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJhbWJvb0hSQ29uZmlnKHN1YmRvbWFpbjogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5iYW1ib29IUkNvbmZpZy5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHN1YmRvbWFpbiB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBCYW1ib29IUiBjb25maWc6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlRW1wbG95ZWUoZW1wbG95ZWU6IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgZGVwYXJ0bWVudD86IHN0cmluZztcbiAgcG9zaXRpb24/OiBzdHJpbmc7XG4gIGhpcmVEYXRlOiBzdHJpbmc7XG4gIHRlcm1pbmF0aW9uRGF0ZT86IHN0cmluZztcbn0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEuZW1wbG95ZWUudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7IGlkOiBlbXBsb3llZS5pZCB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIG5hbWU6IGVtcGxveWVlLm5hbWUsXG4gICAgICAgIGVtYWlsOiBlbXBsb3llZS5lbWFpbCxcbiAgICAgICAgc3RhdHVzOiBlbXBsb3llZS5zdGF0dXMsXG4gICAgICAgIGRlcGFydG1lbnQ6IGVtcGxveWVlLmRlcGFydG1lbnQsXG4gICAgICAgIHBvc2l0aW9uOiBlbXBsb3llZS5wb3NpdGlvbixcbiAgICAgICAgaGlyZURhdGU6IGVtcGxveWVlLmhpcmVEYXRlLFxuICAgICAgICB0ZXJtaW5hdGlvbkRhdGU6IGVtcGxveWVlLnRlcm1pbmF0aW9uRGF0ZSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIGlkOiBlbXBsb3llZS5pZCxcbiAgICAgICAgbmFtZTogZW1wbG95ZWUubmFtZSxcbiAgICAgICAgZW1haWw6IGVtcGxveWVlLmVtYWlsLFxuICAgICAgICBzdGF0dXM6IGVtcGxveWVlLnN0YXR1cyxcbiAgICAgICAgZGVwYXJ0bWVudDogZW1wbG95ZWUuZGVwYXJ0bWVudCxcbiAgICAgICAgcG9zaXRpb246IGVtcGxveWVlLnBvc2l0aW9uLFxuICAgICAgICBoaXJlRGF0ZTogZW1wbG95ZWUuaGlyZURhdGUsXG4gICAgICAgIHRlcm1pbmF0aW9uRGF0ZTogZW1wbG95ZWUudGVybWluYXRpb25EYXRlXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYEVtcGxveWVlIHNhdmVkOiAke2VtcGxveWVlLm5hbWV9ICgke2VtcGxveWVlLmlkfSlgKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBlbXBsb3llZTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVFbXBsb3llZVNhbGFyeShzYWxhcnk6IHtcbiAgZW1wbG95ZWVJZDogc3RyaW5nO1xuICBlZmZlY3RpdmVEYXRlOiBzdHJpbmc7XG4gIGVuZERhdGU/OiBzdHJpbmcgfCBudWxsO1xuICBhbm51YWxTYWxhcnk6IG51bWJlcjtcbiAgaG91cmx5UmF0ZTogbnVtYmVyO1xuICBjdXJyZW5jeT86IHN0cmluZztcbiAgbm90ZXM/OiBzdHJpbmc7XG4gIHNvdXJjZT86IHN0cmluZztcbn0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEuZW1wbG95ZWVTYWxhcnkudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGVtcGxveWVlSWRfZWZmZWN0aXZlRGF0ZToge1xuICAgICAgICAgIGVtcGxveWVlSWQ6IHNhbGFyeS5lbXBsb3llZUlkLFxuICAgICAgICAgIGVmZmVjdGl2ZURhdGU6IHNhbGFyeS5lZmZlY3RpdmVEYXRlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IHtcbiAgICAgICAgZW5kRGF0ZTogc2FsYXJ5LmVuZERhdGUsXG4gICAgICAgIGFubnVhbFNhbGFyeTogc2FsYXJ5LmFubnVhbFNhbGFyeSxcbiAgICAgICAgaG91cmx5UmF0ZTogc2FsYXJ5LmhvdXJseVJhdGUsXG4gICAgICAgIGN1cnJlbmN5OiBzYWxhcnkuY3VycmVuY3ksXG4gICAgICAgIG5vdGVzOiBzYWxhcnkubm90ZXMsXG4gICAgICAgIHNvdXJjZTogc2FsYXJ5LnNvdXJjZSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIGVtcGxveWVlSWQ6IHNhbGFyeS5lbXBsb3llZUlkLFxuICAgICAgICBlZmZlY3RpdmVEYXRlOiBzYWxhcnkuZWZmZWN0aXZlRGF0ZSxcbiAgICAgICAgZW5kRGF0ZTogc2FsYXJ5LmVuZERhdGUsXG4gICAgICAgIGFubnVhbFNhbGFyeTogc2FsYXJ5LmFubnVhbFNhbGFyeSxcbiAgICAgICAgaG91cmx5UmF0ZTogc2FsYXJ5LmhvdXJseVJhdGUsXG4gICAgICAgIGN1cnJlbmN5OiBzYWxhcnkuY3VycmVuY3kgfHwgJ1VTRCcsXG4gICAgICAgIG5vdGVzOiBzYWxhcnkubm90ZXMsXG4gICAgICAgIHNvdXJjZTogc2FsYXJ5LnNvdXJjZSB8fCAnYmFtYm9vaHInXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYEVtcGxveWVlIHNhbGFyeSBzYXZlZCBmb3IgJHtzYWxhcnkuZW1wbG95ZWVJZH0gZWZmZWN0aXZlICR7c2FsYXJ5LmVmZmVjdGl2ZURhdGV9YCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgZW1wbG95ZWUgc2FsYXJ5OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVByb2plY3RNdWx0aXBsaWVyKG11bHRpcGxpZXI6IHtcbiAgcHJvamVjdElkOiBzdHJpbmc7XG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XG4gIG11bHRpcGxpZXI6IG51bWJlcjtcbiAgZWZmZWN0aXZlRGF0ZTogc3RyaW5nO1xuICBlbmREYXRlPzogc3RyaW5nO1xuICBub3Rlcz86IHN0cmluZztcbn0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEucHJvamVjdE11bHRpcGxpZXIudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHByb2plY3RJZF9lZmZlY3RpdmVEYXRlOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBtdWx0aXBsaWVyLnByb2plY3RJZCxcbiAgICAgICAgICBlZmZlY3RpdmVEYXRlOiBtdWx0aXBsaWVyLmVmZmVjdGl2ZURhdGVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICBwcm9qZWN0TmFtZTogbXVsdGlwbGllci5wcm9qZWN0TmFtZSxcbiAgICAgICAgbXVsdGlwbGllcjogbXVsdGlwbGllci5tdWx0aXBsaWVyLFxuICAgICAgICBlbmREYXRlOiBtdWx0aXBsaWVyLmVuZERhdGUsXG4gICAgICAgIG5vdGVzOiBtdWx0aXBsaWVyLm5vdGVzLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgIH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgcHJvamVjdElkOiBtdWx0aXBsaWVyLnByb2plY3RJZCxcbiAgICAgICAgcHJvamVjdE5hbWU6IG11bHRpcGxpZXIucHJvamVjdE5hbWUsXG4gICAgICAgIG11bHRpcGxpZXI6IG11bHRpcGxpZXIubXVsdGlwbGllcixcbiAgICAgICAgZWZmZWN0aXZlRGF0ZTogbXVsdGlwbGllci5lZmZlY3RpdmVEYXRlLFxuICAgICAgICBlbmREYXRlOiBtdWx0aXBsaWVyLmVuZERhdGUsXG4gICAgICAgIG5vdGVzOiBtdWx0aXBsaWVyLm5vdGVzXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYFByb2plY3QgbXVsdGlwbGllciBzYXZlZCBmb3IgJHttdWx0aXBsaWVyLnByb2plY3ROYW1lfSBlZmZlY3RpdmUgJHttdWx0aXBsaWVyLmVmZmVjdGl2ZURhdGV9YCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcHJvamVjdCBtdWx0aXBsaWVyOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUVtcGxveWVlVGltZUVudHJ5KHRpbWVFbnRyeToge1xuICBlbXBsb3llZUlkOiBzdHJpbmc7XG4gIGVtcGxveWVlTmFtZTogc3RyaW5nO1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgcHJvamVjdE5hbWU6IHN0cmluZztcbiAgZGF0ZTogc3RyaW5nO1xuICBob3VyczogbnVtYmVyO1xuICBiaWxsYWJsZUhvdXJzOiBudW1iZXI7XG4gIG5vbkJpbGxhYmxlSG91cnM6IG51bWJlcjtcbiAgaG91cmx5UmF0ZTogbnVtYmVyO1xuICBwcm9qZWN0TXVsdGlwbGllcjogbnVtYmVyO1xuICB0b3RhbENvc3Q6IG51bWJlcjtcbiAgYmlsbGFibGVWYWx1ZTogbnVtYmVyO1xuICBlZmZpY2llbmN5OiBudW1iZXI7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbn0pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEuZW1wbG95ZWVUaW1lRW50cnkudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGVtcGxveWVlSWRfcHJvamVjdElkX2RhdGU6IHtcbiAgICAgICAgICBlbXBsb3llZUlkOiB0aW1lRW50cnkuZW1wbG95ZWVJZCxcbiAgICAgICAgICBwcm9qZWN0SWQ6IHRpbWVFbnRyeS5wcm9qZWN0SWQsXG4gICAgICAgICAgZGF0ZTogdGltZUVudHJ5LmRhdGVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICBlbXBsb3llZU5hbWU6IHRpbWVFbnRyeS5lbXBsb3llZU5hbWUsXG4gICAgICAgIHByb2plY3ROYW1lOiB0aW1lRW50cnkucHJvamVjdE5hbWUsXG4gICAgICAgIGhvdXJzOiB0aW1lRW50cnkuaG91cnMsXG4gICAgICAgIGJpbGxhYmxlSG91cnM6IHRpbWVFbnRyeS5iaWxsYWJsZUhvdXJzLFxuICAgICAgICBub25CaWxsYWJsZUhvdXJzOiB0aW1lRW50cnkubm9uQmlsbGFibGVIb3VycyxcbiAgICAgICAgaG91cmx5UmF0ZTogdGltZUVudHJ5LmhvdXJseVJhdGUsXG4gICAgICAgIHByb2plY3RNdWx0aXBsaWVyOiB0aW1lRW50cnkucHJvamVjdE11bHRpcGxpZXIsXG4gICAgICAgIHRvdGFsQ29zdDogdGltZUVudHJ5LnRvdGFsQ29zdCxcbiAgICAgICAgYmlsbGFibGVWYWx1ZTogdGltZUVudHJ5LmJpbGxhYmxlVmFsdWUsXG4gICAgICAgIGVmZmljaWVuY3k6IHRpbWVFbnRyeS5lZmZpY2llbmN5LFxuICAgICAgICBkZXNjcmlwdGlvbjogdGltZUVudHJ5LmRlc2NyaXB0aW9uLFxuICAgICAgICB0YWdzOiB0aW1lRW50cnkudGFncyxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIGVtcGxveWVlSWQ6IHRpbWVFbnRyeS5lbXBsb3llZUlkLFxuICAgICAgICBlbXBsb3llZU5hbWU6IHRpbWVFbnRyeS5lbXBsb3llZU5hbWUsXG4gICAgICAgIHByb2plY3RJZDogdGltZUVudHJ5LnByb2plY3RJZCxcbiAgICAgICAgcHJvamVjdE5hbWU6IHRpbWVFbnRyeS5wcm9qZWN0TmFtZSxcbiAgICAgICAgZGF0ZTogdGltZUVudHJ5LmRhdGUsXG4gICAgICAgIGhvdXJzOiB0aW1lRW50cnkuaG91cnMsXG4gICAgICAgIGJpbGxhYmxlSG91cnM6IHRpbWVFbnRyeS5iaWxsYWJsZUhvdXJzLFxuICAgICAgICBub25CaWxsYWJsZUhvdXJzOiB0aW1lRW50cnkubm9uQmlsbGFibGVIb3VycyxcbiAgICAgICAgaG91cmx5UmF0ZTogdGltZUVudHJ5LmhvdXJseVJhdGUsXG4gICAgICAgIHByb2plY3RNdWx0aXBsaWVyOiB0aW1lRW50cnkucHJvamVjdE11bHRpcGxpZXIsXG4gICAgICAgIHRvdGFsQ29zdDogdGltZUVudHJ5LnRvdGFsQ29zdCxcbiAgICAgICAgYmlsbGFibGVWYWx1ZTogdGltZUVudHJ5LmJpbGxhYmxlVmFsdWUsXG4gICAgICAgIGVmZmljaWVuY3k6IHRpbWVFbnRyeS5lZmZpY2llbmN5LFxuICAgICAgICBkZXNjcmlwdGlvbjogdGltZUVudHJ5LmRlc2NyaXB0aW9uLFxuICAgICAgICB0YWdzOiB0aW1lRW50cnkudGFnc1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBUaW1lIGVudHJ5IHNhdmVkIGZvciAke3RpbWVFbnRyeS5lbXBsb3llZU5hbWV9IG9uICR7dGltZUVudHJ5LmRhdGV9YCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgdGltZSBlbnRyeTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEVtcGxveWVlcygpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmVtcGxveWVlLmZpbmRNYW55KHtcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgc2FsYXJpZXM6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCBlbXBsb3llZXM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxFbXBsb3llZVNhbGFyaWVzKCkge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmlzbWEuZW1wbG95ZWVTYWxhcnkuZmluZE1hbnkoe1xuICAgICAgaW5jbHVkZToge1xuICAgICAgICBlbXBsb3llZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgYWxsIGVtcGxveWVlIHNhbGFyaWVzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsUHJvamVjdE11bHRpcGxpZXJzKCkge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmlzbWEucHJvamVjdE11bHRpcGxpZXIuZmluZE1hbnkoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCBwcm9qZWN0IG11bHRpcGxpZXJzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsRW1wbG95ZWVUaW1lRW50cmllcygpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLmVtcGxveWVlVGltZUVudHJ5LmZpbmRNYW55KHtcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgZW1wbG95ZWU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCB0aW1lIGVudHJpZXM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCB7IHByaXNtYSB9O1xuIl0sIm5hbWVzIjpbInByaXNtYSIsImVuc3VyZURhdGFiYXNlU2NoZW1hIiwicHJvamVjdGlvbiIsImZpbmRGaXJzdCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJjcmVhdGUiLCJkYXRhIiwicHJvamVjdElkIiwibW9udGgiLCJ2YWx1ZSIsImRlbGV0ZU1hbnkiLCJ3aGVyZSIsImNyZWF0ZUVycm9yIiwiY3JlYXRlRGF0YWJhc2VTY2hlbWEiLCJyZXN1bHQiLCJ0ZXN0RGF0YWJhc2VDb25uZWN0aW9uIiwiJGNvbm5lY3QiLCIkcXVlcnlSYXciLCIkZGlzY29ubmVjdCIsInNhdmVCYW1ib29IUkNvbmZpZyIsImNvbmZpZyIsImJhbWJvb0hSQ29uZmlnIiwidXBzZXJ0Iiwic3ViZG9tYWluIiwidXBkYXRlIiwiYXBpS2V5Iiwid2ViaG9va1NlY3JldCIsImlzQWN0aXZlIiwibGFzdFN5bmMiLCJEYXRlIiwidXBkYXRlZEF0IiwiZ2V0QmFtYm9vSFJDb25maWciLCJmaW5kVW5pcXVlIiwic2F2ZUVtcGxveWVlIiwiZW1wbG95ZWUiLCJpZCIsIm5hbWUiLCJlbWFpbCIsInN0YXR1cyIsImRlcGFydG1lbnQiLCJwb3NpdGlvbiIsImhpcmVEYXRlIiwidGVybWluYXRpb25EYXRlIiwic2F2ZUVtcGxveWVlU2FsYXJ5Iiwic2FsYXJ5IiwiZW1wbG95ZWVTYWxhcnkiLCJlbXBsb3llZUlkX2VmZmVjdGl2ZURhdGUiLCJlbXBsb3llZUlkIiwiZWZmZWN0aXZlRGF0ZSIsImVuZERhdGUiLCJhbm51YWxTYWxhcnkiLCJob3VybHlSYXRlIiwiY3VycmVuY3kiLCJub3RlcyIsInNvdXJjZSIsInNhdmVQcm9qZWN0TXVsdGlwbGllciIsIm11bHRpcGxpZXIiLCJwcm9qZWN0TXVsdGlwbGllciIsInByb2plY3RJZF9lZmZlY3RpdmVEYXRlIiwicHJvamVjdE5hbWUiLCJzYXZlRW1wbG95ZWVUaW1lRW50cnkiLCJ0aW1lRW50cnkiLCJlbXBsb3llZVRpbWVFbnRyeSIsImVtcGxveWVlSWRfcHJvamVjdElkX2RhdGUiLCJkYXRlIiwiZW1wbG95ZWVOYW1lIiwiaG91cnMiLCJiaWxsYWJsZUhvdXJzIiwibm9uQmlsbGFibGVIb3VycyIsInRvdGFsQ29zdCIsImJpbGxhYmxlVmFsdWUiLCJlZmZpY2llbmN5IiwiZGVzY3JpcHRpb24iLCJ0YWdzIiwiZ2V0QWxsRW1wbG95ZWVzIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwic2FsYXJpZXMiLCJnZXRBbGxFbXBsb3llZVNhbGFyaWVzIiwiZ2V0QWxsUHJvamVjdE11bHRpcGxpZXJzIiwiZ2V0QWxsRW1wbG95ZWVUaW1lRW50cmllcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prismaClientSingleton = ()=>{\n    return new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n        log: [\n            \"error\"\n        ]\n    });\n};\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? prismaClientSingleton();\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLHdCQUF3QjtJQUM1QixPQUFPLElBQUlELHdEQUFZQSxDQUFDO1FBQ3RCRSxLQUFLO1lBQUM7U0FBUTtJQUNoQjtBQUNGO0FBSUEsTUFBTUMsa0JBQWtCQztBQUl4QixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSUo7QUFFekMsSUFBSUssSUFBeUIsRUFBY0gsZ0JBQWdCRSxNQUFNLEdBQUdBO0FBRXBFLGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG5jb25zdCBwcmlzbWFDbGllbnRTaW5nbGV0b24gPSAoKSA9PiB7XG4gIHJldHVybiBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IFsnZXJyb3InXSwgLy8gQWRkIGVycm9yIGxvZ2dpbmcgZm9yIGRlYnVnZ2luZ1xuICB9KTtcbn07XG5cbnR5cGUgUHJpc21hQ2xpZW50U2luZ2xldG9uID0gUmV0dXJuVHlwZTx0eXBlb2YgcHJpc21hQ2xpZW50U2luZ2xldG9uPjtcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnRTaW5nbGV0b24gfCB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IHByaXNtYUNsaWVudFNpbmdsZXRvbigpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcblxuZXhwb3J0IGRlZmF1bHQgcHJpc21hO1xuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYUNsaWVudFNpbmdsZXRvbiIsImxvZyIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/payroll.ts":
/*!************************!*\
  !*** ./lib/payroll.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PayrollService: () => (/* binding */ PayrollService),\n/* harmony export */   addEmployee: () => (/* binding */ addEmployee),\n/* harmony export */   addProjectMultiplier: () => (/* binding */ addProjectMultiplier),\n/* harmony export */   addSalary: () => (/* binding */ addSalary),\n/* harmony export */   configureBambooHR: () => (/* binding */ configureBambooHR),\n/* harmony export */   generateEmployeeProfitabilityReport: () => (/* binding */ generateEmployeeProfitabilityReport),\n/* harmony export */   generateProjectProfitabilityReport: () => (/* binding */ generateProjectProfitabilityReport),\n/* harmony export */   importBambooHRData: () => (/* binding */ importBambooHRData),\n/* harmony export */   payrollService: () => (/* binding */ payrollService),\n/* harmony export */   processTimeEntries: () => (/* binding */ processTimeEntries)\n/* harmony export */ });\n/* harmony import */ var _bamboohr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bamboohr */ \"(rsc)/./lib/bamboohr.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./database */ \"(rsc)/./lib/database.ts\");\n\n\nclass PayrollService {\n    constructor(){\n        this.employees = new Map();\n        this.salaries = new Map();\n        this.multipliers = new Map();\n        console.log(\"Payroll service initialized\");\n    }\n    mapDbEmployeeToDomain(dbEmployee) {\n        const statusValue = (dbEmployee.status || \"\").toLowerCase();\n        const status = statusValue === \"active\" ? \"active\" : \"inactive\";\n        const toIsoDateString = (d)=>{\n            if (!d) return undefined;\n            if (typeof d === \"string\") return d;\n            if (d instanceof Date) return d.toISOString();\n            try {\n                const asDate = new Date(d);\n                return isNaN(asDate.getTime()) ? undefined : asDate.toISOString();\n            } catch  {\n                return undefined;\n            }\n        };\n        return {\n            id: dbEmployee.id,\n            name: dbEmployee.name,\n            email: dbEmployee.email,\n            status,\n            department: dbEmployee.department ?? undefined,\n            position: dbEmployee.position ?? undefined,\n            hireDate: toIsoDateString(dbEmployee.hireDate) || \"\",\n            terminationDate: toIsoDateString(dbEmployee.terminationDate)\n        };\n    }\n    toNumber(value) {\n        if (typeof value === \"number\") return value;\n        // Prisma Decimal has toNumber(); fall back to parseFloat\n        const maybeDecimal = value;\n        if (maybeDecimal && typeof maybeDecimal.toNumber === \"function\") {\n            return maybeDecimal.toNumber();\n        }\n        const parsed = parseFloat(String(value));\n        return Number.isNaN(parsed) ? 0 : parsed;\n    }\n    mapDbSalariesToDomain(dbSalaries) {\n        return (dbSalaries || []).map((s)=>({\n                employeeId: s.employeeId,\n                effectiveDate: s.effectiveDate,\n                endDate: s.endDate ?? undefined,\n                annualSalary: this.toNumber(s.annualSalary),\n                hourlyRate: this.toNumber(s.hourlyRate),\n                currency: s.currency ?? undefined,\n                notes: s.notes ?? undefined\n            }));\n    }\n    mapDbMultipliersToDomain(dbMultipliers) {\n        return (dbMultipliers || []).map((m)=>({\n                projectId: m.projectId,\n                projectName: m.projectName,\n                multiplier: this.toNumber(m.multiplier),\n                effectiveDate: m.effectiveDate,\n                endDate: m.endDate ?? undefined,\n                notes: m.notes ?? undefined\n            }));\n    }\n    // Employee Management\n    async addEmployee(employee) {\n        // Save to database\n        await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveEmployee)(employee);\n        // Also keep in memory for backward compatibility\n        this.employees.set(employee.id, employee);\n        console.log(`Employee added: ${employee.name} (${employee.id})`);\n    }\n    async getEmployee(employeeId) {\n        // Try memory first, then database\n        let employee = this.employees.get(employeeId);\n        if (!employee) {\n            // Load from database\n            const dbEmployees = await (0,_database__WEBPACK_IMPORTED_MODULE_1__.getAllEmployees)();\n            const dbEmployee = dbEmployees.find((emp)=>emp.id === employeeId);\n            if (dbEmployee) {\n                const mapped = this.mapDbEmployeeToDomain(dbEmployee);\n                this.employees.set(employeeId, mapped);\n                employee = mapped;\n            }\n        }\n        return employee || null;\n    }\n    async getAllEmployees() {\n        // Load from database and sync memory\n        const dbEmployees = await (0,_database__WEBPACK_IMPORTED_MODULE_1__.getAllEmployees)();\n        // Update memory cache\n        const mapped = dbEmployees.map((emp)=>this.mapDbEmployeeToDomain(emp));\n        for (const emp of mapped){\n            this.employees.set(emp.id, emp);\n        }\n        return mapped;\n    }\n    async updateEmployee(employeeId, updates) {\n        const employee = this.employees.get(employeeId);\n        if (employee) {\n            const updatedEmployee = {\n                ...employee,\n                ...updates\n            };\n            // Save to database\n            await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveEmployee)(updatedEmployee);\n            // Update memory\n            this.employees.set(employeeId, updatedEmployee);\n            console.log(`Employee updated: ${employee.name}`);\n        }\n    }\n    // Salary Management\n    async addSalary(salary) {\n        // Save to database\n        await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveEmployeeSalary)(salary);\n        // Also keep in memory for backward compatibility\n        const employeeSalaries = this.salaries.get(salary.employeeId) || [];\n        // If this is a new current salary, end the previous one\n        if (!salary.endDate) {\n            const currentSalary = employeeSalaries.find((s)=>!s.endDate);\n            if (currentSalary) {\n                currentSalary.endDate = salary.effectiveDate;\n                // Update the previous salary in database\n                await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveEmployeeSalary)(currentSalary);\n            }\n        }\n        employeeSalaries.push(salary);\n        employeeSalaries.sort((a, b)=>new Date(a.effectiveDate).getTime() - new Date(b.effectiveDate).getTime());\n        this.salaries.set(salary.employeeId, employeeSalaries);\n        console.log(`Salary added for ${salary.employeeId} effective ${salary.effectiveDate}`);\n    }\n    async getEmployeeSalary(employeeId, date) {\n        // Try memory first, then database\n        let employeeSalaries = this.salaries.get(employeeId);\n        if (!employeeSalaries || employeeSalaries.length === 0) {\n            // Load from database\n            const dbSalaries = await (0,_database__WEBPACK_IMPORTED_MODULE_1__.getAllEmployeeSalaries)();\n            const employeeDbSalaries = dbSalaries.filter((s)=>s.employeeId === employeeId);\n            if (employeeDbSalaries.length > 0) {\n                const mapped = this.mapDbSalariesToDomain(employeeDbSalaries);\n                this.salaries.set(employeeId, mapped);\n                employeeSalaries = mapped;\n            }\n        }\n        if (!employeeSalaries) return null;\n        const targetDate = new Date(date);\n        return employeeSalaries.find((salary)=>{\n            const effectiveDate = new Date(salary.effectiveDate);\n            const endDate = salary.endDate ? new Date(salary.endDate) : new Date(\"9999-12-31\");\n            return targetDate >= effectiveDate && targetDate <= endDate;\n        }) || null;\n    }\n    async getEmployeeSalaryHistory(employeeId) {\n        // Try memory first, then database\n        let employeeSalaries = this.salaries.get(employeeId);\n        if (!employeeSalaries || employeeSalaries.length === 0) {\n            // Load from database\n            const dbSalaries = await (0,_database__WEBPACK_IMPORTED_MODULE_1__.getAllEmployeeSalaries)();\n            const employeeDbSalaries = dbSalaries.filter((s)=>s.employeeId === employeeId);\n            if (employeeDbSalaries.length > 0) {\n                const mapped = this.mapDbSalariesToDomain(employeeDbSalaries);\n                this.salaries.set(employeeId, mapped);\n                employeeSalaries = mapped;\n            }\n        }\n        return employeeSalaries || [];\n    }\n    // Project Multiplier Management\n    async addProjectMultiplier(multiplier) {\n        // Save to database\n        await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveProjectMultiplier)(multiplier);\n        // Also keep in memory for backward compatibility\n        const projectMultipliers = this.multipliers.get(multiplier.projectId) || [];\n        // If this is a new current multiplier, end the previous one\n        if (!multiplier.endDate) {\n            const currentMultiplier = projectMultipliers.find((m)=>!m.endDate);\n            if (currentMultiplier) {\n                currentMultiplier.endDate = multiplier.effectiveDate;\n                // Update the previous multiplier in database\n                await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveProjectMultiplier)(currentMultiplier);\n            }\n        }\n        projectMultipliers.push(multiplier);\n        projectMultipliers.sort((a, b)=>new Date(a.effectiveDate).getTime() - new Date(b.effectiveDate).getTime());\n        this.multipliers.set(multiplier.projectId, projectMultipliers);\n        console.log(`Multiplier added for project ${multiplier.projectName} effective ${multiplier.effectiveDate}`);\n    }\n    async getProjectMultiplier(projectId, date) {\n        // Try memory first, then database\n        let projectMultipliers = this.multipliers.get(projectId);\n        if (!projectMultipliers || projectMultipliers.length === 0) {\n            // Load from database\n            const dbMultipliers = await (0,_database__WEBPACK_IMPORTED_MODULE_1__.getAllProjectMultipliers)();\n            const projectDbMultipliers = dbMultipliers.filter((m)=>m.projectId === projectId);\n            if (projectDbMultipliers.length > 0) {\n                const mapped = this.mapDbMultipliersToDomain(projectDbMultipliers);\n                this.multipliers.set(projectId, mapped);\n                projectMultipliers = mapped;\n            }\n        }\n        if (!projectMultipliers) return null;\n        const targetDate = new Date(date);\n        return projectMultipliers.find((multiplier)=>{\n            const effectiveDate = new Date(multiplier.effectiveDate);\n            const endDate = multiplier.endDate ? new Date(multiplier.endDate) : new Date(\"9999-12-31\");\n            return targetDate >= effectiveDate && targetDate <= endDate;\n        }) || null;\n    }\n    async getProjectMultiplierHistory(projectId) {\n        // Try memory first, then database\n        let projectMultipliers = this.multipliers.get(projectId);\n        if (!projectMultipliers || projectMultipliers.length === 0) {\n            // Load from database\n            const dbMultipliers = await (0,_database__WEBPACK_IMPORTED_MODULE_1__.getAllProjectMultipliers)();\n            const projectDbMultipliers = dbMultipliers.filter((m)=>m.projectId === projectId);\n            if (projectDbMultipliers.length > 0) {\n                const mapped = this.mapDbMultipliersToDomain(projectDbMultipliers);\n                this.multipliers.set(projectId, mapped);\n                projectMultipliers = mapped;\n            }\n        }\n        return projectMultipliers || [];\n    }\n    // Time Entry Processing with Historical Rates\n    async processTimeEntries(clockifyEntries, clockifyUsers, projects) {\n        const employeeTimeEntries = [];\n        const userMap = new Map(clockifyUsers.map((user)=>[\n                user.id,\n                user\n            ]));\n        for (const entry of clockifyEntries){\n            const user = userMap.get(entry.userId);\n            if (!user) continue;\n            const entryDate = new Date(entry.timeInterval.start).toISOString().split(\"T\")[0];\n            const employee = await this.getEmployee(entry.userId);\n            if (!employee) continue;\n            const salary = await this.getEmployeeSalary(entry.userId, entryDate);\n            if (!salary) continue;\n            const project = projects.find((p)=>p.id === entry.projectId);\n            if (!project) continue;\n            const multiplier = await this.getProjectMultiplier(entry.projectId, entryDate);\n            const projectMultiplier = multiplier?.multiplier || 1.0;\n            const durationMs = this.parseDuration(entry.timeInterval.duration);\n            const hours = durationMs / (1000 * 60 * 60);\n            const billableHours = entry.billable ? hours : 0;\n            const nonBillableHours = entry.billable ? 0 : hours;\n            const totalCost = hours * salary.hourlyRate;\n            const billableValue = billableHours * salary.hourlyRate * projectMultiplier;\n            const efficiency = hours > 0 ? billableHours / hours : 0;\n            const timeEntry = {\n                employeeId: entry.userId,\n                employeeName: user.name,\n                projectId: entry.projectId,\n                projectName: project.name,\n                date: entryDate,\n                hours,\n                billableHours,\n                nonBillableHours,\n                hourlyRate: salary.hourlyRate,\n                projectMultiplier,\n                totalCost,\n                billableValue,\n                efficiency,\n                description: entry.description,\n                tags: entry.tags.map((tag)=>tag.name)\n            };\n            // Save to database\n            await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveEmployeeTimeEntry)(timeEntry);\n            employeeTimeEntries.push(timeEntry);\n        }\n        return employeeTimeEntries;\n    }\n    // Profitability Analysis\n    async generateProjectProfitabilityReport(projectId, startDate, endDate, employeeTimeEntries, revenue) {\n        const projectEntries = employeeTimeEntries.filter((entry)=>entry.projectId === projectId && entry.date >= startDate && entry.date <= endDate);\n        const totalHours = projectEntries.reduce((sum, entry)=>sum + entry.hours, 0);\n        const totalBillableHours = projectEntries.reduce((sum, entry)=>sum + entry.billableHours, 0);\n        const totalCost = projectEntries.reduce((sum, entry)=>sum + entry.totalCost, 0);\n        const totalBillableValue = projectEntries.reduce((sum, entry)=>sum + entry.billableValue, 0);\n        const grossProfit = revenue - totalCost;\n        const profitMargin = revenue > 0 ? grossProfit / revenue * 100 : 0;\n        const averageMultiplier = totalBillableHours > 0 ? totalBillableValue / (totalBillableHours * projectEntries[0]?.hourlyRate || 1) : 0;\n        // Employee breakdown\n        const employeeBreakdown = new Map();\n        for (const entry of projectEntries){\n            const existing = employeeBreakdown.get(entry.employeeId);\n            if (existing) {\n                existing.hours += entry.hours;\n                existing.cost += entry.totalCost;\n                existing.billableValue += entry.billableValue;\n                existing.efficiency = existing.hours > 0 ? existing.billableValue / (existing.hours * entry.hourlyRate) : 0;\n            } else {\n                employeeBreakdown.set(entry.employeeId, {\n                    employeeId: entry.employeeId,\n                    employeeName: entry.employeeName,\n                    hours: entry.hours,\n                    cost: entry.totalCost,\n                    billableValue: entry.billableValue,\n                    efficiency: entry.efficiency\n                });\n            }\n        }\n        // Monthly breakdown\n        const monthlyBreakdown = new Map();\n        for (const entry of projectEntries){\n            const month = entry.date.substring(0, 7); // YYYY-MM\n            const existing = monthlyBreakdown.get(month);\n            if (existing) {\n                existing.hours += entry.hours;\n                existing.cost += entry.totalCost;\n            } else {\n                monthlyBreakdown.set(month, {\n                    month,\n                    hours: entry.hours,\n                    cost: entry.totalCost,\n                    revenue: 0,\n                    profit: 0\n                });\n            }\n        }\n        return {\n            projectId,\n            projectName: projectEntries[0]?.projectName || \"Unknown Project\",\n            period: {\n                start: startDate,\n                end: endDate\n            },\n            totalHours,\n            totalBillableHours,\n            totalCost,\n            totalRevenue: revenue,\n            grossProfit,\n            profitMargin,\n            averageMultiplier,\n            employeeBreakdown: Array.from(employeeBreakdown.values()),\n            monthlyBreakdown: Array.from(monthlyBreakdown.values())\n        };\n    }\n    async generateEmployeeProfitabilityReport(employeeId, startDate, endDate, employeeTimeEntries) {\n        const employeeEntries = employeeTimeEntries.filter((entry)=>entry.employeeId === employeeId && entry.date >= startDate && entry.date <= endDate);\n        const totalHours = employeeEntries.reduce((sum, entry)=>sum + entry.hours, 0);\n        const totalBillableHours = employeeEntries.reduce((sum, entry)=>sum + entry.billableHours, 0);\n        const totalCost = employeeEntries.reduce((sum, entry)=>sum + entry.totalCost, 0);\n        const totalBillableValue = employeeEntries.reduce((sum, entry)=>sum + entry.billableValue, 0);\n        const efficiency = totalHours > 0 ? totalBillableHours / totalHours : 0;\n        const averageHourlyRate = totalHours > 0 ? totalCost / totalHours : 0;\n        // Project breakdown\n        const projectBreakdown = new Map();\n        for (const entry of employeeEntries){\n            const existing = projectBreakdown.get(entry.projectId);\n            if (existing) {\n                existing.hours += entry.hours;\n                existing.cost += entry.totalCost;\n                existing.billableValue += entry.billableValue;\n                existing.efficiency = existing.hours > 0 ? existing.billableValue / (existing.hours * entry.hourlyRate) : 0;\n            } else {\n                projectBreakdown.set(entry.projectId, {\n                    projectId: entry.projectId,\n                    projectName: entry.projectName,\n                    hours: entry.hours,\n                    cost: entry.totalCost,\n                    billableValue: entry.billableValue,\n                    efficiency: entry.efficiency\n                });\n            }\n        }\n        return {\n            employeeId,\n            employeeName: employeeEntries[0]?.employeeName || \"Unknown Employee\",\n            period: {\n                start: startDate,\n                end: endDate\n            },\n            totalHours,\n            totalBillableHours,\n            totalCost,\n            totalBillableValue,\n            efficiency,\n            averageHourlyRate,\n            projectBreakdown: Array.from(projectBreakdown.values())\n        };\n    }\n    // Payroll System Integration\n    async configurePayrollSystem(system) {\n        this.payrollSystem = system;\n        console.log(`Payroll system configured: ${system.name}`);\n    }\n    // BambooHR Integration\n    async configureBambooHR(config) {\n        this.bamboohrConfig = config;\n        (0,_bamboohr__WEBPACK_IMPORTED_MODULE_0__.configureBambooHR)(config);\n        // Save configuration to database\n        await (0,_database__WEBPACK_IMPORTED_MODULE_1__.saveBambooHRConfig)({\n            subdomain: config.subdomain,\n            apiKey: config.apiKey,\n            webhookSecret: config.webhookSecret\n        });\n        console.log(`BambooHR configured for subdomain: ${config.subdomain}`);\n    }\n    async importSalariesFromBambooHR() {\n        if (!this.bamboohrConfig) {\n            throw new Error(\"BambooHR not configured\");\n        }\n        try {\n            console.log(\"\\uD83D\\uDE80 Starting BambooHR data import process...\");\n            // Import employees from BambooHR\n            const bamboohrEmployees = await (0,_bamboohr__WEBPACK_IMPORTED_MODULE_0__.importBambooHREmployees)();\n            console.log(` BambooHR import: Retrieved ${bamboohrEmployees.length} employees from BambooHR API`);\n            console.log(` BambooHR import: Beginning Supabase upsert for ${bamboohrEmployees.length} employees...`);\n            let employeeSuccess = 0;\n            const employeeErrors = [];\n            for (const employee of bamboohrEmployees){\n                try {\n                    await this.addEmployee(employee);\n                    employeeSuccess += 1;\n                    console.log(` Employee upsert success: ${employee.name} (${employee.id})`);\n                } catch (e) {\n                    console.error(\" BambooHR employee upsert failed:\", {\n                        id: employee.id,\n                        name: employee.name,\n                        error: e?.message || String(e)\n                    });\n                    employeeErrors.push(`emp:${employee.id}:${e?.message || e}`);\n                }\n            }\n            console.log(` Employee import results: ${employeeSuccess} successes, ${employeeErrors.length} errors`);\n            // Import salaries from BambooHR\n            const bamboohrSalaries = await (0,_bamboohr__WEBPACK_IMPORTED_MODULE_0__.importBambooHRSalaries)();\n            console.log(` BambooHR import: Retrieved ${bamboohrSalaries.length} salary records from BambooHR API`);\n            console.log(` BambooHR import: Beginning Supabase upsert for ${bamboohrSalaries.length} salary records...`);\n            let salarySuccess = 0;\n            const salaryErrors = [];\n            for (const salary of bamboohrSalaries){\n                try {\n                    await this.addSalary(salary);\n                    salarySuccess += 1;\n                    console.log(` Salary upsert success: Employee ${salary.employeeId}, effective ${salary.effectiveDate}, annual: $${salary.annualSalary}`);\n                } catch (e) {\n                    console.error(\" BambooHR salary upsert failed:\", {\n                        employeeId: salary.employeeId,\n                        effectiveDate: salary.effectiveDate,\n                        annualSalary: salary.annualSalary,\n                        hourlyRate: salary.hourlyRate,\n                        error: e?.message || String(e)\n                    });\n                    salaryErrors.push(`sal:${salary.employeeId}:${salary.effectiveDate}:${e?.message || e}`);\n                }\n            }\n            console.log(` Salary import results: ${salarySuccess} successes, ${salaryErrors.length} errors`);\n            console.log(` BambooHR import completed successfully!`);\n            console.log(` Final summary: Total employees processed=${bamboohrEmployees.length}, employees saved=${employeeSuccess}, salaries processed=${bamboohrSalaries.length}, salaries saved=${salarySuccess}`);\n            console.log(` Error summary: Employee errors=${employeeErrors.length}, Salary errors=${salaryErrors.length}`);\n            return {\n                source: \"bamboohr\",\n                importDate: new Date().toISOString(),\n                recordsImported: employeeSuccess + salarySuccess,\n                errors: [\n                    ...employeeErrors,\n                    ...salaryErrors\n                ]\n            };\n        } catch (error) {\n            console.error(\" BambooHR import failed with fatal error:\", error);\n            return {\n                source: \"bamboohr\",\n                importDate: new Date().toISOString(),\n                recordsImported: 0,\n                errors: [\n                    error.message\n                ]\n            };\n        }\n    }\n    async importSalariesFromPayrollSystem() {\n        if (!this.payrollSystem) {\n            throw new Error(\"No payroll system configured\");\n        }\n        if (this.payrollSystem.type === \"bamboohr\" && this.bamboohrConfig) {\n            return await this.importSalariesFromBambooHR();\n        }\n        // This would integrate with other payroll system APIs\n        // For now, return a mock import\n        return {\n            source: \"api\",\n            importDate: new Date().toISOString(),\n            recordsImported: 0,\n            errors: [\n                `${this.payrollSystem.type} integration not yet implemented`\n            ]\n        };\n    }\n    // Utility Methods\n    parseDuration(duration) {\n        const regex = /PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/;\n        const match = duration.match(regex);\n        if (!match) return 0;\n        const hours = parseInt(match[1] || \"0\");\n        const minutes = parseInt(match[2] || \"0\");\n        const seconds = parseInt(match[3] || \"0\");\n        return (hours * 3600 + minutes * 60 + seconds) * 1000;\n    }\n    calculateHourlyRate(annualSalary, workHoursPerYear = 2080) {\n        return annualSalary / workHoursPerYear;\n    }\n    // Normalization helpers to convert Prisma results to domain types\n    normalizeEmployee(dbEmployee) {\n        const statusValue = (dbEmployee.status || \"active\").toLowerCase();\n        const normalizedStatus = statusValue === \"active\" ? \"active\" : \"inactive\";\n        return {\n            id: dbEmployee.id,\n            name: dbEmployee.name,\n            email: dbEmployee.email,\n            status: normalizedStatus,\n            department: dbEmployee.department ?? undefined,\n            position: dbEmployee.position ?? undefined,\n            hireDate: dbEmployee.hireDate,\n            terminationDate: dbEmployee.terminationDate ?? undefined\n        };\n    }\n    normalizeSalary(dbSalary) {\n        const toNumber = (v)=>v && typeof v === \"object\" && \"toNumber\" in v ? v.toNumber() : Number(v);\n        return {\n            employeeId: dbSalary.employeeId,\n            effectiveDate: dbSalary.effectiveDate,\n            endDate: dbSalary.endDate ?? undefined,\n            annualSalary: toNumber(dbSalary.annualSalary),\n            hourlyRate: toNumber(dbSalary.hourlyRate),\n            currency: dbSalary.currency || \"USD\",\n            notes: dbSalary.notes ?? undefined\n        };\n    }\n    normalizeProjectMultiplier(dbMultiplier) {\n        const toNumber = (v)=>v && typeof v === \"object\" && \"toNumber\" in v ? v.toNumber() : Number(v);\n        return {\n            projectId: dbMultiplier.projectId,\n            projectName: dbMultiplier.projectName,\n            multiplier: toNumber(dbMultiplier.multiplier),\n            effectiveDate: dbMultiplier.effectiveDate,\n            endDate: dbMultiplier.endDate ?? undefined,\n            notes: dbMultiplier.notes ?? undefined\n        };\n    }\n    // Data Export/Import\n    async exportData() {\n        return {\n            employees: Array.from(this.employees.values()),\n            salaries: Array.from(this.salaries.entries()),\n            multipliers: Array.from(this.multipliers.entries()),\n            payrollSystem: this.payrollSystem,\n            bamboohrConfig: this.bamboohrConfig\n        };\n    }\n    async importData(data) {\n        this.employees = new Map(data.employees.map((emp)=>[\n                emp.id,\n                emp\n            ]));\n        this.salaries = new Map(data.salaries);\n        this.multipliers = new Map(data.multipliers);\n        this.payrollSystem = data.payrollSystem;\n        this.bamboohrConfig = data.bamboohrConfig;\n        if (this.bamboohrConfig) {\n            (0,_bamboohr__WEBPACK_IMPORTED_MODULE_0__.configureBambooHR)(this.bamboohrConfig);\n        }\n        console.log(\"Payroll data imported successfully\");\n    }\n}\n// Create singleton instance\nconst payrollService = new PayrollService();\n// Export convenience functions\nconst addEmployee = async (employee)=>{\n    await payrollService.addEmployee(employee);\n};\nconst addSalary = async (salary)=>{\n    await payrollService.addSalary(salary);\n};\nconst addProjectMultiplier = async (multiplier)=>{\n    await payrollService.addProjectMultiplier(multiplier);\n};\nconst processTimeEntries = async (clockifyEntries, clockifyUsers, projects)=>{\n    return await payrollService.processTimeEntries(clockifyEntries, clockifyUsers, projects);\n};\nconst generateProjectProfitabilityReport = async (projectId, startDate, endDate, employeeTimeEntries, revenue)=>{\n    return await payrollService.generateProjectProfitabilityReport(projectId, startDate, endDate, employeeTimeEntries, revenue);\n};\nconst generateEmployeeProfitabilityReport = async (employeeId, startDate, endDate, employeeTimeEntries)=>{\n    return await payrollService.generateEmployeeProfitabilityReport(employeeId, startDate, endDate, employeeTimeEntries);\n};\n// BambooHR specific functions\nconst configureBambooHR = async (config)=>{\n    await payrollService.configureBambooHR(config);\n};\nconst importBambooHRData = async ()=>{\n    return await payrollService.importSalariesFromBambooHR();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUFDQyxpQkFBaUJDLGVBQWVDO0FBQ2pGLEVBQUU7QUFFSyxNQUFNNEIscUNBQXFDLE9BQ2hEbkUsV0FDQW9FLFdBQ0E1RSxTQUNBZ0QscUJBQ0E2QjtJQUVBLE9BQU8sTUFBTXNFLGVBQWV4RSxrQ0FBa0MsQ0FDNURuRSxXQUFXb0UsV0FBVzVFLFNBQVNnRCxxQkFBcUI2QjtBQUV4RCxFQUFFO0FBRUssTUFBTXVCLHNDQUFzQyxPQUNqRHRHLFlBQ0E4RSxXQUNBNUUsU0FDQWdEO0lBRUEsT0FBTyxNQUFNbUcsZUFBZS9DLG1DQUFtQyxDQUM3RHRHLFlBQVk4RSxXQUFXNUUsU0FBU2dEO0FBRXBDLEVBQUU7QUFFRiw4QkFBOEI7QUFDdkIsTUFBTXhHLG9CQUFvQixPQUFPbUs7SUFDdEMsTUFBTXdDLGVBQWUzTSxpQkFBaUIsQ0FBQ21LO0FBQ3pDLEVBQUU7QUFFSyxNQUFNeUMscUJBQXFCO0lBQ2hDLE9BQU8sTUFBTUQsZUFBZW5DLDBCQUEwQjtBQUN4RCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vbGliL3BheXJvbGwudHM/YjcyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcbiAgRW1wbG95ZWUsIFxuICBFbXBsb3llZVNhbGFyeSwgXG4gIFByb2plY3RNdWx0aXBsaWVyLCBcbiAgRW1wbG95ZWVUaW1lRW50cnksIFxuICBQcm9qZWN0UHJvZml0YWJpbGl0eVJlcG9ydCxcbiAgRW1wbG95ZWVQcm9maXRhYmlsaXR5UmVwb3J0LFxuICBQYXlyb2xsU3lzdGVtLFxuICBTYWxhcnlJbXBvcnQsXG4gIEJhbWJvb0hSQ29uZmlnXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgQ2xvY2tpZnlUaW1lRW50cnksIENsb2NraWZ5VXNlciB9IGZyb20gJy4vY2xvY2tpZnknO1xuaW1wb3J0IHsgY29uZmlndXJlQmFtYm9vSFIgYXMgX2NvbmZpZ3VyZUJhbWJvb0hSU2VydmljZSwgZ2V0QmFtYm9vSFJTZXJ2aWNlLCBpbXBvcnRCYW1ib29IUkVtcGxveWVlcywgaW1wb3J0QmFtYm9vSFJTYWxhcmllcyB9IGZyb20gJy4vYmFtYm9vaHInO1xuaW1wb3J0IHsgXG4gIHNhdmVFbXBsb3llZSwgXG4gIHNhdmVFbXBsb3llZVNhbGFyeSwgXG4gIHNhdmVQcm9qZWN0TXVsdGlwbGllciwgXG4gIHNhdmVFbXBsb3llZVRpbWVFbnRyeSxcbiAgZ2V0QWxsRW1wbG95ZWVzIGFzIGRiR2V0QWxsRW1wbG95ZWVzLFxuICBnZXRBbGxFbXBsb3llZVNhbGFyaWVzIGFzIGRiR2V0QWxsRW1wbG95ZWVTYWxhcmllcyxcbiAgZ2V0QWxsUHJvamVjdE11bHRpcGxpZXJzIGFzIGRiR2V0QWxsUHJvamVjdE11bHRpcGxpZXJzLFxuICBnZXRBbGxFbXBsb3llZVRpbWVFbnRyaWVzIGFzIGRiR2V0QWxsRW1wbG95ZWVUaW1lRW50cmllcyxcbiAgc2F2ZUJhbWJvb0hSQ29uZmlnXG59IGZyb20gJy4vZGF0YWJhc2UnO1xuXG5leHBvcnQgY2xhc3MgUGF5cm9sbFNlcnZpY2Uge1xuICBwcml2YXRlIGVtcGxveWVlczogTWFwPHN0cmluZywgRW1wbG95ZWU+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHNhbGFyaWVzOiBNYXA8c3RyaW5nLCBFbXBsb3llZVNhbGFyeVtdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtdWx0aXBsaWVyczogTWFwPHN0cmluZywgUHJvamVjdE11bHRpcGxpZXJbXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcGF5cm9sbFN5c3RlbT86IFBheXJvbGxTeXN0ZW07XG4gIHByaXZhdGUgYmFtYm9vaHJDb25maWc/OiBCYW1ib29IUkNvbmZpZztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zb2xlLmxvZygnUGF5cm9sbCBzZXJ2aWNlIGluaXRpYWxpemVkJyk7XG4gIH1cblxuICBwcml2YXRlIG1hcERiRW1wbG95ZWVUb0RvbWFpbihkYkVtcGxveWVlOiBhbnkpOiBFbXBsb3llZSB7XG4gICAgY29uc3Qgc3RhdHVzVmFsdWUgPSAoZGJFbXBsb3llZS5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgc3RhdHVzOiAnYWN0aXZlJyB8ICdpbmFjdGl2ZScgPSBzdGF0dXNWYWx1ZSA9PT0gJ2FjdGl2ZScgPyAnYWN0aXZlJyA6ICdpbmFjdGl2ZSc7XG4gICAgY29uc3QgdG9Jc29EYXRlU3RyaW5nID0gKGQ6IGFueSB8IHVuZGVmaW5lZCB8IG51bGwpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgaWYgKCFkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgaWYgKHR5cGVvZiBkID09PSAnc3RyaW5nJykgcmV0dXJuIGQ7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBkLnRvSVNPU3RyaW5nKCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhc0RhdGUgPSBuZXcgRGF0ZShkKTtcbiAgICAgICAgcmV0dXJuIGlzTmFOKGFzRGF0ZS5nZXRUaW1lKCkpID8gdW5kZWZpbmVkIDogYXNEYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICBpZDogZGJFbXBsb3llZS5pZCxcbiAgICAgIG5hbWU6IGRiRW1wbG95ZWUubmFtZSxcbiAgICAgIGVtYWlsOiBkYkVtcGxveWVlLmVtYWlsLFxuICAgICAgc3RhdHVzLFxuICAgICAgZGVwYXJ0bWVudDogZGJFbXBsb3llZS5kZXBhcnRtZW50ID8/IHVuZGVmaW5lZCxcbiAgICAgIHBvc2l0aW9uOiBkYkVtcGxveWVlLnBvc2l0aW9uID8/IHVuZGVmaW5lZCxcbiAgICAgIGhpcmVEYXRlOiB0b0lzb0RhdGVTdHJpbmcoZGJFbXBsb3llZS5oaXJlRGF0ZSkgfHwgJycsXG4gICAgICB0ZXJtaW5hdGlvbkRhdGU6IHRvSXNvRGF0ZVN0cmluZyhkYkVtcGxveWVlLnRlcm1pbmF0aW9uRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdG9OdW1iZXIodmFsdWU6IGFueSk6IG51bWJlciB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiB2YWx1ZTtcbiAgICAvLyBQcmlzbWEgRGVjaW1hbCBoYXMgdG9OdW1iZXIoKTsgZmFsbCBiYWNrIHRvIHBhcnNlRmxvYXRcbiAgICBjb25zdCBtYXliZURlY2ltYWwgPSB2YWx1ZSBhcyB7IHRvTnVtYmVyPzogKCkgPT4gbnVtYmVyIH07XG4gICAgaWYgKG1heWJlRGVjaW1hbCAmJiB0eXBlb2YgbWF5YmVEZWNpbWFsLnRvTnVtYmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gbWF5YmVEZWNpbWFsLnRvTnVtYmVyKCk7XG4gICAgfVxuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlRmxvYXQoU3RyaW5nKHZhbHVlKSk7XG4gICAgcmV0dXJuIE51bWJlci5pc05hTihwYXJzZWQpID8gMCA6IHBhcnNlZDtcbiAgfVxuXG4gIHByaXZhdGUgbWFwRGJTYWxhcmllc1RvRG9tYWluKGRiU2FsYXJpZXM6IGFueVtdKTogRW1wbG95ZWVTYWxhcnlbXSB7XG4gICAgcmV0dXJuIChkYlNhbGFyaWVzIHx8IFtdKS5tYXAoKHM6IGFueSkgPT4gKHtcbiAgICAgIGVtcGxveWVlSWQ6IHMuZW1wbG95ZWVJZCxcbiAgICAgIGVmZmVjdGl2ZURhdGU6IHMuZWZmZWN0aXZlRGF0ZSxcbiAgICAgIGVuZERhdGU6IHMuZW5kRGF0ZSA/PyB1bmRlZmluZWQsXG4gICAgICBhbm51YWxTYWxhcnk6IHRoaXMudG9OdW1iZXIocy5hbm51YWxTYWxhcnkpLFxuICAgICAgaG91cmx5UmF0ZTogdGhpcy50b051bWJlcihzLmhvdXJseVJhdGUpLFxuICAgICAgY3VycmVuY3k6IHMuY3VycmVuY3kgPz8gdW5kZWZpbmVkLFxuICAgICAgbm90ZXM6IHMubm90ZXMgPz8gdW5kZWZpbmVkLFxuICAgIH0pKTtcbiAgfVxuXG4gIHByaXZhdGUgbWFwRGJNdWx0aXBsaWVyc1RvRG9tYWluKGRiTXVsdGlwbGllcnM6IGFueVtdKTogUHJvamVjdE11bHRpcGxpZXJbXSB7XG4gICAgcmV0dXJuIChkYk11bHRpcGxpZXJzIHx8IFtdKS5tYXAoKG06IGFueSkgPT4gKHtcbiAgICAgIHByb2plY3RJZDogbS5wcm9qZWN0SWQsXG4gICAgICBwcm9qZWN0TmFtZTogbS5wcm9qZWN0TmFtZSxcbiAgICAgIG11bHRpcGxpZXI6IHRoaXMudG9OdW1iZXIobS5tdWx0aXBsaWVyKSxcbiAgICAgIGVmZmVjdGl2ZURhdGU6IG0uZWZmZWN0aXZlRGF0ZSxcbiAgICAgIGVuZERhdGU6IG0uZW5kRGF0ZSA/PyB1bmRlZmluZWQsXG4gICAgICBub3RlczogbS5ub3RlcyA/PyB1bmRlZmluZWQsXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gRW1wbG95ZWUgTWFuYWdlbWVudFxuICBhc3luYyBhZGRFbXBsb3llZShlbXBsb3llZTogRW1wbG95ZWUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTYXZlIHRvIGRhdGFiYXNlXG4gICAgYXdhaXQgc2F2ZUVtcGxveWVlKGVtcGxveWVlKTtcbiAgICAvLyBBbHNvIGtlZXAgaW4gbWVtb3J5IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgdGhpcy5lbXBsb3llZXMuc2V0KGVtcGxveWVlLmlkLCBlbXBsb3llZSk7XG4gICAgY29uc29sZS5sb2coYEVtcGxveWVlIGFkZGVkOiAke2VtcGxveWVlLm5hbWV9ICgke2VtcGxveWVlLmlkfSlgKTtcbiAgfVxuXG4gIGFzeW5jIGdldEVtcGxveWVlKGVtcGxveWVlSWQ6IHN0cmluZyk6IFByb21pc2U8RW1wbG95ZWUgfCBudWxsPiB7XG4gICAgLy8gVHJ5IG1lbW9yeSBmaXJzdCwgdGhlbiBkYXRhYmFzZVxuICAgIGxldCBlbXBsb3llZSA9IHRoaXMuZW1wbG95ZWVzLmdldChlbXBsb3llZUlkKTtcbiAgICBpZiAoIWVtcGxveWVlKSB7XG4gICAgICAvLyBMb2FkIGZyb20gZGF0YWJhc2VcbiAgICAgIGNvbnN0IGRiRW1wbG95ZWVzID0gYXdhaXQgZGJHZXRBbGxFbXBsb3llZXMoKTtcbiAgICAgIGNvbnN0IGRiRW1wbG95ZWUgPSBkYkVtcGxveWVlcy5maW5kKChlbXA6IGFueSkgPT4gZW1wLmlkID09PSBlbXBsb3llZUlkKTtcbiAgICAgIGlmIChkYkVtcGxveWVlKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlZCA9IHRoaXMubWFwRGJFbXBsb3llZVRvRG9tYWluKGRiRW1wbG95ZWUpO1xuICAgICAgICB0aGlzLmVtcGxveWVlcy5zZXQoZW1wbG95ZWVJZCwgbWFwcGVkKTtcbiAgICAgICAgZW1wbG95ZWUgPSBtYXBwZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbXBsb3llZSB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsRW1wbG95ZWVzKCk6IFByb21pc2U8RW1wbG95ZWVbXT4ge1xuICAgIC8vIExvYWQgZnJvbSBkYXRhYmFzZSBhbmQgc3luYyBtZW1vcnlcbiAgICBjb25zdCBkYkVtcGxveWVlcyA9IGF3YWl0IGRiR2V0QWxsRW1wbG95ZWVzKCk7XG4gICAgLy8gVXBkYXRlIG1lbW9yeSBjYWNoZVxuICAgIGNvbnN0IG1hcHBlZCA9IGRiRW1wbG95ZWVzLm1hcCgoZW1wOiBhbnkpID0+IHRoaXMubWFwRGJFbXBsb3llZVRvRG9tYWluKGVtcCkpO1xuICAgIGZvciAoY29uc3QgZW1wIG9mIG1hcHBlZCkge1xuICAgICAgdGhpcy5lbXBsb3llZXMuc2V0KGVtcC5pZCwgZW1wKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcHBlZDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUVtcGxveWVlKGVtcGxveWVlSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxFbXBsb3llZT4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBlbXBsb3llZSA9IHRoaXMuZW1wbG95ZWVzLmdldChlbXBsb3llZUlkKTtcbiAgICBpZiAoZW1wbG95ZWUpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRFbXBsb3llZSA9IHsgLi4uZW1wbG95ZWUsIC4uLnVwZGF0ZXMgfTtcbiAgICAgIC8vIFNhdmUgdG8gZGF0YWJhc2VcbiAgICAgIGF3YWl0IHNhdmVFbXBsb3llZSh1cGRhdGVkRW1wbG95ZWUpO1xuICAgICAgLy8gVXBkYXRlIG1lbW9yeVxuICAgICAgdGhpcy5lbXBsb3llZXMuc2V0KGVtcGxveWVlSWQsIHVwZGF0ZWRFbXBsb3llZSk7XG4gICAgICBjb25zb2xlLmxvZyhgRW1wbG95ZWUgdXBkYXRlZDogJHtlbXBsb3llZS5uYW1lfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNhbGFyeSBNYW5hZ2VtZW50XG4gIGFzeW5jIGFkZFNhbGFyeShzYWxhcnk6IEVtcGxveWVlU2FsYXJ5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gU2F2ZSB0byBkYXRhYmFzZVxuICAgIGF3YWl0IHNhdmVFbXBsb3llZVNhbGFyeShzYWxhcnkpO1xuICAgIFxuICAgIC8vIEFsc28ga2VlcCBpbiBtZW1vcnkgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICBjb25zdCBlbXBsb3llZVNhbGFyaWVzID0gdGhpcy5zYWxhcmllcy5nZXQoc2FsYXJ5LmVtcGxveWVlSWQpIHx8IFtdO1xuICAgIFxuICAgIC8vIElmIHRoaXMgaXMgYSBuZXcgY3VycmVudCBzYWxhcnksIGVuZCB0aGUgcHJldmlvdXMgb25lXG4gICAgaWYgKCFzYWxhcnkuZW5kRGF0ZSkge1xuICAgICAgY29uc3QgY3VycmVudFNhbGFyeSA9IGVtcGxveWVlU2FsYXJpZXMuZmluZChzID0+ICFzLmVuZERhdGUpO1xuICAgICAgaWYgKGN1cnJlbnRTYWxhcnkpIHtcbiAgICAgICAgY3VycmVudFNhbGFyeS5lbmREYXRlID0gc2FsYXJ5LmVmZmVjdGl2ZURhdGU7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcHJldmlvdXMgc2FsYXJ5IGluIGRhdGFiYXNlXG4gICAgICAgIGF3YWl0IHNhdmVFbXBsb3llZVNhbGFyeShjdXJyZW50U2FsYXJ5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZW1wbG95ZWVTYWxhcmllcy5wdXNoKHNhbGFyeSk7XG4gICAgZW1wbG95ZWVTYWxhcmllcy5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShhLmVmZmVjdGl2ZURhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZWZmZWN0aXZlRGF0ZSkuZ2V0VGltZSgpKTtcbiAgICBcbiAgICB0aGlzLnNhbGFyaWVzLnNldChzYWxhcnkuZW1wbG95ZWVJZCwgZW1wbG95ZWVTYWxhcmllcyk7XG4gICAgY29uc29sZS5sb2coYFNhbGFyeSBhZGRlZCBmb3IgJHtzYWxhcnkuZW1wbG95ZWVJZH0gZWZmZWN0aXZlICR7c2FsYXJ5LmVmZmVjdGl2ZURhdGV9YCk7XG4gIH1cblxuICBhc3luYyBnZXRFbXBsb3llZVNhbGFyeShlbXBsb3llZUlkOiBzdHJpbmcsIGRhdGU6IHN0cmluZyk6IFByb21pc2U8RW1wbG95ZWVTYWxhcnkgfCBudWxsPiB7XG4gICAgLy8gVHJ5IG1lbW9yeSBmaXJzdCwgdGhlbiBkYXRhYmFzZVxuICAgIGxldCBlbXBsb3llZVNhbGFyaWVzID0gdGhpcy5zYWxhcmllcy5nZXQoZW1wbG95ZWVJZCk7XG4gICAgaWYgKCFlbXBsb3llZVNhbGFyaWVzIHx8IGVtcGxveWVlU2FsYXJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBMb2FkIGZyb20gZGF0YWJhc2VcbiAgICAgIGNvbnN0IGRiU2FsYXJpZXMgPSBhd2FpdCBkYkdldEFsbEVtcGxveWVlU2FsYXJpZXMoKTtcbiAgICAgIGNvbnN0IGVtcGxveWVlRGJTYWxhcmllcyA9IGRiU2FsYXJpZXMuZmlsdGVyKChzOiBhbnkpID0+IHMuZW1wbG95ZWVJZCA9PT0gZW1wbG95ZWVJZCk7XG4gICAgICBpZiAoZW1wbG95ZWVEYlNhbGFyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5tYXBEYlNhbGFyaWVzVG9Eb21haW4oZW1wbG95ZWVEYlNhbGFyaWVzKTtcbiAgICAgICAgdGhpcy5zYWxhcmllcy5zZXQoZW1wbG95ZWVJZCwgbWFwcGVkKTtcbiAgICAgICAgZW1wbG95ZWVTYWxhcmllcyA9IG1hcHBlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKCFlbXBsb3llZVNhbGFyaWVzKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBjb25zdCB0YXJnZXREYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgXG4gICAgcmV0dXJuIGVtcGxveWVlU2FsYXJpZXMuZmluZChzYWxhcnkgPT4ge1xuICAgICAgY29uc3QgZWZmZWN0aXZlRGF0ZSA9IG5ldyBEYXRlKHNhbGFyeS5lZmZlY3RpdmVEYXRlKTtcbiAgICAgIGNvbnN0IGVuZERhdGUgPSBzYWxhcnkuZW5kRGF0ZSA/IG5ldyBEYXRlKHNhbGFyeS5lbmREYXRlKSA6IG5ldyBEYXRlKCc5OTk5LTEyLTMxJyk7XG4gICAgICByZXR1cm4gdGFyZ2V0RGF0ZSA+PSBlZmZlY3RpdmVEYXRlICYmIHRhcmdldERhdGUgPD0gZW5kRGF0ZTtcbiAgICB9KSB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0RW1wbG95ZWVTYWxhcnlIaXN0b3J5KGVtcGxveWVlSWQ6IHN0cmluZyk6IFByb21pc2U8RW1wbG95ZWVTYWxhcnlbXT4ge1xuICAgIC8vIFRyeSBtZW1vcnkgZmlyc3QsIHRoZW4gZGF0YWJhc2VcbiAgICBsZXQgZW1wbG95ZWVTYWxhcmllcyA9IHRoaXMuc2FsYXJpZXMuZ2V0KGVtcGxveWVlSWQpO1xuICAgIGlmICghZW1wbG95ZWVTYWxhcmllcyB8fCBlbXBsb3llZVNhbGFyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gTG9hZCBmcm9tIGRhdGFiYXNlXG4gICAgICBjb25zdCBkYlNhbGFyaWVzID0gYXdhaXQgZGJHZXRBbGxFbXBsb3llZVNhbGFyaWVzKCk7XG4gICAgICBjb25zdCBlbXBsb3llZURiU2FsYXJpZXMgPSBkYlNhbGFyaWVzLmZpbHRlcigoczogYW55KSA9PiBzLmVtcGxveWVlSWQgPT09IGVtcGxveWVlSWQpO1xuICAgICAgaWYgKGVtcGxveWVlRGJTYWxhcmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlZCA9IHRoaXMubWFwRGJTYWxhcmllc1RvRG9tYWluKGVtcGxveWVlRGJTYWxhcmllcyk7XG4gICAgICAgIHRoaXMuc2FsYXJpZXMuc2V0KGVtcGxveWVlSWQsIG1hcHBlZCk7XG4gICAgICAgIGVtcGxveWVlU2FsYXJpZXMgPSBtYXBwZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbXBsb3llZVNhbGFyaWVzIHx8IFtdO1xuICB9XG5cbiAgLy8gUHJvamVjdCBNdWx0aXBsaWVyIE1hbmFnZW1lbnRcbiAgYXN5bmMgYWRkUHJvamVjdE11bHRpcGxpZXIobXVsdGlwbGllcjogUHJvamVjdE11bHRpcGxpZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTYXZlIHRvIGRhdGFiYXNlXG4gICAgYXdhaXQgc2F2ZVByb2plY3RNdWx0aXBsaWVyKG11bHRpcGxpZXIpO1xuICAgIFxuICAgIC8vIEFsc28ga2VlcCBpbiBtZW1vcnkgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICBjb25zdCBwcm9qZWN0TXVsdGlwbGllcnMgPSB0aGlzLm11bHRpcGxpZXJzLmdldChtdWx0aXBsaWVyLnByb2plY3RJZCkgfHwgW107XG4gICAgXG4gICAgLy8gSWYgdGhpcyBpcyBhIG5ldyBjdXJyZW50IG11bHRpcGxpZXIsIGVuZCB0aGUgcHJldmlvdXMgb25lXG4gICAgaWYgKCFtdWx0aXBsaWVyLmVuZERhdGUpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRNdWx0aXBsaWVyID0gcHJvamVjdE11bHRpcGxpZXJzLmZpbmQobSA9PiAhbS5lbmREYXRlKTtcbiAgICAgIGlmIChjdXJyZW50TXVsdGlwbGllcikge1xuICAgICAgICBjdXJyZW50TXVsdGlwbGllci5lbmREYXRlID0gbXVsdGlwbGllci5lZmZlY3RpdmVEYXRlO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIHByZXZpb3VzIG11bHRpcGxpZXIgaW4gZGF0YWJhc2VcbiAgICAgICAgYXdhaXQgc2F2ZVByb2plY3RNdWx0aXBsaWVyKGN1cnJlbnRNdWx0aXBsaWVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJvamVjdE11bHRpcGxpZXJzLnB1c2gobXVsdGlwbGllcik7XG4gICAgcHJvamVjdE11bHRpcGxpZXJzLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGEuZWZmZWN0aXZlRGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5lZmZlY3RpdmVEYXRlKS5nZXRUaW1lKCkpO1xuICAgIFxuICAgIHRoaXMubXVsdGlwbGllcnMuc2V0KG11bHRpcGxpZXIucHJvamVjdElkLCBwcm9qZWN0TXVsdGlwbGllcnMpO1xuICAgIGNvbnNvbGUubG9nKGBNdWx0aXBsaWVyIGFkZGVkIGZvciBwcm9qZWN0ICR7bXVsdGlwbGllci5wcm9qZWN0TmFtZX0gZWZmZWN0aXZlICR7bXVsdGlwbGllci5lZmZlY3RpdmVEYXRlfWApO1xuICB9XG5cbiAgYXN5bmMgZ2V0UHJvamVjdE11bHRpcGxpZXIocHJvamVjdElkOiBzdHJpbmcsIGRhdGU6IHN0cmluZyk6IFByb21pc2U8UHJvamVjdE11bHRpcGxpZXIgfCBudWxsPiB7XG4gICAgLy8gVHJ5IG1lbW9yeSBmaXJzdCwgdGhlbiBkYXRhYmFzZVxuICAgIGxldCBwcm9qZWN0TXVsdGlwbGllcnMgPSB0aGlzLm11bHRpcGxpZXJzLmdldChwcm9qZWN0SWQpO1xuICAgIGlmICghcHJvamVjdE11bHRpcGxpZXJzIHx8IHByb2plY3RNdWx0aXBsaWVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIExvYWQgZnJvbSBkYXRhYmFzZVxuICAgICAgY29uc3QgZGJNdWx0aXBsaWVycyA9IGF3YWl0IGRiR2V0QWxsUHJvamVjdE11bHRpcGxpZXJzKCk7XG4gICAgICBjb25zdCBwcm9qZWN0RGJNdWx0aXBsaWVycyA9IGRiTXVsdGlwbGllcnMuZmlsdGVyKChtOiBhbnkpID0+IG0ucHJvamVjdElkID09PSBwcm9qZWN0SWQpO1xuICAgICAgaWYgKHByb2plY3REYk11bHRpcGxpZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5tYXBEYk11bHRpcGxpZXJzVG9Eb21haW4ocHJvamVjdERiTXVsdGlwbGllcnMpO1xuICAgICAgICB0aGlzLm11bHRpcGxpZXJzLnNldChwcm9qZWN0SWQsIG1hcHBlZCk7XG4gICAgICAgIHByb2plY3RNdWx0aXBsaWVycyA9IG1hcHBlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKCFwcm9qZWN0TXVsdGlwbGllcnMpIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IHRhcmdldERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICBcbiAgICByZXR1cm4gcHJvamVjdE11bHRpcGxpZXJzLmZpbmQobXVsdGlwbGllciA9PiB7XG4gICAgICBjb25zdCBlZmZlY3RpdmVEYXRlID0gbmV3IERhdGUobXVsdGlwbGllci5lZmZlY3RpdmVEYXRlKTtcbiAgICAgIGNvbnN0IGVuZERhdGUgPSBtdWx0aXBsaWVyLmVuZERhdGUgPyBuZXcgRGF0ZShtdWx0aXBsaWVyLmVuZERhdGUpIDogbmV3IERhdGUoJzk5OTktMTItMzEnKTtcbiAgICAgIHJldHVybiB0YXJnZXREYXRlID49IGVmZmVjdGl2ZURhdGUgJiYgdGFyZ2V0RGF0ZSA8PSBlbmREYXRlO1xuICAgIH0pIHx8IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0TXVsdGlwbGllckhpc3RvcnkocHJvamVjdElkOiBzdHJpbmcpOiBQcm9taXNlPFByb2plY3RNdWx0aXBsaWVyW10+IHtcbiAgICAvLyBUcnkgbWVtb3J5IGZpcnN0LCB0aGVuIGRhdGFiYXNlXG4gICAgbGV0IHByb2plY3RNdWx0aXBsaWVycyA9IHRoaXMubXVsdGlwbGllcnMuZ2V0KHByb2plY3RJZCk7XG4gICAgaWYgKCFwcm9qZWN0TXVsdGlwbGllcnMgfHwgcHJvamVjdE11bHRpcGxpZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gTG9hZCBmcm9tIGRhdGFiYXNlXG4gICAgICBjb25zdCBkYk11bHRpcGxpZXJzID0gYXdhaXQgZGJHZXRBbGxQcm9qZWN0TXVsdGlwbGllcnMoKTtcbiAgICAgIGNvbnN0IHByb2plY3REYk11bHRpcGxpZXJzID0gZGJNdWx0aXBsaWVycy5maWx0ZXIoKG06IGFueSkgPT4gbS5wcm9qZWN0SWQgPT09IHByb2plY3RJZCk7XG4gICAgICBpZiAocHJvamVjdERiTXVsdGlwbGllcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBtYXBwZWQgPSB0aGlzLm1hcERiTXVsdGlwbGllcnNUb0RvbWFpbihwcm9qZWN0RGJNdWx0aXBsaWVycyk7XG4gICAgICAgIHRoaXMubXVsdGlwbGllcnMuc2V0KHByb2plY3RJZCwgbWFwcGVkKTtcbiAgICAgICAgcHJvamVjdE11bHRpcGxpZXJzID0gbWFwcGVkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJvamVjdE11bHRpcGxpZXJzIHx8IFtdO1xuICB9XG5cbiAgLy8gVGltZSBFbnRyeSBQcm9jZXNzaW5nIHdpdGggSGlzdG9yaWNhbCBSYXRlc1xuICBhc3luYyBwcm9jZXNzVGltZUVudHJpZXMoXG4gICAgY2xvY2tpZnlFbnRyaWVzOiBDbG9ja2lmeVRpbWVFbnRyeVtdLFxuICAgIGNsb2NraWZ5VXNlcnM6IENsb2NraWZ5VXNlcltdLFxuICAgIHByb2plY3RzOiBhbnlbXVxuICApOiBQcm9taXNlPEVtcGxveWVlVGltZUVudHJ5W10+IHtcbiAgICBjb25zdCBlbXBsb3llZVRpbWVFbnRyaWVzOiBFbXBsb3llZVRpbWVFbnRyeVtdID0gW107XG4gICAgY29uc3QgdXNlck1hcCA9IG5ldyBNYXAoY2xvY2tpZnlVc2Vycy5tYXAodXNlciA9PiBbdXNlci5pZCwgdXNlcl0pKTtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgY2xvY2tpZnlFbnRyaWVzKSB7XG4gICAgICBjb25zdCB1c2VyID0gdXNlck1hcC5nZXQoZW50cnkudXNlcklkKTtcbiAgICAgIGlmICghdXNlcikgY29udGludWU7XG5cbiAgICAgIGNvbnN0IGVudHJ5RGF0ZSA9IG5ldyBEYXRlKGVudHJ5LnRpbWVJbnRlcnZhbC5zdGFydCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgY29uc3QgZW1wbG95ZWUgPSBhd2FpdCB0aGlzLmdldEVtcGxveWVlKGVudHJ5LnVzZXJJZCk7XG4gICAgICBpZiAoIWVtcGxveWVlKSBjb250aW51ZTtcblxuICAgICAgY29uc3Qgc2FsYXJ5ID0gYXdhaXQgdGhpcy5nZXRFbXBsb3llZVNhbGFyeShlbnRyeS51c2VySWQsIGVudHJ5RGF0ZSk7XG4gICAgICBpZiAoIXNhbGFyeSkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gZW50cnkucHJvamVjdElkKTtcbiAgICAgIGlmICghcHJvamVjdCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBhd2FpdCB0aGlzLmdldFByb2plY3RNdWx0aXBsaWVyKGVudHJ5LnByb2plY3RJZCwgZW50cnlEYXRlKTtcbiAgICAgIGNvbnN0IHByb2plY3RNdWx0aXBsaWVyID0gbXVsdGlwbGllcj8ubXVsdGlwbGllciB8fCAxLjA7XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uTXMgPSB0aGlzLnBhcnNlRHVyYXRpb24oZW50cnkudGltZUludGVydmFsLmR1cmF0aW9uKTtcbiAgICAgIGNvbnN0IGhvdXJzID0gZHVyYXRpb25NcyAvICgxMDAwICogNjAgKiA2MCk7XG4gICAgICBjb25zdCBiaWxsYWJsZUhvdXJzID0gZW50cnkuYmlsbGFibGUgPyBob3VycyA6IDA7XG4gICAgICBjb25zdCBub25CaWxsYWJsZUhvdXJzID0gZW50cnkuYmlsbGFibGUgPyAwIDogaG91cnM7XG5cbiAgICAgIGNvbnN0IHRvdGFsQ29zdCA9IGhvdXJzICogc2FsYXJ5LmhvdXJseVJhdGU7XG4gICAgICBjb25zdCBiaWxsYWJsZVZhbHVlID0gYmlsbGFibGVIb3VycyAqIHNhbGFyeS5ob3VybHlSYXRlICogcHJvamVjdE11bHRpcGxpZXI7XG4gICAgICBjb25zdCBlZmZpY2llbmN5ID0gaG91cnMgPiAwID8gYmlsbGFibGVIb3VycyAvIGhvdXJzIDogMDtcblxuICAgICAgY29uc3QgdGltZUVudHJ5ID0ge1xuICAgICAgICBlbXBsb3llZUlkOiBlbnRyeS51c2VySWQsXG4gICAgICAgIGVtcGxveWVlTmFtZTogdXNlci5uYW1lLFxuICAgICAgICBwcm9qZWN0SWQ6IGVudHJ5LnByb2plY3RJZCxcbiAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3QubmFtZSxcbiAgICAgICAgZGF0ZTogZW50cnlEYXRlLFxuICAgICAgICBob3VycyxcbiAgICAgICAgYmlsbGFibGVIb3VycyxcbiAgICAgICAgbm9uQmlsbGFibGVIb3VycyxcbiAgICAgICAgaG91cmx5UmF0ZTogc2FsYXJ5LmhvdXJseVJhdGUsXG4gICAgICAgIHByb2plY3RNdWx0aXBsaWVyLFxuICAgICAgICB0b3RhbENvc3QsXG4gICAgICAgIGJpbGxhYmxlVmFsdWUsXG4gICAgICAgIGVmZmljaWVuY3ksXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlbnRyeS5kZXNjcmlwdGlvbixcbiAgICAgICAgdGFnczogZW50cnkudGFncy5tYXAodGFnID0+IHRhZy5uYW1lKVxuICAgICAgfTtcblxuICAgICAgLy8gU2F2ZSB0byBkYXRhYmFzZVxuICAgICAgYXdhaXQgc2F2ZUVtcGxveWVlVGltZUVudHJ5KHRpbWVFbnRyeSk7XG5cbiAgICAgIGVtcGxveWVlVGltZUVudHJpZXMucHVzaCh0aW1lRW50cnkpO1xuICAgIH1cblxuICAgIHJldHVybiBlbXBsb3llZVRpbWVFbnRyaWVzO1xuICB9XG5cbiAgLy8gUHJvZml0YWJpbGl0eSBBbmFseXNpc1xuICBhc3luYyBnZW5lcmF0ZVByb2plY3RQcm9maXRhYmlsaXR5UmVwb3J0KFxuICAgIHByb2plY3RJZDogc3RyaW5nLFxuICAgIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICAgIGVuZERhdGU6IHN0cmluZyxcbiAgICBlbXBsb3llZVRpbWVFbnRyaWVzOiBFbXBsb3llZVRpbWVFbnRyeVtdLFxuICAgIHJldmVudWU6IG51bWJlclxuICApOiBQcm9taXNlPFByb2plY3RQcm9maXRhYmlsaXR5UmVwb3J0PiB7XG4gICAgY29uc3QgcHJvamVjdEVudHJpZXMgPSBlbXBsb3llZVRpbWVFbnRyaWVzLmZpbHRlcihlbnRyeSA9PiBcbiAgICAgIGVudHJ5LnByb2plY3RJZCA9PT0gcHJvamVjdElkICYmXG4gICAgICBlbnRyeS5kYXRlID49IHN0YXJ0RGF0ZSAmJlxuICAgICAgZW50cnkuZGF0ZSA8PSBlbmREYXRlXG4gICAgKTtcblxuICAgIGNvbnN0IHRvdGFsSG91cnMgPSBwcm9qZWN0RW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIGVudHJ5LmhvdXJzLCAwKTtcbiAgICBjb25zdCB0b3RhbEJpbGxhYmxlSG91cnMgPSBwcm9qZWN0RW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIGVudHJ5LmJpbGxhYmxlSG91cnMsIDApO1xuICAgIGNvbnN0IHRvdGFsQ29zdCA9IHByb2plY3RFbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkudG90YWxDb3N0LCAwKTtcbiAgICBjb25zdCB0b3RhbEJpbGxhYmxlVmFsdWUgPSBwcm9qZWN0RW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIGVudHJ5LmJpbGxhYmxlVmFsdWUsIDApO1xuXG4gICAgY29uc3QgZ3Jvc3NQcm9maXQgPSByZXZlbnVlIC0gdG90YWxDb3N0O1xuICAgIGNvbnN0IHByb2ZpdE1hcmdpbiA9IHJldmVudWUgPiAwID8gKGdyb3NzUHJvZml0IC8gcmV2ZW51ZSkgKiAxMDAgOiAwO1xuICAgIGNvbnN0IGF2ZXJhZ2VNdWx0aXBsaWVyID0gdG90YWxCaWxsYWJsZUhvdXJzID4gMCA/IHRvdGFsQmlsbGFibGVWYWx1ZSAvICh0b3RhbEJpbGxhYmxlSG91cnMgKiBwcm9qZWN0RW50cmllc1swXT8uaG91cmx5UmF0ZSB8fCAxKSA6IDA7XG5cbiAgICAvLyBFbXBsb3llZSBicmVha2Rvd25cbiAgICBjb25zdCBlbXBsb3llZUJyZWFrZG93biA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBwcm9qZWN0RW50cmllcykge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBlbXBsb3llZUJyZWFrZG93bi5nZXQoZW50cnkuZW1wbG95ZWVJZCk7XG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgZXhpc3RpbmcuaG91cnMgKz0gZW50cnkuaG91cnM7XG4gICAgICAgIGV4aXN0aW5nLmNvc3QgKz0gZW50cnkudG90YWxDb3N0O1xuICAgICAgICBleGlzdGluZy5iaWxsYWJsZVZhbHVlICs9IGVudHJ5LmJpbGxhYmxlVmFsdWU7XG4gICAgICAgIGV4aXN0aW5nLmVmZmljaWVuY3kgPSBleGlzdGluZy5ob3VycyA+IDAgPyBleGlzdGluZy5iaWxsYWJsZVZhbHVlIC8gKGV4aXN0aW5nLmhvdXJzICogZW50cnkuaG91cmx5UmF0ZSkgOiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW1wbG95ZWVCcmVha2Rvd24uc2V0KGVudHJ5LmVtcGxveWVlSWQsIHtcbiAgICAgICAgICBlbXBsb3llZUlkOiBlbnRyeS5lbXBsb3llZUlkLFxuICAgICAgICAgIGVtcGxveWVlTmFtZTogZW50cnkuZW1wbG95ZWVOYW1lLFxuICAgICAgICAgIGhvdXJzOiBlbnRyeS5ob3VycyxcbiAgICAgICAgICBjb3N0OiBlbnRyeS50b3RhbENvc3QsXG4gICAgICAgICAgYmlsbGFibGVWYWx1ZTogZW50cnkuYmlsbGFibGVWYWx1ZSxcbiAgICAgICAgICBlZmZpY2llbmN5OiBlbnRyeS5lZmZpY2llbmN5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vbnRobHkgYnJlYWtkb3duXG4gICAgY29uc3QgbW9udGhseUJyZWFrZG93biA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBwcm9qZWN0RW50cmllcykge1xuICAgICAgY29uc3QgbW9udGggPSBlbnRyeS5kYXRlLnN1YnN0cmluZygwLCA3KTsgLy8gWVlZWS1NTVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBtb250aGx5QnJlYWtkb3duLmdldChtb250aCk7XG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgZXhpc3RpbmcuaG91cnMgKz0gZW50cnkuaG91cnM7XG4gICAgICAgIGV4aXN0aW5nLmNvc3QgKz0gZW50cnkudG90YWxDb3N0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW9udGhseUJyZWFrZG93bi5zZXQobW9udGgsIHtcbiAgICAgICAgICBtb250aCxcbiAgICAgICAgICBob3VyczogZW50cnkuaG91cnMsXG4gICAgICAgICAgY29zdDogZW50cnkudG90YWxDb3N0LFxuICAgICAgICAgIHJldmVudWU6IDAsIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBjYWxjdWxhdGVkIGZyb20gYmlsbGluZyBkYXRhXG4gICAgICAgICAgcHJvZml0OiAwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwcm9qZWN0SWQsXG4gICAgICBwcm9qZWN0TmFtZTogcHJvamVjdEVudHJpZXNbMF0/LnByb2plY3ROYW1lIHx8ICdVbmtub3duIFByb2plY3QnLFxuICAgICAgcGVyaW9kOiB7IHN0YXJ0OiBzdGFydERhdGUsIGVuZDogZW5kRGF0ZSB9LFxuICAgICAgdG90YWxIb3VycyxcbiAgICAgIHRvdGFsQmlsbGFibGVIb3VycyxcbiAgICAgIHRvdGFsQ29zdCxcbiAgICAgIHRvdGFsUmV2ZW51ZTogcmV2ZW51ZSxcbiAgICAgIGdyb3NzUHJvZml0LFxuICAgICAgcHJvZml0TWFyZ2luLFxuICAgICAgYXZlcmFnZU11bHRpcGxpZXIsXG4gICAgICBlbXBsb3llZUJyZWFrZG93bjogQXJyYXkuZnJvbShlbXBsb3llZUJyZWFrZG93bi52YWx1ZXMoKSksXG4gICAgICBtb250aGx5QnJlYWtkb3duOiBBcnJheS5mcm9tKG1vbnRobHlCcmVha2Rvd24udmFsdWVzKCkpXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlRW1wbG95ZWVQcm9maXRhYmlsaXR5UmVwb3J0KFxuICAgIGVtcGxveWVlSWQ6IHN0cmluZyxcbiAgICBzdGFydERhdGU6IHN0cmluZyxcbiAgICBlbmREYXRlOiBzdHJpbmcsXG4gICAgZW1wbG95ZWVUaW1lRW50cmllczogRW1wbG95ZWVUaW1lRW50cnlbXVxuICApOiBQcm9taXNlPEVtcGxveWVlUHJvZml0YWJpbGl0eVJlcG9ydD4ge1xuICAgIGNvbnN0IGVtcGxveWVlRW50cmllcyA9IGVtcGxveWVlVGltZUVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IFxuICAgICAgZW50cnkuZW1wbG95ZWVJZCA9PT0gZW1wbG95ZWVJZCAmJlxuICAgICAgZW50cnkuZGF0ZSA+PSBzdGFydERhdGUgJiZcbiAgICAgIGVudHJ5LmRhdGUgPD0gZW5kRGF0ZVxuICAgICk7XG5cbiAgICBjb25zdCB0b3RhbEhvdXJzID0gZW1wbG95ZWVFbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkuaG91cnMsIDApO1xuICAgIGNvbnN0IHRvdGFsQmlsbGFibGVIb3VycyA9IGVtcGxveWVlRW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIGVudHJ5LmJpbGxhYmxlSG91cnMsIDApO1xuICAgIGNvbnN0IHRvdGFsQ29zdCA9IGVtcGxveWVlRW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIGVudHJ5LnRvdGFsQ29zdCwgMCk7XG4gICAgY29uc3QgdG90YWxCaWxsYWJsZVZhbHVlID0gZW1wbG95ZWVFbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkuYmlsbGFibGVWYWx1ZSwgMCk7XG4gICAgY29uc3QgZWZmaWNpZW5jeSA9IHRvdGFsSG91cnMgPiAwID8gdG90YWxCaWxsYWJsZUhvdXJzIC8gdG90YWxIb3VycyA6IDA7XG4gICAgY29uc3QgYXZlcmFnZUhvdXJseVJhdGUgPSB0b3RhbEhvdXJzID4gMCA/IHRvdGFsQ29zdCAvIHRvdGFsSG91cnMgOiAwO1xuXG4gICAgLy8gUHJvamVjdCBicmVha2Rvd25cbiAgICBjb25zdCBwcm9qZWN0QnJlYWtkb3duID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVtcGxveWVlRW50cmllcykge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBwcm9qZWN0QnJlYWtkb3duLmdldChlbnRyeS5wcm9qZWN0SWQpO1xuICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgIGV4aXN0aW5nLmhvdXJzICs9IGVudHJ5LmhvdXJzO1xuICAgICAgICBleGlzdGluZy5jb3N0ICs9IGVudHJ5LnRvdGFsQ29zdDtcbiAgICAgICAgZXhpc3RpbmcuYmlsbGFibGVWYWx1ZSArPSBlbnRyeS5iaWxsYWJsZVZhbHVlO1xuICAgICAgICBleGlzdGluZy5lZmZpY2llbmN5ID0gZXhpc3RpbmcuaG91cnMgPiAwID8gZXhpc3RpbmcuYmlsbGFibGVWYWx1ZSAvIChleGlzdGluZy5ob3VycyAqIGVudHJ5LmhvdXJseVJhdGUpIDogMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2plY3RCcmVha2Rvd24uc2V0KGVudHJ5LnByb2plY3RJZCwge1xuICAgICAgICAgIHByb2plY3RJZDogZW50cnkucHJvamVjdElkLFxuICAgICAgICAgIHByb2plY3ROYW1lOiBlbnRyeS5wcm9qZWN0TmFtZSxcbiAgICAgICAgICBob3VyczogZW50cnkuaG91cnMsXG4gICAgICAgICAgY29zdDogZW50cnkudG90YWxDb3N0LFxuICAgICAgICAgIGJpbGxhYmxlVmFsdWU6IGVudHJ5LmJpbGxhYmxlVmFsdWUsXG4gICAgICAgICAgZWZmaWNpZW5jeTogZW50cnkuZWZmaWNpZW5jeVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZW1wbG95ZWVJZCxcbiAgICAgIGVtcGxveWVlTmFtZTogZW1wbG95ZWVFbnRyaWVzWzBdPy5lbXBsb3llZU5hbWUgfHwgJ1Vua25vd24gRW1wbG95ZWUnLFxuICAgICAgcGVyaW9kOiB7IHN0YXJ0OiBzdGFydERhdGUsIGVuZDogZW5kRGF0ZSB9LFxuICAgICAgdG90YWxIb3VycyxcbiAgICAgIHRvdGFsQmlsbGFibGVIb3VycyxcbiAgICAgIHRvdGFsQ29zdCxcbiAgICAgIHRvdGFsQmlsbGFibGVWYWx1ZSxcbiAgICAgIGVmZmljaWVuY3ksXG4gICAgICBhdmVyYWdlSG91cmx5UmF0ZSxcbiAgICAgIHByb2plY3RCcmVha2Rvd246IEFycmF5LmZyb20ocHJvamVjdEJyZWFrZG93bi52YWx1ZXMoKSlcbiAgICB9O1xuICB9XG5cbiAgLy8gUGF5cm9sbCBTeXN0ZW0gSW50ZWdyYXRpb25cbiAgYXN5bmMgY29uZmlndXJlUGF5cm9sbFN5c3RlbShzeXN0ZW06IFBheXJvbGxTeXN0ZW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnBheXJvbGxTeXN0ZW0gPSBzeXN0ZW07XG4gICAgY29uc29sZS5sb2coYFBheXJvbGwgc3lzdGVtIGNvbmZpZ3VyZWQ6ICR7c3lzdGVtLm5hbWV9YCk7XG4gIH1cblxuICAvLyBCYW1ib29IUiBJbnRlZ3JhdGlvblxuICBhc3luYyBjb25maWd1cmVCYW1ib29IUihjb25maWc6IEJhbWJvb0hSQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5iYW1ib29ockNvbmZpZyA9IGNvbmZpZztcbiAgICBfY29uZmlndXJlQmFtYm9vSFJTZXJ2aWNlKGNvbmZpZyk7XG4gICAgXG4gICAgLy8gU2F2ZSBjb25maWd1cmF0aW9uIHRvIGRhdGFiYXNlXG4gICAgYXdhaXQgc2F2ZUJhbWJvb0hSQ29uZmlnKHtcbiAgICAgIHN1YmRvbWFpbjogY29uZmlnLnN1YmRvbWFpbixcbiAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcbiAgICAgIHdlYmhvb2tTZWNyZXQ6IGNvbmZpZy53ZWJob29rU2VjcmV0XG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYEJhbWJvb0hSIGNvbmZpZ3VyZWQgZm9yIHN1YmRvbWFpbjogJHtjb25maWcuc3ViZG9tYWlufWApO1xuICB9XG5cbiAgYXN5bmMgaW1wb3J0U2FsYXJpZXNGcm9tQmFtYm9vSFIoKTogUHJvbWlzZTxTYWxhcnlJbXBvcnQ+IHtcbiAgICBpZiAoIXRoaXMuYmFtYm9vaHJDb25maWcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQmFtYm9vSFIgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfmoAgU3RhcnRpbmcgQmFtYm9vSFIgZGF0YSBpbXBvcnQgcHJvY2Vzcy4uLicpO1xuICAgICAgXG4gICAgICAvLyBJbXBvcnQgZW1wbG95ZWVzIGZyb20gQmFtYm9vSFJcbiAgICAgIGNvbnN0IGJhbWJvb2hyRW1wbG95ZWVzID0gYXdhaXQgaW1wb3J0QmFtYm9vSFJFbXBsb3llZXMoKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIEJhbWJvb0hSIGltcG9ydDogUmV0cmlldmVkICR7YmFtYm9vaHJFbXBsb3llZXMubGVuZ3RofSBlbXBsb3llZXMgZnJvbSBCYW1ib29IUiBBUElgKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIEJhbWJvb0hSIGltcG9ydDogQmVnaW5uaW5nIFN1cGFiYXNlIHVwc2VydCBmb3IgJHtiYW1ib29ockVtcGxveWVlcy5sZW5ndGh9IGVtcGxveWVlcy4uLmApO1xuICAgICAgXG4gICAgICBsZXQgZW1wbG95ZWVTdWNjZXNzID0gMDtcbiAgICAgIGNvbnN0IGVtcGxveWVlRXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBlbXBsb3llZSBvZiBiYW1ib29ockVtcGxveWVlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkRW1wbG95ZWUoZW1wbG95ZWUpO1xuICAgICAgICAgIGVtcGxveWVlU3VjY2VzcyArPSAxO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgRW1wbG95ZWUgdXBzZXJ0IHN1Y2Nlc3M6ICR7ZW1wbG95ZWUubmFtZX0gKCR7ZW1wbG95ZWUuaWR9KWApO1xuICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQmFtYm9vSFIgZW1wbG95ZWUgdXBzZXJ0IGZhaWxlZDonLCB7XG4gICAgICAgICAgICBpZDogZW1wbG95ZWUuaWQsXG4gICAgICAgICAgICBuYW1lOiBlbXBsb3llZS5uYW1lLFxuICAgICAgICAgICAgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgU3RyaW5nKGUpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZW1wbG95ZWVFcnJvcnMucHVzaChgZW1wOiR7ZW1wbG95ZWUuaWR9OiR7ZT8ubWVzc2FnZSB8fCBlfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhg8J+TiCBFbXBsb3llZSBpbXBvcnQgcmVzdWx0czogJHtlbXBsb3llZVN1Y2Nlc3N9IHN1Y2Nlc3NlcywgJHtlbXBsb3llZUVycm9ycy5sZW5ndGh9IGVycm9yc2ApO1xuXG4gICAgICAvLyBJbXBvcnQgc2FsYXJpZXMgZnJvbSBCYW1ib29IUlxuICAgICAgY29uc3QgYmFtYm9vaHJTYWxhcmllcyA9IGF3YWl0IGltcG9ydEJhbWJvb0hSU2FsYXJpZXMoKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5KwIEJhbWJvb0hSIGltcG9ydDogUmV0cmlldmVkICR7YmFtYm9vaHJTYWxhcmllcy5sZW5ndGh9IHNhbGFyeSByZWNvcmRzIGZyb20gQmFtYm9vSFIgQVBJYCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCBCYW1ib29IUiBpbXBvcnQ6IEJlZ2lubmluZyBTdXBhYmFzZSB1cHNlcnQgZm9yICR7YmFtYm9vaHJTYWxhcmllcy5sZW5ndGh9IHNhbGFyeSByZWNvcmRzLi4uYCk7XG4gICAgICBcbiAgICAgIGxldCBzYWxhcnlTdWNjZXNzID0gMDtcbiAgICAgIGNvbnN0IHNhbGFyeUVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3Qgc2FsYXJ5IG9mIGJhbWJvb2hyU2FsYXJpZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZFNhbGFyeShzYWxhcnkpO1xuICAgICAgICAgIHNhbGFyeVN1Y2Nlc3MgKz0gMTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFNhbGFyeSB1cHNlcnQgc3VjY2VzczogRW1wbG95ZWUgJHtzYWxhcnkuZW1wbG95ZWVJZH0sIGVmZmVjdGl2ZSAke3NhbGFyeS5lZmZlY3RpdmVEYXRlfSwgYW5udWFsOiAkJHtzYWxhcnkuYW5udWFsU2FsYXJ5fWApO1xuICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQmFtYm9vSFIgc2FsYXJ5IHVwc2VydCBmYWlsZWQ6Jywge1xuICAgICAgICAgICAgZW1wbG95ZWVJZDogc2FsYXJ5LmVtcGxveWVlSWQsXG4gICAgICAgICAgICBlZmZlY3RpdmVEYXRlOiBzYWxhcnkuZWZmZWN0aXZlRGF0ZSxcbiAgICAgICAgICAgIGFubnVhbFNhbGFyeTogc2FsYXJ5LmFubnVhbFNhbGFyeSxcbiAgICAgICAgICAgIGhvdXJseVJhdGU6IHNhbGFyeS5ob3VybHlSYXRlLFxuICAgICAgICAgICAgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgU3RyaW5nKGUpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2FsYXJ5RXJyb3JzLnB1c2goYHNhbDoke3NhbGFyeS5lbXBsb3llZUlkfToke3NhbGFyeS5lZmZlY3RpdmVEYXRlfToke2U/Lm1lc3NhZ2UgfHwgZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYPCfk4ggU2FsYXJ5IGltcG9ydCByZXN1bHRzOiAke3NhbGFyeVN1Y2Nlc3N9IHN1Y2Nlc3NlcywgJHtzYWxhcnlFcnJvcnMubGVuZ3RofSBlcnJvcnNgKTtcblxuICAgICAgY29uc29sZS5sb2coYPCfjokgQmFtYm9vSFIgaW1wb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhYCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TiiBGaW5hbCBzdW1tYXJ5OiBUb3RhbCBlbXBsb3llZXMgcHJvY2Vzc2VkPSR7YmFtYm9vaHJFbXBsb3llZXMubGVuZ3RofSwgZW1wbG95ZWVzIHNhdmVkPSR7ZW1wbG95ZWVTdWNjZXNzfSwgc2FsYXJpZXMgcHJvY2Vzc2VkPSR7YmFtYm9vaHJTYWxhcmllcy5sZW5ndGh9LCBzYWxhcmllcyBzYXZlZD0ke3NhbGFyeVN1Y2Nlc3N9YCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pqg77iPIEVycm9yIHN1bW1hcnk6IEVtcGxveWVlIGVycm9ycz0ke2VtcGxveWVlRXJyb3JzLmxlbmd0aH0sIFNhbGFyeSBlcnJvcnM9JHtzYWxhcnlFcnJvcnMubGVuZ3RofWApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzb3VyY2U6ICdiYW1ib29ocicsXG4gICAgICAgIGltcG9ydERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcmVjb3Jkc0ltcG9ydGVkOiBlbXBsb3llZVN1Y2Nlc3MgKyBzYWxhcnlTdWNjZXNzLFxuICAgICAgICBlcnJvcnM6IFsuLi5lbXBsb3llZUVycm9ycywgLi4uc2FsYXJ5RXJyb3JzXVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQmFtYm9vSFIgaW1wb3J0IGZhaWxlZCB3aXRoIGZhdGFsIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNvdXJjZTogJ2JhbWJvb2hyJyxcbiAgICAgICAgaW1wb3J0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICByZWNvcmRzSW1wb3J0ZWQ6IDAsXG4gICAgICAgIGVycm9yczogW2Vycm9yLm1lc3NhZ2VdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGltcG9ydFNhbGFyaWVzRnJvbVBheXJvbGxTeXN0ZW0oKTogUHJvbWlzZTxTYWxhcnlJbXBvcnQ+IHtcbiAgICBpZiAoIXRoaXMucGF5cm9sbFN5c3RlbSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBwYXlyb2xsIHN5c3RlbSBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGF5cm9sbFN5c3RlbS50eXBlID09PSAnYmFtYm9vaHInICYmIHRoaXMuYmFtYm9vaHJDb25maWcpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmltcG9ydFNhbGFyaWVzRnJvbUJhbWJvb0hSKCk7XG4gICAgfVxuXG4gICAgLy8gVGhpcyB3b3VsZCBpbnRlZ3JhdGUgd2l0aCBvdGhlciBwYXlyb2xsIHN5c3RlbSBBUElzXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIGEgbW9jayBpbXBvcnRcbiAgICByZXR1cm4ge1xuICAgICAgc291cmNlOiAnYXBpJyBhcyBjb25zdCxcbiAgICAgIGltcG9ydERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHJlY29yZHNJbXBvcnRlZDogMCxcbiAgICAgIGVycm9yczogW2Ake3RoaXMucGF5cm9sbFN5c3RlbS50eXBlfSBpbnRlZ3JhdGlvbiBub3QgeWV0IGltcGxlbWVudGVkYF1cbiAgICB9O1xuICB9XG5cbiAgLy8gVXRpbGl0eSBNZXRob2RzXG4gIHByaXZhdGUgcGFyc2VEdXJhdGlvbihkdXJhdGlvbjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCByZWdleCA9IC9QVCg/OihcXGQrKUgpPyg/OihcXGQrKU0pPyg/OihcXGQrKVMpPy87XG4gICAgY29uc3QgbWF0Y2ggPSBkdXJhdGlvbi5tYXRjaChyZWdleCk7XG4gICAgXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIDA7XG4gICAgXG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChtYXRjaFsxXSB8fCAnMCcpO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtYXRjaFsyXSB8fCAnMCcpO1xuICAgIGNvbnN0IHNlY29uZHMgPSBwYXJzZUludChtYXRjaFszXSB8fCAnMCcpO1xuICAgIFxuICAgIHJldHVybiAoaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kcykgKiAxMDAwO1xuICB9XG5cbiAgY2FsY3VsYXRlSG91cmx5UmF0ZShhbm51YWxTYWxhcnk6IG51bWJlciwgd29ya0hvdXJzUGVyWWVhcjogbnVtYmVyID0gMjA4MCk6IG51bWJlciB7XG4gICAgcmV0dXJuIGFubnVhbFNhbGFyeSAvIHdvcmtIb3Vyc1BlclllYXI7XG4gIH1cblxuICAvLyBOb3JtYWxpemF0aW9uIGhlbHBlcnMgdG8gY29udmVydCBQcmlzbWEgcmVzdWx0cyB0byBkb21haW4gdHlwZXNcbiAgcHJpdmF0ZSBub3JtYWxpemVFbXBsb3llZShkYkVtcGxveWVlOiBhbnkpOiBFbXBsb3llZSB7XG4gICAgY29uc3Qgc3RhdHVzVmFsdWUgPSAoZGJFbXBsb3llZS5zdGF0dXMgfHwgJ2FjdGl2ZScpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFN0YXR1czogJ2FjdGl2ZScgfCAnaW5hY3RpdmUnID1cbiAgICAgIHN0YXR1c1ZhbHVlID09PSAnYWN0aXZlJyA/ICdhY3RpdmUnIDogJ2luYWN0aXZlJztcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGRiRW1wbG95ZWUuaWQsXG4gICAgICBuYW1lOiBkYkVtcGxveWVlLm5hbWUsXG4gICAgICBlbWFpbDogZGJFbXBsb3llZS5lbWFpbCxcbiAgICAgIHN0YXR1czogbm9ybWFsaXplZFN0YXR1cyxcbiAgICAgIGRlcGFydG1lbnQ6IGRiRW1wbG95ZWUuZGVwYXJ0bWVudCA/PyB1bmRlZmluZWQsXG4gICAgICBwb3NpdGlvbjogZGJFbXBsb3llZS5wb3NpdGlvbiA/PyB1bmRlZmluZWQsXG4gICAgICBoaXJlRGF0ZTogZGJFbXBsb3llZS5oaXJlRGF0ZSxcbiAgICAgIHRlcm1pbmF0aW9uRGF0ZTogZGJFbXBsb3llZS50ZXJtaW5hdGlvbkRhdGUgPz8gdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgbm9ybWFsaXplU2FsYXJ5KGRiU2FsYXJ5OiBhbnkpOiBFbXBsb3llZVNhbGFyeSB7XG4gICAgY29uc3QgdG9OdW1iZXIgPSAodjogYW55KSA9PiAodiAmJiB0eXBlb2YgdiA9PT0gJ29iamVjdCcgJiYgJ3RvTnVtYmVyJyBpbiB2ID8gdi50b051bWJlcigpIDogTnVtYmVyKHYpKTtcbiAgICByZXR1cm4ge1xuICAgICAgZW1wbG95ZWVJZDogZGJTYWxhcnkuZW1wbG95ZWVJZCxcbiAgICAgIGVmZmVjdGl2ZURhdGU6IGRiU2FsYXJ5LmVmZmVjdGl2ZURhdGUsXG4gICAgICBlbmREYXRlOiBkYlNhbGFyeS5lbmREYXRlID8/IHVuZGVmaW5lZCxcbiAgICAgIGFubnVhbFNhbGFyeTogdG9OdW1iZXIoZGJTYWxhcnkuYW5udWFsU2FsYXJ5KSxcbiAgICAgIGhvdXJseVJhdGU6IHRvTnVtYmVyKGRiU2FsYXJ5LmhvdXJseVJhdGUpLFxuICAgICAgY3VycmVuY3k6IGRiU2FsYXJ5LmN1cnJlbmN5IHx8ICdVU0QnLFxuICAgICAgbm90ZXM6IGRiU2FsYXJ5Lm5vdGVzID8/IHVuZGVmaW5lZFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZVByb2plY3RNdWx0aXBsaWVyKGRiTXVsdGlwbGllcjogYW55KTogUHJvamVjdE11bHRpcGxpZXIge1xuICAgIGNvbnN0IHRvTnVtYmVyID0gKHY6IGFueSkgPT4gKHYgJiYgdHlwZW9mIHYgPT09ICdvYmplY3QnICYmICd0b051bWJlcicgaW4gdiA/IHYudG9OdW1iZXIoKSA6IE51bWJlcih2KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2plY3RJZDogZGJNdWx0aXBsaWVyLnByb2plY3RJZCxcbiAgICAgIHByb2plY3ROYW1lOiBkYk11bHRpcGxpZXIucHJvamVjdE5hbWUsXG4gICAgICBtdWx0aXBsaWVyOiB0b051bWJlcihkYk11bHRpcGxpZXIubXVsdGlwbGllciksXG4gICAgICBlZmZlY3RpdmVEYXRlOiBkYk11bHRpcGxpZXIuZWZmZWN0aXZlRGF0ZSxcbiAgICAgIGVuZERhdGU6IGRiTXVsdGlwbGllci5lbmREYXRlID8/IHVuZGVmaW5lZCxcbiAgICAgIG5vdGVzOiBkYk11bHRpcGxpZXIubm90ZXMgPz8gdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIC8vIERhdGEgRXhwb3J0L0ltcG9ydFxuICAgIGFzeW5jIGV4cG9ydERhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZW1wbG95ZWVzOiBBcnJheS5mcm9tKHRoaXMuZW1wbG95ZWVzLnZhbHVlcygpKSxcbiAgICAgIHNhbGFyaWVzOiBBcnJheS5mcm9tKHRoaXMuc2FsYXJpZXMuZW50cmllcygpKSxcbiAgICAgIG11bHRpcGxpZXJzOiBBcnJheS5mcm9tKHRoaXMubXVsdGlwbGllcnMuZW50cmllcygpKSxcbiAgICAgIHBheXJvbGxTeXN0ZW06IHRoaXMucGF5cm9sbFN5c3RlbSxcbiAgICAgIGJhbWJvb2hyQ29uZmlnOiB0aGlzLmJhbWJvb2hyQ29uZmlnXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGltcG9ydERhdGEoZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5lbXBsb3llZXMgPSBuZXcgTWFwKGRhdGEuZW1wbG95ZWVzLm1hcCgoZW1wOiBFbXBsb3llZSkgPT4gW2VtcC5pZCwgZW1wXSkpO1xuICAgIHRoaXMuc2FsYXJpZXMgPSBuZXcgTWFwKGRhdGEuc2FsYXJpZXMpO1xuICAgIHRoaXMubXVsdGlwbGllcnMgPSBuZXcgTWFwKGRhdGEubXVsdGlwbGllcnMpO1xuICAgIHRoaXMucGF5cm9sbFN5c3RlbSA9IGRhdGEucGF5cm9sbFN5c3RlbTtcbiAgICB0aGlzLmJhbWJvb2hyQ29uZmlnID0gZGF0YS5iYW1ib29ockNvbmZpZztcblxuICAgIGlmICh0aGlzLmJhbWJvb2hyQ29uZmlnKSB7XG4gICAgICBfY29uZmlndXJlQmFtYm9vSFJTZXJ2aWNlKHRoaXMuYmFtYm9vaHJDb25maWcpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdQYXlyb2xsIGRhdGEgaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IHBheXJvbGxTZXJ2aWNlID0gbmV3IFBheXJvbGxTZXJ2aWNlKCk7XG5cbi8vIEV4cG9ydCBjb252ZW5pZW5jZSBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCBhZGRFbXBsb3llZSA9IGFzeW5jIChlbXBsb3llZTogRW1wbG95ZWUpID0+IHtcbiAgYXdhaXQgcGF5cm9sbFNlcnZpY2UuYWRkRW1wbG95ZWUoZW1wbG95ZWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZFNhbGFyeSA9IGFzeW5jIChzYWxhcnk6IEVtcGxveWVlU2FsYXJ5KSA9PiB7XG4gIGF3YWl0IHBheXJvbGxTZXJ2aWNlLmFkZFNhbGFyeShzYWxhcnkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZFByb2plY3RNdWx0aXBsaWVyID0gYXN5bmMgKG11bHRpcGxpZXI6IFByb2plY3RNdWx0aXBsaWVyKSA9PiB7XG4gIGF3YWl0IHBheXJvbGxTZXJ2aWNlLmFkZFByb2plY3RNdWx0aXBsaWVyKG11bHRpcGxpZXIpO1xufTtcblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NUaW1lRW50cmllcyA9IGFzeW5jIChcbiAgY2xvY2tpZnlFbnRyaWVzOiBDbG9ja2lmeVRpbWVFbnRyeVtdLFxuICBjbG9ja2lmeVVzZXJzOiBDbG9ja2lmeVVzZXJbXSxcbiAgcHJvamVjdHM6IGFueVtdXG4pID0+IHtcbiAgcmV0dXJuIGF3YWl0IHBheXJvbGxTZXJ2aWNlLnByb2Nlc3NUaW1lRW50cmllcyhjbG9ja2lmeUVudHJpZXMsIGNsb2NraWZ5VXNlcnMsIHByb2plY3RzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVByb2plY3RQcm9maXRhYmlsaXR5UmVwb3J0ID0gYXN5bmMgKFxuICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZyxcbiAgZW1wbG95ZWVUaW1lRW50cmllczogRW1wbG95ZWVUaW1lRW50cnlbXSxcbiAgcmV2ZW51ZTogbnVtYmVyXG4pID0+IHtcbiAgcmV0dXJuIGF3YWl0IHBheXJvbGxTZXJ2aWNlLmdlbmVyYXRlUHJvamVjdFByb2ZpdGFiaWxpdHlSZXBvcnQoXG4gICAgcHJvamVjdElkLCBzdGFydERhdGUsIGVuZERhdGUsIGVtcGxveWVlVGltZUVudHJpZXMsIHJldmVudWVcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUVtcGxveWVlUHJvZml0YWJpbGl0eVJlcG9ydCA9IGFzeW5jIChcbiAgZW1wbG95ZWVJZDogc3RyaW5nLFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nLFxuICBlbXBsb3llZVRpbWVFbnRyaWVzOiBFbXBsb3llZVRpbWVFbnRyeVtdXG4pID0+IHtcbiAgcmV0dXJuIGF3YWl0IHBheXJvbGxTZXJ2aWNlLmdlbmVyYXRlRW1wbG95ZWVQcm9maXRhYmlsaXR5UmVwb3J0KFxuICAgIGVtcGxveWVlSWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgZW1wbG95ZWVUaW1lRW50cmllc1xuICApO1xufTtcblxuLy8gQmFtYm9vSFIgc3BlY2lmaWMgZnVuY3Rpb25zXG5leHBvcnQgY29uc3QgY29uZmlndXJlQmFtYm9vSFIgPSBhc3luYyAoY29uZmlnOiBCYW1ib29IUkNvbmZpZykgPT4ge1xuICBhd2FpdCBwYXlyb2xsU2VydmljZS5jb25maWd1cmVCYW1ib29IUihjb25maWcpO1xufTtcblxuZXhwb3J0IGNvbnN0IGltcG9ydEJhbWJvb0hSRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIGF3YWl0IHBheXJvbGxTZXJ2aWNlLmltcG9ydFNhbGFyaWVzRnJvbUJhbWJvb0hSKCk7XG59O1xuIl0sIm5hbWVzIjpbImNvbmZpZ3VyZUJhbWJvb0hSIiwiX2NvbmZpZ3VyZUJhbWJvb0hSU2VydmljZSIsImltcG9ydEJhbWJvb0hSRW1wbG95ZWVzIiwiaW1wb3J0QmFtYm9vSFJTYWxhcmllcyIsInNhdmVFbXBsb3llZSIsInNhdmVFbXBsb3llZVNhbGFyeSIsInNhdmVQcm9qZWN0TXVsdGlwbGllciIsInNhdmVFbXBsb3llZVRpbWVFbnRyeSIsImdldEFsbEVtcGxveWVlcyIsImRiR2V0QWxsRW1wbG95ZWVzIiwiZ2V0QWxsRW1wbG95ZWVTYWxhcmllcyIsImRiR2V0QWxsRW1wbG95ZWVTYWxhcmllcyIsImdldEFsbFByb2plY3RNdWx0aXBsaWVycyIsImRiR2V0QWxsUHJvamVjdE11bHRpcGxpZXJzIiwic2F2ZUJhbWJvb0hSQ29uZmlnIiwiUGF5cm9sbFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImVtcGxveWVlcyIsIk1hcCIsInNhbGFyaWVzIiwibXVsdGlwbGllcnMiLCJjb25zb2xlIiwibG9nIiwibWFwRGJFbXBsb3llZVRvRG9tYWluIiwiZGJFbXBsb3llZSIsInN0YXR1c1ZhbHVlIiwic3RhdHVzIiwidG9Mb3dlckNhc2UiLCJ0b0lzb0RhdGVTdHJpbmciLCJkIiwidW5kZWZpbmVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiYXNEYXRlIiwiaXNOYU4iLCJnZXRUaW1lIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJkZXBhcnRtZW50IiwicG9zaXRpb24iLCJoaXJlRGF0ZSIsInRlcm1pbmF0aW9uRGF0ZSIsInRvTnVtYmVyIiwidmFsdWUiLCJtYXliZURlY2ltYWwiLCJwYXJzZWQiLCJwYXJzZUZsb2F0IiwiU3RyaW5nIiwiTnVtYmVyIiwibWFwRGJTYWxhcmllc1RvRG9tYWluIiwiZGJTYWxhcmllcyIsIm1hcCIsInMiLCJlbXBsb3llZUlkIiwiZWZmZWN0aXZlRGF0ZSIsImVuZERhdGUiLCJhbm51YWxTYWxhcnkiLCJob3VybHlSYXRlIiwiY3VycmVuY3kiLCJub3RlcyIsIm1hcERiTXVsdGlwbGllcnNUb0RvbWFpbiIsImRiTXVsdGlwbGllcnMiLCJtIiwicHJvamVjdElkIiwicHJvamVjdE5hbWUiLCJtdWx0aXBsaWVyIiwiYWRkRW1wbG95ZWUiLCJlbXBsb3llZSIsInNldCIsImdldEVtcGxveWVlIiwiZ2V0IiwiZGJFbXBsb3llZXMiLCJmaW5kIiwiZW1wIiwibWFwcGVkIiwidXBkYXRlRW1wbG95ZWUiLCJ1cGRhdGVzIiwidXBkYXRlZEVtcGxveWVlIiwiYWRkU2FsYXJ5Iiwic2FsYXJ5IiwiZW1wbG95ZWVTYWxhcmllcyIsImN1cnJlbnRTYWxhcnkiLCJwdXNoIiwic29ydCIsImEiLCJiIiwiZ2V0RW1wbG95ZWVTYWxhcnkiLCJkYXRlIiwibGVuZ3RoIiwiZW1wbG95ZWVEYlNhbGFyaWVzIiwiZmlsdGVyIiwidGFyZ2V0RGF0ZSIsImdldEVtcGxveWVlU2FsYXJ5SGlzdG9yeSIsImFkZFByb2plY3RNdWx0aXBsaWVyIiwicHJvamVjdE11bHRpcGxpZXJzIiwiY3VycmVudE11bHRpcGxpZXIiLCJnZXRQcm9qZWN0TXVsdGlwbGllciIsInByb2plY3REYk11bHRpcGxpZXJzIiwiZ2V0UHJvamVjdE11bHRpcGxpZXJIaXN0b3J5IiwicHJvY2Vzc1RpbWVFbnRyaWVzIiwiY2xvY2tpZnlFbnRyaWVzIiwiY2xvY2tpZnlVc2VycyIsInByb2plY3RzIiwiZW1wbG95ZWVUaW1lRW50cmllcyIsInVzZXJNYXAiLCJ1c2VyIiwiZW50cnkiLCJ1c2VySWQiLCJlbnRyeURhdGUiLCJ0aW1lSW50ZXJ2YWwiLCJzdGFydCIsInNwbGl0IiwicHJvamVjdCIsInAiLCJwcm9qZWN0TXVsdGlwbGllciIsImR1cmF0aW9uTXMiLCJwYXJzZUR1cmF0aW9uIiwiZHVyYXRpb24iLCJob3VycyIsImJpbGxhYmxlSG91cnMiLCJiaWxsYWJsZSIsIm5vbkJpbGxhYmxlSG91cnMiLCJ0b3RhbENvc3QiLCJiaWxsYWJsZVZhbHVlIiwiZWZmaWNpZW5jeSIsInRpbWVFbnRyeSIsImVtcGxveWVlTmFtZSIsImRlc2NyaXB0aW9uIiwidGFncyIsInRhZyIsImdlbmVyYXRlUHJvamVjdFByb2ZpdGFiaWxpdHlSZXBvcnQiLCJzdGFydERhdGUiLCJyZXZlbnVlIiwicHJvamVjdEVudHJpZXMiLCJ0b3RhbEhvdXJzIiwicmVkdWNlIiwic3VtIiwidG90YWxCaWxsYWJsZUhvdXJzIiwidG90YWxCaWxsYWJsZVZhbHVlIiwiZ3Jvc3NQcm9maXQiLCJwcm9maXRNYXJnaW4iLCJhdmVyYWdlTXVsdGlwbGllciIsImVtcGxveWVlQnJlYWtkb3duIiwiZXhpc3RpbmciLCJjb3N0IiwibW9udGhseUJyZWFrZG93biIsIm1vbnRoIiwic3Vic3RyaW5nIiwicHJvZml0IiwicGVyaW9kIiwiZW5kIiwidG90YWxSZXZlbnVlIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiZ2VuZXJhdGVFbXBsb3llZVByb2ZpdGFiaWxpdHlSZXBvcnQiLCJlbXBsb3llZUVudHJpZXMiLCJhdmVyYWdlSG91cmx5UmF0ZSIsInByb2plY3RCcmVha2Rvd24iLCJjb25maWd1cmVQYXlyb2xsU3lzdGVtIiwic3lzdGVtIiwicGF5cm9sbFN5c3RlbSIsImNvbmZpZyIsImJhbWJvb2hyQ29uZmlnIiwic3ViZG9tYWluIiwiYXBpS2V5Iiwid2ViaG9va1NlY3JldCIsImltcG9ydFNhbGFyaWVzRnJvbUJhbWJvb0hSIiwiRXJyb3IiLCJiYW1ib29ockVtcGxveWVlcyIsImVtcGxveWVlU3VjY2VzcyIsImVtcGxveWVlRXJyb3JzIiwiZSIsImVycm9yIiwibWVzc2FnZSIsImJhbWJvb2hyU2FsYXJpZXMiLCJzYWxhcnlTdWNjZXNzIiwic2FsYXJ5RXJyb3JzIiwic291cmNlIiwiaW1wb3J0RGF0ZSIsInJlY29yZHNJbXBvcnRlZCIsImVycm9ycyIsImltcG9ydFNhbGFyaWVzRnJvbVBheXJvbGxTeXN0ZW0iLCJ0eXBlIiwicmVnZXgiLCJtYXRjaCIsInBhcnNlSW50IiwibWludXRlcyIsInNlY29uZHMiLCJjYWxjdWxhdGVIb3VybHlSYXRlIiwid29ya0hvdXJzUGVyWWVhciIsIm5vcm1hbGl6ZUVtcGxveWVlIiwibm9ybWFsaXplZFN0YXR1cyIsIm5vcm1hbGl6ZVNhbGFyeSIsImRiU2FsYXJ5IiwidiIsIm5vcm1hbGl6ZVByb2plY3RNdWx0aXBsaWVyIiwiZGJNdWx0aXBsaWVyIiwiZXhwb3J0RGF0YSIsImVudHJpZXMiLCJpbXBvcnREYXRhIiwiZGF0YSIsInBheXJvbGxTZXJ2aWNlIiwiaW1wb3J0QmFtYm9vSFJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/payroll.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fbamboohr%2Froute&page=%2Fapi%2Fpayroll%2Fbamboohr%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fbamboohr%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();