"use strict";(()=>{var e={};e.id=5917,e.ids=[5917],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},71837:(e,o,s)=>{s.r(o),s.d(o,{originalPathname:()=>d,patchFetch:()=>B,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>b,staticGenerationAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{POST:()=>p});var t=s(49303),a=s(88716),n=s(60670),i=s(87070),c=s(80928);async function p(e){try{let{action:o,data:r}=await e.json();switch(o){case"configure":return await c.HE.configureBambooHR(r),i.NextResponse.json({success:!0,message:`BambooHR configured for subdomain: ${r.subdomain}`});case"import-data":{try{!c.HE.bamboohrConfig&&process.env.BAMBOOHR_SUBDOMAIN&&process.env.BAMBOOHR_API_KEY&&await c.HE.configureBambooHR({subdomain:process.env.BAMBOOHR_SUBDOMAIN,apiKey:process.env.BAMBOOHR_API_KEY,webhookSecret:process.env.BAMBOOHR_WEBHOOK_SECRET||void 0})}catch{}let e=await c.HE.importSalariesFromBambooHR();return i.NextResponse.json({success:!0,result:e})}case"test-connection":{let{configureBambooHR:e}=await Promise.resolve().then(s.bind(s,80645)),o=r||{subdomain:process.env.BAMBOOHR_SUBDOMAIN||"",apiKey:process.env.BAMBOOHR_API_KEY||"",webhookSecret:process.env.BAMBOOHR_WEBHOOK_SECRET||void 0};e(o);let{getBambooHRService:t}=await Promise.resolve().then(s.bind(s,80645)),a=t(),n=await a.getCompanyInfo();return i.NextResponse.json({success:!0,message:"BambooHR connection successful",companyInfo:n})}case"get-employees":{let{configureBambooHR:e,getBambooHRService:o}=await Promise.resolve().then(s.bind(s,80645));e(r);let t=o(),a=await t.getAllEmployees();return i.NextResponse.json({success:!0,employees:a})}case"get-compensation":{let{configureBambooHR:e,getBambooHRService:o}=await Promise.resolve().then(s.bind(s,80645)),t=r.config,a=r.employeeId;e(t);let n=o(),c=await n.getEmployeeCompensation(a);return i.NextResponse.json({success:!0,compensation:c})}default:return i.NextResponse.json({error:"Invalid action"},{status:400})}}catch(e){return console.error("Error in BambooHR integration:",e),i.NextResponse.json({error:e.message},{status:500})}}let u=new t.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/payroll/bamboohr/route",pathname:"/api/payroll/bamboohr",filename:"route",bundlePath:"app/api/payroll/bamboohr/route"},resolvedPagePath:"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\api\\payroll\\bamboohr\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:b}=u,d="/api/payroll/bamboohr/route";function B(){return(0,n.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:m})}}};var o=require("../../../../webpack-runtime.js");o.C(e);var s=e=>o(o.s=e),r=o.X(0,[9276,5972,928],()=>s(71837));module.exports=r})();