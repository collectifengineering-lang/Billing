"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/clockify/route";
exports.ids = ["app/api/clockify/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclockify%2Froute&page=%2Fapi%2Fclockify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclockify%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclockify%2Froute&page=%2Fapi%2Fclockify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclockify%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Jonathan_Desktop_Billing_app_api_clockify_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/clockify/route.ts */ \"(rsc)/./app/api/clockify/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/clockify/route\",\n        pathname: \"/api/clockify\",\n        filename: \"route\",\n        bundlePath: \"app/api/clockify/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Jonathan\\\\Desktop\\\\Billing\\\\app\\\\api\\\\clockify\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Jonathan_Desktop_Billing_app_api_clockify_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/clockify/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbG9ja2lmeSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2xvY2tpZnklMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjbG9ja2lmeSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNKb25hdGhhbiU1Q0Rlc2t0b3AlNUNCaWxsaW5nJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNKb25hdGhhbiU1Q0Rlc2t0b3AlNUNCaWxsaW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQjtBQUNoRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8/OTRkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxKb25hdGhhblxcXFxEZXNrdG9wXFxcXEJpbGxpbmdcXFxcYXBwXFxcXGFwaVxcXFxjbG9ja2lmeVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2xvY2tpZnkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jbG9ja2lmeVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2xvY2tpZnkvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxKb25hdGhhblxcXFxEZXNrdG9wXFxcXEJpbGxpbmdcXFxcYXBwXFxcXGFwaVxcXFxjbG9ja2lmeVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2xvY2tpZnkvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclockify%2Froute&page=%2Fapi%2Fclockify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclockify%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/clockify/route.ts":
/*!***********************************!*\
  !*** ./app/api/clockify/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_clockify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/clockify */ \"(rsc)/./lib/clockify.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/utils */ \"(rsc)/./lib/utils.ts\");\n\n\n\n// Force dynamic rendering to prevent static generation errors\nconst dynamic = \"force-dynamic\";\n// Helper function to provide configuration recommendations\nfunction getConfigRecommendations(configStatus, envVars) {\n    const recommendations = [];\n    if (!envVars.hasApiKey) {\n        recommendations.push(\"Set CLOCKIFY_API_KEY environment variable\");\n    }\n    if (!envVars.hasWorkspaceId) {\n        recommendations.push(\"Set CLOCKIFY_WORKSPACE_ID environment variable\");\n    }\n    if (envVars.apiKeyLength < 20) {\n        recommendations.push(\"CLOCKIFY_API_KEY appears to be too short - verify it's correct\");\n    }\n    if (envVars.workspaceIdLength < 20) {\n        recommendations.push(\"CLOCKIFY_WORKSPACE_ID appears to be too short - verify it's correct\");\n    }\n    if (envVars.hasApiKey && envVars.hasWorkspaceId && !configStatus.configured) {\n        recommendations.push(\"Check if API key and workspace ID are valid and accessible\");\n    }\n    if (recommendations.length === 0) {\n        recommendations.push(\"Configuration appears correct - check Clockify API status\");\n    }\n    return recommendations;\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const startDate = searchParams.get(\"startDate\");\n        const endDate = searchParams.get(\"endDate\");\n        const action = searchParams.get(\"action\");\n        // Check if Clockify is configured\n        if (!_lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.isConfigured()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Clockify not configured\",\n                configStatus: _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getConfigStatus()\n            }, {\n                status: 400\n            });\n        }\n        switch(action){\n            case \"status\":\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    configured: _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.isConfigured(),\n                    configStatus: _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getConfigStatus()\n                });\n            case \"projects\":\n                const projects = await _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getProjects();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    projects\n                });\n            case \"time-summaries\":\n                if (!startDate || !endDate) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"startDate and endDate are required for time summaries\"\n                    }, {\n                        status: 400\n                    });\n                }\n                const timeSummaries = await (0,_lib_clockify__WEBPACK_IMPORTED_MODULE_1__.fetchAllClockifyTimeSummaries)(startDate, endDate);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    timeSummaries\n                });\n            case \"user\":\n                const user = await _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getUser();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    user\n                });\n            case \"workspaces\":\n                const workspaces = await _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getWorkspaces();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    workspaces\n                });\n            case \"test-connection\":\n                try {\n                    const user = await _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getUser();\n                    const workspaces = await _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getWorkspaces();\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        user,\n                        workspaces,\n                        message: \"Connection successful\"\n                    });\n                } catch (error) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: error.message\n                    }, {\n                        status: 400\n                    });\n                }\n            case \"validate-config\":\n                const configStatus = _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.getConfigStatus();\n                const envVars = {\n                    hasApiKey: !!process.env.CLOCKIFY_API_KEY,\n                    hasWorkspaceId: !!process.env.CLOCKIFY_WORKSPACE_ID,\n                    apiKeyLength: process.env.CLOCKIFY_API_KEY?.length || 0,\n                    workspaceIdLength: process.env.CLOCKIFY_WORKSPACE_ID?.length || 0,\n                    apiKeyPreview: process.env.CLOCKIFY_API_KEY ? `${process.env.CLOCKIFY_API_KEY.substring(0, 8)}...` : \"Not set\",\n                    workspaceIdPreview: process.env.CLOCKIFY_WORKSPACE_ID ? `${process.env.CLOCKIFY_WORKSPACE_ID.substring(0, 8)}...` : \"Not set\"\n                };\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    configStatus,\n                    environmentVariables: envVars,\n                    recommendations: getConfigRecommendations(configStatus, envVars)\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid action. Supported actions: status, projects, time-summaries, user, workspaces, test-connection\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Clockify API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message || \"Failed to fetch Clockify data\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { action, data } = body;\n        switch(action){\n            case \"enhance-billing-data\":\n                const { billingData, clockifyReports } = data;\n                const enhancedData = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.enhanceBillingDataWithClockify)(billingData, clockifyReports);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    enhancedData\n                });\n            case \"set-workspace\":\n                const { workspaceId } = data;\n                if (workspaceId) {\n                    _lib_clockify__WEBPACK_IMPORTED_MODULE_1__.clockifyService.setWorkspaceId(workspaceId);\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: true,\n                        message: \"Workspace set successfully\"\n                    });\n                } else {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        error: \"Workspace ID is required\"\n                    }, {\n                        status: 400\n                    });\n                }\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid action. Supported actions: enhance-billing-data, set-workspace\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Clockify POST error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message || \"Failed to process Clockify data\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9BLE1BQU1XLE9BQU8sSUFBSTtRQUMxQixHQUFHO1lBQUVULFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vYXBwL2FwaS9jbG9ja2lmeS9yb3V0ZS50cz83NjUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjbG9ja2lmeVNlcnZpY2UsIGZldGNoQWxsQ2xvY2tpZnlUaW1lU3VtbWFyaWVzIH0gZnJvbSAnLi4vLi4vLi4vbGliL2Nsb2NraWZ5JztcbmltcG9ydCB7IGVuaGFuY2VCaWxsaW5nRGF0YVdpdGhDbG9ja2lmeSB9IGZyb20gJy4uLy4uLy4uL2xpYi91dGlscyc7XG5cbi8vIEZvcmNlIGR5bmFtaWMgcmVuZGVyaW5nIHRvIHByZXZlbnQgc3RhdGljIGdlbmVyYXRpb24gZXJyb3JzXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJztcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHByb3ZpZGUgY29uZmlndXJhdGlvbiByZWNvbW1lbmRhdGlvbnNcbmZ1bmN0aW9uIGdldENvbmZpZ1JlY29tbWVuZGF0aW9ucyhjb25maWdTdGF0dXM6IGFueSwgZW52VmFyczogYW55KSB7XG4gIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IFtdO1xuICBcbiAgaWYgKCFlbnZWYXJzLmhhc0FwaUtleSkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdTZXQgQ0xPQ0tJRllfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xuICB9XG4gIFxuICBpZiAoIWVudlZhcnMuaGFzV29ya3NwYWNlSWQpIHtcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnU2V0IENMT0NLSUZZX1dPUktTUEFDRV9JRCBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xuICB9XG4gIFxuICBpZiAoZW52VmFycy5hcGlLZXlMZW5ndGggPCAyMCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDTE9DS0lGWV9BUElfS0VZIGFwcGVhcnMgdG8gYmUgdG9vIHNob3J0IC0gdmVyaWZ5IGl0XFwncyBjb3JyZWN0Jyk7XG4gIH1cbiAgXG4gIGlmIChlbnZWYXJzLndvcmtzcGFjZUlkTGVuZ3RoIDwgMjApIHtcbiAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgnQ0xPQ0tJRllfV09SS1NQQUNFX0lEIGFwcGVhcnMgdG8gYmUgdG9vIHNob3J0IC0gdmVyaWZ5IGl0XFwncyBjb3JyZWN0Jyk7XG4gIH1cbiAgXG4gIGlmIChlbnZWYXJzLmhhc0FwaUtleSAmJiBlbnZWYXJzLmhhc1dvcmtzcGFjZUlkICYmICFjb25maWdTdGF0dXMuY29uZmlndXJlZCkge1xuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDaGVjayBpZiBBUEkga2V5IGFuZCB3b3Jrc3BhY2UgSUQgYXJlIHZhbGlkIGFuZCBhY2Nlc3NpYmxlJyk7XG4gIH1cbiAgXG4gIGlmIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0NvbmZpZ3VyYXRpb24gYXBwZWFycyBjb3JyZWN0IC0gY2hlY2sgQ2xvY2tpZnkgQVBJIHN0YXR1cycpO1xuICB9XG4gIFxuICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXJ0RGF0ZScpO1xuICAgIGNvbnN0IGVuZERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdlbmREYXRlJyk7XG4gICAgY29uc3QgYWN0aW9uID0gc2VhcmNoUGFyYW1zLmdldCgnYWN0aW9uJyk7XG5cbiAgICAvLyBDaGVjayBpZiBDbG9ja2lmeSBpcyBjb25maWd1cmVkXG4gICAgaWYgKCFjbG9ja2lmeVNlcnZpY2UuaXNDb25maWd1cmVkKCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGVycm9yOiAnQ2xvY2tpZnkgbm90IGNvbmZpZ3VyZWQnLFxuICAgICAgICBjb25maWdTdGF0dXM6IGNsb2NraWZ5U2VydmljZS5nZXRDb25maWdTdGF0dXMoKSxcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3N0YXR1cyc6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgY29uZmlndXJlZDogY2xvY2tpZnlTZXJ2aWNlLmlzQ29uZmlndXJlZCgpLFxuICAgICAgICAgIGNvbmZpZ1N0YXR1czogY2xvY2tpZnlTZXJ2aWNlLmdldENvbmZpZ1N0YXR1cygpLFxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSAncHJvamVjdHMnOlxuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRQcm9qZWN0cygpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBwcm9qZWN0cyB9KTtcblxuICAgICAgY2FzZSAndGltZS1zdW1tYXJpZXMnOlxuICAgICAgICBpZiAoIXN0YXJ0RGF0ZSB8fCAhZW5kRGF0ZSkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBlcnJvcjogJ3N0YXJ0RGF0ZSBhbmQgZW5kRGF0ZSBhcmUgcmVxdWlyZWQgZm9yIHRpbWUgc3VtbWFyaWVzJyxcbiAgICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aW1lU3VtbWFyaWVzID0gYXdhaXQgZmV0Y2hBbGxDbG9ja2lmeVRpbWVTdW1tYXJpZXMoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdGltZVN1bW1hcmllcyB9KTtcblxuICAgICAgY2FzZSAndXNlcic6XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBjbG9ja2lmeVNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB1c2VyIH0pO1xuXG4gICAgICBjYXNlICd3b3Jrc3BhY2VzJzpcbiAgICAgICAgY29uc3Qgd29ya3NwYWNlcyA9IGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRXb3Jrc3BhY2VzKCk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHdvcmtzcGFjZXMgfSk7XG5cbiAgICAgIGNhc2UgJ3Rlc3QtY29ubmVjdGlvbic6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgY29uc3Qgd29ya3NwYWNlcyA9IGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRXb3Jrc3BhY2VzKCk7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgICAgIHVzZXIsIFxuICAgICAgICAgICAgd29ya3NwYWNlcyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdDb25uZWN0aW9uIHN1Y2Nlc3NmdWwnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIFxuICAgICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSAndmFsaWRhdGUtY29uZmlnJzpcbiAgICAgICAgY29uc3QgY29uZmlnU3RhdHVzID0gY2xvY2tpZnlTZXJ2aWNlLmdldENvbmZpZ1N0YXR1cygpO1xuICAgICAgICBjb25zdCBlbnZWYXJzID0ge1xuICAgICAgICAgIGhhc0FwaUtleTogISFwcm9jZXNzLmVudi5DTE9DS0lGWV9BUElfS0VZLFxuICAgICAgICAgIGhhc1dvcmtzcGFjZUlkOiAhIXByb2Nlc3MuZW52LkNMT0NLSUZZX1dPUktTUEFDRV9JRCxcbiAgICAgICAgICBhcGlLZXlMZW5ndGg6IHByb2Nlc3MuZW52LkNMT0NLSUZZX0FQSV9LRVk/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIHdvcmtzcGFjZUlkTGVuZ3RoOiBwcm9jZXNzLmVudi5DTE9DS0lGWV9XT1JLU1BBQ0VfSUQ/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGFwaUtleVByZXZpZXc6IHByb2Nlc3MuZW52LkNMT0NLSUZZX0FQSV9LRVkgPyBcbiAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52LkNMT0NLSUZZX0FQSV9LRVkuc3Vic3RyaW5nKDAsIDgpfS4uLmAgOiAnTm90IHNldCcsXG4gICAgICAgICAgd29ya3NwYWNlSWRQcmV2aWV3OiBwcm9jZXNzLmVudi5DTE9DS0lGWV9XT1JLU1BBQ0VfSUQgPyBcbiAgICAgICAgICAgIGAke3Byb2Nlc3MuZW52LkNMT0NLSUZZX1dPUktTUEFDRV9JRC5zdWJzdHJpbmcoMCwgOCl9Li4uYCA6ICdOb3Qgc2V0J1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBjb25maWdTdGF0dXMsXG4gICAgICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZXM6IGVudlZhcnMsXG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zOiBnZXRDb25maWdSZWNvbW1lbmRhdGlvbnMoY29uZmlnU3RhdHVzLCBlbnZWYXJzKVxuICAgICAgICB9KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgYWN0aW9uLiBTdXBwb3J0ZWQgYWN0aW9uczogc3RhdHVzLCBwcm9qZWN0cywgdGltZS1zdW1tYXJpZXMsIHVzZXIsIHdvcmtzcGFjZXMsIHRlc3QtY29ubmVjdGlvbicsXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignQ2xvY2tpZnkgQVBJIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCBDbG9ja2lmeSBkYXRhJyxcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IHsgYWN0aW9uLCBkYXRhIH0gPSBib2R5O1xuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2VuaGFuY2UtYmlsbGluZy1kYXRhJzpcbiAgICAgICAgY29uc3QgeyBiaWxsaW5nRGF0YSwgY2xvY2tpZnlSZXBvcnRzIH0gPSBkYXRhO1xuICAgICAgICBjb25zdCBlbmhhbmNlZERhdGEgPSBlbmhhbmNlQmlsbGluZ0RhdGFXaXRoQ2xvY2tpZnkoYmlsbGluZ0RhdGEsIGNsb2NraWZ5UmVwb3J0cyk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVuaGFuY2VkRGF0YSB9KTtcblxuICAgICAgY2FzZSAnc2V0LXdvcmtzcGFjZSc6XG4gICAgICAgIGNvbnN0IHsgd29ya3NwYWNlSWQgfSA9IGRhdGE7XG4gICAgICAgIGlmICh3b3Jrc3BhY2VJZCkge1xuICAgICAgICAgIGNsb2NraWZ5U2VydmljZS5zZXRXb3Jrc3BhY2VJZCh3b3Jrc3BhY2VJZCk7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1dvcmtzcGFjZSBzZXQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1dvcmtzcGFjZSBJRCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBhY3Rpb24uIFN1cHBvcnRlZCBhY3Rpb25zOiBlbmhhbmNlLWJpbGxpbmctZGF0YSwgc2V0LXdvcmtzcGFjZScsXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignQ2xvY2tpZnkgUE9TVCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gcHJvY2VzcyBDbG9ja2lmeSBkYXRhJyxcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY2xvY2tpZnlTZXJ2aWNlIiwiZmV0Y2hBbGxDbG9ja2lmeVRpbWVTdW1tYXJpZXMiLCJlbmhhbmNlQmlsbGluZ0RhdGFXaXRoQ2xvY2tpZnkiLCJkeW5hbWljIiwiZ2V0Q29uZmlnUmVjb21tZW5kYXRpb25zIiwiY29uZmlnU3RhdHVzIiwiZW52VmFycyIsInJlY29tbWVuZGF0aW9ucyIsImhhc0FwaUtleSIsInB1c2giLCJoYXNXb3Jrc3BhY2VJZCIsImFwaUtleUxlbmd0aCIsIndvcmtzcGFjZUlkTGVuZ3RoIiwiY29uZmlndXJlZCIsImxlbmd0aCIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJzdGFydERhdGUiLCJnZXQiLCJlbmREYXRlIiwiYWN0aW9uIiwiaXNDb25maWd1cmVkIiwianNvbiIsImVycm9yIiwiZ2V0Q29uZmlnU3RhdHVzIiwic3RhdHVzIiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsInRpbWVTdW1tYXJpZXMiLCJ1c2VyIiwiZ2V0VXNlciIsIndvcmtzcGFjZXMiLCJnZXRXb3Jrc3BhY2VzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJwcm9jZXNzIiwiZW52IiwiQ0xPQ0tJRllfQVBJX0tFWSIsIkNMT0NLSUZZX1dPUktTUEFDRV9JRCIsImFwaUtleVByZXZpZXciLCJzdWJzdHJpbmciLCJ3b3Jrc3BhY2VJZFByZXZpZXciLCJlbnZpcm9ubWVudFZhcmlhYmxlcyIsImNvbnNvbGUiLCJQT1NUIiwiYm9keSIsImRhdGEiLCJiaWxsaW5nRGF0YSIsImNsb2NraWZ5UmVwb3J0cyIsImVuaGFuY2VkRGF0YSIsIndvcmtzcGFjZUlkIiwic2V0V29ya3NwYWNlSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/clockify/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/clockify.ts":
/*!*************************!*\
  !*** ./lib/clockify.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clockifyService: () => (/* binding */ clockifyService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   fetchAllClockifyTimeSummaries: () => (/* binding */ fetchAllClockifyTimeSummaries),\n/* harmony export */   fetchClockifyProjects: () => (/* binding */ fetchClockifyProjects),\n/* harmony export */   fetchClockifyTimeEntries: () => (/* binding */ fetchClockifyTimeEntries),\n/* harmony export */   fetchClockifyTimeReport: () => (/* binding */ fetchClockifyTimeReport)\n/* harmony export */ });\nclass ClockifyService {\n    constructor(){\n        this.apiKey = null;\n        this.workspaceId = null;\n        this.baseUrl = \"https://api.clockify.me/api/v1\";\n        this._isConfigured = false;\n        this.apiKey = process.env.CLOCKIFY_API_KEY || null;\n        this.workspaceId = process.env.CLOCKIFY_WORKSPACE_ID || null;\n        // Check if we have valid credentials\n        if (this.apiKey && this.apiKey !== \"your_clockify_api_key_here\" && this.workspaceId && this.workspaceId !== \"your_clockify_workspace_id_here\") {\n            this._isConfigured = true;\n            console.log(\"Clockify service initialized with valid credentials\");\n        } else {\n            this._isConfigured = false;\n            console.warn(\"Clockify service initialized without valid credentials - will use mock data\");\n            console.warn(\"Please set CLOCKIFY_API_KEY and CLOCKIFY_WORKSPACE_ID in your environment variables\");\n        }\n    }\n    getHeaders() {\n        if (!this.apiKey) {\n            throw new Error(\"Clockify API key not configured\");\n        }\n        return {\n            \"X-Api-Key\": this.apiKey,\n            \"Content-Type\": \"application/json\"\n        };\n    }\n    async makeRequest(endpoint, params) {\n        if (!this._isConfigured) {\n            throw new Error(\"Clockify service not properly configured\");\n        }\n        try {\n            const url = new URL(`${this.baseUrl}${endpoint}`);\n            if (params) {\n                Object.keys(params).forEach((key)=>{\n                    if (params[key] !== undefined && params[key] !== null) {\n                        url.searchParams.append(key, params[key]);\n                    }\n                });\n            }\n            console.log(`🔍 Clockify API Request: ${url.toString()}`);\n            console.log(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            console.log(`📡 Clockify API Response: ${response.status} ${response.statusText}`);\n            if (response.status === 401) {\n                throw new Error(\"Clockify API authentication failed - check your API key\");\n            }\n            if (response.status === 403) {\n                throw new Error(\"Clockify API access forbidden - check your workspace ID and permissions\");\n            }\n            if (response.status === 404) {\n                const errorDetails = `Endpoint not found: ${endpoint}`;\n                console.error(`❌ 404 Error Details: ${errorDetails}`);\n                console.error(`   Full URL: ${url.toString()}`);\n                console.error(`   Workspace ID: ${this.workspaceId}`);\n                console.error(`   API Key configured: ${!!this.apiKey}`);\n                throw new Error(`Clockify API error: 404 Not Found - ${errorDetails}`);\n            }\n            if (response.status === 429) {\n                throw new Error(\"Clockify API rate limit exceeded - try again later\");\n            }\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.log(`✅ Clockify API Success: ${endpoint}`);\n            return data;\n        } catch (error) {\n            if (error instanceof Error) {\n                console.error(`❌ Clockify API Error in ${endpoint}:`, error.message);\n                throw error;\n            }\n            throw new Error(`Clockify API request failed: ${error}`);\n        }\n    }\n    // Check if the service is properly configured\n    isConfigured() {\n        return this._isConfigured;\n    }\n    // Get configuration status for debugging\n    getConfigurationStatus() {\n        return {\n            configured: this._isConfigured,\n            hasApiKey: !!(this.apiKey && this.apiKey !== \"your_clockify_api_key_here\"),\n            hasWorkspaceId: !!(this.workspaceId && this.workspaceId !== \"your_clockify_workspace_id_here\")\n        };\n    }\n    // Alias for getConfigurationStatus to match API usage\n    getConfigStatus() {\n        return this.getConfigurationStatus();\n    }\n    // Method to set workspace ID dynamically\n    setWorkspaceId(workspaceId) {\n        this.workspaceId = workspaceId;\n        if (this.apiKey && this.apiKey !== \"your_clockify_api_key_here\") {\n            this._isConfigured = true;\n        }\n    }\n    async getUser() {\n        try {\n            return await this.makeRequest(\"/user\");\n        } catch (error) {\n            console.error(\"Failed to get Clockify user:\", error);\n            // Return mock user data when Clockify fails\n            return {\n                id: \"mock-user-id\",\n                name: \"Mock User\",\n                email: \"user@example.com\",\n                status: \"ACTIVE\"\n            };\n        }\n    }\n    async getWorkspaces() {\n        try {\n            return await this.makeRequest(\"/workspaces\");\n        } catch (error) {\n            console.error(\"Failed to get Clockify workspaces:\", error);\n            // Return mock workspace data when Clockify fails\n            return [\n                {\n                    id: \"mock-workspace-id\",\n                    name: \"Mock Workspace\",\n                    hourlyRate: {\n                        amount: 100,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getProjects() {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            return await this.makeRequest(`/workspaces/${this.workspaceId}/projects`);\n        } catch (error) {\n            console.error(\"Failed to get Clockify projects:\", error);\n            // Return mock project data when Clockify fails\n            return [\n                {\n                    id: \"mock-project-1\",\n                    name: \"Mock Project 1\",\n                    clientId: \"mock-client-1\",\n                    clientName: \"Mock Client 1\",\n                    status: \"ACTIVE\",\n                    billable: true,\n                    hourlyRate: {\n                        amount: 150,\n                        currency: \"USD\"\n                    }\n                },\n                {\n                    id: \"mock-project-2\",\n                    name: \"Mock Project 2\",\n                    clientId: \"mock-client-2\",\n                    clientName: \"Mock Client 2\",\n                    status: \"ACTIVE\",\n                    billable: true,\n                    hourlyRate: {\n                        amount: 175,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getTimeEntries(projectId, startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            return await this.makeRequest(`/workspaces/${this.workspaceId}/projects/${projectId}/time-entries`, {\n                start: startDate,\n                end: endDate\n            });\n        } catch (error) {\n            console.error(\"Failed to get Clockify time entries:\", error);\n            // Return mock time entry data when Clockify fails\n            return [\n                {\n                    id: \"mock-time-entry-1\",\n                    description: \"Mock work session\",\n                    timeInterval: {\n                        start: startDate,\n                        end: endDate,\n                        duration: \"PT2H30M\"\n                    },\n                    billable: true,\n                    userId: \"mock-user-id\",\n                    userName: \"Mock User\"\n                }\n            ];\n        }\n    }\n    async getAllTimeEntries(startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            // Clockify API requires POST for filtered time entries with date parameters\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/time-entries`);\n            console.log(`🔍 Clockify API Request: ${url.toString()}`);\n            console.log(`   Method: POST`);\n            console.log(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n            console.log(`   Body: ${JSON.stringify({\n                start: startDate,\n                end: endDate\n            })}`);\n            const response = await fetch(url.toString(), {\n                method: \"POST\",\n                headers: {\n                    ...this.getHeaders(),\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    start: startDate,\n                    end: endDate\n                })\n            });\n            console.log(`📡 Clockify API Response: ${response.status} ${response.statusText}`);\n            if (response.status === 401) {\n                throw new Error(\"Clockify API authentication failed - check your API key\");\n            }\n            if (response.status === 403) {\n                throw new Error(\"Clockify API access forbidden - check your workspace ID and permissions\");\n            }\n            if (response.status === 404) {\n                const errorDetails = `Endpoint not found: /workspaces/${this.workspaceId}/time-entries`;\n                console.error(`❌ 404 Error Details: ${errorDetails}`);\n                console.error(`   Full URL: ${url.toString()}`);\n                console.error(`   Workspace ID: ${this.workspaceId}`);\n                console.error(`   API Key configured: ${!!this.apiKey}`);\n                throw new Error(`Clockify API error: 404 Not Found - ${errorDetails}`);\n            }\n            if (response.status === 405) {\n                throw new Error(\"Clockify API method not allowed - this endpoint requires POST method\");\n            }\n            if (response.status === 429) {\n                throw new Error(\"Clockify API rate limit exceeded - try again later\");\n            }\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.log(`✅ Clockify API Success: /workspaces/${this.workspaceId}/time-entries`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get all Clockify time entries:\", error);\n            // Return mock time entry data when Clockify fails\n            return [\n                {\n                    id: \"mock-time-entry-1\",\n                    description: \"Mock work session\",\n                    timeInterval: {\n                        start: startDate,\n                        end: endDate,\n                        duration: \"PT8H0M\"\n                    },\n                    billable: true,\n                    userId: \"mock-user-id\",\n                    userName: \"Mock User\",\n                    projectId: \"mock-project-1\",\n                    projectName: \"Mock Project 1\"\n                }\n            ];\n        }\n    }\n    async getUsers() {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            return await this.makeRequest(`/workspaces/${this.workspaceId}/users`);\n        } catch (error) {\n            console.error(\"Failed to get Clockify users:\", error);\n            // Return mock user data when Clockify fails\n            return [\n                {\n                    id: \"mock-user-1\",\n                    name: \"Mock User 1\",\n                    email: \"user1@example.com\",\n                    status: \"ACTIVE\",\n                    hourlyRate: {\n                        amount: 100,\n                        currency: \"USD\"\n                    }\n                },\n                {\n                    id: \"mock-user-2\",\n                    name: \"Mock User 2\",\n                    email: \"user2@example.com\",\n                    status: \"ACTIVE\",\n                    hourlyRate: {\n                        amount: 120,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getProjectTimeReport(projectId, startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const timeEntries = await this.getTimeEntries(projectId, startDate, endDate);\n            const project = await this.getProjects().then((projects)=>projects.find((p)=>p.id === projectId));\n            if (!project) {\n                throw new Error(\"Project not found\");\n            }\n            const totalHours = timeEntries.reduce((sum, entry)=>{\n                const duration = entry.timeInterval.duration;\n                const hours = this.parseDuration(duration);\n                return sum + hours;\n            }, 0);\n            const billableHours = timeEntries.filter((entry)=>entry.billable).reduce((sum, entry)=>{\n                const duration = entry.timeInterval.duration;\n                const hours = this.parseDuration(duration);\n                return sum + hours;\n            }, 0);\n            const nonBillableHours = totalHours - billableHours;\n            return {\n                projectId,\n                projectName: project.name,\n                totalHours,\n                billableHours,\n                nonBillableHours,\n                totalAmount: totalHours * (project.hourlyRate?.amount || 0),\n                billableAmount: billableHours * (project.hourlyRate?.amount || 0),\n                nonBillableAmount: nonBillableHours * (project.hourlyRate?.amount || 0),\n                entries: timeEntries,\n                period: {\n                    start: startDate,\n                    end: endDate\n                }\n            };\n        } catch (error) {\n            console.error(\"Failed to get project time report:\", error);\n            return null;\n        }\n    }\n    async getAllProjectsTimeSummary(startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const projects = await this.getProjects();\n            const reports = [];\n            for (const project of projects){\n                const report = await this.getProjectTimeReport(project.id, startDate, endDate);\n                if (report) {\n                    reports.push(report);\n                }\n            }\n            return reports;\n        } catch (error) {\n            console.error(\"Failed to get all projects time summary:\", error);\n            return [];\n        }\n    }\n    // Helper method to parse ISO 8601 duration to hours\n    parseDuration(duration) {\n        const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n        if (!match) return 0;\n        const hours = parseInt(match[1] || \"0\");\n        const minutes = parseInt(match[2] || \"0\");\n        const seconds = parseInt(match[3] || \"0\");\n        return hours + minutes / 60 + seconds / 3600;\n    }\n}\n// Create the service instance\nconst clockifyService = new ClockifyService();\n// Export the service instance as both default and named export\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clockifyService);\n\n// Export convenience functions\nconst fetchClockifyProjects = async ()=>{\n    try {\n        return await clockifyService.getProjects();\n    } catch (error) {\n        console.error(\"Error fetching Clockify projects:\", error);\n        return [];\n    }\n};\nconst fetchClockifyTimeEntries = async (projectId, startDate, endDate)=>{\n    try {\n        return await clockifyService.getTimeEntries(projectId, startDate || \"\", endDate || \"\");\n    } catch (error) {\n        console.error(\"Error fetching Clockify time entries:\", error);\n        return [];\n    }\n};\nconst fetchClockifyTimeReport = async (projectId, startDate, endDate)=>{\n    try {\n        return await clockifyService.getProjectTimeReport(projectId, startDate, endDate);\n    } catch (error) {\n        console.error(\"Error fetching Clockify time report:\", error);\n        return null;\n    }\n};\nconst fetchAllClockifyTimeSummaries = async (startDate, endDate)=>{\n    try {\n        return await clockifyService.getAllProjectsTimeSummary(startDate, endDate);\n    } catch (error) {\n        console.error(\"Error fetching Clockify time summaries:\", error);\n        return [];\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFxQ0E7UUFDbkQsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFO0FBRUssTUFBTXlFLDJCQUEyQixPQUN0QzdDLFdBQ0FDLFdBQ0FDO0lBRUEsSUFBSTtRQUNGLE9BQU8sTUFBTXlDLGdCQUFnQjVDLGNBQWMsQ0FBQ0MsV0FBV0MsYUFBYSxJQUFJQyxXQUFXO0lBQ3JGLEVBQUUsT0FBTzlCLE9BQU87UUFDZDNCLFFBQVEyQixLQUFLLENBQUMseUNBQXlDQTtRQUN2RCxPQUFPLEVBQUU7SUFDWDtBQUNGLEVBQUU7QUFFSyxNQUFNMEUsMEJBQTBCLE9BQ3JDOUMsV0FDQUMsV0FDQUM7SUFFQSxJQUFJO1FBQ0YsT0FBTyxNQUFNeUMsZ0JBQWdCN0Isb0JBQW9CLENBQUNkLFdBQVdDLFdBQVdDO0lBQzFFLEVBQUUsT0FBTzlCLE9BQU87UUFDZDNCLFFBQVEyQixLQUFLLENBQUMsd0NBQXdDQTtRQUN0RCxPQUFPO0lBQ1Q7QUFDRixFQUFFO0FBRUssTUFBTTJFLGdDQUFnQyxPQUMzQzlDLFdBQ0FDO0lBRUEsSUFBSTtRQUNGLE9BQU8sTUFBTXlDLGdCQUFnQlIseUJBQXlCLENBQUNsQyxXQUFXQztJQUNwRSxFQUFFLE9BQU85QixPQUFPO1FBQ2QzQixRQUFRMkIsS0FBSyxDQUFDLDJDQUEyQ0E7UUFDekQsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vbGliL2Nsb2NraWZ5LnRzPzkwZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuZXhwb3J0IGludGVyZmFjZSBDbG9ja2lmeVRpbWVFbnRyeSB7XG4gIGlkOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBiaWxsYWJsZTogYm9vbGVhbjtcbiAgdGFza0lkPzogc3RyaW5nO1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgdGltZUludGVydmFsOiB7XG4gICAgc3RhcnQ6IHN0cmluZztcbiAgICBlbmQ/OiBzdHJpbmc7XG4gICAgZHVyYXRpb246IHN0cmluZztcbiAgfTtcbiAgaG91cmx5UmF0ZT86IHtcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICB9O1xuICBjb3N0UmF0ZT86IHtcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICB9O1xuICBpc0xvY2tlZDogYm9vbGVhbjtcbiAgY3VzdG9tRmllbGRWYWx1ZXM6IGFueVtdO1xuICB0eXBlOiBzdHJpbmc7XG4gIHRhZ3M6IGFueVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5UHJvamVjdCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgd29ya3NwYWNlSWQ6IHN0cmluZztcbiAgY2xpZW50SWQ/OiBzdHJpbmc7XG4gIGNsaWVudE5hbWU/OiBzdHJpbmc7XG4gIGlzUHVibGljOiBib29sZWFuO1xuICBpc1RlbXBsYXRlOiBib29sZWFuO1xuICBjb2xvcjogc3RyaW5nO1xuICBub3RlPzogc3RyaW5nO1xuICBiaWxsYWJsZTogYm9vbGVhbjtcbiAgcHVibGljOiBib29sZWFuO1xuICBhcmNoaXZlZDogYm9vbGVhbjtcbiAgZXN0aW1hdGU6IHtcbiAgICBlc3RpbWF0ZTogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbiAgfTtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIGJ1ZGdldEVzdGltYXRlOiBudW1iZXI7XG4gIGJ1ZGdldFR5cGU6IHN0cmluZztcbiAgaG91cmx5UmF0ZToge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gIH07XG4gIGNvc3RSYXRlOiB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgfTtcbiAgdGltZUVzdGltYXRlOiBzdHJpbmc7XG4gIGJ1ZGdldDogbnVtYmVyO1xuICBzcGVudDogc3RyaW5nO1xuICBwcm9ncmVzczogbnVtYmVyO1xuICByYXRlOiBudW1iZXI7XG4gIHJhdGVMYXN0VXBkYXRlZDogc3RyaW5nO1xuICBmaXhlZEZlZTogbnVtYmVyO1xuICBtZW1iZXJzaGlwczogYW55W107XG4gIHRhc2tDb3VudDoge1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgZXN0aW1hdGU6IG51bWJlcjtcbiAgfTtcbiAgY3VzdG9tRmllbGRzOiBhbnlbXTtcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG4gIGVuZERhdGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xvY2tpZnlVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm9maWxlUGljdHVyZTogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgYWN0aXZlV29ya3NwYWNlOiBzdHJpbmc7XG4gIGRlZmF1bHRXb3Jrc3BhY2U6IHN0cmluZztcbiAgc2V0dGluZ3M6IGFueTtcbiAgbWVtYmVyc2hpcHM6IGFueVtdO1xuICBwcm9maWxlUGljdHVyZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5V29ya3NwYWNlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm9maWxlOiBudW1iZXI7XG4gIHByZW1pdW06IGJvb2xlYW47XG4gIGFkbWluOiBib29sZWFuO1xuICBkZWZhdWx0SG91cmx5UmF0ZTogbnVtYmVyO1xuICBkZWZhdWx0Q3VycmVuY3k6IHN0cmluZztcbiAgb25seUFkbWluc01heUNyZWF0ZVByb2plY3RzOiBib29sZWFuO1xuICBvbmx5QWRtaW5zU2VlQmlsbGFibGVSYXRlczogYm9vbGVhbjtcbiAgb25seUFkbWluc1NlZVRlYW1EYXNoYm9hcmQ6IGJvb2xlYW47XG4gIHByb2plY3RzQmlsbGFibGVCeURlZmF1bHQ6IGJvb2xlYW47XG4gIHJvdW5kaW5nOiBudW1iZXI7XG4gIHJvdW5kaW5nTWludXRlczogbnVtYmVyO1xuICBsb2dvOiBzdHJpbmc7XG4gIGljYWxVcmw6IHN0cmluZztcbiAgaWNhbEVuYWJsZWQ6IGJvb2xlYW47XG4gIGNzdlVwbG9hZDoge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47XG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nO1xuICAgIHRpbWVGb3JtYXQ6IHN0cmluZztcbiAgfTtcbiAgc3Vic2NyaXB0aW9uOiB7XG4gICAgc3RhcnREYXRlOiBzdHJpbmc7XG4gICAgZW5kRGF0ZTogc3RyaW5nO1xuICAgIHRyaWFsOiBib29sZWFuO1xuICAgIHN0YXR1czogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5VGltZVJlcG9ydCB7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICBwcm9qZWN0TmFtZTogc3RyaW5nO1xuICB0b3RhbEhvdXJzOiBudW1iZXI7XG4gIGJpbGxhYmxlSG91cnM6IG51bWJlcjtcbiAgbm9uQmlsbGFibGVIb3VyczogbnVtYmVyO1xuICB0b3RhbEFtb3VudDogbnVtYmVyO1xuICBiaWxsYWJsZUFtb3VudDogbnVtYmVyO1xuICBub25CaWxsYWJsZUFtb3VudDogbnVtYmVyO1xuICBlbnRyaWVzOiBDbG9ja2lmeVRpbWVFbnRyeVtdO1xuICBwZXJpb2Q6IHtcbiAgICBzdGFydDogc3RyaW5nO1xuICAgIGVuZDogc3RyaW5nO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgVG9rZW5SZXNwb25zZSB7XG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICBleHBpcmVzX2luOiBudW1iZXI7XG4gIHRva2VuX3R5cGU6IHN0cmluZztcbn1cblxuY2xhc3MgQ2xvY2tpZnlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHdvcmtzcGFjZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBiYXNlVXJsID0gJ2h0dHBzOi8vYXBpLmNsb2NraWZ5Lm1lL2FwaS92MSc7XG4gIHByaXZhdGUgX2lzQ29uZmlndXJlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQ0xPQ0tJRllfQVBJX0tFWSB8fCBudWxsO1xuICAgIHRoaXMud29ya3NwYWNlSWQgPSBwcm9jZXNzLmVudi5DTE9DS0lGWV9XT1JLU1BBQ0VfSUQgfHwgbnVsbDtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHZhbGlkIGNyZWRlbnRpYWxzXG4gICAgaWYgKHRoaXMuYXBpS2V5ICYmIHRoaXMuYXBpS2V5ICE9PSAneW91cl9jbG9ja2lmeV9hcGlfa2V5X2hlcmUnICYmIHRoaXMud29ya3NwYWNlSWQgJiYgdGhpcy53b3Jrc3BhY2VJZCAhPT0gJ3lvdXJfY2xvY2tpZnlfd29ya3NwYWNlX2lkX2hlcmUnKSB7XG4gICAgICB0aGlzLl9pc0NvbmZpZ3VyZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coJ0Nsb2NraWZ5IHNlcnZpY2UgaW5pdGlhbGl6ZWQgd2l0aCB2YWxpZCBjcmVkZW50aWFscycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc0NvbmZpZ3VyZWQgPSBmYWxzZTtcbiAgICAgIGNvbnNvbGUud2FybignQ2xvY2tpZnkgc2VydmljZSBpbml0aWFsaXplZCB3aXRob3V0IHZhbGlkIGNyZWRlbnRpYWxzIC0gd2lsbCB1c2UgbW9jayBkYXRhJyk7XG4gICAgICBjb25zb2xlLndhcm4oJ1BsZWFzZSBzZXQgQ0xPQ0tJRllfQVBJX0tFWSBhbmQgQ0xPQ0tJRllfV09SS1NQQUNFX0lEIGluIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRIZWFkZXJzKCkge1xuICAgIGlmICghdGhpcy5hcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGtleSBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ1gtQXBpLUtleSc6IHRoaXMuYXBpS2V5LFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdChlbmRwb2ludDogc3RyaW5nLCBwYXJhbXM/OiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICghdGhpcy5faXNDb25maWd1cmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IHNlcnZpY2Ugbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt0aGlzLmJhc2VVcmx9JHtlbmRwb2ludH1gKTtcbiAgICAgIGlmIChwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgaWYgKHBhcmFtc1trZXldICE9PSB1bmRlZmluZWQgJiYgcGFyYW1zW2tleV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgcGFyYW1zW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENsb2NraWZ5IEFQSSBSZXF1ZXN0OiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEhlYWRlcnM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5nZXRIZWFkZXJzKCkpfWApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5OhIENsb2NraWZ5IEFQSSBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCAtIGNoZWNrIHlvdXIgQVBJIGtleScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgYWNjZXNzIGZvcmJpZGRlbiAtIGNoZWNrIHlvdXIgd29ya3NwYWNlIElEIGFuZCBwZXJtaXNzaW9ucycpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JEZXRhaWxzID0gYEVuZHBvaW50IG5vdCBmb3VuZDogJHtlbmRwb2ludH1gO1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgNDA0IEVycm9yIERldGFpbHM6ICR7ZXJyb3JEZXRhaWxzfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgICBGdWxsIFVSTDogJHt1cmwudG9TdHJpbmcoKX1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgICAgV29ya3NwYWNlIElEOiAke3RoaXMud29ya3NwYWNlSWR9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIEFQSSBLZXkgY29uZmlndXJlZDogJHshIXRoaXMuYXBpS2V5fWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSBlcnJvcjogNDA0IE5vdCBGb3VuZCAtICR7ZXJyb3JEZXRhaWxzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgcmF0ZSBsaW1pdCBleGNlZWRlZCAtIHRyeSBhZ2FpbiBsYXRlcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0gLSAke2Vycm9yVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2xvY2tpZnkgQVBJIFN1Y2Nlc3M6ICR7ZW5kcG9pbnR9YCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIENsb2NraWZ5IEFQSSBFcnJvciBpbiAke2VuZHBvaW50fTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSByZXF1ZXN0IGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGUgc2VydmljZSBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gIHB1YmxpYyBpc0NvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQ29uZmlndXJlZDtcbiAgfVxuXG4gIC8vIEdldCBjb25maWd1cmF0aW9uIHN0YXR1cyBmb3IgZGVidWdnaW5nXG4gIHB1YmxpYyBnZXRDb25maWd1cmF0aW9uU3RhdHVzKCk6IHsgY29uZmlndXJlZDogYm9vbGVhbjsgaGFzQXBpS2V5OiBib29sZWFuOyBoYXNXb3Jrc3BhY2VJZDogYm9vbGVhbiB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29uZmlndXJlZDogdGhpcy5faXNDb25maWd1cmVkLFxuICAgICAgaGFzQXBpS2V5OiAhISh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaUtleSAhPT0gJ3lvdXJfY2xvY2tpZnlfYXBpX2tleV9oZXJlJyksXG4gICAgICBoYXNXb3Jrc3BhY2VJZDogISEodGhpcy53b3Jrc3BhY2VJZCAmJiB0aGlzLndvcmtzcGFjZUlkICE9PSAneW91cl9jbG9ja2lmeV93b3Jrc3BhY2VfaWRfaGVyZScpXG4gICAgfTtcbiAgfVxuXG4gIC8vIEFsaWFzIGZvciBnZXRDb25maWd1cmF0aW9uU3RhdHVzIHRvIG1hdGNoIEFQSSB1c2FnZVxuICBwdWJsaWMgZ2V0Q29uZmlnU3RhdHVzKCk6IHsgY29uZmlndXJlZDogYm9vbGVhbjsgaGFzQXBpS2V5OiBib29sZWFuOyBoYXNXb3Jrc3BhY2VJZDogYm9vbGVhbiB9IHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb25maWd1cmF0aW9uU3RhdHVzKCk7XG4gIH1cblxuICAvLyBNZXRob2QgdG8gc2V0IHdvcmtzcGFjZSBJRCBkeW5hbWljYWxseVxuICBwdWJsaWMgc2V0V29ya3NwYWNlSWQod29ya3NwYWNlSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMud29ya3NwYWNlSWQgPSB3b3Jrc3BhY2VJZDtcbiAgICBpZiAodGhpcy5hcGlLZXkgJiYgdGhpcy5hcGlLZXkgIT09ICd5b3VyX2Nsb2NraWZ5X2FwaV9rZXlfaGVyZScpIHtcbiAgICAgIHRoaXMuX2lzQ29uZmlndXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcigpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL3VzZXInKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBDbG9ja2lmeSB1c2VyOicsIGVycm9yKTtcbiAgICAgIC8vIFJldHVybiBtb2NrIHVzZXIgZGF0YSB3aGVuIENsb2NraWZ5IGZhaWxzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogJ21vY2stdXNlci1pZCcsXG4gICAgICAgIG5hbWU6ICdNb2NrIFVzZXInLFxuICAgICAgICBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nLFxuICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFdvcmtzcGFjZXMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL3dvcmtzcGFjZXMnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBDbG9ja2lmeSB3b3Jrc3BhY2VzOicsIGVycm9yKTtcbiAgICAgIC8vIFJldHVybiBtb2NrIHdvcmtzcGFjZSBkYXRhIHdoZW4gQ2xvY2tpZnkgZmFpbHNcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21vY2std29ya3NwYWNlLWlkJyxcbiAgICAgICAgICBuYW1lOiAnTW9jayBXb3Jrc3BhY2UnLFxuICAgICAgICAgIGhvdXJseVJhdGU6IHsgYW1vdW50OiAxMDAsIGN1cnJlbmN5OiAnVVNEJyB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UHJvamVjdHMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3Byb2plY3RzYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgQ2xvY2tpZnkgcHJvamVjdHM6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIG1vY2sgcHJvamVjdCBkYXRhIHdoZW4gQ2xvY2tpZnkgZmFpbHNcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21vY2stcHJvamVjdC0xJyxcbiAgICAgICAgICBuYW1lOiAnTW9jayBQcm9qZWN0IDEnLFxuICAgICAgICAgIGNsaWVudElkOiAnbW9jay1jbGllbnQtMScsXG4gICAgICAgICAgY2xpZW50TmFtZTogJ01vY2sgQ2xpZW50IDEnLFxuICAgICAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICAgICAgYmlsbGFibGU6IHRydWUsXG4gICAgICAgICAgaG91cmx5UmF0ZTogeyBhbW91bnQ6IDE1MCwgY3VycmVuY3k6ICdVU0QnIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbW9jay1wcm9qZWN0LTInLFxuICAgICAgICAgIG5hbWU6ICdNb2NrIFByb2plY3QgMicsXG4gICAgICAgICAgY2xpZW50SWQ6ICdtb2NrLWNsaWVudC0yJyxcbiAgICAgICAgICBjbGllbnROYW1lOiAnTW9jayBDbGllbnQgMicsXG4gICAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgICAgICBiaWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgICBob3VybHlSYXRlOiB7IGFtb3VudDogMTc1LCBjdXJyZW5jeTogJ1VTRCcgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFRpbWVFbnRyaWVzKHByb2plY3RJZDogc3RyaW5nLCBzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3Byb2plY3RzLyR7cHJvamVjdElkfS90aW1lLWVudHJpZXNgLCB7XG4gICAgICAgIHN0YXJ0OiBzdGFydERhdGUsXG4gICAgICAgIGVuZDogZW5kRGF0ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgQ2xvY2tpZnkgdGltZSBlbnRyaWVzOicsIGVycm9yKTtcbiAgICAgIC8vIFJldHVybiBtb2NrIHRpbWUgZW50cnkgZGF0YSB3aGVuIENsb2NraWZ5IGZhaWxzXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtb2NrLXRpbWUtZW50cnktMScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdNb2NrIHdvcmsgc2Vzc2lvbicsXG4gICAgICAgICAgdGltZUludGVydmFsOiB7XG4gICAgICAgICAgICBzdGFydDogc3RhcnREYXRlLFxuICAgICAgICAgICAgZW5kOiBlbmREYXRlLFxuICAgICAgICAgICAgZHVyYXRpb246ICdQVDJIMzBNJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmlsbGFibGU6IHRydWUsXG4gICAgICAgICAgdXNlcklkOiAnbW9jay11c2VyLWlkJyxcbiAgICAgICAgICB1c2VyTmFtZTogJ01vY2sgVXNlcidcbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBbGxUaW1lRW50cmllcyhzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xvY2tpZnkgQVBJIHJlcXVpcmVzIFBPU1QgZm9yIGZpbHRlcmVkIHRpbWUgZW50cmllcyB3aXRoIGRhdGUgcGFyYW1ldGVyc1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt0aGlzLmJhc2VVcmx9L3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS90aW1lLWVudHJpZXNgKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYPCflI0gQ2xvY2tpZnkgQVBJIFJlcXVlc3Q6ICR7dXJsLnRvU3RyaW5nKCl9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgTWV0aG9kOiBQT1NUYCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgSGVhZGVyczogJHtKU09OLnN0cmluZ2lmeSh0aGlzLmdldEhlYWRlcnMoKSl9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgQm9keTogJHtKU09OLnN0cmluZ2lmeSh7IHN0YXJ0OiBzdGFydERhdGUsIGVuZDogZW5kRGF0ZSB9KX1gKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwudG9TdHJpbmcoKSwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIC4uLnRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzdGFydDogc3RhcnREYXRlLFxuICAgICAgICAgIGVuZDogZW5kRGF0ZVxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhg8J+ToSBDbG9ja2lmeSBBUEkgUmVzcG9uc2U6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IEFQSSBhdXRoZW50aWNhdGlvbiBmYWlsZWQgLSBjaGVjayB5b3VyIEFQSSBrZXknKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGFjY2VzcyBmb3JiaWRkZW4gLSBjaGVjayB5b3VyIHdvcmtzcGFjZSBJRCBhbmQgcGVybWlzc2lvbnMnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGV0YWlscyA9IGBFbmRwb2ludCBub3QgZm91bmQ6IC93b3Jrc3BhY2VzLyR7dGhpcy53b3Jrc3BhY2VJZH0vdGltZS1lbnRyaWVzYDtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIDQwNCBFcnJvciBEZXRhaWxzOiAke2Vycm9yRGV0YWlsc31gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgICAgRnVsbCBVUkw6ICR7dXJsLnRvU3RyaW5nKCl9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIFdvcmtzcGFjZSBJRDogJHt0aGlzLndvcmtzcGFjZUlkfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgICBBUEkgS2V5IGNvbmZpZ3VyZWQ6ICR7ISF0aGlzLmFwaUtleX1gKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbG9ja2lmeSBBUEkgZXJyb3I6IDQwNCBOb3QgRm91bmQgLSAke2Vycm9yRGV0YWlsc31gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA1KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIG1ldGhvZCBub3QgYWxsb3dlZCAtIHRoaXMgZW5kcG9pbnQgcmVxdWlyZXMgUE9TVCBtZXRob2QnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIHJhdGUgbGltaXQgZXhjZWVkZWQgLSB0cnkgYWdhaW4gbGF0ZXInKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbG9ja2lmeSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvclRleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIENsb2NraWZ5IEFQSSBTdWNjZXNzOiAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3RpbWUtZW50cmllc2ApO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgYWxsIENsb2NraWZ5IHRpbWUgZW50cmllczonLCBlcnJvcik7XG4gICAgICAvLyBSZXR1cm4gbW9jayB0aW1lIGVudHJ5IGRhdGEgd2hlbiBDbG9ja2lmeSBmYWlsc1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbW9jay10aW1lLWVudHJ5LTEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTW9jayB3b3JrIHNlc3Npb24nLFxuICAgICAgICAgIHRpbWVJbnRlcnZhbDoge1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgIGVuZDogZW5kRGF0ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAnUFQ4SDBNJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmlsbGFibGU6IHRydWUsXG4gICAgICAgICAgdXNlcklkOiAnbW9jay11c2VyLWlkJyxcbiAgICAgICAgICB1c2VyTmFtZTogJ01vY2sgVXNlcicsXG4gICAgICAgICAgcHJvamVjdElkOiAnbW9jay1wcm9qZWN0LTEnLFxuICAgICAgICAgIHByb2plY3ROYW1lOiAnTW9jayBQcm9qZWN0IDEnXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcnMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3VzZXJzYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgQ2xvY2tpZnkgdXNlcnM6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIG1vY2sgdXNlciBkYXRhIHdoZW4gQ2xvY2tpZnkgZmFpbHNcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21vY2stdXNlci0xJyxcbiAgICAgICAgICBuYW1lOiAnTW9jayBVc2VyIDEnLFxuICAgICAgICAgIGVtYWlsOiAndXNlcjFAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICAgICAgaG91cmx5UmF0ZTogeyBhbW91bnQ6IDEwMCwgY3VycmVuY3k6ICdVU0QnIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbW9jay11c2VyLTInLFxuICAgICAgICAgIG5hbWU6ICdNb2NrIFVzZXIgMicsXG4gICAgICAgICAgZW1haWw6ICd1c2VyMkBleGFtcGxlLmNvbScsXG4gICAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgICAgICBob3VybHlSYXRlOiB7IGFtb3VudDogMTIwLCBjdXJyZW5jeTogJ1VTRCcgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RUaW1lUmVwb3J0KHByb2plY3RJZDogc3RyaW5nLCBzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxDbG9ja2lmeVRpbWVSZXBvcnQgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy53b3Jrc3BhY2VJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtzcGFjZSBJRCBub3QgY29uZmlndXJlZCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0aW1lRW50cmllcyA9IGF3YWl0IHRoaXMuZ2V0VGltZUVudHJpZXMocHJvamVjdElkLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IHRoaXMuZ2V0UHJvamVjdHMoKS50aGVuKHByb2plY3RzID0+IFxuICAgICAgICBwcm9qZWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcHJvamVjdElkKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKCFwcm9qZWN0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvamVjdCBub3QgZm91bmQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdG90YWxIb3VycyA9IHRpbWVFbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4ge1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGVudHJ5LnRpbWVJbnRlcnZhbC5kdXJhdGlvbjtcbiAgICAgICAgY29uc3QgaG91cnMgPSB0aGlzLnBhcnNlRHVyYXRpb24oZHVyYXRpb24pO1xuICAgICAgICByZXR1cm4gc3VtICsgaG91cnM7XG4gICAgICB9LCAwKTtcblxuICAgICAgY29uc3QgYmlsbGFibGVIb3VycyA9IHRpbWVFbnRyaWVzXG4gICAgICAgIC5maWx0ZXIoZW50cnkgPT4gZW50cnkuYmlsbGFibGUpXG4gICAgICAgIC5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGVudHJ5LnRpbWVJbnRlcnZhbC5kdXJhdGlvbjtcbiAgICAgICAgICBjb25zdCBob3VycyA9IHRoaXMucGFyc2VEdXJhdGlvbihkdXJhdGlvbik7XG4gICAgICAgICAgcmV0dXJuIHN1bSArIGhvdXJzO1xuICAgICAgICB9LCAwKTtcblxuICAgICAgY29uc3Qgbm9uQmlsbGFibGVIb3VycyA9IHRvdGFsSG91cnMgLSBiaWxsYWJsZUhvdXJzO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcm9qZWN0SWQsXG4gICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0Lm5hbWUsXG4gICAgICAgIHRvdGFsSG91cnMsXG4gICAgICAgIGJpbGxhYmxlSG91cnMsXG4gICAgICAgIG5vbkJpbGxhYmxlSG91cnMsXG4gICAgICAgIHRvdGFsQW1vdW50OiB0b3RhbEhvdXJzICogKHByb2plY3QuaG91cmx5UmF0ZT8uYW1vdW50IHx8IDApLFxuICAgICAgICBiaWxsYWJsZUFtb3VudDogYmlsbGFibGVIb3VycyAqIChwcm9qZWN0LmhvdXJseVJhdGU/LmFtb3VudCB8fCAwKSxcbiAgICAgICAgbm9uQmlsbGFibGVBbW91bnQ6IG5vbkJpbGxhYmxlSG91cnMgKiAocHJvamVjdC5ob3VybHlSYXRlPy5hbW91bnQgfHwgMCksXG4gICAgICAgIGVudHJpZXM6IHRpbWVFbnRyaWVzLFxuICAgICAgICBwZXJpb2Q6IHsgc3RhcnQ6IHN0YXJ0RGF0ZSwgZW5kOiBlbmREYXRlIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcHJvamVjdCB0aW1lIHJlcG9ydDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBbGxQcm9qZWN0c1RpbWVTdW1tYXJ5KHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPENsb2NraWZ5VGltZVJlcG9ydFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy53b3Jrc3BhY2VJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtzcGFjZSBJRCBub3QgY29uZmlndXJlZCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IHRoaXMuZ2V0UHJvamVjdHMoKTtcbiAgICAgIGNvbnN0IHJlcG9ydHM6IENsb2NraWZ5VGltZVJlcG9ydFtdID0gW107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0cykge1xuICAgICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCB0aGlzLmdldFByb2plY3RUaW1lUmVwb3J0KHByb2plY3QuaWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgICAgIGlmIChyZXBvcnQpIHtcbiAgICAgICAgICByZXBvcnRzLnB1c2gocmVwb3J0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVwb3J0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBhbGwgcHJvamVjdHMgdGltZSBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kIHRvIHBhcnNlIElTTyA4NjAxIGR1cmF0aW9uIHRvIGhvdXJzXG4gIHByaXZhdGUgcGFyc2VEdXJhdGlvbihkdXJhdGlvbjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBtYXRjaCA9IGR1cmF0aW9uLm1hdGNoKC9QVCg/OihcXGQrKUgpPyg/OihcXGQrKU0pPyg/OihcXGQrKVMpPy8pO1xuICAgIGlmICghbWF0Y2gpIHJldHVybiAwO1xuICAgIFxuICAgIGNvbnN0IGhvdXJzID0gcGFyc2VJbnQobWF0Y2hbMV0gfHwgJzAnKTtcbiAgICBjb25zdCBtaW51dGVzID0gcGFyc2VJbnQobWF0Y2hbMl0gfHwgJzAnKTtcbiAgICBjb25zdCBzZWNvbmRzID0gcGFyc2VJbnQobWF0Y2hbM10gfHwgJzAnKTtcbiAgICBcbiAgICByZXR1cm4gaG91cnMgKyAobWludXRlcyAvIDYwKSArIChzZWNvbmRzIC8gMzYwMCk7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIHRoZSBzZXJ2aWNlIGluc3RhbmNlXG5jb25zdCBjbG9ja2lmeVNlcnZpY2UgPSBuZXcgQ2xvY2tpZnlTZXJ2aWNlKCk7XG5cbi8vIEV4cG9ydCB0aGUgc2VydmljZSBpbnN0YW5jZSBhcyBib3RoIGRlZmF1bHQgYW5kIG5hbWVkIGV4cG9ydFxuZXhwb3J0IGRlZmF1bHQgY2xvY2tpZnlTZXJ2aWNlO1xuZXhwb3J0IHsgY2xvY2tpZnlTZXJ2aWNlIH07XG5cbi8vIEV4cG9ydCBjb252ZW5pZW5jZSBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCBmZXRjaENsb2NraWZ5UHJvamVjdHMgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRQcm9qZWN0cygpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIENsb2NraWZ5IHByb2plY3RzOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaENsb2NraWZ5VGltZUVudHJpZXMgPSBhc3luYyAoXG4gIHByb2plY3RJZDogc3RyaW5nLFxuICBzdGFydERhdGU/OiBzdHJpbmcsXG4gIGVuZERhdGU/OiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBjbG9ja2lmeVNlcnZpY2UuZ2V0VGltZUVudHJpZXMocHJvamVjdElkLCBzdGFydERhdGUgfHwgJycsIGVuZERhdGUgfHwgJycpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIENsb2NraWZ5IHRpbWUgZW50cmllczonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDbG9ja2lmeVRpbWVSZXBvcnQgPSBhc3luYyAoXG4gIHByb2plY3RJZDogc3RyaW5nLFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgY2xvY2tpZnlTZXJ2aWNlLmdldFByb2plY3RUaW1lUmVwb3J0KHByb2plY3RJZCwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBDbG9ja2lmeSB0aW1lIHJlcG9ydDonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaEFsbENsb2NraWZ5VGltZVN1bW1hcmllcyA9IGFzeW5jIChcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRBbGxQcm9qZWN0c1RpbWVTdW1tYXJ5KHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQ2xvY2tpZnkgdGltZSBzdW1tYXJpZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJDbG9ja2lmeVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsIndvcmtzcGFjZUlkIiwiYmFzZVVybCIsIl9pc0NvbmZpZ3VyZWQiLCJwcm9jZXNzIiwiZW52IiwiQ0xPQ0tJRllfQVBJX0tFWSIsIkNMT0NLSUZZX1dPUktTUEFDRV9JRCIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwiZ2V0SGVhZGVycyIsIkVycm9yIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludCIsInBhcmFtcyIsInVybCIsIlVSTCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidW5kZWZpbmVkIiwic2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwidG9TdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZXJyb3JEZXRhaWxzIiwiZXJyb3IiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJjYXRjaCIsImRhdGEiLCJqc29uIiwibWVzc2FnZSIsImlzQ29uZmlndXJlZCIsImdldENvbmZpZ3VyYXRpb25TdGF0dXMiLCJjb25maWd1cmVkIiwiaGFzQXBpS2V5IiwiaGFzV29ya3NwYWNlSWQiLCJnZXRDb25maWdTdGF0dXMiLCJzZXRXb3Jrc3BhY2VJZCIsImdldFVzZXIiLCJpZCIsIm5hbWUiLCJlbWFpbCIsImdldFdvcmtzcGFjZXMiLCJob3VybHlSYXRlIiwiYW1vdW50IiwiY3VycmVuY3kiLCJnZXRQcm9qZWN0cyIsImNsaWVudElkIiwiY2xpZW50TmFtZSIsImJpbGxhYmxlIiwiZ2V0VGltZUVudHJpZXMiLCJwcm9qZWN0SWQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwic3RhcnQiLCJlbmQiLCJkZXNjcmlwdGlvbiIsInRpbWVJbnRlcnZhbCIsImR1cmF0aW9uIiwidXNlcklkIiwidXNlck5hbWUiLCJnZXRBbGxUaW1lRW50cmllcyIsImJvZHkiLCJwcm9qZWN0TmFtZSIsImdldFVzZXJzIiwiZ2V0UHJvamVjdFRpbWVSZXBvcnQiLCJ0aW1lRW50cmllcyIsInByb2plY3QiLCJ0aGVuIiwicHJvamVjdHMiLCJmaW5kIiwicCIsInRvdGFsSG91cnMiLCJyZWR1Y2UiLCJzdW0iLCJlbnRyeSIsImhvdXJzIiwicGFyc2VEdXJhdGlvbiIsImJpbGxhYmxlSG91cnMiLCJmaWx0ZXIiLCJub25CaWxsYWJsZUhvdXJzIiwidG90YWxBbW91bnQiLCJiaWxsYWJsZUFtb3VudCIsIm5vbkJpbGxhYmxlQW1vdW50IiwiZW50cmllcyIsInBlcmlvZCIsImdldEFsbFByb2plY3RzVGltZVN1bW1hcnkiLCJyZXBvcnRzIiwicmVwb3J0IiwicHVzaCIsIm1hdGNoIiwicGFyc2VJbnQiLCJtaW51dGVzIiwic2Vjb25kcyIsImNsb2NraWZ5U2VydmljZSIsImZldGNoQ2xvY2tpZnlQcm9qZWN0cyIsImZldGNoQ2xvY2tpZnlUaW1lRW50cmllcyIsImZldGNoQ2xvY2tpZnlUaW1lUmVwb3J0IiwiZmV0Y2hBbGxDbG9ja2lmeVRpbWVTdW1tYXJpZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/clockify.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateDashboardStats: () => (/* binding */ calculateDashboardStats),\n/* harmony export */   calculateProfitabilityMetrics: () => (/* binding */ calculateProfitabilityMetrics),\n/* harmony export */   calculateTimeTrackingKPIs: () => (/* binding */ calculateTimeTrackingKPIs),\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   createChartData: () => (/* binding */ createChartData),\n/* harmony export */   enhanceBillingDataWithClockify: () => (/* binding */ enhanceBillingDataWithClockify),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatEfficiency: () => (/* binding */ formatEfficiency),\n/* harmony export */   formatHours: () => (/* binding */ formatHours),\n/* harmony export */   formatMonth: () => (/* binding */ formatMonth),\n/* harmony export */   generateMonthRange: () => (/* binding */ generateMonthRange),\n/* harmony export */   getChartMonthRange: () => (/* binding */ getChartMonthRange),\n/* harmony export */   getCurrentMonthRange: () => (/* binding */ getCurrentMonthRange),\n/* harmony export */   getProjectionsMonthRange: () => (/* binding */ getProjectionsMonthRange),\n/* harmony export */   initializeProjectionsTable: () => (/* binding */ initializeProjectionsTable),\n/* harmony export */   isCurrentMonth: () => (/* binding */ isCurrentMonth),\n/* harmony export */   isFutureMonth: () => (/* binding */ isFutureMonth),\n/* harmony export */   isLocalStorageAvailable: () => (/* binding */ isLocalStorageAvailable),\n/* harmony export */   isPastMonth: () => (/* binding */ isPastMonth),\n/* harmony export */   processBillingData: () => (/* binding */ processBillingData),\n/* harmony export */   safeLocalStorageGet: () => (/* binding */ safeLocalStorageGet),\n/* harmony export */   safeLocalStorageRemove: () => (/* binding */ safeLocalStorageRemove),\n/* harmony export */   safeLocalStorageSet: () => (/* binding */ safeLocalStorageSet)\n/* harmony export */ });\n/* harmony import */ var _barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=addMonths,endOfMonth,format,startOfMonth,subMonths!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/startOfMonth/index.js\");\n/* harmony import */ var _barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=addMonths,endOfMonth,format,startOfMonth,subMonths!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/endOfMonth/index.js\");\n/* harmony import */ var _barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=addMonths,endOfMonth,format,startOfMonth,subMonths!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/format/index.js\");\n/* harmony import */ var _barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=addMonths,endOfMonth,format,startOfMonth,subMonths!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/addMonths/index.js\");\n/* harmony import */ var _barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=addMonths,endOfMonth,format,startOfMonth,subMonths!=!date-fns */ \"(rsc)/./node_modules/date-fns/esm/subMonths/index.js\");\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\nfunction generateMonthRange(startDate, endDate) {\n    const months = [];\n    let currentDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(startDate);\n    const end = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(endDate);\n    while(currentDate <= end){\n        months.push((0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(currentDate, \"yyyy-MM\"));\n        currentDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(currentDate, 1);\n    }\n    return months;\n}\nfunction getCurrentMonthRange(monthsBack = 12, monthsForward = 24) {\n    const today = new Date();\n    const startDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(today, monthsBack);\n    const endDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(today, monthsForward);\n    return generateMonthRange(startDate, endDate);\n}\nfunction getProjectionsMonthRange() {\n    const startDate = new Date(2022, 0, 1); // January 1, 2022\n    const today = new Date();\n    const endDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(today, 24); // 24 months beyond current month\n    return generateMonthRange(startDate, endDate);\n}\nfunction getChartMonthRange() {\n    const today = new Date();\n    const startDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(today, 12); // 1 year in the past\n    const endDate = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(today, 12); // 1 year in the future\n    return generateMonthRange(startDate, endDate);\n}\nfunction processBillingData(projects, invoices, projections) {\n    // Handle undefined or null inputs\n    const safeProjects = projects || [];\n    const safeInvoices = invoices || [];\n    const safeProjections = projections || {};\n    // Early return if no projects\n    if (safeProjects.length === 0) {\n        return [];\n    }\n    // Cache month range to avoid recalculation\n    const monthRange = getProjectionsMonthRange();\n    // Create a map of invoices by project for faster lookup\n    const invoiceMap = new Map();\n    safeInvoices.forEach((invoice)=>{\n        const projectId = invoice.project_id;\n        if (!invoiceMap.has(projectId)) {\n            invoiceMap.set(projectId, []);\n        }\n        invoiceMap.get(projectId).push(invoice);\n    });\n    return safeProjects.map((project)=>{\n        const projectInvoices = invoiceMap.get(project.project_id) || [];\n        // Pre-calculate invoice totals to avoid repeated calculations\n        const invoiceTotals = new Map();\n        projectInvoices.forEach((invoice)=>{\n            const month = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(new Date(invoice.date), \"yyyy-MM\");\n            const current = invoiceTotals.get(month) || {\n                billed: 0,\n                unbilled: 0\n            };\n            current.billed += invoice.billed_amount;\n            current.unbilled += invoice.unbilled_amount;\n            invoiceTotals.set(month, current);\n        });\n        const monthlyData = monthRange.map((month)=>{\n            const monthTotals = invoiceTotals.get(month) || {\n                billed: 0,\n                unbilled: 0\n            };\n            const projected = safeProjections[project.project_id]?.months?.[month]?.value || 0;\n            const actual = monthTotals.billed + monthTotals.unbilled;\n            return {\n                month,\n                billed: monthTotals.billed,\n                unbilled: monthTotals.unbilled,\n                projected,\n                actual\n            };\n        });\n        // Calculate totals efficiently\n        const totalBilled = monthlyData.reduce((sum, data)=>sum + data.billed, 0);\n        const totalUnbilled = monthlyData.reduce((sum, data)=>sum + data.unbilled, 0);\n        const totalProjected = monthlyData.reduce((sum, data)=>sum + data.projected, 0);\n        return {\n            projectId: project.project_id,\n            projectName: project.project_name,\n            customerName: project.customer_name,\n            signedFee: undefined,\n            monthlyData,\n            totalBilled,\n            totalUnbilled,\n            totalProjected\n        };\n    });\n}\nfunction calculateDashboardStats(billingData, closedProjects, monthlyProjections, monthlyStatuses) {\n    // Handle undefined or null billingData\n    if (!billingData || !Array.isArray(billingData)) {\n        return {\n            totalProjects: 0,\n            totalBilled: 0,\n            totalUnbilled: 0,\n            totalProjected: 0,\n            activeProjects: 0,\n            // Clockify KPIs\n            totalHours: 0,\n            billableHours: 0,\n            nonBillableHours: 0,\n            averageHourlyRate: 0,\n            totalTimeValue: 0,\n            efficiency: 0,\n            averageHoursPerProject: 0,\n            topPerformingProjects: []\n        };\n    }\n    const totalProjects = billingData.length;\n    const closedProjectsCount = closedProjects ? closedProjects.size : 0;\n    const activeProjects = totalProjects - closedProjectsCount;\n    // Use database projections and statuses if provided, otherwise fall back to localStorage\n    const projections = monthlyProjections || safeLocalStorageGet(\"monthlyProjections\") || {};\n    const statuses = monthlyStatuses || safeLocalStorageGet(\"monthlyStatuses\") || {};\n    // Optimize calculations by pre-calculating current year and month\n    const currentYear = new Date().getFullYear().toString();\n    const currentMonth = new Date().toISOString().slice(0, 7); // YYYY-MM format\n    // Batch calculate financial metrics to reduce iterations\n    let totalBilledYTD = 0;\n    let backlog = 0;\n    let totalProjected = 0;\n    // Single pass through projections for better performance\n    Object.keys(projections).forEach((projectId)=>{\n        const projectProjections = projections[projectId];\n        const projectStatuses = statuses[projectId];\n        if (projectProjections) {\n            Object.keys(projectProjections).forEach((month)=>{\n                const projectionValue = projectProjections[month] || 0;\n                // Check if month is in current year and status is \"Billed\"\n                if (month.startsWith(currentYear) && projectStatuses?.[month] === \"Billed\") {\n                    totalBilledYTD += projectionValue;\n                }\n                // Check if month is current or future and status is NOT \"Billed\"\n                if (month >= currentMonth && projectStatuses?.[month] !== \"Billed\") {\n                    backlog += projectionValue;\n                }\n                // Include all projections for current and future months\n                if (month >= currentMonth) {\n                    totalProjected += projectionValue;\n                }\n            });\n        }\n    });\n    // Calculate Clockify KPIs - optimized single pass\n    let totalHours = 0;\n    let billableHours = 0;\n    let nonBillableHours = 0;\n    let totalTimeValue = 0;\n    let totalHourlyRate = 0;\n    let projectsWithTimeData = 0;\n    const projectEfficiencies = [];\n    // Single pass through billing data for time tracking\n    billingData.forEach((project)=>{\n        if (project.clockifyData) {\n            const timeData = project.clockifyData;\n            totalHours += timeData.totalHours;\n            billableHours += timeData.billableHours;\n            nonBillableHours += timeData.nonBillableHours;\n            totalTimeValue += timeData.billableAmount;\n            if (timeData.totalHours > 0) {\n                const efficiency = timeData.billableHours / timeData.totalHours;\n                projectEfficiencies.push({\n                    projectId: project.projectId,\n                    efficiency,\n                    hours: timeData.totalHours\n                });\n                projectsWithTimeData++;\n            }\n        }\n    });\n    // Calculate derived metrics\n    const averageHourlyRate = projectsWithTimeData > 0 && billableHours > 0 ? totalTimeValue / billableHours : 0;\n    const efficiency = totalHours > 0 ? billableHours / totalHours : 0;\n    const averageHoursPerProject = projectsWithTimeData > 0 ? totalHours / projectsWithTimeData : 0;\n    // Get top performing projects (by efficiency and hours) - limit to top 5 for performance\n    const topPerformingProjects = projectEfficiencies.sort((a, b)=>b.efficiency * b.hours - a.efficiency * a.hours).slice(0, 5).map((p)=>p.projectId);\n    return {\n        totalProjects,\n        totalBilled: totalBilledYTD,\n        totalUnbilled: backlog,\n        totalProjected,\n        activeProjects,\n        // Clockify KPIs\n        totalHours,\n        billableHours,\n        nonBillableHours,\n        averageHourlyRate,\n        totalTimeValue,\n        efficiency,\n        averageHoursPerProject,\n        topPerformingProjects\n    };\n}\nfunction formatCurrency(amount) {\n    return new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency: \"USD\"\n    }).format(amount);\n}\nfunction formatMonth(monthString) {\n    const [year, month] = monthString.split(\"-\");\n    const date = new Date(parseInt(year), parseInt(month) - 1);\n    return (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(date, \"MMM yyyy\");\n}\nfunction isCurrentMonth(monthString) {\n    const currentMonth = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(new Date(), \"yyyy-MM\");\n    return monthString === currentMonth;\n}\nfunction isFutureMonth(monthString) {\n    const currentMonth = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(new Date(), \"yyyy-MM\");\n    return monthString > currentMonth;\n}\nfunction isPastMonth(monthString) {\n    const currentMonth = (0,_barrel_optimize_names_addMonths_endOfMonth_format_startOfMonth_subMonths_date_fns__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(new Date(), \"yyyy-MM\");\n    return monthString < currentMonth;\n}\n// localStorage utility functions\nfunction isLocalStorageAvailable() {\n    try {\n        const test = \"__localStorage_test__\";\n        localStorage.setItem(test, test);\n        localStorage.removeItem(test);\n        return true;\n    } catch  {\n        return false;\n    }\n}\nfunction safeLocalStorageGet(key) {\n    if (!isLocalStorageAvailable()) {\n        console.warn(\"localStorage is not available\");\n        return null;\n    }\n    try {\n        const item = localStorage.getItem(key);\n        return item ? JSON.parse(item) : null;\n    } catch (error) {\n        console.error(`Error reading from localStorage key '${key}':`, error);\n        return null;\n    }\n}\nfunction safeLocalStorageSet(key, value) {\n    if (!isLocalStorageAvailable()) {\n        console.warn(\"localStorage is not available\");\n        return false;\n    }\n    try {\n        localStorage.setItem(key, JSON.stringify(value));\n        return true;\n    } catch (error) {\n        console.error(`Error writing to localStorage key '${key}':`, error);\n        return false;\n    }\n}\nfunction safeLocalStorageRemove(key) {\n    if (!isLocalStorageAvailable()) {\n        return false;\n    }\n    try {\n        localStorage.removeItem(key);\n        return true;\n    } catch (error) {\n        console.error(`Error removing localStorage key '${key}':`, error);\n        return false;\n    }\n}\nfunction createChartData(billingData) {\n    return billingData.map((data)=>({\n            name: data.projectName,\n            billed: data.totalBilled,\n            unbilled: data.totalUnbilled,\n            projected: data.totalProjected\n        }));\n}\nfunction initializeProjectionsTable(projects) {\n    // Handle undefined or null projects\n    const safeProjects = projects || [];\n    const monthRange = getProjectionsMonthRange();\n    const table = {};\n    safeProjects.forEach((project)=>{\n        table[project.project_id] = {\n            months: {},\n            asrFee: 0\n        };\n        monthRange.forEach((month)=>{\n            const isEditable = isFutureMonth(month);\n            table[project.project_id].months[month] = {\n                value: 0,\n                isEditable,\n                isProjected: isEditable\n            };\n        });\n    });\n    return table;\n}\n// New functions for Clockify integration\nfunction calculateTimeTrackingKPIs(clockifyData) {\n    const efficiency = clockifyData.totalHours > 0 ? clockifyData.billableHours / clockifyData.totalHours : 0;\n    const averageHourlyRate = clockifyData.billableHours > 0 ? clockifyData.billableAmount / clockifyData.billableHours : 0;\n    return {\n        projectId: clockifyData.projectId,\n        projectName: clockifyData.projectName,\n        totalHours: clockifyData.totalHours,\n        billableHours: clockifyData.billableHours,\n        nonBillableHours: clockifyData.nonBillableHours,\n        hourlyRate: averageHourlyRate,\n        totalValue: clockifyData.billableAmount,\n        efficiency,\n        period: clockifyData.period\n    };\n}\nfunction enhanceBillingDataWithClockify(billingData, clockifyReports) {\n    return billingData.map((project)=>{\n        const clockifyReport = clockifyReports.find((report)=>report.projectId === project.projectId || report.projectName.toLowerCase().includes(project.projectName.toLowerCase()));\n        if (clockifyReport) {\n            const timeTrackingKPI = calculateTimeTrackingKPIs(clockifyReport);\n            return {\n                ...project,\n                clockifyData: clockifyReport,\n                totalHours: clockifyReport.totalHours,\n                billableHours: clockifyReport.billableHours,\n                nonBillableHours: clockifyReport.nonBillableHours,\n                hourlyRate: timeTrackingKPI.hourlyRate,\n                efficiency: timeTrackingKPI.efficiency\n            };\n        }\n        return project;\n    });\n}\nfunction calculateProfitabilityMetrics(billingData, timeTrackingKPI) {\n    const revenue = billingData.totalBilled + billingData.totalUnbilled;\n    const cost = timeTrackingKPI ? timeTrackingKPI.totalValue : 0;\n    const profit = revenue - cost;\n    const margin = revenue > 0 ? profit / revenue * 100 : 0;\n    return {\n        revenue,\n        cost,\n        profit,\n        margin\n    };\n}\nfunction formatHours(hours) {\n    const wholeHours = Math.floor(hours);\n    const minutes = Math.round((hours - wholeHours) * 60);\n    return `${wholeHours}h ${minutes}m`;\n}\nfunction formatEfficiency(efficiency) {\n    return `${(efficiency * 100).toFixed(1)}%`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGFBQWFDLEtBQUtDLEtBQUssQ0FBQzlEO0lBQzlCLE1BQU0rRCxVQUFVRixLQUFLRyxLQUFLLENBQUMsQ0FBQ2hFLFFBQVE0RCxVQUFTLElBQUs7SUFDbEQsT0FBTyxDQUFDLEVBQUVBLFdBQVcsRUFBRSxFQUFFRyxRQUFRLENBQUMsQ0FBQztBQUNyQztBQUVPLFNBQVNFLGlCQUFpQjVGLFVBQWtCO0lBQ2pELE9BQU8sQ0FBQyxFQUFFLENBQUNBLGFBQWEsR0FBRSxFQUFHNkYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vbGliL3V0aWxzLnRzP2Y3NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0LCBzdWJNb250aHMsIGFkZE1vbnRocywgc3RhcnRPZk1vbnRoLCBlbmRPZk1vbnRoIH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgdHlwZSBDbGFzc1ZhbHVlLCBjbHN4IH0gZnJvbSAnY2xzeCc7XG5pbXBvcnQgeyB0d01lcmdlIH0gZnJvbSAndGFpbHdpbmQtbWVyZ2UnO1xuaW1wb3J0IHsgWm9ob1Byb2plY3QsIFpvaG9JbnZvaWNlIH0gZnJvbSAnLi96b2hvJztcbmltcG9ydCB7IEJpbGxpbmdEYXRhLCBNb250aGx5QmlsbGluZ0RhdGEsIFByb2plY3Rpb25zVGFibGUsIFByb2plY3Rpb25DZWxsLCBDaGFydERhdGEsIERhc2hib2FyZFN0YXRzLCBUaW1lVHJhY2tpbmdLUEkgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IENsb2NraWZ5VGltZVJlcG9ydCB9IGZyb20gJy4vY2xvY2tpZnknO1xuXG5leHBvcnQgZnVuY3Rpb24gY24oLi4uaW5wdXRzOiBDbGFzc1ZhbHVlW10pIHtcbiAgcmV0dXJuIHR3TWVyZ2UoY2xzeChpbnB1dHMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTW9udGhSYW5nZShzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IG1vbnRoczogc3RyaW5nW10gPSBbXTtcbiAgbGV0IGN1cnJlbnREYXRlID0gc3RhcnRPZk1vbnRoKHN0YXJ0RGF0ZSk7XG4gIGNvbnN0IGVuZCA9IGVuZE9mTW9udGgoZW5kRGF0ZSk7XG5cbiAgd2hpbGUgKGN1cnJlbnREYXRlIDw9IGVuZCkge1xuICAgIG1vbnRocy5wdXNoKGZvcm1hdChjdXJyZW50RGF0ZSwgJ3l5eXktTU0nKSk7XG4gICAgY3VycmVudERhdGUgPSBhZGRNb250aHMoY3VycmVudERhdGUsIDEpO1xuICB9XG5cbiAgcmV0dXJuIG1vbnRocztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRNb250aFJhbmdlKG1vbnRoc0JhY2s6IG51bWJlciA9IDEyLCBtb250aHNGb3J3YXJkOiBudW1iZXIgPSAyNCk6IHN0cmluZ1tdIHtcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBzdGFydERhdGUgPSBzdWJNb250aHModG9kYXksIG1vbnRoc0JhY2spO1xuICBjb25zdCBlbmREYXRlID0gYWRkTW9udGhzKHRvZGF5LCBtb250aHNGb3J3YXJkKTtcbiAgXG4gIHJldHVybiBnZW5lcmF0ZU1vbnRoUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2plY3Rpb25zTW9udGhSYW5nZSgpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKDIwMjIsIDAsIDEpOyAvLyBKYW51YXJ5IDEsIDIwMjJcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBlbmREYXRlID0gYWRkTW9udGhzKHRvZGF5LCAyNCk7IC8vIDI0IG1vbnRocyBiZXlvbmQgY3VycmVudCBtb250aFxuICBcbiAgcmV0dXJuIGdlbmVyYXRlTW9udGhSYW5nZShzdGFydERhdGUsIGVuZERhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hhcnRNb250aFJhbmdlKCk6IHN0cmluZ1tdIHtcbiAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBzdGFydERhdGUgPSBzdWJNb250aHModG9kYXksIDEyKTsgLy8gMSB5ZWFyIGluIHRoZSBwYXN0XG4gIGNvbnN0IGVuZERhdGUgPSBhZGRNb250aHModG9kYXksIDEyKTsgLy8gMSB5ZWFyIGluIHRoZSBmdXR1cmVcbiAgXG4gIHJldHVybiBnZW5lcmF0ZU1vbnRoUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NCaWxsaW5nRGF0YShcbiAgcHJvamVjdHM6IFpvaG9Qcm9qZWN0W10sXG4gIGludm9pY2VzOiBab2hvSW52b2ljZVtdLFxuICBwcm9qZWN0aW9uczogUHJvamVjdGlvbnNUYWJsZVxuKTogQmlsbGluZ0RhdGFbXSB7XG4gIC8vIEhhbmRsZSB1bmRlZmluZWQgb3IgbnVsbCBpbnB1dHNcbiAgY29uc3Qgc2FmZVByb2plY3RzID0gcHJvamVjdHMgfHwgW107XG4gIGNvbnN0IHNhZmVJbnZvaWNlcyA9IGludm9pY2VzIHx8IFtdO1xuICBjb25zdCBzYWZlUHJvamVjdGlvbnMgPSBwcm9qZWN0aW9ucyB8fCB7fTtcbiAgXG4gIC8vIEVhcmx5IHJldHVybiBpZiBubyBwcm9qZWN0c1xuICBpZiAoc2FmZVByb2plY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBcbiAgLy8gQ2FjaGUgbW9udGggcmFuZ2UgdG8gYXZvaWQgcmVjYWxjdWxhdGlvblxuICBjb25zdCBtb250aFJhbmdlID0gZ2V0UHJvamVjdGlvbnNNb250aFJhbmdlKCk7XG4gIFxuICAvLyBDcmVhdGUgYSBtYXAgb2YgaW52b2ljZXMgYnkgcHJvamVjdCBmb3IgZmFzdGVyIGxvb2t1cFxuICBjb25zdCBpbnZvaWNlTWFwID0gbmV3IE1hcDxzdHJpbmcsIFpvaG9JbnZvaWNlW10+KCk7XG4gIHNhZmVJbnZvaWNlcy5mb3JFYWNoKGludm9pY2UgPT4ge1xuICAgIGNvbnN0IHByb2plY3RJZCA9IGludm9pY2UucHJvamVjdF9pZDtcbiAgICBpZiAoIWludm9pY2VNYXAuaGFzKHByb2plY3RJZCkpIHtcbiAgICAgIGludm9pY2VNYXAuc2V0KHByb2plY3RJZCwgW10pO1xuICAgIH1cbiAgICBpbnZvaWNlTWFwLmdldChwcm9qZWN0SWQpIS5wdXNoKGludm9pY2UpO1xuICB9KTtcbiAgXG4gIHJldHVybiBzYWZlUHJvamVjdHMubWFwKHByb2plY3QgPT4ge1xuICAgIGNvbnN0IHByb2plY3RJbnZvaWNlcyA9IGludm9pY2VNYXAuZ2V0KHByb2plY3QucHJvamVjdF9pZCkgfHwgW107XG4gICAgXG4gICAgLy8gUHJlLWNhbGN1bGF0ZSBpbnZvaWNlIHRvdGFscyB0byBhdm9pZCByZXBlYXRlZCBjYWxjdWxhdGlvbnNcbiAgICBjb25zdCBpbnZvaWNlVG90YWxzID0gbmV3IE1hcDxzdHJpbmcsIHsgYmlsbGVkOiBudW1iZXI7IHVuYmlsbGVkOiBudW1iZXIgfT4oKTtcbiAgICBcbiAgICBwcm9qZWN0SW52b2ljZXMuZm9yRWFjaChpbnZvaWNlID0+IHtcbiAgICAgIGNvbnN0IG1vbnRoID0gZm9ybWF0KG5ldyBEYXRlKGludm9pY2UuZGF0ZSksICd5eXl5LU1NJyk7XG4gICAgICBjb25zdCBjdXJyZW50ID0gaW52b2ljZVRvdGFscy5nZXQobW9udGgpIHx8IHsgYmlsbGVkOiAwLCB1bmJpbGxlZDogMCB9O1xuICAgICAgY3VycmVudC5iaWxsZWQgKz0gaW52b2ljZS5iaWxsZWRfYW1vdW50O1xuICAgICAgY3VycmVudC51bmJpbGxlZCArPSBpbnZvaWNlLnVuYmlsbGVkX2Ftb3VudDtcbiAgICAgIGludm9pY2VUb3RhbHMuc2V0KG1vbnRoLCBjdXJyZW50KTtcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBtb250aGx5RGF0YTogTW9udGhseUJpbGxpbmdEYXRhW10gPSBtb250aFJhbmdlLm1hcChtb250aCA9PiB7XG4gICAgICBjb25zdCBtb250aFRvdGFscyA9IGludm9pY2VUb3RhbHMuZ2V0KG1vbnRoKSB8fCB7IGJpbGxlZDogMCwgdW5iaWxsZWQ6IDAgfTtcbiAgICAgIGNvbnN0IHByb2plY3RlZCA9IHNhZmVQcm9qZWN0aW9uc1twcm9qZWN0LnByb2plY3RfaWRdPy5tb250aHM/Llttb250aF0/LnZhbHVlIHx8IDA7XG4gICAgICBjb25zdCBhY3R1YWwgPSBtb250aFRvdGFscy5iaWxsZWQgKyBtb250aFRvdGFscy51bmJpbGxlZDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbW9udGgsXG4gICAgICAgIGJpbGxlZDogbW9udGhUb3RhbHMuYmlsbGVkLFxuICAgICAgICB1bmJpbGxlZDogbW9udGhUb3RhbHMudW5iaWxsZWQsXG4gICAgICAgIHByb2plY3RlZCxcbiAgICAgICAgYWN0dWFsLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbHMgZWZmaWNpZW50bHlcbiAgICBjb25zdCB0b3RhbEJpbGxlZCA9IG1vbnRobHlEYXRhLnJlZHVjZSgoc3VtLCBkYXRhKSA9PiBzdW0gKyBkYXRhLmJpbGxlZCwgMCk7XG4gICAgY29uc3QgdG90YWxVbmJpbGxlZCA9IG1vbnRobHlEYXRhLnJlZHVjZSgoc3VtLCBkYXRhKSA9PiBzdW0gKyBkYXRhLnVuYmlsbGVkLCAwKTtcbiAgICBjb25zdCB0b3RhbFByb2plY3RlZCA9IG1vbnRobHlEYXRhLnJlZHVjZSgoc3VtLCBkYXRhKSA9PiBzdW0gKyBkYXRhLnByb2plY3RlZCwgMCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvamVjdElkOiBwcm9qZWN0LnByb2plY3RfaWQsXG4gICAgICBwcm9qZWN0TmFtZTogcHJvamVjdC5wcm9qZWN0X25hbWUsXG4gICAgICBjdXN0b21lck5hbWU6IHByb2plY3QuY3VzdG9tZXJfbmFtZSxcbiAgICAgIHNpZ25lZEZlZTogdW5kZWZpbmVkLCAvLyBSZW1vdmUgWm9obyBzaWduZWQgZmVlLCBvbmx5IHVzZSB1c2VyLWVudGVyZWQgZGF0YVxuICAgICAgbW9udGhseURhdGEsXG4gICAgICB0b3RhbEJpbGxlZCxcbiAgICAgIHRvdGFsVW5iaWxsZWQsXG4gICAgICB0b3RhbFByb2plY3RlZCxcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURhc2hib2FyZFN0YXRzKFxuICBiaWxsaW5nRGF0YTogQmlsbGluZ0RhdGFbXSwgXG4gIGNsb3NlZFByb2plY3RzPzogU2V0PHN0cmluZz4sXG4gIG1vbnRobHlQcm9qZWN0aW9ucz86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlcj4+LFxuICBtb250aGx5U3RhdHVzZXM/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PlxuKTogRGFzaGJvYXJkU3RhdHMge1xuICAvLyBIYW5kbGUgdW5kZWZpbmVkIG9yIG51bGwgYmlsbGluZ0RhdGFcbiAgaWYgKCFiaWxsaW5nRGF0YSB8fCAhQXJyYXkuaXNBcnJheShiaWxsaW5nRGF0YSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxQcm9qZWN0czogMCxcbiAgICAgIHRvdGFsQmlsbGVkOiAwLFxuICAgICAgdG90YWxVbmJpbGxlZDogMCxcbiAgICAgIHRvdGFsUHJvamVjdGVkOiAwLFxuICAgICAgYWN0aXZlUHJvamVjdHM6IDAsXG4gICAgICAvLyBDbG9ja2lmeSBLUElzXG4gICAgICB0b3RhbEhvdXJzOiAwLFxuICAgICAgYmlsbGFibGVIb3VyczogMCxcbiAgICAgIG5vbkJpbGxhYmxlSG91cnM6IDAsXG4gICAgICBhdmVyYWdlSG91cmx5UmF0ZTogMCxcbiAgICAgIHRvdGFsVGltZVZhbHVlOiAwLFxuICAgICAgZWZmaWNpZW5jeTogMCxcbiAgICAgIGF2ZXJhZ2VIb3Vyc1BlclByb2plY3Q6IDAsXG4gICAgICB0b3BQZXJmb3JtaW5nUHJvamVjdHM6IFtdLFxuICAgIH07XG4gIH1cblxuICBjb25zdCB0b3RhbFByb2plY3RzID0gYmlsbGluZ0RhdGEubGVuZ3RoO1xuICBjb25zdCBjbG9zZWRQcm9qZWN0c0NvdW50ID0gY2xvc2VkUHJvamVjdHMgPyBjbG9zZWRQcm9qZWN0cy5zaXplIDogMDtcbiAgY29uc3QgYWN0aXZlUHJvamVjdHMgPSB0b3RhbFByb2plY3RzIC0gY2xvc2VkUHJvamVjdHNDb3VudDtcblxuICAvLyBVc2UgZGF0YWJhc2UgcHJvamVjdGlvbnMgYW5kIHN0YXR1c2VzIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIGxvY2FsU3RvcmFnZVxuICBjb25zdCBwcm9qZWN0aW9ucyA9IG1vbnRobHlQcm9qZWN0aW9ucyB8fCBzYWZlTG9jYWxTdG9yYWdlR2V0KCdtb250aGx5UHJvamVjdGlvbnMnKSB8fCB7fTtcbiAgY29uc3Qgc3RhdHVzZXMgPSBtb250aGx5U3RhdHVzZXMgfHwgc2FmZUxvY2FsU3RvcmFnZUdldCgnbW9udGhseVN0YXR1c2VzJykgfHwge307XG4gIFxuICAvLyBPcHRpbWl6ZSBjYWxjdWxhdGlvbnMgYnkgcHJlLWNhbGN1bGF0aW5nIGN1cnJlbnQgeWVhciBhbmQgbW9udGhcbiAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtcbiAgY29uc3QgY3VycmVudE1vbnRoID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDcpOyAvLyBZWVlZLU1NIGZvcm1hdFxuICBcbiAgLy8gQmF0Y2ggY2FsY3VsYXRlIGZpbmFuY2lhbCBtZXRyaWNzIHRvIHJlZHVjZSBpdGVyYXRpb25zXG4gIGxldCB0b3RhbEJpbGxlZFlURCA9IDA7XG4gIGxldCBiYWNrbG9nID0gMDtcbiAgbGV0IHRvdGFsUHJvamVjdGVkID0gMDtcbiAgXG4gIC8vIFNpbmdsZSBwYXNzIHRocm91Z2ggcHJvamVjdGlvbnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuICBPYmplY3Qua2V5cyhwcm9qZWN0aW9ucykuZm9yRWFjaChwcm9qZWN0SWQgPT4ge1xuICAgIGNvbnN0IHByb2plY3RQcm9qZWN0aW9ucyA9IHByb2plY3Rpb25zW3Byb2plY3RJZF07XG4gICAgY29uc3QgcHJvamVjdFN0YXR1c2VzID0gc3RhdHVzZXNbcHJvamVjdElkXTtcbiAgICBcbiAgICBpZiAocHJvamVjdFByb2plY3Rpb25zKSB7XG4gICAgICBPYmplY3Qua2V5cyhwcm9qZWN0UHJvamVjdGlvbnMpLmZvckVhY2gobW9udGggPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0aW9uVmFsdWUgPSBwcm9qZWN0UHJvamVjdGlvbnNbbW9udGhdIHx8IDA7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBtb250aCBpcyBpbiBjdXJyZW50IHllYXIgYW5kIHN0YXR1cyBpcyBcIkJpbGxlZFwiXG4gICAgICAgIGlmIChtb250aC5zdGFydHNXaXRoKGN1cnJlbnRZZWFyKSAmJiBwcm9qZWN0U3RhdHVzZXM/Llttb250aF0gPT09ICdCaWxsZWQnKSB7XG4gICAgICAgICAgdG90YWxCaWxsZWRZVEQgKz0gcHJvamVjdGlvblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBtb250aCBpcyBjdXJyZW50IG9yIGZ1dHVyZSBhbmQgc3RhdHVzIGlzIE5PVCBcIkJpbGxlZFwiXG4gICAgICAgIGlmIChtb250aCA+PSBjdXJyZW50TW9udGggJiYgcHJvamVjdFN0YXR1c2VzPy5bbW9udGhdICE9PSAnQmlsbGVkJykge1xuICAgICAgICAgIGJhY2tsb2cgKz0gcHJvamVjdGlvblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJbmNsdWRlIGFsbCBwcm9qZWN0aW9ucyBmb3IgY3VycmVudCBhbmQgZnV0dXJlIG1vbnRoc1xuICAgICAgICBpZiAobW9udGggPj0gY3VycmVudE1vbnRoKSB7XG4gICAgICAgICAgdG90YWxQcm9qZWN0ZWQgKz0gcHJvamVjdGlvblZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIENhbGN1bGF0ZSBDbG9ja2lmeSBLUElzIC0gb3B0aW1pemVkIHNpbmdsZSBwYXNzXG4gIGxldCB0b3RhbEhvdXJzID0gMDtcbiAgbGV0IGJpbGxhYmxlSG91cnMgPSAwO1xuICBsZXQgbm9uQmlsbGFibGVIb3VycyA9IDA7XG4gIGxldCB0b3RhbFRpbWVWYWx1ZSA9IDA7XG4gIGxldCB0b3RhbEhvdXJseVJhdGUgPSAwO1xuICBsZXQgcHJvamVjdHNXaXRoVGltZURhdGEgPSAwO1xuICBjb25zdCBwcm9qZWN0RWZmaWNpZW5jaWVzOiB7IHByb2plY3RJZDogc3RyaW5nOyBlZmZpY2llbmN5OiBudW1iZXI7IGhvdXJzOiBudW1iZXIgfVtdID0gW107XG5cbiAgLy8gU2luZ2xlIHBhc3MgdGhyb3VnaCBiaWxsaW5nIGRhdGEgZm9yIHRpbWUgdHJhY2tpbmdcbiAgYmlsbGluZ0RhdGEuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICBpZiAocHJvamVjdC5jbG9ja2lmeURhdGEpIHtcbiAgICAgIGNvbnN0IHRpbWVEYXRhID0gcHJvamVjdC5jbG9ja2lmeURhdGE7XG4gICAgICB0b3RhbEhvdXJzICs9IHRpbWVEYXRhLnRvdGFsSG91cnM7XG4gICAgICBiaWxsYWJsZUhvdXJzICs9IHRpbWVEYXRhLmJpbGxhYmxlSG91cnM7XG4gICAgICBub25CaWxsYWJsZUhvdXJzICs9IHRpbWVEYXRhLm5vbkJpbGxhYmxlSG91cnM7XG4gICAgICB0b3RhbFRpbWVWYWx1ZSArPSB0aW1lRGF0YS5iaWxsYWJsZUFtb3VudDtcbiAgICAgIFxuICAgICAgaWYgKHRpbWVEYXRhLnRvdGFsSG91cnMgPiAwKSB7XG4gICAgICAgIGNvbnN0IGVmZmljaWVuY3kgPSB0aW1lRGF0YS5iaWxsYWJsZUhvdXJzIC8gdGltZURhdGEudG90YWxIb3VycztcbiAgICAgICAgcHJvamVjdEVmZmljaWVuY2llcy5wdXNoKHtcbiAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3QucHJvamVjdElkLFxuICAgICAgICAgIGVmZmljaWVuY3ksXG4gICAgICAgICAgaG91cnM6IHRpbWVEYXRhLnRvdGFsSG91cnMsXG4gICAgICAgIH0pO1xuICAgICAgICBwcm9qZWN0c1dpdGhUaW1lRGF0YSsrO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gQ2FsY3VsYXRlIGRlcml2ZWQgbWV0cmljc1xuICBjb25zdCBhdmVyYWdlSG91cmx5UmF0ZSA9IHByb2plY3RzV2l0aFRpbWVEYXRhID4gMCAmJiBiaWxsYWJsZUhvdXJzID4gMCA/IHRvdGFsVGltZVZhbHVlIC8gYmlsbGFibGVIb3VycyA6IDA7XG4gIGNvbnN0IGVmZmljaWVuY3kgPSB0b3RhbEhvdXJzID4gMCA/IGJpbGxhYmxlSG91cnMgLyB0b3RhbEhvdXJzIDogMDtcbiAgY29uc3QgYXZlcmFnZUhvdXJzUGVyUHJvamVjdCA9IHByb2plY3RzV2l0aFRpbWVEYXRhID4gMCA/IHRvdGFsSG91cnMgLyBwcm9qZWN0c1dpdGhUaW1lRGF0YSA6IDA7XG5cbiAgLy8gR2V0IHRvcCBwZXJmb3JtaW5nIHByb2plY3RzIChieSBlZmZpY2llbmN5IGFuZCBob3VycykgLSBsaW1pdCB0byB0b3AgNSBmb3IgcGVyZm9ybWFuY2VcbiAgY29uc3QgdG9wUGVyZm9ybWluZ1Byb2plY3RzID0gcHJvamVjdEVmZmljaWVuY2llc1xuICAgIC5zb3J0KChhLCBiKSA9PiAoYi5lZmZpY2llbmN5ICogYi5ob3VycykgLSAoYS5lZmZpY2llbmN5ICogYS5ob3VycykpXG4gICAgLnNsaWNlKDAsIDUpXG4gICAgLm1hcChwID0+IHAucHJvamVjdElkKTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsUHJvamVjdHMsXG4gICAgdG90YWxCaWxsZWQ6IHRvdGFsQmlsbGVkWVRELCAvLyBVc2UgWVREIGJpbGxlZCBhbW91bnQgZnJvbSBwcm9qZWN0aW9uc1xuICAgIHRvdGFsVW5iaWxsZWQ6IGJhY2tsb2csIC8vIFVzZSBiYWNrbG9nIGFtb3VudCBmcm9tIHByb2plY3Rpb25zXG4gICAgdG90YWxQcm9qZWN0ZWQsIC8vIFVzZSB0b3RhbCBwcm9qZWN0ZWQgYW1vdW50IGZyb20gcHJvamVjdGlvbnNcbiAgICBhY3RpdmVQcm9qZWN0cyxcbiAgICAvLyBDbG9ja2lmeSBLUElzXG4gICAgdG90YWxIb3VycyxcbiAgICBiaWxsYWJsZUhvdXJzLFxuICAgIG5vbkJpbGxhYmxlSG91cnMsXG4gICAgYXZlcmFnZUhvdXJseVJhdGUsXG4gICAgdG90YWxUaW1lVmFsdWUsXG4gICAgZWZmaWNpZW5jeSxcbiAgICBhdmVyYWdlSG91cnNQZXJQcm9qZWN0LFxuICAgIHRvcFBlcmZvcm1pbmdQcm9qZWN0cyxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KGFtb3VudDogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7XG4gICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgY3VycmVuY3k6ICdVU0QnLFxuICB9KS5mb3JtYXQoYW1vdW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE1vbnRoKG1vbnRoU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBbeWVhciwgbW9udGhdID0gbW9udGhTdHJpbmcuc3BsaXQoJy0nKTtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHllYXIpLCBwYXJzZUludChtb250aCkgLSAxKTtcbiAgcmV0dXJuIGZvcm1hdChkYXRlLCAnTU1NIHl5eXknKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3VycmVudE1vbnRoKG1vbnRoU3RyaW5nOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgY3VycmVudE1vbnRoID0gZm9ybWF0KG5ldyBEYXRlKCksICd5eXl5LU1NJyk7XG4gIHJldHVybiBtb250aFN0cmluZyA9PT0gY3VycmVudE1vbnRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGdXR1cmVNb250aChtb250aFN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGN1cnJlbnRNb250aCA9IGZvcm1hdChuZXcgRGF0ZSgpLCAneXl5eS1NTScpO1xuICByZXR1cm4gbW9udGhTdHJpbmcgPiBjdXJyZW50TW9udGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Bhc3RNb250aChtb250aFN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGN1cnJlbnRNb250aCA9IGZvcm1hdChuZXcgRGF0ZSgpLCAneXl5eS1NTScpO1xuICByZXR1cm4gbW9udGhTdHJpbmcgPCBjdXJyZW50TW9udGg7XG59XG5cbi8vIGxvY2FsU3RvcmFnZSB1dGlsaXR5IGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRlc3QgPSAnX19sb2NhbFN0b3JhZ2VfdGVzdF9fJztcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0LCB0ZXN0KTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYWZlTG9jYWxTdG9yYWdlR2V0KGtleTogc3RyaW5nKTogYW55IHtcbiAgaWYgKCFpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpKSB7XG4gICAgY29uc29sZS53YXJuKCdsb2NhbFN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgIHJldHVybiBpdGVtID8gSlNPTi5wYXJzZShpdGVtKSA6IG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBmcm9tIGxvY2FsU3RvcmFnZSBrZXkgJyR7a2V5fSc6YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYWZlTG9jYWxTdG9yYWdlU2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogYm9vbGVhbiB7XG4gIGlmICghaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSkge1xuICAgIGNvbnNvbGUud2FybignbG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHdyaXRpbmcgdG8gbG9jYWxTdG9yYWdlIGtleSAnJHtrZXl9JzpgLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYWZlTG9jYWxTdG9yYWdlUmVtb3ZlKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmICghaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlbW92aW5nIGxvY2FsU3RvcmFnZSBrZXkgJyR7a2V5fSc6YCwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhcnREYXRhKGJpbGxpbmdEYXRhOiBCaWxsaW5nRGF0YVtdKTogQ2hhcnREYXRhW10ge1xuICByZXR1cm4gYmlsbGluZ0RhdGEubWFwKGRhdGEgPT4gKHtcbiAgICBuYW1lOiBkYXRhLnByb2plY3ROYW1lLFxuICAgIGJpbGxlZDogZGF0YS50b3RhbEJpbGxlZCxcbiAgICB1bmJpbGxlZDogZGF0YS50b3RhbFVuYmlsbGVkLFxuICAgIHByb2plY3RlZDogZGF0YS50b3RhbFByb2plY3RlZCxcbiAgfSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZVByb2plY3Rpb25zVGFibGUocHJvamVjdHM6IFpvaG9Qcm9qZWN0W10pOiBQcm9qZWN0aW9uc1RhYmxlIHtcbiAgLy8gSGFuZGxlIHVuZGVmaW5lZCBvciBudWxsIHByb2plY3RzXG4gIGNvbnN0IHNhZmVQcm9qZWN0cyA9IHByb2plY3RzIHx8IFtdO1xuICBjb25zdCBtb250aFJhbmdlID0gZ2V0UHJvamVjdGlvbnNNb250aFJhbmdlKCk7XG4gIGNvbnN0IHRhYmxlOiBQcm9qZWN0aW9uc1RhYmxlID0ge307XG5cbiAgc2FmZVByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgdGFibGVbcHJvamVjdC5wcm9qZWN0X2lkXSA9IHtcbiAgICAgIG1vbnRoczoge30sXG4gICAgICBhc3JGZWU6IDAsXG4gICAgfTtcbiAgICBtb250aFJhbmdlLmZvckVhY2gobW9udGggPT4ge1xuICAgICAgY29uc3QgaXNFZGl0YWJsZSA9IGlzRnV0dXJlTW9udGgobW9udGgpO1xuICAgICAgdGFibGVbcHJvamVjdC5wcm9qZWN0X2lkXS5tb250aHNbbW9udGhdID0ge1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgaXNFZGl0YWJsZSxcbiAgICAgICAgaXNQcm9qZWN0ZWQ6IGlzRWRpdGFibGUsXG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGFibGU7XG59IFxuXG4vLyBOZXcgZnVuY3Rpb25zIGZvciBDbG9ja2lmeSBpbnRlZ3JhdGlvblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVRpbWVUcmFja2luZ0tQSXMoY2xvY2tpZnlEYXRhOiBDbG9ja2lmeVRpbWVSZXBvcnQpOiBUaW1lVHJhY2tpbmdLUEkge1xuICBjb25zdCBlZmZpY2llbmN5ID0gY2xvY2tpZnlEYXRhLnRvdGFsSG91cnMgPiAwID8gY2xvY2tpZnlEYXRhLmJpbGxhYmxlSG91cnMgLyBjbG9ja2lmeURhdGEudG90YWxIb3VycyA6IDA7XG4gIGNvbnN0IGF2ZXJhZ2VIb3VybHlSYXRlID0gY2xvY2tpZnlEYXRhLmJpbGxhYmxlSG91cnMgPiAwID8gY2xvY2tpZnlEYXRhLmJpbGxhYmxlQW1vdW50IC8gY2xvY2tpZnlEYXRhLmJpbGxhYmxlSG91cnMgOiAwO1xuXG4gIHJldHVybiB7XG4gICAgcHJvamVjdElkOiBjbG9ja2lmeURhdGEucHJvamVjdElkLFxuICAgIHByb2plY3ROYW1lOiBjbG9ja2lmeURhdGEucHJvamVjdE5hbWUsXG4gICAgdG90YWxIb3VyczogY2xvY2tpZnlEYXRhLnRvdGFsSG91cnMsXG4gICAgYmlsbGFibGVIb3VyczogY2xvY2tpZnlEYXRhLmJpbGxhYmxlSG91cnMsXG4gICAgbm9uQmlsbGFibGVIb3VyczogY2xvY2tpZnlEYXRhLm5vbkJpbGxhYmxlSG91cnMsXG4gICAgaG91cmx5UmF0ZTogYXZlcmFnZUhvdXJseVJhdGUsXG4gICAgdG90YWxWYWx1ZTogY2xvY2tpZnlEYXRhLmJpbGxhYmxlQW1vdW50LFxuICAgIGVmZmljaWVuY3ksXG4gICAgcGVyaW9kOiBjbG9ja2lmeURhdGEucGVyaW9kLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5oYW5jZUJpbGxpbmdEYXRhV2l0aENsb2NraWZ5KFxuICBiaWxsaW5nRGF0YTogQmlsbGluZ0RhdGFbXSxcbiAgY2xvY2tpZnlSZXBvcnRzOiBDbG9ja2lmeVRpbWVSZXBvcnRbXVxuKTogQmlsbGluZ0RhdGFbXSB7XG4gIHJldHVybiBiaWxsaW5nRGF0YS5tYXAocHJvamVjdCA9PiB7XG4gICAgY29uc3QgY2xvY2tpZnlSZXBvcnQgPSBjbG9ja2lmeVJlcG9ydHMuZmluZChyZXBvcnQgPT4gXG4gICAgICByZXBvcnQucHJvamVjdElkID09PSBwcm9qZWN0LnByb2plY3RJZCB8fCBcbiAgICAgIHJlcG9ydC5wcm9qZWN0TmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHByb2plY3QucHJvamVjdE5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuXG4gICAgaWYgKGNsb2NraWZ5UmVwb3J0KSB7XG4gICAgICBjb25zdCB0aW1lVHJhY2tpbmdLUEkgPSBjYWxjdWxhdGVUaW1lVHJhY2tpbmdLUElzKGNsb2NraWZ5UmVwb3J0KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucHJvamVjdCxcbiAgICAgICAgY2xvY2tpZnlEYXRhOiBjbG9ja2lmeVJlcG9ydCxcbiAgICAgICAgdG90YWxIb3VyczogY2xvY2tpZnlSZXBvcnQudG90YWxIb3VycyxcbiAgICAgICAgYmlsbGFibGVIb3VyczogY2xvY2tpZnlSZXBvcnQuYmlsbGFibGVIb3VycyxcbiAgICAgICAgbm9uQmlsbGFibGVIb3VyczogY2xvY2tpZnlSZXBvcnQubm9uQmlsbGFibGVIb3VycyxcbiAgICAgICAgaG91cmx5UmF0ZTogdGltZVRyYWNraW5nS1BJLmhvdXJseVJhdGUsXG4gICAgICAgIGVmZmljaWVuY3k6IHRpbWVUcmFja2luZ0tQSS5lZmZpY2llbmN5LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvamVjdDtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQcm9maXRhYmlsaXR5TWV0cmljcyhcbiAgYmlsbGluZ0RhdGE6IEJpbGxpbmdEYXRhLFxuICB0aW1lVHJhY2tpbmdLUEk/OiBUaW1lVHJhY2tpbmdLUElcbikge1xuICBjb25zdCByZXZlbnVlID0gYmlsbGluZ0RhdGEudG90YWxCaWxsZWQgKyBiaWxsaW5nRGF0YS50b3RhbFVuYmlsbGVkO1xuICBjb25zdCBjb3N0ID0gdGltZVRyYWNraW5nS1BJID8gdGltZVRyYWNraW5nS1BJLnRvdGFsVmFsdWUgOiAwO1xuICBjb25zdCBwcm9maXQgPSByZXZlbnVlIC0gY29zdDtcbiAgY29uc3QgbWFyZ2luID0gcmV2ZW51ZSA+IDAgPyAocHJvZml0IC8gcmV2ZW51ZSkgKiAxMDAgOiAwO1xuXG4gIHJldHVybiB7XG4gICAgcmV2ZW51ZSxcbiAgICBjb3N0LFxuICAgIHByb2ZpdCxcbiAgICBtYXJnaW4sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRIb3Vycyhob3VyczogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3Qgd2hvbGVIb3VycyA9IE1hdGguZmxvb3IoaG91cnMpO1xuICBjb25zdCBtaW51dGVzID0gTWF0aC5yb3VuZCgoaG91cnMgLSB3aG9sZUhvdXJzKSAqIDYwKTtcbiAgcmV0dXJuIGAke3dob2xlSG91cnN9aCAke21pbnV0ZXN9bWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFZmZpY2llbmN5KGVmZmljaWVuY3k6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBgJHsoZWZmaWNpZW5jeSAqIDEwMCkudG9GaXhlZCgxKX0lYDtcbn0gIl0sIm5hbWVzIjpbImZvcm1hdCIsInN1Yk1vbnRocyIsImFkZE1vbnRocyIsInN0YXJ0T2ZNb250aCIsImVuZE9mTW9udGgiLCJjbHN4IiwidHdNZXJnZSIsImNuIiwiaW5wdXRzIiwiZ2VuZXJhdGVNb250aFJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsIm1vbnRocyIsImN1cnJlbnREYXRlIiwiZW5kIiwicHVzaCIsImdldEN1cnJlbnRNb250aFJhbmdlIiwibW9udGhzQmFjayIsIm1vbnRoc0ZvcndhcmQiLCJ0b2RheSIsIkRhdGUiLCJnZXRQcm9qZWN0aW9uc01vbnRoUmFuZ2UiLCJnZXRDaGFydE1vbnRoUmFuZ2UiLCJwcm9jZXNzQmlsbGluZ0RhdGEiLCJwcm9qZWN0cyIsImludm9pY2VzIiwicHJvamVjdGlvbnMiLCJzYWZlUHJvamVjdHMiLCJzYWZlSW52b2ljZXMiLCJzYWZlUHJvamVjdGlvbnMiLCJsZW5ndGgiLCJtb250aFJhbmdlIiwiaW52b2ljZU1hcCIsIk1hcCIsImZvckVhY2giLCJpbnZvaWNlIiwicHJvamVjdElkIiwicHJvamVjdF9pZCIsImhhcyIsInNldCIsImdldCIsIm1hcCIsInByb2plY3QiLCJwcm9qZWN0SW52b2ljZXMiLCJpbnZvaWNlVG90YWxzIiwibW9udGgiLCJkYXRlIiwiY3VycmVudCIsImJpbGxlZCIsInVuYmlsbGVkIiwiYmlsbGVkX2Ftb3VudCIsInVuYmlsbGVkX2Ftb3VudCIsIm1vbnRobHlEYXRhIiwibW9udGhUb3RhbHMiLCJwcm9qZWN0ZWQiLCJ2YWx1ZSIsImFjdHVhbCIsInRvdGFsQmlsbGVkIiwicmVkdWNlIiwic3VtIiwiZGF0YSIsInRvdGFsVW5iaWxsZWQiLCJ0b3RhbFByb2plY3RlZCIsInByb2plY3ROYW1lIiwicHJvamVjdF9uYW1lIiwiY3VzdG9tZXJOYW1lIiwiY3VzdG9tZXJfbmFtZSIsInNpZ25lZEZlZSIsInVuZGVmaW5lZCIsImNhbGN1bGF0ZURhc2hib2FyZFN0YXRzIiwiYmlsbGluZ0RhdGEiLCJjbG9zZWRQcm9qZWN0cyIsIm1vbnRobHlQcm9qZWN0aW9ucyIsIm1vbnRobHlTdGF0dXNlcyIsIkFycmF5IiwiaXNBcnJheSIsInRvdGFsUHJvamVjdHMiLCJhY3RpdmVQcm9qZWN0cyIsInRvdGFsSG91cnMiLCJiaWxsYWJsZUhvdXJzIiwibm9uQmlsbGFibGVIb3VycyIsImF2ZXJhZ2VIb3VybHlSYXRlIiwidG90YWxUaW1lVmFsdWUiLCJlZmZpY2llbmN5IiwiYXZlcmFnZUhvdXJzUGVyUHJvamVjdCIsInRvcFBlcmZvcm1pbmdQcm9qZWN0cyIsImNsb3NlZFByb2plY3RzQ291bnQiLCJzaXplIiwic2FmZUxvY2FsU3RvcmFnZUdldCIsInN0YXR1c2VzIiwiY3VycmVudFllYXIiLCJnZXRGdWxsWWVhciIsInRvU3RyaW5nIiwiY3VycmVudE1vbnRoIiwidG9JU09TdHJpbmciLCJzbGljZSIsInRvdGFsQmlsbGVkWVREIiwiYmFja2xvZyIsIk9iamVjdCIsImtleXMiLCJwcm9qZWN0UHJvamVjdGlvbnMiLCJwcm9qZWN0U3RhdHVzZXMiLCJwcm9qZWN0aW9uVmFsdWUiLCJzdGFydHNXaXRoIiwidG90YWxIb3VybHlSYXRlIiwicHJvamVjdHNXaXRoVGltZURhdGEiLCJwcm9qZWN0RWZmaWNpZW5jaWVzIiwiY2xvY2tpZnlEYXRhIiwidGltZURhdGEiLCJiaWxsYWJsZUFtb3VudCIsImhvdXJzIiwic29ydCIsImEiLCJiIiwicCIsImZvcm1hdEN1cnJlbmN5IiwiYW1vdW50IiwiSW50bCIsIk51bWJlckZvcm1hdCIsInN0eWxlIiwiY3VycmVuY3kiLCJmb3JtYXRNb250aCIsIm1vbnRoU3RyaW5nIiwieWVhciIsInNwbGl0IiwicGFyc2VJbnQiLCJpc0N1cnJlbnRNb250aCIsImlzRnV0dXJlTW9udGgiLCJpc1Bhc3RNb250aCIsImlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlIiwidGVzdCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwia2V5IiwiY29uc29sZSIsIndhcm4iLCJpdGVtIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwic2FmZUxvY2FsU3RvcmFnZVNldCIsInN0cmluZ2lmeSIsInNhZmVMb2NhbFN0b3JhZ2VSZW1vdmUiLCJjcmVhdGVDaGFydERhdGEiLCJuYW1lIiwiaW5pdGlhbGl6ZVByb2plY3Rpb25zVGFibGUiLCJ0YWJsZSIsImFzckZlZSIsImlzRWRpdGFibGUiLCJpc1Byb2plY3RlZCIsImNhbGN1bGF0ZVRpbWVUcmFja2luZ0tQSXMiLCJob3VybHlSYXRlIiwidG90YWxWYWx1ZSIsInBlcmlvZCIsImVuaGFuY2VCaWxsaW5nRGF0YVdpdGhDbG9ja2lmeSIsImNsb2NraWZ5UmVwb3J0cyIsImNsb2NraWZ5UmVwb3J0IiwiZmluZCIsInJlcG9ydCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJ0aW1lVHJhY2tpbmdLUEkiLCJjYWxjdWxhdGVQcm9maXRhYmlsaXR5TWV0cmljcyIsInJldmVudWUiLCJjb3N0IiwicHJvZml0IiwibWFyZ2luIiwiZm9ybWF0SG91cnMiLCJ3aG9sZUhvdXJzIiwiTWF0aCIsImZsb29yIiwibWludXRlcyIsInJvdW5kIiwiZm9ybWF0RWZmaWNpZW5jeSIsInRvRml4ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns","vendor-chunks/tailwind-merge","vendor-chunks/@babel","vendor-chunks/clsx"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclockify%2Froute&page=%2Fapi%2Fclockify%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclockify%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();