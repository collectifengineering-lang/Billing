"use strict";(()=>{var e={};e.id=5828,e.ids=[5828],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54244:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var s={};a.r(s),a.d(s,{GET:()=>u,POST:()=>h,dynamic:()=>l});var r=a(49303),n=a(88716),c=a(60670),o=a(87070),i=a(60137);let l="force-dynamic";async function h(e){try{let{key:t}=await e.json().catch(()=>({}));if(!t)return i.$.clear(),console.log("âœ… All cache cleared"),o.NextResponse.json({success:!0,message:"All cache cleared"});if(i.$.delete(t))return console.log(`âœ… Cache key "${t}" invalidated`),o.NextResponse.json({success:!0,message:`Cache key "${t}" invalidated`});return o.NextResponse.json({success:!1,message:`Cache key "${t}" not found`},{status:404})}catch(e){return console.error("âŒ Error invalidating cache:",e),o.NextResponse.json({success:!1,error:"Failed to invalidate cache",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function u(e){try{let e=i.$.getStats();return o.NextResponse.json({success:!0,stats:e})}catch(e){return console.error("âŒ Error getting cache stats:",e),o.NextResponse.json({success:!1,error:"Failed to get cache stats",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/cache/invalidate/route",pathname:"/api/cache/invalidate",filename:"route",bundlePath:"app/api/cache/invalidate/route"},resolvedPagePath:"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\api\\cache\\invalidate\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:m}=d,f="/api/cache/invalidate/route";function v(){return(0,c.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},60137:(e,t,a)=>{a.d(t,{$:()=>r});class s{constructor(){this.DEFAULT_TTL=3e5,this.cache=new Map,setInterval(()=>this.cleanup(),6e4)}static getInstance(){return s.instance||(s.instance=new s),s.instance}get(e){let t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):(console.log(`âœ… Cache HIT for key: ${e}`),t.data):null}set(e,t,a){let s={data:t,timestamp:Date.now(),ttl:a||this.DEFAULT_TTL};this.cache.set(e,s),console.log(`ðŸ’¾ Cache SET for key: ${e} (TTL: ${s.ttl}ms)`)}delete(e){let t=this.cache.delete(e);return t&&console.log(`ðŸ—‘ï¸ Cache DELETED for key: ${e}`),t}clear(){this.cache.clear(),console.log("\uD83D\uDDD1ï¸ All cache entries CLEARED")}getStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}cleanup(){let e=Date.now(),t=0;for(let[a,s]of this.cache.entries())e-s.timestamp>s.ttl&&(this.cache.delete(a),t++);t>0&&console.log(`ðŸ§¹ Cleaned up ${t} expired cache entries`)}async getOrSet(e,t,a){let s=this.get(e);if(null!==s)return{data:s,fromCache:!0};console.log(`âŒ Cache MISS for key: ${e} - fetching fresh data...`);let r=await t();return this.set(e,r,a),{data:r,fromCache:!1}}}let r=s.getInstance()}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9276,5972],()=>a(54244));module.exports=s})();