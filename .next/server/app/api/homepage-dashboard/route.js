"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/homepage-dashboard/route";
exports.ids = ["app/api/homepage-dashboard/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhomepage-dashboard%2Froute&page=%2Fapi%2Fhomepage-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhomepage-dashboard%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhomepage-dashboard%2Froute&page=%2Fapi%2Fhomepage-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhomepage-dashboard%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _workspace_app_api_homepage_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/homepage-dashboard/route.ts */ \"(rsc)/./app/api/homepage-dashboard/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/homepage-dashboard/route\",\n        pathname: \"/api/homepage-dashboard\",\n        filename: \"route\",\n        bundlePath: \"app/api/homepage-dashboard/route\"\n    },\n    resolvedPagePath: \"/workspace/app/api/homepage-dashboard/route.ts\",\n    nextConfigOutput,\n    userland: _workspace_app_api_homepage_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/homepage-dashboard/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZob21lcGFnZS1kYXNoYm9hcmQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmhvbWVwYWdlLWRhc2hib2FyZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmhvbWVwYWdlLWRhc2hib2FyZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZ3b3Jrc3BhY2UlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRndvcmtzcGFjZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRjtBQUMzRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8/MDNmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvd29ya3NwYWNlL2FwcC9hcGkvaG9tZXBhZ2UtZGFzaGJvYXJkL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ob21lcGFnZS1kYXNoYm9hcmQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ob21lcGFnZS1kYXNoYm9hcmRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2hvbWVwYWdlLWRhc2hib2FyZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi93b3Jrc3BhY2UvYXBwL2FwaS9ob21lcGFnZS1kYXNoYm9hcmQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2hvbWVwYWdlLWRhc2hib2FyZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhomepage-dashboard%2Froute&page=%2Fapi%2Fhomepage-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhomepage-dashboard%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/homepage-dashboard/route.ts":
/*!*********************************************!*\
  !*** ./app/api/homepage-dashboard/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_zoho__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/zoho */ \"(rsc)/./lib/zoho.ts\");\n/* harmony import */ var _lib_clockify__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/clockify */ \"(rsc)/./lib/clockify.ts\");\n\n\n\n// Force dynamic rendering to prevent static generation errors\nconst dynamic = \"force-dynamic\";\nasync function GET(request) {\n    try {\n        console.log(\"\\uD83D\\uDE80 Homepage Dashboard API called - starting data collection...\");\n        const now = new Date();\n        const currentYear = now.getFullYear();\n        const currentYearStart = new Date(currentYear, 0, 1);\n        const lastYearStart = new Date(currentYear - 1, 0, 1);\n        console.log(\"\\uD83D\\uDCC5 Date ranges calculated:\", {\n            currentYear,\n            currentYearStart: currentYearStart.toISOString(),\n            lastYearStart: lastYearStart.toISOString()\n        });\n        // Initialize data containers\n        let projects = [];\n        let invoices = [];\n        let clockifyData = null;\n        let financialMetrics = null;\n        // Fetch Zoho data\n        try {\n            console.log(\"\\uD83D\\uDD04 Starting Zoho data fetch...\");\n            [projects, invoices] = await Promise.all([\n                _lib_zoho__WEBPACK_IMPORTED_MODULE_1__.zohoService.getProjects(),\n                _lib_zoho__WEBPACK_IMPORTED_MODULE_1__.zohoService.getInvoices()\n            ]);\n            console.log(\"✅ Zoho data fetched:\", {\n                projectsCount: projects.length,\n                invoicesCount: invoices.length\n            });\n            // Get financial metrics for current year\n            try {\n                console.log(\"\\uD83D\\uDCB0 Fetching financial metrics...\");\n                financialMetrics = await _lib_zoho__WEBPACK_IMPORTED_MODULE_1__.zohoService.getFinancialMetrics(currentYearStart.toISOString().split(\"T\")[0], now.toISOString().split(\"T\")[0]);\n                console.log(\"✅ Financial metrics loaded - full object:\", JSON.stringify(financialMetrics, null, 2));\n                // Check if cash flow is 0 and log specific message\n                if (financialMetrics.cashFlow === 0) {\n                    console.warn(\"\\uD83D\\uDCB0 Cash Flow is 0 - verify data in Zoho for date range\");\n                }\n            } catch (error) {\n                console.warn(\"⚠️ Failed to fetch financial metrics, using defaults:\", error);\n                financialMetrics = {\n                    revenue: 0,\n                    expenses: 0,\n                    netProfit: 0,\n                    grossProfit: 0,\n                    operatingIncome: 0,\n                    cashFlow: 0\n                };\n            }\n        } catch (error) {\n            console.error(\"❌ Failed to fetch Zoho data:\", error);\n            projects = [];\n            invoices = [];\n            financialMetrics = {\n                revenue: 0,\n                expenses: 0,\n                netProfit: 0,\n                grossProfit: 0,\n                operatingIncome: 0,\n                cashFlow: 0\n            };\n        }\n        // Fetch Clockify data\n        try {\n            console.log(\"\\uD83D\\uDD04 Starting Clockify data fetch...\");\n            const clockifyConfig = _lib_clockify__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfigurationStatus();\n            if (clockifyConfig.configured) {\n                console.log(\"⏰ Clockify configured, fetching real data...\");\n                const [clockifyUser, clockifyProjects, timeEntries] = await Promise.all([\n                    _lib_clockify__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUser(),\n                    _lib_clockify__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getProjects(),\n                    _lib_clockify__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getAllTimeEntries(currentYearStart.toISOString(), now.toISOString())\n                ]);\n                console.log(\"\\uD83D\\uDCCA Clockify raw data received:\", {\n                    user: clockifyUser?.name || \"Unknown\",\n                    projectsCount: clockifyProjects?.length || 0,\n                    timeEntriesCount: timeEntries?.length || 0\n                });\n                // Calculate time tracking metrics\n                const totalHours = timeEntries.reduce((sum, entry)=>{\n                    const duration = entry.timeInterval?.duration || \"PT0H\";\n                    const hours = parseDuration(duration);\n                    return sum + hours;\n                }, 0);\n                const billableHours = timeEntries.filter((entry)=>entry.billable).reduce((sum, entry)=>{\n                    const duration = entry.timeInterval?.duration || \"PT0H\";\n                    const hours = parseDuration(duration);\n                    return sum + hours;\n                }, 0);\n                const efficiency = totalHours > 0 ? billableHours / totalHours : 0.85;\n                // Calculate average hourly rate\n                const billableEntries = timeEntries.filter((entry)=>entry.billable);\n                let averageHourlyRate = 125; // Default\n                if (billableEntries.length > 0) {\n                    const totalRate = billableEntries.reduce((sum, entry)=>{\n                        const rate = entry.hourlyRate?.amount || 150;\n                        return sum + rate;\n                    }, 0);\n                    averageHourlyRate = totalRate / billableEntries.length;\n                }\n                clockifyData = {\n                    totalHours,\n                    billableHours,\n                    nonBillableHours: totalHours - billableHours,\n                    efficiency,\n                    averageHourlyRate,\n                    totalTimeValue: billableHours * averageHourlyRate,\n                    averageHoursPerProject: projects.length > 0 ? totalHours / projects.length : 0\n                };\n                console.log(\"✅ Clockify data calculated:\", clockifyData);\n            } else {\n                console.log(\"\\uD83C\\uDFAD Clockify not configured, using mock data\");\n                clockifyData = {\n                    totalHours: 28400,\n                    billableHours: 25200,\n                    nonBillableHours: 3200,\n                    efficiency: 0.89,\n                    averageHourlyRate: 125,\n                    totalTimeValue: 3150000,\n                    averageHoursPerProject: 70\n                };\n            }\n        } catch (error) {\n            console.warn(\"⚠️ Failed to fetch Clockify data, using defaults:\", error);\n            console.error(\"Clockify error details:\", {\n                message: error instanceof Error ? error.message : \"Unknown error\",\n                stack: error instanceof Error ? error.stack : undefined\n            });\n            clockifyData = {\n                totalHours: 28400,\n                billableHours: 25200,\n                nonBillableHours: 3200,\n                efficiency: 0.89,\n                averageHourlyRate: 125,\n                totalTimeValue: 3150000,\n                averageHoursPerProject: 70\n            };\n        }\n        // Calculate project metrics\n        const activeProjects = projects.filter((p)=>p.status === \"active\") || [];\n        const totalProjects = projects.length || 0;\n        // Calculate billing metrics\n        const paidInvoices = invoices.filter((inv)=>inv.status === \"paid\") || [];\n        const outstandingInvoices = invoices.filter((inv)=>inv.status === \"sent\" || inv.status === \"viewed\") || [];\n        const totalBilled = paidInvoices.reduce((sum, inv)=>sum + (inv.total || 0), 0);\n        const totalUnbilled = outstandingInvoices.reduce((sum, inv)=>sum + (inv.total || 0), 0);\n        // Use financial metrics from Zoho if available\n        const ytdRevenue = financialMetrics?.revenue || totalBilled;\n        const ytdExpenses = financialMetrics?.expenses || 0;\n        // Get top performing projects - ensure we always return an array\n        let topPerformingProjects = [];\n        try {\n            if (Array.isArray(projects) && projects.length > 0) {\n                topPerformingProjects = projects.filter((p)=>p.status === \"active\").sort((a, b)=>{\n                    const aRevenue = invoices.filter((inv)=>inv.project_id === a.project_id).reduce((sum, inv)=>sum + (inv.total || 0), 0);\n                    const bRevenue = invoices.filter((inv)=>inv.project_id === b.project_id).reduce((sum, inv)=>sum + (inv.total || 0), 0);\n                    return bRevenue - aRevenue;\n                }).slice(0, 5).map((p)=>p.project_code || p.project_name || \"Unknown Project\").filter(Boolean); // Remove any undefined/null values\n            }\n        } catch (error) {\n            console.warn(\"⚠️ Error calculating top performing projects, using defaults:\", error);\n            topPerformingProjects = [\n                \"Project A\",\n                \"Project B\",\n                \"Project C\"\n            ]; // Fallback\n        }\n        // Ensure we have valid arrays for all data\n        const safeDashboardData = {\n            totalProjects: totalProjects || 0,\n            totalBilled: totalBilled || 0,\n            totalUnbilled: totalUnbilled || 0,\n            activeProjects: activeProjects.length || 0,\n            totalHours: clockifyData?.totalHours || 0,\n            billableHours: clockifyData?.billableHours || 0,\n            efficiency: clockifyData?.efficiency || 0.85,\n            averageHourlyRate: clockifyData?.averageHourlyRate || 125,\n            totalTimeValue: clockifyData?.totalTimeValue || 0,\n            averageHoursPerProject: clockifyData?.averageHoursPerProject || 0,\n            topPerformingProjects: Array.isArray(topPerformingProjects) ? topPerformingProjects : [],\n            ytdRevenue: ytdRevenue || 0,\n            ytdExpenses: ytdExpenses || 0,\n            ytdProfit: (ytdRevenue || 0) - (ytdExpenses || 0)\n        };\n        console.log(\"✅ Homepage dashboard data generated:\", safeDashboardData);\n        console.log(\"\\uD83D\\uDE80 Returning dashboard data to client...\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(safeDashboardData);\n    } catch (error) {\n        console.error(\"❌ Homepage Dashboard API error:\", error);\n        console.error(\"Error details:\", {\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            stack: error instanceof Error ? error.stack : undefined,\n            timestamp: new Date().toISOString()\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate homepage dashboard data\",\n            details: error instanceof Error ? error.message : \"Unknown error\",\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to parse duration strings (e.g., \"PT2H30M\")\nfunction parseDuration(duration) {\n    if (!duration) return 0;\n    const regex = /PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/;\n    const match = duration.match(regex);\n    if (!match) return 0;\n    const hours = parseInt(match[1] || \"0\");\n    const minutes = parseInt(match[2] || \"0\");\n    const seconds = parseInt(match[3] || \"0\");\n    return hours + minutes / 60 + seconds / 3600;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2hvbWVwYWdlLWRhc2hib2FyZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RDtBQUNmO0FBQ0k7QUFFN0MsOERBQThEO0FBQ3ZELE1BQU1HLFVBQVUsZ0JBQWdCO0FBRWhDLGVBQWVDLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosTUFBTUMsTUFBTSxJQUFJQztRQUNoQixNQUFNQyxjQUFjRixJQUFJRyxXQUFXO1FBQ25DLE1BQU1DLG1CQUFtQixJQUFJSCxLQUFLQyxhQUFhLEdBQUc7UUFDbEQsTUFBTUcsZ0JBQWdCLElBQUlKLEtBQUtDLGNBQWMsR0FBRyxHQUFHO1FBRW5ESixRQUFRQyxHQUFHLENBQUMsd0NBQThCO1lBQ3hDRztZQUNBRSxrQkFBa0JBLGlCQUFpQkUsV0FBVztZQUM5Q0QsZUFBZUEsY0FBY0MsV0FBVztRQUMxQztRQUVBLDZCQUE2QjtRQUM3QixJQUFJQyxXQUFrQixFQUFFO1FBQ3hCLElBQUlDLFdBQWtCLEVBQUU7UUFDeEIsSUFBSUMsZUFBb0I7UUFDeEIsSUFBSUMsbUJBQXdCO1FBRTVCLGtCQUFrQjtRQUNsQixJQUFJO1lBQ0ZaLFFBQVFDLEdBQUcsQ0FBQztZQUNaLENBQUNRLFVBQVVDLFNBQVMsR0FBRyxNQUFNRyxRQUFRQyxHQUFHLENBQUM7Z0JBQ3ZDbkIsa0RBQVdBLENBQUNvQixXQUFXO2dCQUN2QnBCLGtEQUFXQSxDQUFDcUIsV0FBVzthQUN4QjtZQUNEaEIsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QjtnQkFBRWdCLGVBQWVSLFNBQVNTLE1BQU07Z0JBQUVDLGVBQWVULFNBQVNRLE1BQU07WUFBQztZQUVyRyx5Q0FBeUM7WUFDekMsSUFBSTtnQkFDRmxCLFFBQVFDLEdBQUcsQ0FBQztnQkFDWlcsbUJBQW1CLE1BQU1qQixrREFBV0EsQ0FBQ3lCLG1CQUFtQixDQUN0RGQsaUJBQWlCRSxXQUFXLEdBQUdhLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUM1Q25CLElBQUlNLFdBQVcsR0FBR2EsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUVqQ3JCLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNxQixLQUFLQyxTQUFTLENBQUNYLGtCQUFrQixNQUFNO2dCQUVoRyxtREFBbUQ7Z0JBQ25ELElBQUlBLGlCQUFpQlksUUFBUSxLQUFLLEdBQUc7b0JBQ25DeEIsUUFBUXlCLElBQUksQ0FBQztnQkFDZjtZQUNGLEVBQUUsT0FBT0MsT0FBTztnQkFDZDFCLFFBQVF5QixJQUFJLENBQUMseURBQXlEQztnQkFDdEVkLG1CQUFtQjtvQkFBRWUsU0FBUztvQkFBR0MsVUFBVTtvQkFBR0MsV0FBVztvQkFBR0MsYUFBYTtvQkFBR0MsaUJBQWlCO29CQUFHUCxVQUFVO2dCQUFFO1lBQzlHO1FBQ0YsRUFBRSxPQUFPRSxPQUFPO1lBQ2QxQixRQUFRMEIsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDOUNqQixXQUFXLEVBQUU7WUFDYkMsV0FBVyxFQUFFO1lBQ2JFLG1CQUFtQjtnQkFBRWUsU0FBUztnQkFBR0MsVUFBVTtnQkFBR0MsV0FBVztnQkFBR0MsYUFBYTtnQkFBR0MsaUJBQWlCO2dCQUFHUCxVQUFVO1lBQUU7UUFDOUc7UUFFQSxzQkFBc0I7UUFDdEIsSUFBSTtZQUNGeEIsUUFBUUMsR0FBRyxDQUFDO1lBQ1osTUFBTStCLGlCQUFpQnBDLHFEQUFlQSxDQUFDcUMsc0JBQXNCO1lBRTdELElBQUlELGVBQWVFLFVBQVUsRUFBRTtnQkFDN0JsQyxRQUFRQyxHQUFHLENBQUM7Z0JBRVosTUFBTSxDQUFDa0MsY0FBY0Msa0JBQWtCQyxZQUFZLEdBQUcsTUFBTXhCLFFBQVFDLEdBQUcsQ0FBQztvQkFDdEVsQixxREFBZUEsQ0FBQzBDLE9BQU87b0JBQ3ZCMUMscURBQWVBLENBQUNtQixXQUFXO29CQUMzQm5CLHFEQUFlQSxDQUFDMkMsaUJBQWlCLENBQy9CakMsaUJBQWlCRSxXQUFXLElBQzVCTixJQUFJTSxXQUFXO2lCQUVsQjtnQkFFRFIsUUFBUUMsR0FBRyxDQUFDLDRDQUFrQztvQkFDNUN1QyxNQUFNTCxjQUFjTSxRQUFRO29CQUM1QnhCLGVBQWVtQixrQkFBa0JsQixVQUFVO29CQUMzQ3dCLGtCQUFrQkwsYUFBYW5CLFVBQVU7Z0JBQzNDO2dCQUVBLGtDQUFrQztnQkFDbEMsTUFBTXlCLGFBQWFOLFlBQVlPLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQztvQkFDMUMsTUFBTUMsV0FBV0QsTUFBTUUsWUFBWSxFQUFFRCxZQUFZO29CQUNqRCxNQUFNRSxRQUFRQyxjQUFjSDtvQkFDNUIsT0FBT0YsTUFBTUk7Z0JBQ2YsR0FBRztnQkFFSCxNQUFNRSxnQkFBZ0JkLFlBQVllLE1BQU0sQ0FBQ04sQ0FBQUEsUUFBU0EsTUFBTU8sUUFBUSxFQUFFVCxNQUFNLENBQUMsQ0FBQ0MsS0FBS0M7b0JBQzdFLE1BQU1DLFdBQVdELE1BQU1FLFlBQVksRUFBRUQsWUFBWTtvQkFDakQsTUFBTUUsUUFBUUMsY0FBY0g7b0JBQzVCLE9BQU9GLE1BQU1JO2dCQUNmLEdBQUc7Z0JBRUgsTUFBTUssYUFBYVgsYUFBYSxJQUFJUSxnQkFBZ0JSLGFBQWE7Z0JBRWpFLGdDQUFnQztnQkFDaEMsTUFBTVksa0JBQWtCbEIsWUFBWWUsTUFBTSxDQUFDTixDQUFBQSxRQUFTQSxNQUFNTyxRQUFRO2dCQUNsRSxJQUFJRyxvQkFBb0IsS0FBSyxVQUFVO2dCQUN2QyxJQUFJRCxnQkFBZ0JyQyxNQUFNLEdBQUcsR0FBRztvQkFDOUIsTUFBTXVDLFlBQVlGLGdCQUFnQlgsTUFBTSxDQUFDLENBQUNDLEtBQUtDO3dCQUM3QyxNQUFNWSxPQUFPWixNQUFNYSxVQUFVLEVBQUVDLFVBQVU7d0JBQ3pDLE9BQU9mLE1BQU1hO29CQUNmLEdBQUc7b0JBQ0hGLG9CQUFvQkMsWUFBWUYsZ0JBQWdCckMsTUFBTTtnQkFDeEQ7Z0JBRUFQLGVBQWU7b0JBQ2JnQztvQkFDQVE7b0JBQ0FVLGtCQUFrQmxCLGFBQWFRO29CQUMvQkc7b0JBQ0FFO29CQUNBTSxnQkFBZ0JYLGdCQUFnQks7b0JBQ2hDTyx3QkFBd0J0RCxTQUFTUyxNQUFNLEdBQUcsSUFBSXlCLGFBQWFsQyxTQUFTUyxNQUFNLEdBQUc7Z0JBQy9FO2dCQUVBbEIsUUFBUUMsR0FBRyxDQUFDLCtCQUErQlU7WUFDN0MsT0FBTztnQkFDTFgsUUFBUUMsR0FBRyxDQUFDO2dCQUNaVSxlQUFlO29CQUNiZ0MsWUFBWTtvQkFDWlEsZUFBZTtvQkFDZlUsa0JBQWtCO29CQUNsQlAsWUFBWTtvQkFDWkUsbUJBQW1CO29CQUNuQk0sZ0JBQWdCO29CQUNoQkMsd0JBQXdCO2dCQUMxQjtZQUNGO1FBQ0YsRUFBRSxPQUFPckMsT0FBTztZQUNkMUIsUUFBUXlCLElBQUksQ0FBQyxxREFBcURDO1lBQ2xFMUIsUUFBUTBCLEtBQUssQ0FBQywyQkFBMkI7Z0JBQ3ZDc0MsU0FBU3RDLGlCQUFpQnVDLFFBQVF2QyxNQUFNc0MsT0FBTyxHQUFHO2dCQUNsREUsT0FBT3hDLGlCQUFpQnVDLFFBQVF2QyxNQUFNd0MsS0FBSyxHQUFHQztZQUNoRDtZQUNBeEQsZUFBZTtnQkFDYmdDLFlBQVk7Z0JBQ1pRLGVBQWU7Z0JBQ2ZVLGtCQUFrQjtnQkFDbEJQLFlBQVk7Z0JBQ1pFLG1CQUFtQjtnQkFDbkJNLGdCQUFnQjtnQkFDaEJDLHdCQUF3QjtZQUMxQjtRQUNGO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1LLGlCQUFpQjNELFNBQVMyQyxNQUFNLENBQUNpQixDQUFBQSxJQUFLQSxFQUFFQyxNQUFNLEtBQUssYUFBYSxFQUFFO1FBQ3hFLE1BQU1DLGdCQUFnQjlELFNBQVNTLE1BQU0sSUFBSTtRQUV6Qyw0QkFBNEI7UUFDNUIsTUFBTXNELGVBQWU5RCxTQUFTMEMsTUFBTSxDQUFDcUIsQ0FBQUEsTUFBT0EsSUFBSUgsTUFBTSxLQUFLLFdBQVcsRUFBRTtRQUN4RSxNQUFNSSxzQkFBc0JoRSxTQUFTMEMsTUFBTSxDQUFDcUIsQ0FBQUEsTUFBT0EsSUFBSUgsTUFBTSxLQUFLLFVBQVVHLElBQUlILE1BQU0sS0FBSyxhQUFhLEVBQUU7UUFFMUcsTUFBTUssY0FBY0gsYUFBYTVCLE1BQU0sQ0FBQyxDQUFDQyxLQUFLNEIsTUFBUTVCLE1BQU80QixDQUFBQSxJQUFJRyxLQUFLLElBQUksSUFBSTtRQUM5RSxNQUFNQyxnQkFBZ0JILG9CQUFvQjlCLE1BQU0sQ0FBQyxDQUFDQyxLQUFLNEIsTUFBUTVCLE1BQU80QixDQUFBQSxJQUFJRyxLQUFLLElBQUksSUFBSTtRQUV2RiwrQ0FBK0M7UUFDL0MsTUFBTUUsYUFBYWxFLGtCQUFrQmUsV0FBV2dEO1FBQ2hELE1BQU1JLGNBQWNuRSxrQkFBa0JnQixZQUFZO1FBRWxELGlFQUFpRTtRQUNqRSxJQUFJb0Qsd0JBQWtDLEVBQUU7UUFDeEMsSUFBSTtZQUNGLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ3pFLGFBQWFBLFNBQVNTLE1BQU0sR0FBRyxHQUFHO2dCQUNsRDhELHdCQUF3QnZFLFNBQ3JCMkMsTUFBTSxDQUFDaUIsQ0FBQUEsSUFBS0EsRUFBRUMsTUFBTSxLQUFLLFVBQ3pCYSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7b0JBQ1IsTUFBTUMsV0FBVzVFLFNBQ2QwQyxNQUFNLENBQUNxQixDQUFBQSxNQUFPQSxJQUFJYyxVQUFVLEtBQUtILEVBQUVHLFVBQVUsRUFDN0MzQyxNQUFNLENBQUMsQ0FBQ0MsS0FBSzRCLE1BQVE1QixNQUFPNEIsQ0FBQUEsSUFBSUcsS0FBSyxJQUFJLElBQUk7b0JBQ2hELE1BQU1ZLFdBQVc5RSxTQUNkMEMsTUFBTSxDQUFDcUIsQ0FBQUEsTUFBT0EsSUFBSWMsVUFBVSxLQUFLRixFQUFFRSxVQUFVLEVBQzdDM0MsTUFBTSxDQUFDLENBQUNDLEtBQUs0QixNQUFRNUIsTUFBTzRCLENBQUFBLElBQUlHLEtBQUssSUFBSSxJQUFJO29CQUNoRCxPQUFPWSxXQUFXRjtnQkFDcEIsR0FDQ0csS0FBSyxDQUFDLEdBQUcsR0FDVEMsR0FBRyxDQUFDckIsQ0FBQUEsSUFBS0EsRUFBRXNCLFlBQVksSUFBSXRCLEVBQUV1QixZQUFZLElBQUksbUJBQzdDeEMsTUFBTSxDQUFDeUMsVUFBVSxtQ0FBbUM7WUFDekQ7UUFDRixFQUFFLE9BQU9uRSxPQUFPO1lBQ2QxQixRQUFReUIsSUFBSSxDQUFDLGlFQUFpRUM7WUFDOUVzRCx3QkFBd0I7Z0JBQUM7Z0JBQWE7Z0JBQWE7YUFBWSxFQUFFLFdBQVc7UUFDOUU7UUFFQSwyQ0FBMkM7UUFDM0MsTUFBTWMsb0JBQW9CO1lBQ3hCdkIsZUFBZUEsaUJBQWlCO1lBQ2hDSSxhQUFhQSxlQUFlO1lBQzVCRSxlQUFlQSxpQkFBaUI7WUFDaENULGdCQUFnQkEsZUFBZWxELE1BQU0sSUFBSTtZQUN6Q3lCLFlBQVloQyxjQUFjZ0MsY0FBYztZQUN4Q1EsZUFBZXhDLGNBQWN3QyxpQkFBaUI7WUFDOUNHLFlBQVkzQyxjQUFjMkMsY0FBYztZQUN4Q0UsbUJBQW1CN0MsY0FBYzZDLHFCQUFxQjtZQUN0RE0sZ0JBQWdCbkQsY0FBY21ELGtCQUFrQjtZQUNoREMsd0JBQXdCcEQsY0FBY29ELDBCQUEwQjtZQUNoRWlCLHVCQUF1QkMsTUFBTUMsT0FBTyxDQUFDRix5QkFBeUJBLHdCQUF3QixFQUFFO1lBQ3hGRixZQUFZQSxjQUFjO1lBQzFCQyxhQUFhQSxlQUFlO1lBQzVCZ0IsV0FBVyxDQUFDakIsY0FBYyxLQUFNQyxDQUFBQSxlQUFlO1FBQ2pEO1FBRUEvRSxRQUFRQyxHQUFHLENBQUMsd0NBQXdDNkY7UUFDcEQ5RixRQUFRQyxHQUFHLENBQUM7UUFFWixPQUFPUCxxREFBWUEsQ0FBQ3NHLElBQUksQ0FBQ0Y7SUFDM0IsRUFBRSxPQUFPcEUsT0FBTztRQUNkMUIsUUFBUTBCLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ2pEMUIsUUFBUTBCLEtBQUssQ0FBQyxrQkFBa0I7WUFDOUJzQyxTQUFTdEMsaUJBQWlCdUMsUUFBUXZDLE1BQU1zQyxPQUFPLEdBQUc7WUFDbERFLE9BQU94QyxpQkFBaUJ1QyxRQUFRdkMsTUFBTXdDLEtBQUssR0FBR0M7WUFDOUM4QixXQUFXLElBQUk5RixPQUFPSyxXQUFXO1FBQ25DO1FBRUEsT0FBT2QscURBQVlBLENBQUNzRyxJQUFJLENBQ3RCO1lBQ0V0RSxPQUFPO1lBQ1B3RSxTQUFTeEUsaUJBQWlCdUMsUUFBUXZDLE1BQU1zQyxPQUFPLEdBQUc7WUFDbERpQyxXQUFXLElBQUk5RixPQUFPSyxXQUFXO1FBQ25DLEdBQ0E7WUFBRThELFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsOERBQThEO0FBQzlELFNBQVNwQixjQUFjSCxRQUFnQjtJQUNyQyxJQUFJLENBQUNBLFVBQVUsT0FBTztJQUV0QixNQUFNb0QsUUFBUTtJQUNkLE1BQU1DLFFBQVFyRCxTQUFTcUQsS0FBSyxDQUFDRDtJQUU3QixJQUFJLENBQUNDLE9BQU8sT0FBTztJQUVuQixNQUFNbkQsUUFBUW9ELFNBQVNELEtBQUssQ0FBQyxFQUFFLElBQUk7SUFDbkMsTUFBTUUsVUFBVUQsU0FBU0QsS0FBSyxDQUFDLEVBQUUsSUFBSTtJQUNyQyxNQUFNRyxVQUFVRixTQUFTRCxLQUFLLENBQUMsRUFBRSxJQUFJO0lBRXJDLE9BQU9uRCxRQUFTcUQsVUFBVSxLQUFPQyxVQUFVO0FBQzdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vYXBwL2FwaS9ob21lcGFnZS1kYXNoYm9hcmQvcm91dGUudHM/OWQzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgem9ob1NlcnZpY2UgfSBmcm9tICdAL2xpYi96b2hvJztcbmltcG9ydCBjbG9ja2lmeVNlcnZpY2UgZnJvbSAnQC9saWIvY2xvY2tpZnknO1xuXG4vLyBGb3JjZSBkeW5hbWljIHJlbmRlcmluZyB0byBwcmV2ZW50IHN0YXRpYyBnZW5lcmF0aW9uIGVycm9yc1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+agCBIb21lcGFnZSBEYXNoYm9hcmQgQVBJIGNhbGxlZCAtIHN0YXJ0aW5nIGRhdGEgY29sbGVjdGlvbi4uLicpO1xuICAgIFxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgY3VycmVudFllYXIgPSBub3cuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBjdXJyZW50WWVhclN0YXJ0ID0gbmV3IERhdGUoY3VycmVudFllYXIsIDAsIDEpO1xuICAgIGNvbnN0IGxhc3RZZWFyU3RhcnQgPSBuZXcgRGF0ZShjdXJyZW50WWVhciAtIDEsIDAsIDEpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5OFIERhdGUgcmFuZ2VzIGNhbGN1bGF0ZWQ6Jywge1xuICAgICAgY3VycmVudFllYXIsXG4gICAgICBjdXJyZW50WWVhclN0YXJ0OiBjdXJyZW50WWVhclN0YXJ0LnRvSVNPU3RyaW5nKCksXG4gICAgICBsYXN0WWVhclN0YXJ0OiBsYXN0WWVhclN0YXJ0LnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICAgIC8vIEluaXRpYWxpemUgZGF0YSBjb250YWluZXJzXG4gICAgbGV0IHByb2plY3RzOiBhbnlbXSA9IFtdO1xuICAgIGxldCBpbnZvaWNlczogYW55W10gPSBbXTtcbiAgICBsZXQgY2xvY2tpZnlEYXRhOiBhbnkgPSBudWxsO1xuICAgIGxldCBmaW5hbmNpYWxNZXRyaWNzOiBhbnkgPSBudWxsO1xuXG4gICAgLy8gRmV0Y2ggWm9obyBkYXRhXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFN0YXJ0aW5nIFpvaG8gZGF0YSBmZXRjaC4uLicpO1xuICAgICAgW3Byb2plY3RzLCBpbnZvaWNlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHpvaG9TZXJ2aWNlLmdldFByb2plY3RzKCksXG4gICAgICAgIHpvaG9TZXJ2aWNlLmdldEludm9pY2VzKClcbiAgICAgIF0pO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBab2hvIGRhdGEgZmV0Y2hlZDonLCB7IHByb2plY3RzQ291bnQ6IHByb2plY3RzLmxlbmd0aCwgaW52b2ljZXNDb3VudDogaW52b2ljZXMubGVuZ3RoIH0pO1xuXG4gICAgICAvLyBHZXQgZmluYW5jaWFsIG1ldHJpY3MgZm9yIGN1cnJlbnQgeWVhclxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkrAgRmV0Y2hpbmcgZmluYW5jaWFsIG1ldHJpY3MuLi4nKTtcbiAgICAgICAgZmluYW5jaWFsTWV0cmljcyA9IGF3YWl0IHpvaG9TZXJ2aWNlLmdldEZpbmFuY2lhbE1ldHJpY3MoXG4gICAgICAgICAgY3VycmVudFllYXJTdGFydC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICAgICAgbm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEZpbmFuY2lhbCBtZXRyaWNzIGxvYWRlZCAtIGZ1bGwgb2JqZWN0OicsIEpTT04uc3RyaW5naWZ5KGZpbmFuY2lhbE1ldHJpY3MsIG51bGwsIDIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGNhc2ggZmxvdyBpcyAwIGFuZCBsb2cgc3BlY2lmaWMgbWVzc2FnZVxuICAgICAgICBpZiAoZmluYW5jaWFsTWV0cmljcy5jYXNoRmxvdyA9PT0gMCkge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign8J+SsCBDYXNoIEZsb3cgaXMgMCAtIHZlcmlmeSBkYXRhIGluIFpvaG8gZm9yIGRhdGUgcmFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRmFpbGVkIHRvIGZldGNoIGZpbmFuY2lhbCBtZXRyaWNzLCB1c2luZyBkZWZhdWx0czonLCBlcnJvcik7XG4gICAgICAgIGZpbmFuY2lhbE1ldHJpY3MgPSB7IHJldmVudWU6IDAsIGV4cGVuc2VzOiAwLCBuZXRQcm9maXQ6IDAsIGdyb3NzUHJvZml0OiAwLCBvcGVyYXRpbmdJbmNvbWU6IDAsIGNhc2hGbG93OiAwIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gZmV0Y2ggWm9obyBkYXRhOicsIGVycm9yKTtcbiAgICAgIHByb2plY3RzID0gW107XG4gICAgICBpbnZvaWNlcyA9IFtdO1xuICAgICAgZmluYW5jaWFsTWV0cmljcyA9IHsgcmV2ZW51ZTogMCwgZXhwZW5zZXM6IDAsIG5ldFByb2ZpdDogMCwgZ3Jvc3NQcm9maXQ6IDAsIG9wZXJhdGluZ0luY29tZTogMCwgY2FzaEZsb3c6IDAgfTtcbiAgICB9XG5cbiAgICAvLyBGZXRjaCBDbG9ja2lmeSBkYXRhXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFN0YXJ0aW5nIENsb2NraWZ5IGRhdGEgZmV0Y2guLi4nKTtcbiAgICAgIGNvbnN0IGNsb2NraWZ5Q29uZmlnID0gY2xvY2tpZnlTZXJ2aWNlLmdldENvbmZpZ3VyYXRpb25TdGF0dXMoKTtcbiAgICAgIFxuICAgICAgaWYgKGNsb2NraWZ5Q29uZmlnLmNvbmZpZ3VyZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KPsCBDbG9ja2lmeSBjb25maWd1cmVkLCBmZXRjaGluZyByZWFsIGRhdGEuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IFtjbG9ja2lmeVVzZXIsIGNsb2NraWZ5UHJvamVjdHMsIHRpbWVFbnRyaWVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBjbG9ja2lmeVNlcnZpY2UuZ2V0VXNlcigpLFxuICAgICAgICAgIGNsb2NraWZ5U2VydmljZS5nZXRQcm9qZWN0cygpLFxuICAgICAgICAgIGNsb2NraWZ5U2VydmljZS5nZXRBbGxUaW1lRW50cmllcyhcbiAgICAgICAgICAgIGN1cnJlbnRZZWFyU3RhcnQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIG5vdy50b0lTT1N0cmluZygpXG4gICAgICAgICAgKVxuICAgICAgICBdKTtcblxuICAgICAgICBjb25zb2xlLmxvZygn8J+TiiBDbG9ja2lmeSByYXcgZGF0YSByZWNlaXZlZDonLCB7XG4gICAgICAgICAgdXNlcjogY2xvY2tpZnlVc2VyPy5uYW1lIHx8ICdVbmtub3duJyxcbiAgICAgICAgICBwcm9qZWN0c0NvdW50OiBjbG9ja2lmeVByb2plY3RzPy5sZW5ndGggfHwgMCxcbiAgICAgICAgICB0aW1lRW50cmllc0NvdW50OiB0aW1lRW50cmllcz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRpbWUgdHJhY2tpbmcgbWV0cmljc1xuICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gdGltZUVudHJpZXMucmVkdWNlKChzdW0sIGVudHJ5KSA9PiB7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBlbnRyeS50aW1lSW50ZXJ2YWw/LmR1cmF0aW9uIHx8ICdQVDBIJztcbiAgICAgICAgICBjb25zdCBob3VycyA9IHBhcnNlRHVyYXRpb24oZHVyYXRpb24pO1xuICAgICAgICAgIHJldHVybiBzdW0gKyBob3VycztcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgY29uc3QgYmlsbGFibGVIb3VycyA9IHRpbWVFbnRyaWVzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5iaWxsYWJsZSkucmVkdWNlKChzdW0sIGVudHJ5KSA9PiB7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBlbnRyeS50aW1lSW50ZXJ2YWw/LmR1cmF0aW9uIHx8ICdQVDBIJztcbiAgICAgICAgICBjb25zdCBob3VycyA9IHBhcnNlRHVyYXRpb24oZHVyYXRpb24pO1xuICAgICAgICAgIHJldHVybiBzdW0gKyBob3VycztcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgY29uc3QgZWZmaWNpZW5jeSA9IHRvdGFsSG91cnMgPiAwID8gYmlsbGFibGVIb3VycyAvIHRvdGFsSG91cnMgOiAwLjg1O1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2UgaG91cmx5IHJhdGVcbiAgICAgICAgY29uc3QgYmlsbGFibGVFbnRyaWVzID0gdGltZUVudHJpZXMuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmJpbGxhYmxlKTtcbiAgICAgICAgbGV0IGF2ZXJhZ2VIb3VybHlSYXRlID0gMTI1OyAvLyBEZWZhdWx0XG4gICAgICAgIGlmIChiaWxsYWJsZUVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHRvdGFsUmF0ZSA9IGJpbGxhYmxlRW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBlbnRyeS5ob3VybHlSYXRlPy5hbW91bnQgfHwgMTUwO1xuICAgICAgICAgICAgcmV0dXJuIHN1bSArIHJhdGU7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgYXZlcmFnZUhvdXJseVJhdGUgPSB0b3RhbFJhdGUgLyBiaWxsYWJsZUVudHJpZXMubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvY2tpZnlEYXRhID0ge1xuICAgICAgICAgIHRvdGFsSG91cnMsXG4gICAgICAgICAgYmlsbGFibGVIb3VycyxcbiAgICAgICAgICBub25CaWxsYWJsZUhvdXJzOiB0b3RhbEhvdXJzIC0gYmlsbGFibGVIb3VycyxcbiAgICAgICAgICBlZmZpY2llbmN5LFxuICAgICAgICAgIGF2ZXJhZ2VIb3VybHlSYXRlLFxuICAgICAgICAgIHRvdGFsVGltZVZhbHVlOiBiaWxsYWJsZUhvdXJzICogYXZlcmFnZUhvdXJseVJhdGUsXG4gICAgICAgICAgYXZlcmFnZUhvdXJzUGVyUHJvamVjdDogcHJvamVjdHMubGVuZ3RoID4gMCA/IHRvdGFsSG91cnMgLyBwcm9qZWN0cy5sZW5ndGggOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBDbG9ja2lmeSBkYXRhIGNhbGN1bGF0ZWQ6JywgY2xvY2tpZnlEYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn46tIENsb2NraWZ5IG5vdCBjb25maWd1cmVkLCB1c2luZyBtb2NrIGRhdGEnKTtcbiAgICAgICAgY2xvY2tpZnlEYXRhID0ge1xuICAgICAgICAgIHRvdGFsSG91cnM6IDI4NDAwLFxuICAgICAgICAgIGJpbGxhYmxlSG91cnM6IDI1MjAwLFxuICAgICAgICAgIG5vbkJpbGxhYmxlSG91cnM6IDMyMDAsXG4gICAgICAgICAgZWZmaWNpZW5jeTogMC44OSxcbiAgICAgICAgICBhdmVyYWdlSG91cmx5UmF0ZTogMTI1LFxuICAgICAgICAgIHRvdGFsVGltZVZhbHVlOiAzMTUwMDAwLFxuICAgICAgICAgIGF2ZXJhZ2VIb3Vyc1BlclByb2plY3Q6IDcwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEZhaWxlZCB0byBmZXRjaCBDbG9ja2lmeSBkYXRhLCB1c2luZyBkZWZhdWx0czonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmVycm9yKCdDbG9ja2lmeSBlcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgIH0pO1xuICAgICAgY2xvY2tpZnlEYXRhID0ge1xuICAgICAgICB0b3RhbEhvdXJzOiAyODQwMCxcbiAgICAgICAgYmlsbGFibGVIb3VyczogMjUyMDAsXG4gICAgICAgIG5vbkJpbGxhYmxlSG91cnM6IDMyMDAsXG4gICAgICAgIGVmZmljaWVuY3k6IDAuODksXG4gICAgICAgIGF2ZXJhZ2VIb3VybHlSYXRlOiAxMjUsXG4gICAgICAgIHRvdGFsVGltZVZhbHVlOiAzMTUwMDAwLFxuICAgICAgICBhdmVyYWdlSG91cnNQZXJQcm9qZWN0OiA3MFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgcHJvamVjdCBtZXRyaWNzXG4gICAgY29uc3QgYWN0aXZlUHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIocCA9PiBwLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHx8IFtdO1xuICAgIGNvbnN0IHRvdGFsUHJvamVjdHMgPSBwcm9qZWN0cy5sZW5ndGggfHwgMDtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgYmlsbGluZyBtZXRyaWNzXG4gICAgY29uc3QgcGFpZEludm9pY2VzID0gaW52b2ljZXMuZmlsdGVyKGludiA9PiBpbnYuc3RhdHVzID09PSAncGFpZCcpIHx8IFtdO1xuICAgIGNvbnN0IG91dHN0YW5kaW5nSW52b2ljZXMgPSBpbnZvaWNlcy5maWx0ZXIoaW52ID0+IGludi5zdGF0dXMgPT09ICdzZW50JyB8fCBpbnYuc3RhdHVzID09PSAndmlld2VkJykgfHwgW107XG4gICAgXG4gICAgY29uc3QgdG90YWxCaWxsZWQgPSBwYWlkSW52b2ljZXMucmVkdWNlKChzdW0sIGludikgPT4gc3VtICsgKGludi50b3RhbCB8fCAwKSwgMCk7XG4gICAgY29uc3QgdG90YWxVbmJpbGxlZCA9IG91dHN0YW5kaW5nSW52b2ljZXMucmVkdWNlKChzdW0sIGludikgPT4gc3VtICsgKGludi50b3RhbCB8fCAwKSwgMCk7XG5cbiAgICAvLyBVc2UgZmluYW5jaWFsIG1ldHJpY3MgZnJvbSBab2hvIGlmIGF2YWlsYWJsZVxuICAgIGNvbnN0IHl0ZFJldmVudWUgPSBmaW5hbmNpYWxNZXRyaWNzPy5yZXZlbnVlIHx8IHRvdGFsQmlsbGVkO1xuICAgIGNvbnN0IHl0ZEV4cGVuc2VzID0gZmluYW5jaWFsTWV0cmljcz8uZXhwZW5zZXMgfHwgMDtcblxuICAgIC8vIEdldCB0b3AgcGVyZm9ybWluZyBwcm9qZWN0cyAtIGVuc3VyZSB3ZSBhbHdheXMgcmV0dXJuIGFuIGFycmF5XG4gICAgbGV0IHRvcFBlcmZvcm1pbmdQcm9qZWN0czogc3RyaW5nW10gPSBbXTtcbiAgICB0cnkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvamVjdHMpICYmIHByb2plY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdG9wUGVyZm9ybWluZ1Byb2plY3RzID0gcHJvamVjdHNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdhY3RpdmUnKVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhUmV2ZW51ZSA9IGludm9pY2VzXG4gICAgICAgICAgICAgIC5maWx0ZXIoaW52ID0+IGludi5wcm9qZWN0X2lkID09PSBhLnByb2plY3RfaWQpXG4gICAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgaW52KSA9PiBzdW0gKyAoaW52LnRvdGFsIHx8IDApLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IGJSZXZlbnVlID0gaW52b2ljZXNcbiAgICAgICAgICAgICAgLmZpbHRlcihpbnYgPT4gaW52LnByb2plY3RfaWQgPT09IGIucHJvamVjdF9pZClcbiAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBpbnYpID0+IHN1bSArIChpbnYudG90YWwgfHwgMCksIDApO1xuICAgICAgICAgICAgcmV0dXJuIGJSZXZlbnVlIC0gYVJldmVudWU7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc2xpY2UoMCwgNSlcbiAgICAgICAgICAubWFwKHAgPT4gcC5wcm9qZWN0X2NvZGUgfHwgcC5wcm9qZWN0X25hbWUgfHwgJ1Vua25vd24gUHJvamVjdCcpXG4gICAgICAgICAgLmZpbHRlcihCb29sZWFuKTsgLy8gUmVtb3ZlIGFueSB1bmRlZmluZWQvbnVsbCB2YWx1ZXNcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRXJyb3IgY2FsY3VsYXRpbmcgdG9wIHBlcmZvcm1pbmcgcHJvamVjdHMsIHVzaW5nIGRlZmF1bHRzOicsIGVycm9yKTtcbiAgICAgIHRvcFBlcmZvcm1pbmdQcm9qZWN0cyA9IFsnUHJvamVjdCBBJywgJ1Byb2plY3QgQicsICdQcm9qZWN0IEMnXTsgLy8gRmFsbGJhY2tcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgd2UgaGF2ZSB2YWxpZCBhcnJheXMgZm9yIGFsbCBkYXRhXG4gICAgY29uc3Qgc2FmZURhc2hib2FyZERhdGEgPSB7XG4gICAgICB0b3RhbFByb2plY3RzOiB0b3RhbFByb2plY3RzIHx8IDAsXG4gICAgICB0b3RhbEJpbGxlZDogdG90YWxCaWxsZWQgfHwgMCxcbiAgICAgIHRvdGFsVW5iaWxsZWQ6IHRvdGFsVW5iaWxsZWQgfHwgMCxcbiAgICAgIGFjdGl2ZVByb2plY3RzOiBhY3RpdmVQcm9qZWN0cy5sZW5ndGggfHwgMCxcbiAgICAgIHRvdGFsSG91cnM6IGNsb2NraWZ5RGF0YT8udG90YWxIb3VycyB8fCAwLFxuICAgICAgYmlsbGFibGVIb3VyczogY2xvY2tpZnlEYXRhPy5iaWxsYWJsZUhvdXJzIHx8IDAsXG4gICAgICBlZmZpY2llbmN5OiBjbG9ja2lmeURhdGE/LmVmZmljaWVuY3kgfHwgMC44NSxcbiAgICAgIGF2ZXJhZ2VIb3VybHlSYXRlOiBjbG9ja2lmeURhdGE/LmF2ZXJhZ2VIb3VybHlSYXRlIHx8IDEyNSxcbiAgICAgIHRvdGFsVGltZVZhbHVlOiBjbG9ja2lmeURhdGE/LnRvdGFsVGltZVZhbHVlIHx8IDAsXG4gICAgICBhdmVyYWdlSG91cnNQZXJQcm9qZWN0OiBjbG9ja2lmeURhdGE/LmF2ZXJhZ2VIb3Vyc1BlclByb2plY3QgfHwgMCxcbiAgICAgIHRvcFBlcmZvcm1pbmdQcm9qZWN0czogQXJyYXkuaXNBcnJheSh0b3BQZXJmb3JtaW5nUHJvamVjdHMpID8gdG9wUGVyZm9ybWluZ1Byb2plY3RzIDogW10sXG4gICAgICB5dGRSZXZlbnVlOiB5dGRSZXZlbnVlIHx8IDAsXG4gICAgICB5dGRFeHBlbnNlczogeXRkRXhwZW5zZXMgfHwgMCxcbiAgICAgIHl0ZFByb2ZpdDogKHl0ZFJldmVudWUgfHwgMCkgLSAoeXRkRXhwZW5zZXMgfHwgMClcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBIb21lcGFnZSBkYXNoYm9hcmQgZGF0YSBnZW5lcmF0ZWQ6Jywgc2FmZURhc2hib2FyZERhdGEpO1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIFJldHVybmluZyBkYXNoYm9hcmQgZGF0YSB0byBjbGllbnQuLi4nKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzYWZlRGFzaGJvYXJkRGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEhvbWVwYWdlIERhc2hib2FyZCBBUEkgZXJyb3I6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6Jywge1xuICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICBzdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBob21lcGFnZSBkYXNoYm9hcmQgZGF0YScsXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIGR1cmF0aW9uIHN0cmluZ3MgKGUuZy4sIFwiUFQySDMwTVwiKVxuZnVuY3Rpb24gcGFyc2VEdXJhdGlvbihkdXJhdGlvbjogc3RyaW5nKTogbnVtYmVyIHtcbiAgaWYgKCFkdXJhdGlvbikgcmV0dXJuIDA7XG4gIFxuICBjb25zdCByZWdleCA9IC9QVCg/OihcXGQrKUgpPyg/OihcXGQrKU0pPyg/OihcXGQrKVMpPy87XG4gIGNvbnN0IG1hdGNoID0gZHVyYXRpb24ubWF0Y2gocmVnZXgpO1xuICBcbiAgaWYgKCFtYXRjaCkgcmV0dXJuIDA7XG4gIFxuICBjb25zdCBob3VycyA9IHBhcnNlSW50KG1hdGNoWzFdIHx8ICcwJyk7XG4gIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtYXRjaFsyXSB8fCAnMCcpO1xuICBjb25zdCBzZWNvbmRzID0gcGFyc2VJbnQobWF0Y2hbM10gfHwgJzAnKTtcbiAgXG4gIHJldHVybiBob3VycyArIChtaW51dGVzIC8gNjApICsgKHNlY29uZHMgLyAzNjAwKTtcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ6b2hvU2VydmljZSIsImNsb2NraWZ5U2VydmljZSIsImR5bmFtaWMiLCJHRVQiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsIm5vdyIsIkRhdGUiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwiY3VycmVudFllYXJTdGFydCIsImxhc3RZZWFyU3RhcnQiLCJ0b0lTT1N0cmluZyIsInByb2plY3RzIiwiaW52b2ljZXMiLCJjbG9ja2lmeURhdGEiLCJmaW5hbmNpYWxNZXRyaWNzIiwiUHJvbWlzZSIsImFsbCIsImdldFByb2plY3RzIiwiZ2V0SW52b2ljZXMiLCJwcm9qZWN0c0NvdW50IiwibGVuZ3RoIiwiaW52b2ljZXNDb3VudCIsImdldEZpbmFuY2lhbE1ldHJpY3MiLCJzcGxpdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXNoRmxvdyIsIndhcm4iLCJlcnJvciIsInJldmVudWUiLCJleHBlbnNlcyIsIm5ldFByb2ZpdCIsImdyb3NzUHJvZml0Iiwib3BlcmF0aW5nSW5jb21lIiwiY2xvY2tpZnlDb25maWciLCJnZXRDb25maWd1cmF0aW9uU3RhdHVzIiwiY29uZmlndXJlZCIsImNsb2NraWZ5VXNlciIsImNsb2NraWZ5UHJvamVjdHMiLCJ0aW1lRW50cmllcyIsImdldFVzZXIiLCJnZXRBbGxUaW1lRW50cmllcyIsInVzZXIiLCJuYW1lIiwidGltZUVudHJpZXNDb3VudCIsInRvdGFsSG91cnMiLCJyZWR1Y2UiLCJzdW0iLCJlbnRyeSIsImR1cmF0aW9uIiwidGltZUludGVydmFsIiwiaG91cnMiLCJwYXJzZUR1cmF0aW9uIiwiYmlsbGFibGVIb3VycyIsImZpbHRlciIsImJpbGxhYmxlIiwiZWZmaWNpZW5jeSIsImJpbGxhYmxlRW50cmllcyIsImF2ZXJhZ2VIb3VybHlSYXRlIiwidG90YWxSYXRlIiwicmF0ZSIsImhvdXJseVJhdGUiLCJhbW91bnQiLCJub25CaWxsYWJsZUhvdXJzIiwidG90YWxUaW1lVmFsdWUiLCJhdmVyYWdlSG91cnNQZXJQcm9qZWN0IiwibWVzc2FnZSIsIkVycm9yIiwic3RhY2siLCJ1bmRlZmluZWQiLCJhY3RpdmVQcm9qZWN0cyIsInAiLCJzdGF0dXMiLCJ0b3RhbFByb2plY3RzIiwicGFpZEludm9pY2VzIiwiaW52Iiwib3V0c3RhbmRpbmdJbnZvaWNlcyIsInRvdGFsQmlsbGVkIiwidG90YWwiLCJ0b3RhbFVuYmlsbGVkIiwieXRkUmV2ZW51ZSIsInl0ZEV4cGVuc2VzIiwidG9wUGVyZm9ybWluZ1Byb2plY3RzIiwiQXJyYXkiLCJpc0FycmF5Iiwic29ydCIsImEiLCJiIiwiYVJldmVudWUiLCJwcm9qZWN0X2lkIiwiYlJldmVudWUiLCJzbGljZSIsIm1hcCIsInByb2plY3RfY29kZSIsInByb2plY3RfbmFtZSIsIkJvb2xlYW4iLCJzYWZlRGFzaGJvYXJkRGF0YSIsInl0ZFByb2ZpdCIsImpzb24iLCJ0aW1lc3RhbXAiLCJkZXRhaWxzIiwicmVnZXgiLCJtYXRjaCIsInBhcnNlSW50IiwibWludXRlcyIsInNlY29uZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/homepage-dashboard/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/clockify.ts":
/*!*************************!*\
  !*** ./lib/clockify.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clockifyService: () => (/* binding */ clockifyService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   fetchAllClockifyTimeSummaries: () => (/* binding */ fetchAllClockifyTimeSummaries),\n/* harmony export */   fetchClockifyProjects: () => (/* binding */ fetchClockifyProjects),\n/* harmony export */   fetchClockifyTimeEntries: () => (/* binding */ fetchClockifyTimeEntries),\n/* harmony export */   fetchClockifyTimeReport: () => (/* binding */ fetchClockifyTimeReport)\n/* harmony export */ });\nclass ClockifyService {\n    constructor(){\n        this.apiKey = null;\n        this.workspaceId = null;\n        this.baseUrl = \"https://api.clockify.me/api/v1\";\n        this.reportsBaseUrl = \"https://reports.api.clockify.me/v1\" // Correct Reports API base URL\n        ;\n        this._isConfigured = false;\n        this.apiKey = process.env.CLOCKIFY_API_KEY || null;\n        this.workspaceId = process.env.CLOCKIFY_WORKSPACE_ID || null;\n        // Check if we have valid credentials\n        if (this.apiKey && this.apiKey !== \"your_clockify_api_key_here\" && this.workspaceId && this.workspaceId !== \"your_clockify_workspace_id_here\") {\n            this._isConfigured = true;\n            console.info(\"Clockify service initialized with valid credentials\");\n        } else {\n            this._isConfigured = false;\n            console.warn(\"Clockify service initialized without valid credentials - will use mock data\");\n            console.warn(\"Please set CLOCKIFY_API_KEY and CLOCKIFY_WORKSPACE_ID in your environment variables\");\n        }\n    }\n    getHeaders() {\n        if (!this.apiKey) {\n            throw new Error(\"Clockify API key not configured\");\n        }\n        return {\n            \"X-Api-Key\": this.apiKey,\n            \"Content-Type\": \"application/json\"\n        };\n    }\n    async makeRequest(endpoint, params) {\n        if (!this._isConfigured) {\n            throw new Error(\"Clockify service not properly configured\");\n        }\n        try {\n            const url = new URL(`${this.baseUrl}${endpoint}`);\n            if (params) {\n                Object.keys(params).forEach((key)=>{\n                    if (params[key] !== undefined && params[key] !== null) {\n                        url.searchParams.append(key, params[key]);\n                    }\n                });\n            }\n            console.log(`🔍 Clockify API Request: ${url.toString()}`);\n            console.log(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            console.log(`📡 Clockify API Response: ${response.status} ${response.statusText}`);\n            if (response.status === 401) {\n                throw new Error(\"Clockify API authentication failed - check your API key\");\n            }\n            if (response.status === 403) {\n                throw new Error(\"Clockify API access forbidden - check your workspace ID and permissions\");\n            }\n            if (response.status === 404) {\n                const errorDetails = `Endpoint not found: ${endpoint}`;\n                console.error(`❌ 404 Error Details: ${errorDetails}`);\n                console.error(`   Full URL: ${url.toString()}`);\n                console.error(`   Workspace ID: ${this.workspaceId}`);\n                console.error(`   API Key configured: ${!!this.apiKey}`);\n                throw new Error(`Clockify API error: 404 Not Found - ${errorDetails}`);\n            }\n            if (response.status === 429) {\n                throw new Error(\"Clockify API rate limit exceeded - try again later\");\n            }\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.log(`✅ Clockify API Success: ${endpoint}`);\n            return data;\n        } catch (error) {\n            if (error instanceof Error) {\n                console.error(`❌ Clockify API Error in ${endpoint}:`, error.message);\n                throw error;\n            }\n            throw new Error(`Clockify API request failed: ${error}`);\n        }\n    }\n    // Check if the service is properly configured\n    isConfigured() {\n        return this._isConfigured;\n    }\n    // Get configuration status for debugging\n    getConfigurationStatus() {\n        return {\n            configured: this._isConfigured,\n            hasApiKey: !!(this.apiKey && this.apiKey !== \"your_clockify_api_key_here\"),\n            hasWorkspaceId: !!(this.workspaceId && this.workspaceId !== \"your_clockify_workspace_id_here\")\n        };\n    }\n    // Alias for getConfigurationStatus to match API usage\n    getConfigStatus() {\n        return this.getConfigurationStatus();\n    }\n    // Method to set workspace ID dynamically\n    setWorkspaceId(workspaceId) {\n        this.workspaceId = workspaceId;\n        if (this.apiKey && this.apiKey !== \"your_clockify_api_key_here\") {\n            this._isConfigured = true;\n        }\n    }\n    async getUser() {\n        try {\n            if (!this._isConfigured) {\n                console.log(\"Clockify not configured, returning mock user\");\n                return this.getMockUser();\n            }\n            const url = new URL(`${this.baseUrl}/user`);\n            console.log(`🔍 Clockify API Request: ${url.toString()}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            if (!response.ok) {\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log(`✅ Clockify API Success: /user`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get Clockify user:\", error);\n            console.log(\"Returning mock user due to Clockify API failure\");\n            return this.getMockUser();\n        }\n    }\n    async getWorkspaces() {\n        try {\n            return await this.makeRequest(\"/workspaces\");\n        } catch (error) {\n            console.error(\"Failed to get Clockify workspaces:\", error);\n            // Return mock workspace data when Clockify fails\n            return [\n                {\n                    id: \"mock-workspace-id\",\n                    name: \"Mock Workspace\",\n                    hourlyRate: {\n                        amount: 100,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getProjects() {\n        try {\n            if (!this._isConfigured) {\n                console.log(\"Clockify not configured, returning mock projects\");\n                return this.getMockProjects();\n            }\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/projects`);\n            console.log(`🔍 Clockify API Request: ${url.toString()}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            if (!response.ok) {\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log(`✅ Clockify API Success: /workspaces/${this.workspaceId}/projects`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get Clockify projects:\", error);\n            console.log(\"Returning mock projects due to Clockify API failure\");\n            return this.getMockProjects();\n        }\n    }\n    async getTimeEntries(projectId, startDate, endDate) {\n        try {\n            if (!this._isConfigured) {\n                console.log(\"Clockify not configured, returning mock data\");\n                return this.getMockTimeEntries(projectId, startDate, endDate);\n            }\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/projects/${projectId}/time-entries`);\n            url.searchParams.append(\"start\", startDate);\n            url.searchParams.append(\"end\", endDate);\n            console.log(`🔍 Clockify API Request: ${url.toString()}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            if (!response.ok) {\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log(`✅ Clockify API Success: /workspaces/${this.workspaceId}/projects/${projectId}/time-entries`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get Clockify time entries:\", error);\n            console.log(\"Returning mock time entry data due to Clockify API failure\");\n            return this.getMockTimeEntries(projectId, startDate, endDate);\n        }\n    }\n    async getAllTimeEntries(startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            // First try the Reports API for bulk time entry data\n            try {\n                console.info(\"\\uD83D\\uDD04 Attempting to fetch time entries via Clockify Reports API (requires Pro plan)...\");\n                return await this.getTimeEntriesViaReports(startDate, endDate);\n            } catch (reportsError) {\n                console.warn(\"⚠️ Clockify Reports API failed, falling back to user time entries endpoint:\", {\n                    error: reportsError instanceof Error ? reportsError.message : \"Unknown error\",\n                    reason: \"Reports API may require Pro plan or may be temporarily unavailable\",\n                    fallback: \"Using user time entries endpoint instead\"\n                });\n                return await this.getTimeEntriesViaUserEndpoint(startDate, endDate);\n            }\n        } catch (error) {\n            console.error(\"❌ Failed to get all Clockify time entries:\", error);\n            // Return mock time entry data when Clockify fails\n            console.warn(\"\\uD83C\\uDFAD Returning mock time entry data due to Clockify API failure. Check your plan level and API configuration.\");\n            return [\n                {\n                    id: \"mock-time-entry-1\",\n                    description: \"Mock work session (Clockify API unavailable)\",\n                    timeInterval: {\n                        start: startDate,\n                        end: endDate,\n                        duration: \"PT8H0M\"\n                    },\n                    billable: true,\n                    userId: \"mock-user-id\",\n                    userName: \"Mock User\",\n                    projectId: \"mock-project-1\",\n                    projectName: \"Mock Project 1\"\n                }\n            ];\n        }\n    }\n    // Method to get time entries via Reports API (preferred method)\n    async getTimeEntriesViaReports(startDate, endDate) {\n        const url = new URL(`${this.reportsBaseUrl}/workspaces/${this.workspaceId}/reports/detailed`);\n        console.info(`🔍 Clockify Reports API Request: ${url.toString()}`);\n        console.info(`   Method: POST (Reports API)`);\n        console.info(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n        console.info(`   Body: ${JSON.stringify({\n            dateRangeStart: startDate,\n            dateRangeEnd: endDate,\n            detailedFilter: {\n                pageSize: 1000,\n                sortColumn: \"DATE\"\n            }\n        })}`);\n        const response = await fetch(url.toString(), {\n            method: \"POST\",\n            headers: {\n                ...this.getHeaders(),\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                dateRangeStart: startDate,\n                dateRangeEnd: endDate,\n                detailedFilter: {\n                    pageSize: 1000,\n                    sortColumn: \"DATE\"\n                }\n            })\n        });\n        console.info(`📡 Clockify Reports API Response: ${response.status} ${response.statusText}`);\n        if (response.status === 401) {\n            throw new Error(\"Clockify API authentication failed - check your API key\");\n        }\n        if (response.status === 403) {\n            throw new Error(\"Clockify API access forbidden - check your workspace ID and permissions. Note: Detailed reports require Pro plan or higher.\");\n        }\n        if (response.status === 404) {\n            const errorDetails = `Reports endpoint not found: /workspaces/${this.workspaceId}/reports/detailed`;\n            console.error(`❌ 404 Error Details: ${errorDetails}`);\n            console.error(`   Full URL: ${url.toString()}`);\n            console.error(`   Workspace ID: ${this.workspaceId}`);\n            console.error(`   API Key configured: ${!!this.apiKey}`);\n            console.error(`   Note: This endpoint requires Clockify Pro plan or higher for detailed reports`);\n            throw new Error(`Clockify API error: 404 Not Found - ${errorDetails}. This endpoint requires Pro plan or higher.`);\n        }\n        if (response.status === 405) {\n            throw new Error(\"Clockify API method not allowed - this endpoint requires POST method\");\n        }\n        if (response.status === 429) {\n            throw new Error(\"Clockify API rate limit exceeded - try again later\");\n        }\n        if (!response.ok) {\n            const errorText = await response.text().catch(()=>\"Unknown error\");\n            console.error(`Clockify Reports API error response body: ${errorText}`);\n            throw new Error(`Clockify API error: ${response.status} ${response.statusText} - ${errorText}`);\n        }\n        const data = await response.json();\n        console.info(`✅ Clockify Reports API Success: /workspaces/${this.workspaceId}/reports/detailed`);\n        // Transform the reports data to match our expected time entry format\n        if (data.timeentries && Array.isArray(data.timeentries)) {\n            console.info(`📊 Processing ${data.timeentries.length} time entries from Reports API`);\n            return data.timeentries.map((entry, index)=>{\n                try {\n                    // Handle duration conversion - Reports API returns duration in seconds as number\n                    let duration = \"PT0H0M\";\n                    if (entry.duration !== undefined && entry.duration !== null) {\n                        if (typeof entry.duration === \"number\") {\n                            // Convert seconds to ISO 8601 duration format\n                            const hours = Math.floor(entry.duration / 3600);\n                            const minutes = Math.floor(entry.duration % 3600 / 60);\n                            duration = `PT${hours}H${minutes}M`;\n                        } else if (typeof entry.duration === \"string\") {\n                            // If it's already a string, use it directly\n                            duration = entry.duration;\n                        }\n                    }\n                    // Handle undefined IDs - generate a fallback ID if needed\n                    const entryId = entry.id || `reports-entry-${index}-${Date.now()}`;\n                    // Log sample entry for debugging (first few entries)\n                    if (index < 3) {\n                        console.info(`📝 Sample entry ${index}:`, {\n                            id: entryId,\n                            duration: entry.duration,\n                            convertedDuration: duration,\n                            projectId: entry.projectId,\n                            userId: entry.userId\n                        });\n                    }\n                    return {\n                        id: entryId,\n                        description: entry.description || \"No description\",\n                        timeInterval: {\n                            start: entry.timeInterval?.start || entry.start,\n                            end: entry.timeInterval?.end || entry.end,\n                            duration: duration\n                        },\n                        billable: entry.billable || false,\n                        userId: entry.userId || \"unknown-user\",\n                        userName: entry.userName || \"Unknown User\",\n                        projectId: entry.projectId || \"unknown-project\",\n                        projectName: entry.projectName || \"Unknown Project\",\n                        hourlyRate: entry.hourlyRate || 0\n                    };\n                } catch (entryError) {\n                    console.error(`❌ Error processing time entry ${index}:`, entryError);\n                    console.error(`   Raw entry data:`, entry);\n                    // Return a safe fallback entry\n                    return {\n                        id: `error-entry-${index}-${Date.now()}`,\n                        description: \"Error processing entry\",\n                        timeInterval: {\n                            start: startDate,\n                            end: endDate,\n                            duration: \"PT0H0M\"\n                        },\n                        billable: false,\n                        userId: \"error-user\",\n                        userName: \"Error User\",\n                        projectId: \"error-project\",\n                        projectName: \"Error Project\",\n                        hourlyRate: 0\n                    };\n                }\n            }).filter((entry)=>entry !== null); // Remove any null entries\n        }\n        console.warn(\"⚠️ No time entries found in Reports API response\");\n        return [];\n    }\n    // Fallback method to get time entries via user endpoint (GET method)\n    async getTimeEntriesViaUserEndpoint(startDate, endDate) {\n        try {\n            // Get the current user first\n            const user = await this.getUser();\n            if (!user?.id) {\n                throw new Error(\"Could not get current user for time entries\");\n            }\n            // Use GET method with query parameters - this is the correct way to fetch time entries\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/user/${user.id}/time-entries`);\n            url.searchParams.set(\"start\", startDate);\n            url.searchParams.set(\"end\", endDate);\n            console.info(`🔍 Clockify User Time Entries API Request (Fallback): ${url.toString()}`);\n            console.info(`   Method: GET (User Time Entries - Fallback from Reports API)`);\n            console.info(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n            console.info(`   Note: Using fallback method because Reports API failed or requires Pro plan`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            console.info(`📡 Clockify User Time Entries API Response: ${response.status} ${response.statusText}`);\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                console.error(`Clockify User Time Entries API error response body: ${errorText}`);\n                throw new Error(`Clockify User Time Entries API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.info(`✅ Clockify User Time Entries API Success (Fallback): /workspaces/${this.workspaceId}/user/${user.id}/time-entries`);\n            console.info(`   Retrieved ${data?.length || 0} time entries via fallback method`);\n            // Transform the data to match our expected format\n            if (Array.isArray(data)) {\n                return data.map((entry, index)=>{\n                    try {\n                        // Handle duration conversion - User API might also return duration as number\n                        let duration = \"PT0H0M\";\n                        if (entry.duration !== undefined && entry.duration !== null) {\n                            if (typeof entry.duration === \"number\") {\n                                // Convert seconds to ISO 8601 duration format\n                                const hours = Math.floor(entry.duration / 3600);\n                                const minutes = Math.floor(entry.duration % 3600 / 60);\n                                duration = `PT${hours}H${minutes}M`;\n                            } else if (typeof entry.duration === \"string\") {\n                                // If it's already a string, use it directly\n                                duration = entry.duration;\n                            }\n                        }\n                        // Handle undefined IDs - generate a fallback ID if needed\n                        const entryId = entry.id || `user-entry-${index}-${Date.now()}`;\n                        // Log sample entry for debugging (first few entries)\n                        if (index < 3) {\n                            console.info(`📝 Fallback entry ${index}:`, {\n                                id: entryId,\n                                duration: entry.duration,\n                                convertedDuration: duration,\n                                projectId: entry.projectId,\n                                userId: entry.userId\n                            });\n                        }\n                        return {\n                            id: entryId,\n                            description: entry.description || \"No description\",\n                            timeInterval: {\n                                start: entry.timeInterval?.start || entry.start,\n                                end: entry.timeInterval?.end || entry.end,\n                                duration: duration\n                            },\n                            billable: entry.billable || false,\n                            userId: entry.userId || \"unknown-user\",\n                            userName: entry.userName || \"Unknown User\",\n                            projectId: entry.projectId || \"unknown-project\",\n                            projectName: entry.projectName || \"Unknown Project\",\n                            hourlyRate: entry.hourlyRate || 0\n                        };\n                    } catch (entryError) {\n                        console.error(`❌ Error processing fallback time entry ${index}:`, entryError);\n                        console.error(`   Raw entry data:`, entry);\n                        // Return a safe fallback entry\n                        return {\n                            id: `error-fallback-${index}-${Date.now()}`,\n                            description: \"Error processing fallback entry\",\n                            timeInterval: {\n                                start: startDate,\n                                end: endDate,\n                                duration: \"PT0H0M\"\n                            },\n                            billable: false,\n                            userId: \"error-user\",\n                            userName: \"Error User\",\n                            projectId: \"error-project\",\n                            projectName: \"Error Project\",\n                            hourlyRate: 0\n                        };\n                    }\n                }).filter((entry)=>entry !== null); // Remove any null entries\n            }\n            return [];\n        } catch (error) {\n            console.error(\"Failed to get time entries via user endpoint (fallback):\", error);\n            throw error;\n        }\n    }\n    async getUsers() {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            return await this.makeRequest(`/workspaces/${this.workspaceId}/users`);\n        } catch (error) {\n            console.error(\"Failed to get Clockify users:\", error);\n            // Return mock user data when Clockify fails\n            return [\n                {\n                    id: \"mock-user-1\",\n                    name: \"Mock User 1\",\n                    email: \"user1@example.com\",\n                    status: \"ACTIVE\",\n                    hourlyRate: {\n                        amount: 100,\n                        currency: \"USD\"\n                    }\n                },\n                {\n                    id: \"mock-user-2\",\n                    name: \"Mock User 2\",\n                    email: \"user2@example.com\",\n                    status: \"ACTIVE\",\n                    hourlyRate: {\n                        amount: 120,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getProjectTimeReport(projectId, startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const timeEntries = await this.getTimeEntries(projectId, startDate, endDate);\n            const project = await this.getProjects().then((projects)=>projects.find((p)=>p.id === projectId));\n            if (!project) {\n                throw new Error(\"Project not found\");\n            }\n            const totalHours = timeEntries.reduce((sum, entry)=>{\n                const duration = entry.timeInterval.duration;\n                const hours = this.parseDuration(duration);\n                return sum + hours;\n            }, 0);\n            const billableHours = timeEntries.filter((entry)=>entry.billable).reduce((sum, entry)=>{\n                const duration = entry.timeInterval.duration;\n                const hours = this.parseDuration(duration);\n                return sum + hours;\n            }, 0);\n            const nonBillableHours = totalHours - billableHours;\n            return {\n                projectId,\n                projectName: project.name,\n                totalHours,\n                billableHours,\n                nonBillableHours,\n                totalAmount: totalHours * (project.hourlyRate?.amount || 0),\n                billableAmount: billableHours * (project.hourlyRate?.amount || 0),\n                nonBillableAmount: nonBillableHours * (project.hourlyRate?.amount || 0),\n                entries: timeEntries,\n                period: {\n                    start: startDate,\n                    end: endDate\n                }\n            };\n        } catch (error) {\n            console.error(\"Failed to get project time report:\", error);\n            return null;\n        }\n    }\n    async getAllProjectsTimeSummary(startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const projects = await this.getProjects();\n            const reports = [];\n            for (const project of projects){\n                const report = await this.getProjectTimeReport(project.id, startDate, endDate);\n                if (report) {\n                    reports.push(report);\n                }\n            }\n            return reports;\n        } catch (error) {\n            console.error(\"Failed to get all projects time summary:\", error);\n            return [];\n        }\n    }\n    // Helper method to parse ISO 8601 duration to hours\n    parseDuration(duration) {\n        const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n        if (!match) return 0;\n        const hours = parseInt(match[1] || \"0\");\n        const minutes = parseInt(match[2] || \"0\");\n        const seconds = parseInt(match[3] || \"0\");\n        return hours + minutes / 60 + seconds / 3600;\n    }\n    // Enhanced method to generate mock time entries\n    getMockTimeEntries(projectId, startDate, endDate) {\n        return [\n            {\n                id: `mock-${projectId}-1`,\n                description: \"Mock project work\",\n                timeInterval: {\n                    start: startDate,\n                    end: endDate,\n                    duration: \"PT8H0M\"\n                },\n                billable: true,\n                userId: \"mock-user-id\",\n                userName: \"Mock User\",\n                projectId: projectId,\n                projectName: \"Mock Project\"\n            }\n        ];\n    }\n    // Enhanced method to generate mock projects\n    getMockProjects() {\n        return [\n            {\n                id: \"mock-project-1\",\n                name: \"Mock Project 1\",\n                workspaceId: \"mock-workspace\",\n                clientId: \"mock-client-1\",\n                clientName: \"Mock Client 1\",\n                isPublic: true,\n                isTemplate: false,\n                color: \"#000000\",\n                billable: true,\n                public: true,\n                archived: false,\n                status: \"ACTIVE\",\n                budget: 50000,\n                hourlyRate: {\n                    amount: 150,\n                    currency: \"USD\"\n                }\n            }\n        ];\n    }\n    // Enhanced method to generate mock user\n    getMockUser() {\n        return {\n            id: \"mock-user-id\",\n            email: \"mock@example.com\",\n            name: \"Mock User\",\n            profilePicture: \"\",\n            status: \"ACTIVE\",\n            activeWorkspace: \"mock-workspace\",\n            defaultWorkspace: \"mock-workspace\"\n        };\n    }\n}\n// Create the service instance\nconst clockifyService = new ClockifyService();\n// Export the service instance as both default and named export\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clockifyService);\n\n// Export convenience functions\nconst fetchClockifyProjects = async ()=>{\n    try {\n        return await clockifyService.getProjects();\n    } catch (error) {\n        console.error(\"Error fetching Clockify projects:\", error);\n        return [];\n    }\n};\nconst fetchClockifyTimeEntries = async (projectId, startDate, endDate)=>{\n    try {\n        return await clockifyService.getTimeEntries(projectId, startDate || \"\", endDate || \"\");\n    } catch (error) {\n        console.error(\"Error fetching Clockify time entries:\", error);\n        return [];\n    }\n};\nconst fetchClockifyTimeReport = async (projectId, startDate, endDate)=>{\n    try {\n        return await clockifyService.getProjectTimeReport(projectId, startDate, endDate);\n    } catch (error) {\n        console.error(\"Error fetching Clockify time report:\", error);\n        return null;\n    }\n};\nconst fetchAllClockifyTimeSummaries = async (startDate, endDate)=>{\n    try {\n        return await clockifyService.getAllProjectsTimeSummary(startDate, endDate);\n    } catch (error) {\n        console.error(\"Error fetching Clockify time summaries:\", error);\n        return [];\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxrQkFBa0I7UUFDcEI7SUFDRjtBQUNGO0FBRUEsOEJBQThCO0FBQzlCLE1BQU1DLGtCQUFrQixJQUFJbko7QUFFNUIsK0RBQStEO0FBQy9ELGlFQUFlbUosZUFBZUEsRUFBQztBQUNKO0FBRTNCLCtCQUErQjtBQUN4QixNQUFNQyx3QkFBd0I7SUFDbkMsSUFBSTtRQUNGLE9BQU8sTUFBTUQsZ0JBQWdCckYsV0FBVztJQUMxQyxFQUFFLE9BQU92QixPQUFPO1FBQ2Q1QixRQUFRNEIsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbkQsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFO0FBRUssTUFBTThHLDJCQUEyQixPQUN0Q3BGLFdBQ0FDLFdBQ0FDO0lBRUEsSUFBSTtRQUNGLE9BQU8sTUFBTWdGLGdCQUFnQm5GLGNBQWMsQ0FBQ0MsV0FBV0MsYUFBYSxJQUFJQyxXQUFXO0lBQ3JGLEVBQUUsT0FBTzVCLE9BQU87UUFDZDVCLFFBQVE0QixLQUFLLENBQUMseUNBQXlDQTtRQUN2RCxPQUFPLEVBQUU7SUFDWDtBQUNGLEVBQUU7QUFFSyxNQUFNK0csMEJBQTBCLE9BQ3JDckYsV0FDQUMsV0FDQUM7SUFFQSxJQUFJO1FBQ0YsT0FBTyxNQUFNZ0YsZ0JBQWdCcEMsb0JBQW9CLENBQUM5QyxXQUFXQyxXQUFXQztJQUMxRSxFQUFFLE9BQU81QixPQUFPO1FBQ2Q1QixRQUFRNEIsS0FBSyxDQUFDLHdDQUF3Q0E7UUFDdEQsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU1nSCxnQ0FBZ0MsT0FDM0NyRixXQUNBQztJQUVBLElBQUk7UUFDRixPQUFPLE1BQU1nRixnQkFBZ0JsQix5QkFBeUIsQ0FBQy9ELFdBQVdDO0lBQ3BFLEVBQUUsT0FBTzVCLE9BQU87UUFDZDVCLFFBQVE0QixLQUFLLENBQUMsMkNBQTJDQTtRQUN6RCxPQUFPLEVBQUU7SUFDWDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96b2hvLWJpbGxpbmctcGxhdGZvcm0vLi9saWIvY2xvY2tpZnkudHM/OTBmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5VGltZUVudHJ5IHtcbiAgaWQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIGJpbGxhYmxlOiBib29sZWFuO1xuICB0YXNrSWQ/OiBzdHJpbmc7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICB0aW1lSW50ZXJ2YWw6IHtcbiAgICBzdGFydDogc3RyaW5nO1xuICAgIGVuZD86IHN0cmluZztcbiAgICBkdXJhdGlvbjogc3RyaW5nO1xuICB9O1xuICBob3VybHlSYXRlPzoge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gIH07XG4gIGNvc3RSYXRlPzoge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gIH07XG4gIGlzTG9ja2VkOiBib29sZWFuO1xuICBjdXN0b21GaWVsZFZhbHVlczogYW55W107XG4gIHR5cGU6IHN0cmluZztcbiAgdGFnczogYW55W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xvY2tpZnlQcm9qZWN0IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB3b3Jrc3BhY2VJZDogc3RyaW5nO1xuICBjbGllbnRJZD86IHN0cmluZztcbiAgY2xpZW50TmFtZT86IHN0cmluZztcbiAgaXNQdWJsaWM6IGJvb2xlYW47XG4gIGlzVGVtcGxhdGU6IGJvb2xlYW47XG4gIGNvbG9yOiBzdHJpbmc7XG4gIG5vdGU/OiBzdHJpbmc7XG4gIGJpbGxhYmxlOiBib29sZWFuO1xuICBwdWJsaWM6IGJvb2xlYW47XG4gIGFyY2hpdmVkOiBib29sZWFuO1xuICBlc3RpbWF0ZToge1xuICAgIGVzdGltYXRlOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xuICB9O1xuICBzdGF0dXM6IHN0cmluZztcbiAgZHVyYXRpb246IHN0cmluZztcbiAgYnVkZ2V0RXN0aW1hdGU6IG51bWJlcjtcbiAgYnVkZ2V0VHlwZTogc3RyaW5nO1xuICBob3VybHlSYXRlOiB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgfTtcbiAgY29zdFJhdGU6IHtcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICB9O1xuICB0aW1lRXN0aW1hdGU6IHN0cmluZztcbiAgYnVkZ2V0OiBudW1iZXI7XG4gIHNwZW50OiBzdHJpbmc7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIHJhdGU6IG51bWJlcjtcbiAgcmF0ZUxhc3RVcGRhdGVkOiBzdHJpbmc7XG4gIGZpeGVkRmVlOiBudW1iZXI7XG4gIG1lbWJlcnNoaXBzOiBhbnlbXTtcbiAgdGFza0NvdW50OiB7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICBlc3RpbWF0ZTogbnVtYmVyO1xuICB9O1xuICBjdXN0b21GaWVsZHM6IGFueVtdO1xuICBzdGFydERhdGU6IHN0cmluZztcbiAgZW5kRGF0ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbG9ja2lmeVVzZXIge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHByb2ZpbGVQaWN0dXJlOiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICBhY3RpdmVXb3Jrc3BhY2U6IHN0cmluZztcbiAgZGVmYXVsdFdvcmtzcGFjZTogc3RyaW5nO1xuICBzZXR0aW5nczogYW55O1xuICBtZW1iZXJzaGlwczogYW55W107XG4gIHByb2ZpbGVQaWN0dXJlVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xvY2tpZnlXb3Jrc3BhY2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHByb2ZpbGU6IG51bWJlcjtcbiAgcHJlbWl1bTogYm9vbGVhbjtcbiAgYWRtaW46IGJvb2xlYW47XG4gIGRlZmF1bHRIb3VybHlSYXRlOiBudW1iZXI7XG4gIGRlZmF1bHRDdXJyZW5jeTogc3RyaW5nO1xuICBvbmx5QWRtaW5zTWF5Q3JlYXRlUHJvamVjdHM6IGJvb2xlYW47XG4gIG9ubHlBZG1pbnNTZWVCaWxsYWJsZVJhdGVzOiBib29sZWFuO1xuICBvbmx5QWRtaW5zU2VlVGVhbURhc2hib2FyZDogYm9vbGVhbjtcbiAgcHJvamVjdHNCaWxsYWJsZUJ5RGVmYXVsdDogYm9vbGVhbjtcbiAgcm91bmRpbmc6IG51bWJlcjtcbiAgcm91bmRpbmdNaW51dGVzOiBudW1iZXI7XG4gIGxvZ286IHN0cmluZztcbiAgaWNhbFVybDogc3RyaW5nO1xuICBpY2FsRW5hYmxlZDogYm9vbGVhbjtcbiAgY3N2VXBsb2FkOiB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XG4gICAgdGltZUZvcm1hdDogc3RyaW5nO1xuICB9O1xuICBzdWJzY3JpcHRpb246IHtcbiAgICBzdGFydERhdGU6IHN0cmluZztcbiAgICBlbmREYXRlOiBzdHJpbmc7XG4gICAgdHJpYWw6IGJvb2xlYW47XG4gICAgc3RhdHVzOiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xvY2tpZnlUaW1lUmVwb3J0IHtcbiAgcHJvamVjdElkOiBzdHJpbmc7XG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XG4gIHRvdGFsSG91cnM6IG51bWJlcjtcbiAgYmlsbGFibGVIb3VyczogbnVtYmVyO1xuICBub25CaWxsYWJsZUhvdXJzOiBudW1iZXI7XG4gIHRvdGFsQW1vdW50OiBudW1iZXI7XG4gIGJpbGxhYmxlQW1vdW50OiBudW1iZXI7XG4gIG5vbkJpbGxhYmxlQW1vdW50OiBudW1iZXI7XG4gIGVudHJpZXM6IENsb2NraWZ5VGltZUVudHJ5W107XG4gIHBlcmlvZDoge1xuICAgIHN0YXJ0OiBzdHJpbmc7XG4gICAgZW5kOiBzdHJpbmc7XG4gIH07XG59XG5cbmludGVyZmFjZSBUb2tlblJlc3BvbnNlIHtcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNfaW46IG51bWJlcjtcbiAgdG9rZW5fdHlwZTogc3RyaW5nO1xufVxuXG5jbGFzcyBDbG9ja2lmeVNlcnZpY2Uge1xuICBwcml2YXRlIGFwaUtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgd29ya3NwYWNlSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuY2xvY2tpZnkubWUvYXBpL3YxJztcbiAgcHJpdmF0ZSByZXBvcnRzQmFzZVVybCA9ICdodHRwczovL3JlcG9ydHMuYXBpLmNsb2NraWZ5Lm1lL3YxJzsgLy8gQ29ycmVjdCBSZXBvcnRzIEFQSSBiYXNlIFVSTFxuICBwcml2YXRlIF9pc0NvbmZpZ3VyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFwaUtleSA9IHByb2Nlc3MuZW52LkNMT0NLSUZZX0FQSV9LRVkgfHwgbnVsbDtcbiAgICB0aGlzLndvcmtzcGFjZUlkID0gcHJvY2Vzcy5lbnYuQ0xPQ0tJRllfV09SS1NQQUNFX0lEIHx8IG51bGw7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSB2YWxpZCBjcmVkZW50aWFsc1xuICAgIGlmICh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaUtleSAhPT0gJ3lvdXJfY2xvY2tpZnlfYXBpX2tleV9oZXJlJyAmJiB0aGlzLndvcmtzcGFjZUlkICYmIHRoaXMud29ya3NwYWNlSWQgIT09ICd5b3VyX2Nsb2NraWZ5X3dvcmtzcGFjZV9pZF9oZXJlJykge1xuICAgICAgdGhpcy5faXNDb25maWd1cmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuaW5mbygnQ2xvY2tpZnkgc2VydmljZSBpbml0aWFsaXplZCB3aXRoIHZhbGlkIGNyZWRlbnRpYWxzJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2lzQ29uZmlndXJlZCA9IGZhbHNlO1xuICAgICAgY29uc29sZS53YXJuKCdDbG9ja2lmeSBzZXJ2aWNlIGluaXRpYWxpemVkIHdpdGhvdXQgdmFsaWQgY3JlZGVudGlhbHMgLSB3aWxsIHVzZSBtb2NrIGRhdGEnKTtcbiAgICAgIGNvbnNvbGUud2FybignUGxlYXNlIHNldCBDTE9DS0lGWV9BUElfS0VZIGFuZCBDTE9DS0lGWV9XT1JLU1BBQ0VfSUQgaW4geW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEhlYWRlcnMoKSB7XG4gICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkga2V5IG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAnWC1BcGktS2V5JzogdGhpcy5hcGlLZXksXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIHBhcmFtcz86IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKCF0aGlzLl9pc0NvbmZpZ3VyZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgc2VydmljZSBub3QgcHJvcGVybHkgY29uZmlndXJlZCcpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0ke2VuZHBvaW50fWApO1xuICAgICAgaWYgKHBhcmFtcykge1xuICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAocGFyYW1zW2tleV0gIT09IHVuZGVmaW5lZCAmJiBwYXJhbXNba2V5XSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBwYXJhbXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYPCflI0gQ2xvY2tpZnkgQVBJIFJlcXVlc3Q6ICR7dXJsLnRvU3RyaW5nKCl9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgSGVhZGVyczogJHtKU09OLnN0cmluZ2lmeSh0aGlzLmdldEhlYWRlcnMoKSl9YCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYPCfk6EgQ2xvY2tpZnkgQVBJIFJlc3BvbnNlOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgYXV0aGVudGljYXRpb24gZmFpbGVkIC0gY2hlY2sgeW91ciBBUEkga2V5Jyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IEFQSSBhY2Nlc3MgZm9yYmlkZGVuIC0gY2hlY2sgeW91ciB3b3Jrc3BhY2UgSUQgYW5kIHBlcm1pc3Npb25zJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zdCBlcnJvckRldGFpbHMgPSBgRW5kcG9pbnQgbm90IGZvdW5kOiAke2VuZHBvaW50fWA7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCA0MDQgRXJyb3IgRGV0YWlsczogJHtlcnJvckRldGFpbHN9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIEZ1bGwgVVJMOiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgICBXb3Jrc3BhY2UgSUQ6ICR7dGhpcy53b3Jrc3BhY2VJZH1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgICAgQVBJIEtleSBjb25maWd1cmVkOiAkeyEhdGhpcy5hcGlLZXl9YCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiA0MDQgTm90IEZvdW5kIC0gJHtlcnJvckRldGFpbHN9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IEFQSSByYXRlIGxpbWl0IGV4Y2VlZGVkIC0gdHJ5IGFnYWluIGxhdGVyJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coYOKchSBDbG9ja2lmeSBBUEkgU3VjY2VzczogJHtlbmRwb2ludH1gKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgQ2xvY2tpZnkgQVBJIEVycm9yIGluICR7ZW5kcG9pbnR9OmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIHJlcXVlc3QgZmFpbGVkOiAke2Vycm9yfWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGlmIHRoZSBzZXJ2aWNlIGlzIHByb3Blcmx5IGNvbmZpZ3VyZWRcbiAgcHVibGljIGlzQ29uZmlndXJlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNDb25maWd1cmVkO1xuICB9XG5cbiAgLy8gR2V0IGNvbmZpZ3VyYXRpb24gc3RhdHVzIGZvciBkZWJ1Z2dpbmdcbiAgcHVibGljIGdldENvbmZpZ3VyYXRpb25TdGF0dXMoKTogeyBjb25maWd1cmVkOiBib29sZWFuOyBoYXNBcGlLZXk6IGJvb2xlYW47IGhhc1dvcmtzcGFjZUlkOiBib29sZWFuIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBjb25maWd1cmVkOiB0aGlzLl9pc0NvbmZpZ3VyZWQsXG4gICAgICBoYXNBcGlLZXk6ICEhKHRoaXMuYXBpS2V5ICYmIHRoaXMuYXBpS2V5ICE9PSAneW91cl9jbG9ja2lmeV9hcGlfa2V5X2hlcmUnKSxcbiAgICAgIGhhc1dvcmtzcGFjZUlkOiAhISh0aGlzLndvcmtzcGFjZUlkICYmIHRoaXMud29ya3NwYWNlSWQgIT09ICd5b3VyX2Nsb2NraWZ5X3dvcmtzcGFjZV9pZF9oZXJlJylcbiAgICB9O1xuICB9XG5cbiAgLy8gQWxpYXMgZm9yIGdldENvbmZpZ3VyYXRpb25TdGF0dXMgdG8gbWF0Y2ggQVBJIHVzYWdlXG4gIHB1YmxpYyBnZXRDb25maWdTdGF0dXMoKTogeyBjb25maWd1cmVkOiBib29sZWFuOyBoYXNBcGlLZXk6IGJvb2xlYW47IGhhc1dvcmtzcGFjZUlkOiBib29sZWFuIH0ge1xuICAgIHJldHVybiB0aGlzLmdldENvbmZpZ3VyYXRpb25TdGF0dXMoKTtcbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBzZXQgd29ya3NwYWNlIElEIGR5bmFtaWNhbGx5XG4gIHB1YmxpYyBzZXRXb3Jrc3BhY2VJZCh3b3Jrc3BhY2VJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy53b3Jrc3BhY2VJZCA9IHdvcmtzcGFjZUlkO1xuICAgIGlmICh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaUtleSAhPT0gJ3lvdXJfY2xvY2tpZnlfYXBpX2tleV9oZXJlJykge1xuICAgICAgdGhpcy5faXNDb25maWd1cmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRVc2VyKCk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5faXNDb25maWd1cmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDbG9ja2lmeSBub3QgY29uZmlndXJlZCwgcmV0dXJuaW5nIG1vY2sgdXNlcicpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb2NrVXNlcigpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vdXNlcmApO1xuICAgICAgY29uc29sZS5sb2coYPCflI0gQ2xvY2tpZnkgQVBJIFJlcXVlc3Q6ICR7dXJsLnRvU3RyaW5nKCl9YCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2xvY2tpZnkgQVBJIFN1Y2Nlc3M6IC91c2VyYCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBDbG9ja2lmeSB1c2VyOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKCdSZXR1cm5pbmcgbW9jayB1c2VyIGR1ZSB0byBDbG9ja2lmeSBBUEkgZmFpbHVyZScpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ja1VzZXIoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRXb3Jrc3BhY2VzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy93b3Jrc3BhY2VzJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgQ2xvY2tpZnkgd29ya3NwYWNlczonLCBlcnJvcik7XG4gICAgICAvLyBSZXR1cm4gbW9jayB3b3Jrc3BhY2UgZGF0YSB3aGVuIENsb2NraWZ5IGZhaWxzXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtb2NrLXdvcmtzcGFjZS1pZCcsXG4gICAgICAgICAgbmFtZTogJ01vY2sgV29ya3NwYWNlJyxcbiAgICAgICAgICBob3VybHlSYXRlOiB7IGFtb3VudDogMTAwLCBjdXJyZW5jeTogJ1VTRCcgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLl9pc0NvbmZpZ3VyZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Nsb2NraWZ5IG5vdCBjb25maWd1cmVkLCByZXR1cm5pbmcgbW9jayBwcm9qZWN0cycpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb2NrUHJvamVjdHMoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZUlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ya3NwYWNlIElEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7dGhpcy5iYXNlVXJsfS93b3Jrc3BhY2VzLyR7dGhpcy53b3Jrc3BhY2VJZH0vcHJvamVjdHNgKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENsb2NraWZ5IEFQSSBSZXF1ZXN0OiAke3VybC50b1N0cmluZygpfWApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbG9ja2lmeSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIENsb2NraWZ5IEFQSSBTdWNjZXNzOiAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3Byb2plY3RzYCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBDbG9ja2lmeSBwcm9qZWN0czonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygnUmV0dXJuaW5nIG1vY2sgcHJvamVjdHMgZHVlIHRvIENsb2NraWZ5IEFQSSBmYWlsdXJlJyk7XG4gICAgICByZXR1cm4gdGhpcy5nZXRNb2NrUHJvamVjdHMoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRUaW1lRW50cmllcyhwcm9qZWN0SWQ6IHN0cmluZywgc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLl9pc0NvbmZpZ3VyZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Nsb2NraWZ5IG5vdCBjb25maWd1cmVkLCByZXR1cm5pbmcgbW9jayBkYXRhJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vY2tUaW1lRW50cmllcyhwcm9qZWN0SWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy53b3Jrc3BhY2VJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtzcGFjZSBJRCBub3QgY29uZmlndXJlZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3Byb2plY3RzLyR7cHJvamVjdElkfS90aW1lLWVudHJpZXNgKTtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKCdzdGFydCcsIHN0YXJ0RGF0ZSk7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnZW5kJywgZW5kRGF0ZSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENsb2NraWZ5IEFQSSBSZXF1ZXN0OiAke3VybC50b1N0cmluZygpfWApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbG9ja2lmeSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIENsb2NraWZ5IEFQSSBTdWNjZXNzOiAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3Byb2plY3RzLyR7cHJvamVjdElkfS90aW1lLWVudHJpZXNgKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IENsb2NraWZ5IHRpbWUgZW50cmllczonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygnUmV0dXJuaW5nIG1vY2sgdGltZSBlbnRyeSBkYXRhIGR1ZSB0byBDbG9ja2lmeSBBUEkgZmFpbHVyZScpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ja1RpbWVFbnRyaWVzKHByb2plY3RJZCwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBbGxUaW1lRW50cmllcyhzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmlyc3QgdHJ5IHRoZSBSZXBvcnRzIEFQSSBmb3IgYnVsayB0aW1lIGVudHJ5IGRhdGFcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbygn8J+UhCBBdHRlbXB0aW5nIHRvIGZldGNoIHRpbWUgZW50cmllcyB2aWEgQ2xvY2tpZnkgUmVwb3J0cyBBUEkgKHJlcXVpcmVzIFBybyBwbGFuKS4uLicpO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRUaW1lRW50cmllc1ZpYVJlcG9ydHMoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgIH0gY2F0Y2ggKHJlcG9ydHNFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDbG9ja2lmeSBSZXBvcnRzIEFQSSBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byB1c2VyIHRpbWUgZW50cmllcyBlbmRwb2ludDonLCB7XG4gICAgICAgICAgZXJyb3I6IHJlcG9ydHNFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcmVwb3J0c0Vycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgcmVhc29uOiAnUmVwb3J0cyBBUEkgbWF5IHJlcXVpcmUgUHJvIHBsYW4gb3IgbWF5IGJlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJyxcbiAgICAgICAgICBmYWxsYmFjazogJ1VzaW5nIHVzZXIgdGltZSBlbnRyaWVzIGVuZHBvaW50IGluc3RlYWQnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRUaW1lRW50cmllc1ZpYVVzZXJFbmRwb2ludChzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGdldCBhbGwgQ2xvY2tpZnkgdGltZSBlbnRyaWVzOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIG1vY2sgdGltZSBlbnRyeSBkYXRhIHdoZW4gQ2xvY2tpZnkgZmFpbHNcbiAgICAgIGNvbnNvbGUud2Fybign8J+OrSBSZXR1cm5pbmcgbW9jayB0aW1lIGVudHJ5IGRhdGEgZHVlIHRvIENsb2NraWZ5IEFQSSBmYWlsdXJlLiBDaGVjayB5b3VyIHBsYW4gbGV2ZWwgYW5kIEFQSSBjb25maWd1cmF0aW9uLicpO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbW9jay10aW1lLWVudHJ5LTEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTW9jayB3b3JrIHNlc3Npb24gKENsb2NraWZ5IEFQSSB1bmF2YWlsYWJsZSknLFxuICAgICAgICAgIHRpbWVJbnRlcnZhbDoge1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgIGVuZDogZW5kRGF0ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAnUFQ4SDBNJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmlsbGFibGU6IHRydWUsXG4gICAgICAgICAgdXNlcklkOiAnbW9jay11c2VyLWlkJyxcbiAgICAgICAgICB1c2VyTmFtZTogJ01vY2sgVXNlcicsXG4gICAgICAgICAgcHJvamVjdElkOiAnbW9jay1wcm9qZWN0LTEnLFxuICAgICAgICAgIHByb2plY3ROYW1lOiAnTW9jayBQcm9qZWN0IDEnXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuICB9XG5cbiAgLy8gTWV0aG9kIHRvIGdldCB0aW1lIGVudHJpZXMgdmlhIFJlcG9ydHMgQVBJIChwcmVmZXJyZWQgbWV0aG9kKVxuICBwcml2YXRlIGFzeW5jIGdldFRpbWVFbnRyaWVzVmlhUmVwb3J0cyhzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7dGhpcy5yZXBvcnRzQmFzZVVybH0vd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3JlcG9ydHMvZGV0YWlsZWRgKTtcbiAgICBcbiAgICBjb25zb2xlLmluZm8oYPCflI0gQ2xvY2tpZnkgUmVwb3J0cyBBUEkgUmVxdWVzdDogJHt1cmwudG9TdHJpbmcoKX1gKTtcbiAgICBjb25zb2xlLmluZm8oYCAgIE1ldGhvZDogUE9TVCAoUmVwb3J0cyBBUEkpYCk7XG4gICAgY29uc29sZS5pbmZvKGAgICBIZWFkZXJzOiAke0pTT04uc3RyaW5naWZ5KHRoaXMuZ2V0SGVhZGVycygpKX1gKTtcbiAgICBjb25zb2xlLmluZm8oYCAgIEJvZHk6ICR7SlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgIGRhdGVSYW5nZVN0YXJ0OiBzdGFydERhdGUsIFxuICAgICAgZGF0ZVJhbmdlRW5kOiBlbmREYXRlLFxuICAgICAgZGV0YWlsZWRGaWx0ZXI6IHtcbiAgICAgICAgcGFnZVNpemU6IDEwMDAsXG4gICAgICAgIHNvcnRDb2x1bW46IFwiREFURVwiXG4gICAgICB9XG4gICAgfSl9YCk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4udGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBkYXRlUmFuZ2VTdGFydDogc3RhcnREYXRlLFxuICAgICAgICBkYXRlUmFuZ2VFbmQ6IGVuZERhdGUsXG4gICAgICAgIGRldGFpbGVkRmlsdGVyOiB7XG4gICAgICAgICAgcGFnZVNpemU6IDEwMDAsXG4gICAgICAgICAgc29ydENvbHVtbjogXCJEQVRFXCJcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmluZm8oYPCfk6EgQ2xvY2tpZnkgUmVwb3J0cyBBUEkgUmVzcG9uc2U6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCAtIGNoZWNrIHlvdXIgQVBJIGtleScpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGFjY2VzcyBmb3JiaWRkZW4gLSBjaGVjayB5b3VyIHdvcmtzcGFjZSBJRCBhbmQgcGVybWlzc2lvbnMuIE5vdGU6IERldGFpbGVkIHJlcG9ydHMgcmVxdWlyZSBQcm8gcGxhbiBvciBoaWdoZXIuJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgY29uc3QgZXJyb3JEZXRhaWxzID0gYFJlcG9ydHMgZW5kcG9pbnQgbm90IGZvdW5kOiAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3JlcG9ydHMvZGV0YWlsZWRgO1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIDQwNCBFcnJvciBEZXRhaWxzOiAke2Vycm9yRGV0YWlsc31gKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIEZ1bGwgVVJMOiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgY29uc29sZS5lcnJvcihgICAgV29ya3NwYWNlIElEOiAke3RoaXMud29ya3NwYWNlSWR9YCk7XG4gICAgICBjb25zb2xlLmVycm9yKGAgICBBUEkgS2V5IGNvbmZpZ3VyZWQ6ICR7ISF0aGlzLmFwaUtleX1gKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIE5vdGU6IFRoaXMgZW5kcG9pbnQgcmVxdWlyZXMgQ2xvY2tpZnkgUHJvIHBsYW4gb3IgaGlnaGVyIGZvciBkZXRhaWxlZCByZXBvcnRzYCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSBlcnJvcjogNDA0IE5vdCBGb3VuZCAtICR7ZXJyb3JEZXRhaWxzfS4gVGhpcyBlbmRwb2ludCByZXF1aXJlcyBQcm8gcGxhbiBvciBoaWdoZXIuYCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgbWV0aG9kIG5vdCBhbGxvd2VkIC0gdGhpcyBlbmRwb2ludCByZXF1aXJlcyBQT1NUIG1ldGhvZCcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIHJhdGUgbGltaXQgZXhjZWVkZWQgLSB0cnkgYWdhaW4gbGF0ZXInKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICdVbmtub3duIGVycm9yJyk7XG4gICAgICBjb25zb2xlLmVycm9yKGBDbG9ja2lmeSBSZXBvcnRzIEFQSSBlcnJvciByZXNwb25zZSBib2R5OiAke2Vycm9yVGV4dH1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc29sZS5pbmZvKGDinIUgQ2xvY2tpZnkgUmVwb3J0cyBBUEkgU3VjY2VzczogL3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS9yZXBvcnRzL2RldGFpbGVkYCk7XG4gICAgXG4gICAgLy8gVHJhbnNmb3JtIHRoZSByZXBvcnRzIGRhdGEgdG8gbWF0Y2ggb3VyIGV4cGVjdGVkIHRpbWUgZW50cnkgZm9ybWF0XG4gICAgaWYgKGRhdGEudGltZWVudHJpZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLnRpbWVlbnRyaWVzKSkge1xuICAgICAgY29uc29sZS5pbmZvKGDwn5OKIFByb2Nlc3NpbmcgJHtkYXRhLnRpbWVlbnRyaWVzLmxlbmd0aH0gdGltZSBlbnRyaWVzIGZyb20gUmVwb3J0cyBBUElgKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGRhdGEudGltZWVudHJpZXMubWFwKChlbnRyeTogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gSGFuZGxlIGR1cmF0aW9uIGNvbnZlcnNpb24gLSBSZXBvcnRzIEFQSSByZXR1cm5zIGR1cmF0aW9uIGluIHNlY29uZHMgYXMgbnVtYmVyXG4gICAgICAgICAgbGV0IGR1cmF0aW9uID0gJ1BUMEgwTSc7XG4gICAgICAgICAgaWYgKGVudHJ5LmR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgZW50cnkuZHVyYXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkuZHVyYXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgIC8vIENvbnZlcnQgc2Vjb25kcyB0byBJU08gODYwMSBkdXJhdGlvbiBmb3JtYXRcbiAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKGVudHJ5LmR1cmF0aW9uIC8gMzYwMCk7XG4gICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChlbnRyeS5kdXJhdGlvbiAlIDM2MDApIC8gNjApO1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IGBQVCR7aG91cnN9SCR7bWludXRlc31NYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVudHJ5LmR1cmF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyBJZiBpdCdzIGFscmVhZHkgYSBzdHJpbmcsIHVzZSBpdCBkaXJlY3RseVxuICAgICAgICAgICAgICBkdXJhdGlvbiA9IGVudHJ5LmR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEhhbmRsZSB1bmRlZmluZWQgSURzIC0gZ2VuZXJhdGUgYSBmYWxsYmFjayBJRCBpZiBuZWVkZWRcbiAgICAgICAgICBjb25zdCBlbnRyeUlkID0gZW50cnkuaWQgfHwgYHJlcG9ydHMtZW50cnktJHtpbmRleH0tJHtEYXRlLm5vdygpfWA7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTG9nIHNhbXBsZSBlbnRyeSBmb3IgZGVidWdnaW5nIChmaXJzdCBmZXcgZW50cmllcylcbiAgICAgICAgICBpZiAoaW5kZXggPCAzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oYPCfk50gU2FtcGxlIGVudHJ5ICR7aW5kZXh9OmAsIHtcbiAgICAgICAgICAgICAgaWQ6IGVudHJ5SWQsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBlbnRyeS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgY29udmVydGVkRHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGVudHJ5LnByb2plY3RJZCxcbiAgICAgICAgICAgICAgdXNlcklkOiBlbnRyeS51c2VySWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogZW50cnlJZCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlbnRyeS5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgdGltZUludGVydmFsOiB7XG4gICAgICAgICAgICAgIHN0YXJ0OiBlbnRyeS50aW1lSW50ZXJ2YWw/LnN0YXJ0IHx8IGVudHJ5LnN0YXJ0LFxuICAgICAgICAgICAgICBlbmQ6IGVudHJ5LnRpbWVJbnRlcnZhbD8uZW5kIHx8IGVudHJ5LmVuZCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmlsbGFibGU6IGVudHJ5LmJpbGxhYmxlIHx8IGZhbHNlLFxuICAgICAgICAgICAgdXNlcklkOiBlbnRyeS51c2VySWQgfHwgJ3Vua25vd24tdXNlcicsXG4gICAgICAgICAgICB1c2VyTmFtZTogZW50cnkudXNlck5hbWUgfHwgJ1Vua25vd24gVXNlcicsXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGVudHJ5LnByb2plY3RJZCB8fCAndW5rbm93bi1wcm9qZWN0JyxcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBlbnRyeS5wcm9qZWN0TmFtZSB8fCAnVW5rbm93biBQcm9qZWN0JyxcbiAgICAgICAgICAgIGhvdXJseVJhdGU6IGVudHJ5LmhvdXJseVJhdGUgfHwgMFxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVudHJ5RXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3IgcHJvY2Vzc2luZyB0aW1lIGVudHJ5ICR7aW5kZXh9OmAsIGVudHJ5RXJyb3IpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIFJhdyBlbnRyeSBkYXRhOmAsIGVudHJ5KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXR1cm4gYSBzYWZlIGZhbGxiYWNrIGVudHJ5XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBgZXJyb3ItZW50cnktJHtpbmRleH0tJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Vycm9yIHByb2Nlc3NpbmcgZW50cnknLFxuICAgICAgICAgICAgdGltZUludGVydmFsOiB7XG4gICAgICAgICAgICAgIHN0YXJ0OiBzdGFydERhdGUsXG4gICAgICAgICAgICAgIGVuZDogZW5kRGF0ZSxcbiAgICAgICAgICAgICAgZHVyYXRpb246ICdQVDBIME0nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmlsbGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgdXNlcklkOiAnZXJyb3ItdXNlcicsXG4gICAgICAgICAgICB1c2VyTmFtZTogJ0Vycm9yIFVzZXInLFxuICAgICAgICAgICAgcHJvamVjdElkOiAnZXJyb3ItcHJvamVjdCcsXG4gICAgICAgICAgICBwcm9qZWN0TmFtZTogJ0Vycm9yIFByb2plY3QnLFxuICAgICAgICAgICAgaG91cmx5UmF0ZTogMFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pLmZpbHRlcigoZW50cnk6IGFueSkgPT4gZW50cnkgIT09IG51bGwpOyAvLyBSZW1vdmUgYW55IG51bGwgZW50cmllc1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBObyB0aW1lIGVudHJpZXMgZm91bmQgaW4gUmVwb3J0cyBBUEkgcmVzcG9uc2UnKTtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICAvLyBGYWxsYmFjayBtZXRob2QgdG8gZ2V0IHRpbWUgZW50cmllcyB2aWEgdXNlciBlbmRwb2ludCAoR0VUIG1ldGhvZClcbiAgcHJpdmF0ZSBhc3luYyBnZXRUaW1lRW50cmllc1ZpYVVzZXJFbmRwb2ludChzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdXNlciBmaXJzdFxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuZ2V0VXNlcigpO1xuICAgICAgaWYgKCF1c2VyPy5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBnZXQgY3VycmVudCB1c2VyIGZvciB0aW1lIGVudHJpZXMnKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXNlIEdFVCBtZXRob2Qgd2l0aCBxdWVyeSBwYXJhbWV0ZXJzIC0gdGhpcyBpcyB0aGUgY29ycmVjdCB3YXkgdG8gZmV0Y2ggdGltZSBlbnRyaWVzXG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3VzZXIvJHt1c2VyLmlkfS90aW1lLWVudHJpZXNgKTtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdzdGFydCcsIHN0YXJ0RGF0ZSk7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnZW5kJywgZW5kRGF0ZSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUuaW5mbyhg8J+UjSBDbG9ja2lmeSBVc2VyIFRpbWUgRW50cmllcyBBUEkgUmVxdWVzdCAoRmFsbGJhY2spOiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgY29uc29sZS5pbmZvKGAgICBNZXRob2Q6IEdFVCAoVXNlciBUaW1lIEVudHJpZXMgLSBGYWxsYmFjayBmcm9tIFJlcG9ydHMgQVBJKWApO1xuICAgICAgY29uc29sZS5pbmZvKGAgICBIZWFkZXJzOiAke0pTT04uc3RyaW5naWZ5KHRoaXMuZ2V0SGVhZGVycygpKX1gKTtcbiAgICAgIGNvbnNvbGUuaW5mbyhgICAgTm90ZTogVXNpbmcgZmFsbGJhY2sgbWV0aG9kIGJlY2F1c2UgUmVwb3J0cyBBUEkgZmFpbGVkIG9yIHJlcXVpcmVzIFBybyBwbGFuYCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCksXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5pbmZvKGDwn5OhIENsb2NraWZ5IFVzZXIgVGltZSBFbnRyaWVzIEFQSSBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQ2xvY2tpZnkgVXNlciBUaW1lIEVudHJpZXMgQVBJIGVycm9yIHJlc3BvbnNlIGJvZHk6ICR7ZXJyb3JUZXh0fWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IFVzZXIgVGltZSBFbnRyaWVzIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0gLSAke2Vycm9yVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUuaW5mbyhg4pyFIENsb2NraWZ5IFVzZXIgVGltZSBFbnRyaWVzIEFQSSBTdWNjZXNzIChGYWxsYmFjayk6IC93b3Jrc3BhY2VzLyR7dGhpcy53b3Jrc3BhY2VJZH0vdXNlci8ke3VzZXIuaWR9L3RpbWUtZW50cmllc2ApO1xuICAgICAgY29uc29sZS5pbmZvKGAgICBSZXRyaWV2ZWQgJHtkYXRhPy5sZW5ndGggfHwgMH0gdGltZSBlbnRyaWVzIHZpYSBmYWxsYmFjayBtZXRob2RgKTtcbiAgICAgIFxuICAgICAgLy8gVHJhbnNmb3JtIHRoZSBkYXRhIHRvIG1hdGNoIG91ciBleHBlY3RlZCBmb3JtYXRcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBkYXRhLm1hcCgoZW50cnk6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgZHVyYXRpb24gY29udmVyc2lvbiAtIFVzZXIgQVBJIG1pZ2h0IGFsc28gcmV0dXJuIGR1cmF0aW9uIGFzIG51bWJlclxuICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gJ1BUMEgwTSc7XG4gICAgICAgICAgICBpZiAoZW50cnkuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiBlbnRyeS5kdXJhdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5LmR1cmF0aW9uID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgc2Vjb25kcyB0byBJU08gODYwMSBkdXJhdGlvbiBmb3JtYXRcbiAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoZW50cnkuZHVyYXRpb24gLyAzNjAwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoZW50cnkuZHVyYXRpb24gJSAzNjAwKSAvIDYwKTtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGBQVCR7aG91cnN9SCR7bWludXRlc31NYDtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZW50cnkuZHVyYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhbHJlYWR5IGEgc3RyaW5nLCB1c2UgaXQgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGVudHJ5LmR1cmF0aW9uO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSB1bmRlZmluZWQgSURzIC0gZ2VuZXJhdGUgYSBmYWxsYmFjayBJRCBpZiBuZWVkZWRcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5SWQgPSBlbnRyeS5pZCB8fCBgdXNlci1lbnRyeS0ke2luZGV4fS0ke0RhdGUubm93KCl9YDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTG9nIHNhbXBsZSBlbnRyeSBmb3IgZGVidWdnaW5nIChmaXJzdCBmZXcgZW50cmllcylcbiAgICAgICAgICAgIGlmIChpbmRleCA8IDMpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGDwn5OdIEZhbGxiYWNrIGVudHJ5ICR7aW5kZXh9OmAsIHtcbiAgICAgICAgICAgICAgICBpZDogZW50cnlJZCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZW50cnkuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgY29udmVydGVkRHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHByb2plY3RJZDogZW50cnkucHJvamVjdElkLFxuICAgICAgICAgICAgICAgIHVzZXJJZDogZW50cnkudXNlcklkXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBpZDogZW50cnlJZCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGVudHJ5LmRlc2NyaXB0aW9uIHx8ICdObyBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgICAgIHRpbWVJbnRlcnZhbDoge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBlbnRyeS50aW1lSW50ZXJ2YWw/LnN0YXJ0IHx8IGVudHJ5LnN0YXJ0LFxuICAgICAgICAgICAgICAgIGVuZDogZW50cnkudGltZUludGVydmFsPy5lbmQgfHwgZW50cnkuZW5kLFxuICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYmlsbGFibGU6IGVudHJ5LmJpbGxhYmxlIHx8IGZhbHNlLFxuICAgICAgICAgICAgICB1c2VySWQ6IGVudHJ5LnVzZXJJZCB8fCAndW5rbm93bi11c2VyJyxcbiAgICAgICAgICAgICAgdXNlck5hbWU6IGVudHJ5LnVzZXJOYW1lIHx8ICdVbmtub3duIFVzZXInLFxuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGVudHJ5LnByb2plY3RJZCB8fCAndW5rbm93bi1wcm9qZWN0JyxcbiAgICAgICAgICAgICAgcHJvamVjdE5hbWU6IGVudHJ5LnByb2plY3ROYW1lIHx8ICdVbmtub3duIFByb2plY3QnLFxuICAgICAgICAgICAgICBob3VybHlSYXRlOiBlbnRyeS5ob3VybHlSYXRlIHx8IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBjYXRjaCAoZW50cnlFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yIHByb2Nlc3NpbmcgZmFsbGJhY2sgdGltZSBlbnRyeSAke2luZGV4fTpgLCBlbnRyeUVycm9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIFJhdyBlbnRyeSBkYXRhOmAsIGVudHJ5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmV0dXJuIGEgc2FmZSBmYWxsYmFjayBlbnRyeVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6IGBlcnJvci1mYWxsYmFjay0ke2luZGV4fS0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFcnJvciBwcm9jZXNzaW5nIGZhbGxiYWNrIGVudHJ5JyxcbiAgICAgICAgICAgICAgdGltZUludGVydmFsOiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICBlbmQ6IGVuZERhdGUsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246ICdQVDBIME0nXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJpbGxhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgdXNlcklkOiAnZXJyb3ItdXNlcicsXG4gICAgICAgICAgICAgIHVzZXJOYW1lOiAnRXJyb3IgVXNlcicsXG4gICAgICAgICAgICAgIHByb2plY3RJZDogJ2Vycm9yLXByb2plY3QnLFxuICAgICAgICAgICAgICBwcm9qZWN0TmFtZTogJ0Vycm9yIFByb2plY3QnLFxuICAgICAgICAgICAgICBob3VybHlSYXRlOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuZmlsdGVyKChlbnRyeTogYW55KSA9PiBlbnRyeSAhPT0gbnVsbCk7IC8vIFJlbW92ZSBhbnkgbnVsbCBlbnRyaWVzXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCB0aW1lIGVudHJpZXMgdmlhIHVzZXIgZW5kcG9pbnQgKGZhbGxiYWNrKTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRVc2VycygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy53b3Jrc3BhY2VJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtzcGFjZSBJRCBub3QgY29uZmlndXJlZCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYC93b3Jrc3BhY2VzLyR7dGhpcy53b3Jrc3BhY2VJZH0vdXNlcnNgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBDbG9ja2lmeSB1c2VyczonLCBlcnJvcik7XG4gICAgICAvLyBSZXR1cm4gbW9jayB1c2VyIGRhdGEgd2hlbiBDbG9ja2lmeSBmYWlsc1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbW9jay11c2VyLTEnLFxuICAgICAgICAgIG5hbWU6ICdNb2NrIFVzZXIgMScsXG4gICAgICAgICAgZW1haWw6ICd1c2VyMUBleGFtcGxlLmNvbScsXG4gICAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgICAgICBob3VybHlSYXRlOiB7IGFtb3VudDogMTAwLCBjdXJyZW5jeTogJ1VTRCcgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtb2NrLXVzZXItMicsXG4gICAgICAgICAgbmFtZTogJ01vY2sgVXNlciAyJyxcbiAgICAgICAgICBlbWFpbDogJ3VzZXIyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgICAgIGhvdXJseVJhdGU6IHsgYW1vdW50OiAxMjAsIGN1cnJlbmN5OiAnVVNEJyB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UHJvamVjdFRpbWVSZXBvcnQocHJvamVjdElkOiBzdHJpbmcsIHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPENsb2NraWZ5VGltZVJlcG9ydCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZUlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ya3NwYWNlIElEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHRpbWVFbnRyaWVzID0gYXdhaXQgdGhpcy5nZXRUaW1lRW50cmllcyhwcm9qZWN0SWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0cygpLnRoZW4ocHJvamVjdHMgPT4gXG4gICAgICAgIHByb2plY3RzLmZpbmQocCA9PiBwLmlkID09PSBwcm9qZWN0SWQpXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoIXByb2plY3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm9qZWN0IG5vdCBmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0b3RhbEhvdXJzID0gdGltZUVudHJpZXMucmVkdWNlKChzdW0sIGVudHJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW50cnkudGltZUludGVydmFsLmR1cmF0aW9uO1xuICAgICAgICBjb25zdCBob3VycyA9IHRoaXMucGFyc2VEdXJhdGlvbihkdXJhdGlvbik7XG4gICAgICAgIHJldHVybiBzdW0gKyBob3VycztcbiAgICAgIH0sIDApO1xuXG4gICAgICBjb25zdCBiaWxsYWJsZUhvdXJzID0gdGltZUVudHJpZXNcbiAgICAgICAgLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5iaWxsYWJsZSlcbiAgICAgICAgLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW50cnkudGltZUludGVydmFsLmR1cmF0aW9uO1xuICAgICAgICAgIGNvbnN0IGhvdXJzID0gdGhpcy5wYXJzZUR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICAgICAgICByZXR1cm4gc3VtICsgaG91cnM7XG4gICAgICAgIH0sIDApO1xuXG4gICAgICBjb25zdCBub25CaWxsYWJsZUhvdXJzID0gdG90YWxIb3VycyAtIGJpbGxhYmxlSG91cnM7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByb2plY3RJZCxcbiAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3QubmFtZSxcbiAgICAgICAgdG90YWxIb3VycyxcbiAgICAgICAgYmlsbGFibGVIb3VycyxcbiAgICAgICAgbm9uQmlsbGFibGVIb3VycyxcbiAgICAgICAgdG90YWxBbW91bnQ6IHRvdGFsSG91cnMgKiAocHJvamVjdC5ob3VybHlSYXRlPy5hbW91bnQgfHwgMCksXG4gICAgICAgIGJpbGxhYmxlQW1vdW50OiBiaWxsYWJsZUhvdXJzICogKHByb2plY3QuaG91cmx5UmF0ZT8uYW1vdW50IHx8IDApLFxuICAgICAgICBub25CaWxsYWJsZUFtb3VudDogbm9uQmlsbGFibGVIb3VycyAqIChwcm9qZWN0LmhvdXJseVJhdGU/LmFtb3VudCB8fCAwKSxcbiAgICAgICAgZW50cmllczogdGltZUVudHJpZXMsXG4gICAgICAgIHBlcmlvZDogeyBzdGFydDogc3RhcnREYXRlLCBlbmQ6IGVuZERhdGUgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBwcm9qZWN0IHRpbWUgcmVwb3J0OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEFsbFByb2plY3RzVGltZVN1bW1hcnkoc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZyk6IFByb21pc2U8Q2xvY2tpZnlUaW1lUmVwb3J0W10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZUlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ya3NwYWNlIElEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0cygpO1xuICAgICAgY29uc3QgcmVwb3J0czogQ2xvY2tpZnlUaW1lUmVwb3J0W10gPSBbXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBwcm9qZWN0IG9mIHByb2plY3RzKSB7XG4gICAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHRoaXMuZ2V0UHJvamVjdFRpbWVSZXBvcnQocHJvamVjdC5pZCwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgICAgaWYgKHJlcG9ydCkge1xuICAgICAgICAgIHJlcG9ydHMucHVzaChyZXBvcnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXBvcnRzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGFsbCBwcm9qZWN0cyB0aW1lIHN1bW1hcnk6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2QgdG8gcGFyc2UgSVNPIDg2MDEgZHVyYXRpb24gdG8gaG91cnNcbiAgcHJpdmF0ZSBwYXJzZUR1cmF0aW9uKGR1cmF0aW9uOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IG1hdGNoID0gZHVyYXRpb24ubWF0Y2goL1BUKD86KFxcZCspSCk/KD86KFxcZCspTSk/KD86KFxcZCspUyk/Lyk7XG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIDA7XG4gICAgXG4gICAgY29uc3QgaG91cnMgPSBwYXJzZUludChtYXRjaFsxXSB8fCAnMCcpO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUludChtYXRjaFsyXSB8fCAnMCcpO1xuICAgIGNvbnN0IHNlY29uZHMgPSBwYXJzZUludChtYXRjaFszXSB8fCAnMCcpO1xuICAgIFxuICAgIHJldHVybiBob3VycyArIChtaW51dGVzIC8gNjApICsgKHNlY29uZHMgLyAzNjAwKTtcbiAgfVxuXG4gIC8vIEVuaGFuY2VkIG1ldGhvZCB0byBnZW5lcmF0ZSBtb2NrIHRpbWUgZW50cmllc1xuICBwcml2YXRlIGdldE1vY2tUaW1lRW50cmllcyhwcm9qZWN0SWQ6IHN0cmluZywgc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZyk6IGFueVtdIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBpZDogYG1vY2stJHtwcm9qZWN0SWR9LTFgLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01vY2sgcHJvamVjdCB3b3JrJyxcbiAgICAgICAgdGltZUludGVydmFsOiB7XG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICBlbmQ6IGVuZERhdGUsXG4gICAgICAgICAgZHVyYXRpb246ICdQVDhIME0nXG4gICAgICAgIH0sXG4gICAgICAgIGJpbGxhYmxlOiB0cnVlLFxuICAgICAgICB1c2VySWQ6ICdtb2NrLXVzZXItaWQnLFxuICAgICAgICB1c2VyTmFtZTogJ01vY2sgVXNlcicsXG4gICAgICAgIHByb2plY3RJZDogcHJvamVjdElkLFxuICAgICAgICBwcm9qZWN0TmFtZTogJ01vY2sgUHJvamVjdCdcbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgLy8gRW5oYW5jZWQgbWV0aG9kIHRvIGdlbmVyYXRlIG1vY2sgcHJvamVjdHNcbiAgcHJpdmF0ZSBnZXRNb2NrUHJvamVjdHMoKTogYW55W10ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGlkOiAnbW9jay1wcm9qZWN0LTEnLFxuICAgICAgICBuYW1lOiAnTW9jayBQcm9qZWN0IDEnLFxuICAgICAgICB3b3Jrc3BhY2VJZDogJ21vY2std29ya3NwYWNlJyxcbiAgICAgICAgY2xpZW50SWQ6ICdtb2NrLWNsaWVudC0xJyxcbiAgICAgICAgY2xpZW50TmFtZTogJ01vY2sgQ2xpZW50IDEnLFxuICAgICAgICBpc1B1YmxpYzogdHJ1ZSxcbiAgICAgICAgaXNUZW1wbGF0ZTogZmFsc2UsXG4gICAgICAgIGNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgIGJpbGxhYmxlOiB0cnVlLFxuICAgICAgICBwdWJsaWM6IHRydWUsXG4gICAgICAgIGFyY2hpdmVkOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgICAgYnVkZ2V0OiA1MDAwMCxcbiAgICAgICAgaG91cmx5UmF0ZTogeyBhbW91bnQ6IDE1MCwgY3VycmVuY3k6ICdVU0QnIH1cbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgLy8gRW5oYW5jZWQgbWV0aG9kIHRvIGdlbmVyYXRlIG1vY2sgdXNlclxuICBwcml2YXRlIGdldE1vY2tVc2VyKCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiAnbW9jay11c2VyLWlkJyxcbiAgICAgIGVtYWlsOiAnbW9ja0BleGFtcGxlLmNvbScsXG4gICAgICBuYW1lOiAnTW9jayBVc2VyJyxcbiAgICAgIHByb2ZpbGVQaWN0dXJlOiAnJyxcbiAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICBhY3RpdmVXb3Jrc3BhY2U6ICdtb2NrLXdvcmtzcGFjZScsXG4gICAgICBkZWZhdWx0V29ya3NwYWNlOiAnbW9jay13b3Jrc3BhY2UnXG4gICAgfTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgdGhlIHNlcnZpY2UgaW5zdGFuY2VcbmNvbnN0IGNsb2NraWZ5U2VydmljZSA9IG5ldyBDbG9ja2lmeVNlcnZpY2UoKTtcblxuLy8gRXhwb3J0IHRoZSBzZXJ2aWNlIGluc3RhbmNlIGFzIGJvdGggZGVmYXVsdCBhbmQgbmFtZWQgZXhwb3J0XG5leHBvcnQgZGVmYXVsdCBjbG9ja2lmeVNlcnZpY2U7XG5leHBvcnQgeyBjbG9ja2lmeVNlcnZpY2UgfTtcblxuLy8gRXhwb3J0IGNvbnZlbmllbmNlIGZ1bmN0aW9uc1xuZXhwb3J0IGNvbnN0IGZldGNoQ2xvY2tpZnlQcm9qZWN0cyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgY2xvY2tpZnlTZXJ2aWNlLmdldFByb2plY3RzKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQ2xvY2tpZnkgcHJvamVjdHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQ2xvY2tpZnlUaW1lRW50cmllcyA9IGFzeW5jIChcbiAgcHJvamVjdElkOiBzdHJpbmcsXG4gIHN0YXJ0RGF0ZT86IHN0cmluZyxcbiAgZW5kRGF0ZT86IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRUaW1lRW50cmllcyhwcm9qZWN0SWQsIHN0YXJ0RGF0ZSB8fCAnJywgZW5kRGF0ZSB8fCAnJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQ2xvY2tpZnkgdGltZSBlbnRyaWVzOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaENsb2NraWZ5VGltZVJlcG9ydCA9IGFzeW5jIChcbiAgcHJvamVjdElkOiBzdHJpbmcsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBjbG9ja2lmeVNlcnZpY2UuZ2V0UHJvamVjdFRpbWVSZXBvcnQocHJvamVjdElkLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIENsb2NraWZ5IHRpbWUgcmVwb3J0OicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQWxsQ2xvY2tpZnlUaW1lU3VtbWFyaWVzID0gYXN5bmMgKFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgY2xvY2tpZnlTZXJ2aWNlLmdldEFsbFByb2plY3RzVGltZVN1bW1hcnkoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBDbG9ja2lmeSB0aW1lIHN1bW1hcmllczonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbIkNsb2NraWZ5U2VydmljZSIsImNvbnN0cnVjdG9yIiwiYXBpS2V5Iiwid29ya3NwYWNlSWQiLCJiYXNlVXJsIiwicmVwb3J0c0Jhc2VVcmwiLCJfaXNDb25maWd1cmVkIiwicHJvY2VzcyIsImVudiIsIkNMT0NLSUZZX0FQSV9LRVkiLCJDTE9DS0lGWV9XT1JLU1BBQ0VfSUQiLCJjb25zb2xlIiwiaW5mbyIsIndhcm4iLCJnZXRIZWFkZXJzIiwiRXJyb3IiLCJtYWtlUmVxdWVzdCIsImVuZHBvaW50IiwicGFyYW1zIiwidXJsIiwiVVJMIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJ1bmRlZmluZWQiLCJzZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJsb2ciLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJlcnJvckRldGFpbHMiLCJlcnJvciIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsImNhdGNoIiwiZGF0YSIsImpzb24iLCJtZXNzYWdlIiwiaXNDb25maWd1cmVkIiwiZ2V0Q29uZmlndXJhdGlvblN0YXR1cyIsImNvbmZpZ3VyZWQiLCJoYXNBcGlLZXkiLCJoYXNXb3Jrc3BhY2VJZCIsImdldENvbmZpZ1N0YXR1cyIsInNldFdvcmtzcGFjZUlkIiwiZ2V0VXNlciIsImdldE1vY2tVc2VyIiwiZ2V0V29ya3NwYWNlcyIsImlkIiwibmFtZSIsImhvdXJseVJhdGUiLCJhbW91bnQiLCJjdXJyZW5jeSIsImdldFByb2plY3RzIiwiZ2V0TW9ja1Byb2plY3RzIiwiZ2V0VGltZUVudHJpZXMiLCJwcm9qZWN0SWQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZ2V0TW9ja1RpbWVFbnRyaWVzIiwiZ2V0QWxsVGltZUVudHJpZXMiLCJnZXRUaW1lRW50cmllc1ZpYVJlcG9ydHMiLCJyZXBvcnRzRXJyb3IiLCJyZWFzb24iLCJmYWxsYmFjayIsImdldFRpbWVFbnRyaWVzVmlhVXNlckVuZHBvaW50IiwiZGVzY3JpcHRpb24iLCJ0aW1lSW50ZXJ2YWwiLCJzdGFydCIsImVuZCIsImR1cmF0aW9uIiwiYmlsbGFibGUiLCJ1c2VySWQiLCJ1c2VyTmFtZSIsInByb2plY3ROYW1lIiwiZGF0ZVJhbmdlU3RhcnQiLCJkYXRlUmFuZ2VFbmQiLCJkZXRhaWxlZEZpbHRlciIsInBhZ2VTaXplIiwic29ydENvbHVtbiIsImJvZHkiLCJ0aW1lZW50cmllcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIm1hcCIsImVudHJ5IiwiaW5kZXgiLCJob3VycyIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZXMiLCJlbnRyeUlkIiwiRGF0ZSIsIm5vdyIsImNvbnZlcnRlZER1cmF0aW9uIiwiZW50cnlFcnJvciIsImZpbHRlciIsInVzZXIiLCJzZXQiLCJnZXRVc2VycyIsImVtYWlsIiwiZ2V0UHJvamVjdFRpbWVSZXBvcnQiLCJ0aW1lRW50cmllcyIsInByb2plY3QiLCJ0aGVuIiwicHJvamVjdHMiLCJmaW5kIiwicCIsInRvdGFsSG91cnMiLCJyZWR1Y2UiLCJzdW0iLCJwYXJzZUR1cmF0aW9uIiwiYmlsbGFibGVIb3VycyIsIm5vbkJpbGxhYmxlSG91cnMiLCJ0b3RhbEFtb3VudCIsImJpbGxhYmxlQW1vdW50Iiwibm9uQmlsbGFibGVBbW91bnQiLCJlbnRyaWVzIiwicGVyaW9kIiwiZ2V0QWxsUHJvamVjdHNUaW1lU3VtbWFyeSIsInJlcG9ydHMiLCJyZXBvcnQiLCJwdXNoIiwibWF0Y2giLCJwYXJzZUludCIsInNlY29uZHMiLCJjbGllbnRJZCIsImNsaWVudE5hbWUiLCJpc1B1YmxpYyIsImlzVGVtcGxhdGUiLCJjb2xvciIsInB1YmxpYyIsImFyY2hpdmVkIiwiYnVkZ2V0IiwicHJvZmlsZVBpY3R1cmUiLCJhY3RpdmVXb3Jrc3BhY2UiLCJkZWZhdWx0V29ya3NwYWNlIiwiY2xvY2tpZnlTZXJ2aWNlIiwiZmV0Y2hDbG9ja2lmeVByb2plY3RzIiwiZmV0Y2hDbG9ja2lmeVRpbWVFbnRyaWVzIiwiZmV0Y2hDbG9ja2lmeVRpbWVSZXBvcnQiLCJmZXRjaEFsbENsb2NraWZ5VGltZVN1bW1hcmllcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/clockify.ts\n");

/***/ }),

/***/ "(rsc)/./lib/zoho.ts":
/*!*********************!*\
  !*** ./lib/zoho.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchInvoices: () => (/* binding */ fetchInvoices),\n/* harmony export */   fetchProjects: () => (/* binding */ fetchProjects),\n/* harmony export */   zohoService: () => (/* binding */ zohoService)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\nclass ZohoService {\n    constructor(){\n        this.accessToken = null;\n        this.tokenExpiry = 0;\n        this.refreshPromise = null;\n        this.TOKEN_REFRESH_BUFFER = 5 * 60 * 1000 // 5 minutes buffer\n        ;\n        this.autoRefreshTimer = null;\n        this.AUTO_REFRESH_INTERVAL = 45 * 60 * 1000 // 45 minutes\n        ;\n        this.lastRefreshTime = 0 // Track when auto-refresh was last triggered\n        ;\n        this.ACCOUNTS_BASE = process.env.ZOHO_ACCOUNTS_BASE || \"https://accounts.zoho.com\";\n        this.API_BASE = process.env.ZOHO_API_BASE || \"https://www.zohoapis.com\";\n        this.organizationValidated = false;\n        // Rate limiting properties\n        this.requestCount = 0;\n        this.lastRequestTime = 0;\n        this.MAX_REQUESTS_PER_MINUTE = 80 // Conservative limit (Zoho allows 100, we use 80)\n        ;\n        this.MIN_REQUEST_INTERVAL = 3000 // 3 seconds between requests (was 2)\n        ;\n        this.retryCount = 0;\n        this.MAX_RETRIES = 3;\n        this.BASE_DELAY = 2000 // 2 seconds base delay for exponential backoff (was 1)\n        ;\n        // Start automatic token refresh\n        this._startAutoRefresh();\n        console.log(`Zoho API base: ${this.API_BASE} | Accounts base: ${this.ACCOUNTS_BASE}`);\n    }\n    _startAutoRefresh() {\n        // Clear any existing timer\n        if (this.autoRefreshTimer) {\n            clearInterval(this.autoRefreshTimer);\n        }\n        // Set up automatic refresh every 45 minutes\n        this.autoRefreshTimer = setInterval(async ()=>{\n            try {\n                console.log(\"Auto-refreshing Zoho token (45-minute interval)...\");\n                this.lastRefreshTime = Date.now(); // Track when refresh was triggered\n                await this.forceRefreshToken();\n                console.log(\"Auto-refresh completed successfully\");\n            } catch (error) {\n                console.error(\"Auto-refresh failed:\", error);\n            }\n        }, this.AUTO_REFRESH_INTERVAL);\n        // Set initial refresh time\n        this.lastRefreshTime = Date.now();\n        console.log(\"Automatic Zoho token refresh started (every 45 minutes)\");\n    }\n    _stopAutoRefresh() {\n        if (this.autoRefreshTimer) {\n            clearInterval(this.autoRefreshTimer);\n            this.autoRefreshTimer = null;\n            console.log(\"Automatic Zoho token refresh stopped\");\n        }\n    }\n    async getAccessToken() {\n        try {\n            // Check if we have a valid token\n            if (this.accessToken && Date.now() < this.tokenExpiry) {\n                console.log(\"Using existing valid token\");\n                return this.accessToken;\n            }\n            console.log(\"Token expired or missing, refreshing...\");\n            // Clear any existing token\n            this.accessToken = null;\n            this.tokenExpiry = 0;\n            if (!process.env.ZOHO_CLIENT_ID || !process.env.ZOHO_CLIENT_SECRET || !process.env.ZOHO_REFRESH_TOKEN) {\n                const missingVars = [];\n                if (!process.env.ZOHO_CLIENT_ID) missingVars.push(\"ZOHO_CLIENT_ID\");\n                if (!process.env.ZOHO_CLIENT_SECRET) missingVars.push(\"ZOHO_CLIENT_SECRET\");\n                if (!process.env.ZOHO_REFRESH_TOKEN) missingVars.push(\"ZOHO_REFRESH_TOKEN\");\n                throw new Error(`Missing required Zoho environment variables: ${missingVars.join(\", \")}`);\n            }\n            // Ensure only one refresh happens at a time across concurrent requests\n            if (!this.refreshPromise) {\n                this.refreshPromise = this._performTokenRefreshWithBackoff();\n            }\n            const token = await this.refreshPromise;\n            // Clear the in-flight promise after completion\n            this.refreshPromise = null;\n            return token;\n        } catch (error) {\n            console.error(\"Error refreshing Zoho access token:\", error);\n            // Log specific error details for debugging\n            if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error)) {\n                console.error(\"Axios error details:\", {\n                    status: error.response?.status,\n                    statusText: error.response?.statusText,\n                    data: error.response?.data,\n                    message: error.message\n                });\n            }\n            throw new Error(`Failed to authenticate with Zoho: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n        }\n    }\n    // Perform the token refresh with form-encoded body and simple backoff if rate-limited\n    async _performTokenRefreshWithBackoff() {\n        const maxAttempts = 3;\n        for(let attempt = 1; attempt <= maxAttempts; attempt++){\n            try {\n                const formData = new URLSearchParams();\n                formData.append(\"refresh_token\", process.env.ZOHO_REFRESH_TOKEN || \"\");\n                formData.append(\"client_id\", process.env.ZOHO_CLIENT_ID || \"\");\n                formData.append(\"client_secret\", process.env.ZOHO_CLIENT_SECRET || \"\");\n                formData.append(\"grant_type\", \"refresh_token\");\n                const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ACCOUNTS_BASE}/oauth/v2/token`, formData, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\"\n                    },\n                    timeout: 15000\n                });\n                if (!response.data.access_token) {\n                    throw new Error(\"No access token received from Zoho\");\n                }\n                this.accessToken = response.data.access_token;\n                this.tokenExpiry = Date.now() + response.data.expires_in * 1000;\n                this.lastRefreshTime = Date.now();\n                console.log(`Token refreshed successfully. Expires in ${Math.round(response.data.expires_in / 60)} minutes`);\n                console.log(\"Zoho token refresh response:\", response.data);\n                // Validate scopes on refreshed token\n                try {\n                    const scopeInfo = await this.checkTokenScopes(this.accessToken);\n                    console.log(\"Zoho granted scopes:\", scopeInfo?.scope || \"unknown\");\n                    if (typeof scopeInfo?.scope === \"string\" && !scopeInfo.scope.includes(\"ZohoBooks.reports.READ\")) {\n                        console.warn(\"⚠️ Missing ZohoBooks.reports.READ scope. Regenerate token.\");\n                    }\n                } catch (scopeErr) {\n                    console.error(\"Zoho token scope verification failed:\", scopeErr?.message);\n                }\n                return this.accessToken;\n            } catch (err) {\n                // If rate-limited by Zoho during token refresh, back off and retry\n                const isAxios = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(err);\n                const status = isAxios ? err.response?.status : undefined;\n                const description = isAxios ? err.response?.data?.error_description : undefined;\n                if (status === 400 && typeof description === \"string\" && description.toLowerCase().includes(\"too many requests\")) {\n                    const delayMs = 2000 * attempt * attempt + Math.floor(Math.random() * 500);\n                    console.warn(`Zoho token refresh rate-limited (attempt ${attempt}/${maxAttempts}). Waiting ${delayMs}ms before retry.`);\n                    await new Promise((resolve)=>setTimeout(resolve, delayMs));\n                    continue;\n                }\n                // For other errors, do not retry endlessly\n                throw err;\n            }\n        }\n        throw new Error(\"Zoho token refresh failed after maximum retries\");\n    }\n    async refreshAccessToken() {\n        try {\n            console.log(\"Refreshing Zoho access token...\");\n            // Create form data for the request\n            const formData = new URLSearchParams();\n            formData.append(\"refresh_token\", process.env.ZOHO_REFRESH_TOKEN || \"\");\n            formData.append(\"client_id\", process.env.ZOHO_CLIENT_ID || \"\");\n            formData.append(\"client_secret\", process.env.ZOHO_CLIENT_SECRET || \"\");\n            formData.append(\"grant_type\", \"refresh_token\");\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`${this.ACCOUNTS_BASE}/oauth/v2/token`, formData, {\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            });\n            this.accessToken = response.data.access_token;\n            this.tokenExpiry = Date.now() + response.data.expires_in * 1000;\n            console.log(`Token refreshed successfully. Expires in ${Math.round(response.data.expires_in / 60)} minutes`);\n            return this.accessToken;\n        } catch (error) {\n            console.error(\"Error refreshing Zoho access token:\", error);\n            throw new Error(\"Failed to authenticate with Zoho\");\n        }\n    }\n    async makeRequest(endpoint) {\n        try {\n            // Apply rate limiting\n            await this.applyRateLimit();\n            const token = await this.getAccessToken();\n            // Validate token before making request\n            if (!token || token === \"undefined\") {\n                throw new Error(\"Invalid or missing access token\");\n            }\n            // Validate organization before hitting reports endpoints\n            if (!this.organizationValidated && endpoint.startsWith(\"reports/\")) {\n                await this.validateOrganization(token);\n            }\n            console.info(`Making Zoho API request to: ${endpoint}`);\n            console.info(`Token (first 10 chars): ${token?.substring(0, 10) ?? \"N/A\"}...`);\n            // Create AbortController for timeout\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 15000); // 15 second timeout\n            try {\n                const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.API_BASE}/books/v3/${endpoint}`, {\n                    headers: {\n                        \"Authorization\": `Bearer ${token}`,\n                        \"Content-Type\": \"application/json\"\n                    },\n                    params: {\n                        organization_id: process.env.ZOHO_ORGANIZATION_ID\n                    },\n                    timeout: 15000,\n                    signal: controller.signal\n                });\n                clearTimeout(timeoutId);\n                // Reset retry count on success\n                this.retryCount = 0;\n                this.requestCount++;\n                this.lastRequestTime = Date.now();\n                console.info(`Zoho API request successful: ${endpoint}`);\n                return response.data;\n            } catch (axiosError) {\n                clearTimeout(timeoutId);\n                // Handle timeout specifically\n                if (axiosError.code === \"ECONNABORTED\" || axiosError.message?.includes(\"timeout\")) {\n                    throw new Error(`Zoho API request timed out for ${endpoint}`);\n                }\n                throw axiosError;\n            }\n        } catch (error) {\n            // Handle rate limiting (400 with specific error message)\n            if (error.response?.status === 400 && error.response?.data?.error_description?.includes(\"too many requests\")) {\n                console.warn(\"Zoho rate limit hit, implementing exponential backoff...\");\n                await this.handleRateLimit();\n                // Retry the request after backoff\n                if (this.retryCount < this.MAX_RETRIES) {\n                    this.retryCount++;\n                    console.info(`Retrying request after rate limit backoff (attempt ${this.retryCount})`);\n                    return this.makeRequest(endpoint);\n                } else {\n                    throw new Error(\"Zoho API rate limit exceeded after maximum retries. Please try again later.\");\n                }\n            }\n            // Handle 429 Too Many Requests (explicit rate limit)\n            if (error.response?.status === 429) {\n                console.warn(\"Zoho 429 rate limit hit, implementing exponential backoff...\");\n                await this.handleRateLimit();\n                // Retry the request after backoff\n                if (this.retryCount < this.MAX_RETRIES) {\n                    this.retryCount++;\n                    console.info(`Retrying request after 429 backoff (attempt ${this.retryCount})`);\n                    return this.makeRequest(endpoint);\n                } else {\n                    throw new Error(\"Zoho API rate limit exceeded after maximum retries. Please try again later.\");\n                }\n            }\n            // If we get a 401, try refreshing the token once\n            if (error.response?.status === 401) {\n                if (error.response?.data?.code === 57) {\n                    console.error(\"Zoho API authorization error (code 57). Likely missing required scopes such as ZohoBooks.reports.READ.\");\n                }\n                console.info(\"Token expired, refreshing...\");\n                // Clear the current token and force a refresh\n                this.accessToken = null;\n                this.tokenExpiry = 0;\n                try {\n                    const newToken = await this.forceRefreshToken();\n                    // Validate the new token\n                    if (!newToken || newToken === \"undefined\") {\n                        throw new Error(\"Failed to obtain valid token after refresh\");\n                    }\n                    console.info(`Retrying request with new token: ${endpoint}`);\n                    // Retry the request with the new token\n                    const retryResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`${this.API_BASE}/books/v3/${endpoint}`, {\n                        headers: {\n                            \"Authorization\": `Bearer ${newToken}`,\n                            \"Content-Type\": \"application/json\"\n                        },\n                        params: {\n                            organization_id: process.env.ZOHO_ORGANIZATION_ID\n                        },\n                        timeout: 15000\n                    });\n                    console.info(\"Request retry successful after token refresh\");\n                    return retryResponse.data;\n                } catch (refreshError) {\n                    console.error(\"Failed to refresh token or retry request:\", refreshError);\n                    // Log detailed refresh error information\n                    if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(refreshError)) {\n                        console.error(\"Token refresh Axios error details:\", {\n                            status: refreshError.response?.status,\n                            statusText: refreshError.response?.statusText,\n                            data: refreshError.response?.data,\n                            message: refreshError.message,\n                            endpoint: endpoint\n                        });\n                    }\n                    // Check if it's a rate limiting issue during token refresh\n                    if (refreshError.response?.status === 400 && refreshError.response?.data?.error_description?.includes(\"too many requests\")) {\n                        throw new Error(`Zoho token refresh rate limited: ${endpoint}. Please wait before retrying.`);\n                    }\n                    // Check if it's an authentication issue during token refresh\n                    if (refreshError.response?.status === 400 && refreshError.response?.data?.error_description?.includes(\"invalid\")) {\n                        throw new Error(`Zoho token refresh failed - invalid credentials: ${endpoint}. Check your OAuth configuration.`);\n                    }\n                    throw new Error(`Zoho API authentication failed after token refresh: ${endpoint}. Error: ${refreshError.message}`);\n                }\n            }\n            // Log the error details for debugging\n            console.error(`Zoho API request failed for ${endpoint}:`, {\n                status: error.response?.status,\n                statusText: error.response?.statusText,\n                data: error.response?.data,\n                message: error.message\n            });\n            if (error.response?.data?.code === 57) {\n                console.error(\"Zoho API authorization error (code 57). Verify organization_id and OAuth scopes (ZohoBooks.reports.READ).\");\n            }\n            throw error;\n        }\n    }\n    // Check granted scopes for current access token\n    async checkTokenScopes(token) {\n        try {\n            const url = `${this.ACCOUNTS_BASE}/oauth/v2/tokeninfo?token=${encodeURIComponent(token)}`;\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n                timeout: 10000\n            });\n            return res.data;\n        } catch (err) {\n            // Surface concise context but do not fail the main flow\n            const msg = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(err) ? err.response?.data || err.message : String(err);\n            throw new Error(typeof msg === \"string\" ? msg : JSON.stringify(msg));\n        }\n    }\n    // Validate the configured organization ID by calling organizations endpoint\n    async validateOrganization(token) {\n        try {\n            const orgId = process.env.ZOHO_ORGANIZATION_ID;\n            if (!orgId) {\n                console.warn(\"ZOHO_ORGANIZATION_ID not set. Reports calls may fail.\");\n                return;\n            }\n            const url = `${this.API_BASE}/books/v3/organizations`;\n            const res = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(url, {\n                headers: {\n                    \"Authorization\": `Bearer ${token}`,\n                    \"Content-Type\": \"application/json\"\n                },\n                timeout: 15000\n            });\n            const orgs = res.data?.organizations || [];\n            const found = orgs.some((o)=>String(o.organization_id) === String(orgId));\n            if (!found) {\n                console.error(`Provided organization_id=${orgId} not found in Zoho account. Fetched organizations: ${JSON.stringify(orgs)}`);\n            } else {\n                this.organizationValidated = true;\n                console.log(`Validated Zoho organization_id=${orgId}`);\n            }\n        } catch (err) {\n            const status = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(err) ? err.response?.status : undefined;\n            const data = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(err) ? err.response?.data : undefined;\n            console.error(\"Failed to validate Zoho organization:\", {\n                status,\n                data,\n                message: err.message\n            });\n        // Do not throw; allow request to proceed but logs will help diagnose\n        }\n    }\n    async applyRateLimit() {\n        const now = Date.now();\n        // Check if we need to wait between requests\n        if (this.lastRequestTime > 0) {\n            const timeSinceLastRequest = now - this.lastRequestTime;\n            if (timeSinceLastRequest < this.MIN_REQUEST_INTERVAL) {\n                const waitTime = this.MIN_REQUEST_INTERVAL - timeSinceLastRequest;\n                console.info(`Rate limiting: waiting ${waitTime}ms before next request`);\n                await new Promise((resolve)=>setTimeout(resolve, waitTime));\n            }\n        }\n        // Check if we've exceeded the per-minute limit\n        if (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n            const timeSinceFirstRequest = now - this.lastRequestTime;\n            if (timeSinceFirstRequest < 60000) {\n                const waitTime = 60000 - timeSinceFirstRequest;\n                console.warn(`Rate limiting: exceeded ${this.MAX_REQUESTS_PER_MINUTE} requests per minute, waiting ${waitTime}ms`);\n                await new Promise((resolve)=>setTimeout(resolve, waitTime));\n                this.requestCount = 0;\n            } else {\n                // Reset counter if more than 1 minute has passed\n                this.requestCount = 0;\n            }\n        }\n    }\n    async handleRateLimit() {\n        const delay = this.BASE_DELAY * Math.pow(2, this.retryCount);\n        const jitter = Math.random() * 1000; // Add up to 1 second of jitter\n        const totalDelay = delay + jitter;\n        console.warn(`Rate limit backoff: waiting ${totalDelay}ms before retry (attempt ${this.retryCount + 1})`);\n        await new Promise((resolve)=>setTimeout(resolve, totalDelay));\n        // Reset request counters to allow fresh start\n        this.requestCount = 0;\n        this.lastRequestTime = 0;\n    }\n    async getProjects() {\n        try {\n            let allProjects = [];\n            let page = 1;\n            const perPage = 200;\n            while(true){\n                const data = await this.makeRequest(`projects?page=${page}&per_page=${perPage}`);\n                const projects = data.projects?.map((project)=>{\n                    // Log the first project to see available fields\n                    if (page === 1 && allProjects.length === 0) {\n                        console.log(\"Sample Zoho project data:\", JSON.stringify(project, null, 2));\n                    }\n                    return {\n                        project_id: project.project_id,\n                        project_name: project.project_name || project.name || \"\",\n                        description: project.description || \"\",\n                        status: project.status || \"active\",\n                        start_date: project.start_date || \"\",\n                        end_date: project.end_date || \"\",\n                        budget_amount: project.budget_amount || 0,\n                        rate_per_hour: project.rate_per_hour || 0,\n                        customer_id: project.customer_id || \"\",\n                        customer_name: project.customer_name || \"\",\n                        signed_fee: undefined\n                    };\n                }) || [];\n                allProjects = allProjects.concat(projects);\n                // Check if we've reached the end\n                if (projects.length < perPage) {\n                    break;\n                }\n                page++;\n            }\n            console.log(`Fetched ${allProjects.length} projects from Zoho`);\n            return allProjects;\n        } catch (error) {\n            console.error(\"Error fetching projects:\", error);\n            return [];\n        }\n    }\n    async getProjectsWithRevenueBudget() {\n        try {\n            console.log(\"Fetching projects with revenue budget data...\");\n            const projects = await this.getProjects();\n            // Log projects that have revenue_budget data\n            const projectsWithRevenueBudget = projects.filter((project)=>{\n                const hasRevenueBudget = project.signed_fee && project.signed_fee > 0;\n                if (hasRevenueBudget) {\n                    console.log(`Project ${project.project_name} has revenue budget: $${project.signed_fee}`);\n                }\n                return hasRevenueBudget;\n            });\n            console.log(`Found ${projectsWithRevenueBudget.length} projects with revenue budget data`);\n            return projects;\n        } catch (error) {\n            console.error(\"Error fetching projects with revenue budget:\", error);\n            return [];\n        }\n    }\n    async debugProjectFields() {\n        try {\n            console.log(\"Debugging Zoho project fields...\");\n            const data = await this.makeRequest(\"projects?page=1&per_page=5\");\n            if (data.projects && data.projects.length > 0) {\n                console.log(\"Available fields in Zoho project response:\");\n                const sampleProject = data.projects[0];\n                Object.keys(sampleProject).forEach((key)=>{\n                    console.log(`  ${key}: ${sampleProject[key]} (${typeof sampleProject[key]})`);\n                });\n                // Check specifically for revenue_budget\n                if (sampleProject.revenue_budget !== undefined) {\n                    console.log(`✅ Found revenue_budget field: ${sampleProject.revenue_budget}`);\n                } else {\n                    console.log(\"❌ revenue_budget field not found in Zoho response\");\n                    console.log(\"Available budget-related fields:\");\n                    Object.keys(sampleProject).forEach((key)=>{\n                        if (key.toLowerCase().includes(\"budget\") || key.toLowerCase().includes(\"revenue\")) {\n                            console.log(`  ${key}: ${sampleProject[key]}`);\n                        }\n                    });\n                }\n            } else {\n                console.log(\"No projects found in Zoho response\");\n            }\n        } catch (error) {\n            console.error(\"Error debugging project fields:\", error);\n        }\n    }\n    async getProjectsWithEstimates() {\n        try {\n            const projects = await this.getProjects();\n            // For the first few projects, try to get estimates to see if that contains the signed fee\n            const projectsWithEstimates = await Promise.all(projects.slice(0, 5).map(async (project)=>{\n                try {\n                    const estimates = await this.getProjectEstimates(project.project_id);\n                    const totalEstimateAmount = estimates.reduce((sum, estimate)=>sum + (estimate.total || 0), 0);\n                    console.log(`Project ${project.project_name} estimates:`, estimates.length, \"total amount:\", totalEstimateAmount);\n                    return {\n                        ...project,\n                        signed_fee: project.signed_fee || totalEstimateAmount || 0\n                    };\n                } catch (error) {\n                    console.error(`Error fetching estimates for project ${project.project_id}:`, error);\n                    return project;\n                }\n            }));\n            // Return all projects, with the first 5 having updated signed fees from estimates\n            return [\n                ...projectsWithEstimates,\n                ...projects.slice(5)\n            ];\n        } catch (error) {\n            console.error(\"Error fetching projects with estimates:\", error);\n            return [];\n        }\n    }\n    async getProjectsWithInvoiceTotals() {\n        try {\n            const [projects, invoices] = await Promise.all([\n                this.getProjects(),\n                this.getInvoices()\n            ]);\n            // Calculate signed fee as total of all invoices for each project\n            const projectsWithInvoiceTotals = projects.map((project)=>{\n                const projectInvoices = invoices.filter((invoice)=>invoice.project_id === project.project_id);\n                const totalInvoiceAmount = projectInvoices.reduce((sum, invoice)=>sum + invoice.amount, 0);\n                console.log(`Project ${project.project_name} invoices:`, projectInvoices.length, \"total amount:\", totalInvoiceAmount);\n                return {\n                    ...project,\n                    signed_fee: project.signed_fee || totalInvoiceAmount || 0\n                };\n            });\n            return projectsWithInvoiceTotals;\n        } catch (error) {\n            console.error(\"Error fetching projects with invoice totals:\", error);\n            return [];\n        }\n    }\n    async getInvoices() {\n        try {\n            const data = await this.makeRequest(\"invoices\");\n            return data.invoices?.map((invoice)=>({\n                    invoice_id: invoice.invoice_id,\n                    project_id: invoice.project_id,\n                    invoice_number: invoice.invoice_number,\n                    date: invoice.date,\n                    amount: invoice.total,\n                    status: invoice.status,\n                    billed_amount: invoice.billed_amount || 0,\n                    unbilled_amount: invoice.unbilled_amount || 0\n                })) || [];\n        } catch (error) {\n            console.error(\"Error fetching invoices:\", error);\n            return [];\n        }\n    }\n    async getProjectInvoices(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}/invoices`);\n            return data.invoices?.map((invoice)=>({\n                    invoice_id: invoice.invoice_id,\n                    project_id: invoice.project_id,\n                    invoice_number: invoice.invoice_number,\n                    date: invoice.date,\n                    amount: invoice.total,\n                    status: invoice.status,\n                    billed_amount: invoice.billed_amount || 0,\n                    unbilled_amount: invoice.unbilled_amount || 0\n                })) || [];\n        } catch (error) {\n            console.error(\"Error fetching project invoices:\", error);\n            return [];\n        }\n    }\n    async getProjectDetails(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}`);\n            console.log(`Project ${projectId} details:`, JSON.stringify(data, null, 2));\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching project details:\", error);\n            return null;\n        }\n    }\n    async getProjectEstimates(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}/estimates`);\n            console.log(`Project ${projectId} estimates:`, JSON.stringify(data, null, 2));\n            return data.estimates || [];\n        } catch (error) {\n            console.error(\"Error fetching project estimates:\", error);\n            return [];\n        }\n    }\n    async getProjectContracts(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}/contracts`);\n            console.log(`Project ${projectId} contracts:`, JSON.stringify(data, null, 2));\n            return data.contracts || [];\n        } catch (error) {\n            console.error(\"Error fetching project contracts:\", error);\n            return [];\n        }\n    }\n    // New method to get Profit & Loss statement\n    async getProfitAndLoss(startDate, endDate) {\n        try {\n            console.info(`📊 Fetching Zoho Profit & Loss for ${startDate} to ${endDate}`);\n            const data = await this.makeRequest(`reports/profitandloss?from_date=${startDate}&to_date=${endDate}`);\n            const sizeBytes = JSON.stringify(data || {}).length;\n            const keys = Object.keys(data || {}).length;\n            console.info(`✅ Profit & Loss data fetched successfully (keys: ${keys}, bytes: ${sizeBytes})`);\n            if (!data || keys === 0) {\n                console.warn(\"No data for reports/profitandloss. Verify organization ID, date range (2025-01-01 to 2025-08-13), or data in Zoho dashboard.\");\n            }\n            return data;\n        } catch (error) {\n            console.error(\"❌ Error fetching Profit & Loss:\", error);\n            console.warn(\"\\uD83C\\uDFAD Profit & Loss data unavailable, will use defaults\");\n            return null;\n        }\n    }\n    // New method to get Cash Flow statement\n    async getCashFlow(startDate, endDate) {\n        try {\n            console.info(`💰 Fetching Zoho Cash Flow for ${startDate} to ${endDate}`);\n            const data = await this.makeRequest(`reports/cashflow?from_date=${startDate}&to_date=${endDate}`);\n            const sizeBytes = JSON.stringify(data || {}).length;\n            const keys = Object.keys(data || {}).length;\n            console.info(`✅ Cash Flow data fetched successfully (keys: ${keys}, bytes: ${sizeBytes})`);\n            if (!data || keys === 0) {\n                console.warn(\"No data for reports/cashflow. Verify organization ID, date range (2025-01-01 to 2025-08-13), or data in Zoho dashboard.\");\n            }\n            return data;\n        } catch (error) {\n            console.error(\"❌ Error fetching Cash Flow:\", error);\n            console.warn(\"\\uD83C\\uDFAD Cash Flow data unavailable, will use defaults\");\n            return null;\n        }\n    }\n    // New method to get Balance Sheet\n    async getBalanceSheet(date) {\n        try {\n            console.info(`📈 Fetching Zoho Balance Sheet for ${date}`);\n            const data = await this.makeRequest(`reports/balancesheet?date=${date}`);\n            const sizeBytes = JSON.stringify(data || {}).length;\n            const keys = Object.keys(data || {}).length;\n            console.info(`✅ Balance Sheet data fetched successfully (keys: ${keys}, bytes: ${sizeBytes})`);\n            if (!data || keys === 0) {\n                console.warn(\"No data for reports/balancesheet. Verify organization ID, date range (2025-01-01 to 2025-08-13), or data in Zoho dashboard.\");\n            }\n            return data;\n        } catch (error) {\n            console.error(\"❌ Error fetching Balance Sheet:\", error);\n            console.warn(\"\\uD83C\\uDFAD Balance Sheet data unavailable, will use defaults\");\n            return null;\n        }\n    }\n    // New method to get Chart of Accounts\n    async getChartOfAccounts() {\n        try {\n            const data = await this.makeRequest(\"chartofaccounts\");\n            console.log(\"Chart of Accounts data:\", JSON.stringify(data, null, 2));\n            return data.chartofaccounts || [];\n        } catch (error) {\n            console.error(\"Error fetching Chart of Accounts:\", error);\n            return [];\n        }\n    }\n    // New method to get Journal Entries for a date range\n    async getJournalEntries(startDate, endDate) {\n        try {\n            const data = await this.makeRequest(`journalentries?from_date=${startDate}&to_date=${endDate}`);\n            console.log(\"Journal Entries data:\", JSON.stringify(data, null, 2));\n            return data.journalentries || [];\n        } catch (error) {\n            console.error(\"Error fetching Journal Entries:\", error);\n            return [];\n        }\n    }\n    // New method to get comprehensive financial metrics\n    async getFinancialMetrics(startDate, endDate) {\n        try {\n            console.info(`💰 Fetching Zoho financial metrics for ${startDate} to ${endDate}`);\n            const [plData, cfData, bsData] = await Promise.allSettled([\n                this.getProfitAndLoss(startDate, endDate),\n                this.getCashFlow(startDate, endDate),\n                this.getBalanceSheet(endDate)\n            ]);\n            // Log raw response status and body length for each report\n            console.info(\"\\uD83D\\uDCCA Raw response details for financial reports:\");\n            if (plData.status === \"fulfilled\") {\n                const plBodyLength = JSON.stringify(plData.value || {}).length;\n                console.info(`  Profit & Loss: ✅ SUCCESS, body length: ${plBodyLength} bytes`);\n            } else {\n                console.error(`  Profit & Loss: ❌ FAILED, error: ${plData.reason}`);\n                if (plData.reason?.response?.status === 404) {\n                    console.error(\"  Invalid endpoint - check Zoho API docs for reports/profitandloss\");\n                }\n            }\n            if (cfData.status === \"fulfilled\") {\n                const cfBodyLength = JSON.stringify(cfData.value || {}).length;\n                console.info(`  Cash Flow: ✅ SUCCESS, body length: ${cfBodyLength} bytes`);\n            } else {\n                console.error(`  Cash Flow: ❌ FAILED, error: ${cfData.reason}`);\n                if (cfData.reason?.response?.status === 404) {\n                    console.error(\"  Invalid endpoint - check Zoho API docs for reports/cashflow\");\n                }\n            }\n            if (bsData.status === \"fulfilled\") {\n                const bsBodyLength = JSON.stringify(bsData.value || {}).length;\n                console.info(`  Balance Sheet: ✅ SUCCESS, body length: ${bsBodyLength} bytes`);\n            } else {\n                console.error(`  Balance Sheet: ❌ FAILED, error: ${bsData.reason}`);\n                if (bsData.reason?.response?.status === 404) {\n                    console.error(\"  Invalid endpoint - check Zoho API docs for reports/balancesheet\");\n                }\n            }\n            // Extract financial metrics from the responses with fallbacks\n            const revenue = plData.status === \"fulfilled\" ? plData.value?.revenue?.total || 0 : 0;\n            const expenses = plData.status === \"fulfilled\" ? plData.value?.expenses?.total || 0 : 0;\n            const grossProfit = revenue - expenses;\n            // Calculate net profit (may need adjustment based on actual Zoho response structure)\n            const operatingExpenses = plData.status === \"fulfilled\" ? plData.value?.operating_expenses?.total || 0 : 0;\n            const netProfit = grossProfit - operatingExpenses;\n            const operatingIncome = grossProfit - operatingExpenses;\n            // Extract cash flow data\n            const cashFlow = cfData.status === \"fulfilled\" ? cfData.value?.net_cash_flow || 0 : 0;\n            const accountsReceivable = bsData.status === \"fulfilled\" ? bsData.value?.current_assets?.accounts_receivable || 0 : 0;\n            const accountsPayable = bsData.status === \"fulfilled\" ? bsData.value?.current_liabilities?.accounts_payable || 0 : 0;\n            const cashBalance = bsData.status === \"fulfilled\" ? bsData.value?.current_assets?.cash_and_bank || 0 : 0;\n            // Log which data sources succeeded/failed\n            console.info(\"\\uD83D\\uDCCA Financial metrics data sources:\", {\n                profitLoss: plData.status === \"fulfilled\" ? \"✅\" : \"❌\",\n                cashFlow: cfData.status === \"fulfilled\" ? \"✅\" : \"❌\",\n                balanceSheet: bsData.status === \"fulfilled\" ? \"✅\" : \"❌\"\n            });\n            if (plData.status === \"rejected\") {\n                console.warn(\"⚠️ Profit & Loss data failed:\", plData.reason);\n            }\n            if (cfData.status === \"rejected\") {\n                console.warn(\"⚠️ Cash Flow data failed:\", cfData.reason);\n            }\n            if (bsData.status === \"rejected\") {\n                console.warn(\"⚠️ Balance Sheet data failed:\", bsData.reason);\n            }\n            return {\n                revenue,\n                expenses,\n                grossProfit,\n                netProfit,\n                operatingIncome,\n                cashFlow,\n                accountsReceivable,\n                accountsPayable,\n                cashBalance\n            };\n        } catch (error) {\n            console.error(\"❌ Error fetching financial metrics:\", error);\n            console.warn(\"\\uD83C\\uDFAD Returning default financial metrics due to API failure\");\n            // Return default values if API calls fail\n            return {\n                revenue: 0,\n                expenses: 0,\n                grossProfit: 0,\n                netProfit: 0,\n                operatingIncome: 0,\n                cashFlow: 0,\n                accountsReceivable: 0,\n                accountsPayable: 0,\n                cashBalance: 0\n            };\n        }\n    }\n    // Method to manually refresh token (for testing)\n    async forceRefreshToken() {\n        this.accessToken = null;\n        this.tokenExpiry = 0;\n        this.lastRefreshTime = Date.now(); // Track manual refresh time\n        return await this.getAccessToken();\n    }\n    // Get token status for debugging\n    getTokenStatus() {\n        const now = Date.now();\n        return {\n            hasToken: !!this.accessToken,\n            expiresIn: this.tokenExpiry - now,\n            isExpired: now >= this.tokenExpiry\n        };\n    }\n    // Method to get auto-refresh status\n    getAutoRefreshStatus() {\n        const now = Date.now();\n        const timeSinceLastRefresh = now - this.lastRefreshTime;\n        const nextRefreshIn = Math.max(0, this.AUTO_REFRESH_INTERVAL - timeSinceLastRefresh);\n        return {\n            isActive: !!this.autoRefreshTimer,\n            nextRefreshIn\n        };\n    }\n    // Public method to start auto-refresh\n    enableAutoRefresh() {\n        this._startAutoRefresh();\n    }\n    // Public method to stop auto-refresh\n    disableAutoRefresh() {\n        this._stopAutoRefresh();\n    }\n    // Public method to get comprehensive status\n    getStatus() {\n        return {\n            ...this.getTokenStatus(),\n            autoRefresh: this.getAutoRefreshStatus()\n        };\n    }\n}\nconst zohoService = new ZohoService();\n// Export the functions that are being imported in page.tsx\nconst fetchProjects = async ()=>{\n    try {\n        console.log(\"Client: Fetching projects from API\");\n        const response = await fetch(\"/api/projects\");\n        const result = await response.json();\n        if (result.success) {\n            console.log(\"Client: Successfully fetched\", result.count, \"projects\");\n            return result.data;\n        } else {\n            console.error(\"Client: API returned error:\", result.error);\n            throw new Error(result.error);\n        }\n    } catch (error) {\n        console.error(\"Client: Error fetching projects:\", error);\n        throw error;\n    }\n};\nconst fetchInvoices = async ()=>{\n    try {\n        console.log(\"Client: Fetching invoices from API\");\n        const response = await fetch(\"/api/invoices\");\n        const result = await response.json();\n        if (result.success) {\n            console.log(\"Client: Successfully fetched\", result.count, \"invoices\");\n            return result.data;\n        } else {\n            console.error(\"Client: API returned error:\", result.error);\n            throw new Error(result.error);\n        }\n    } catch (error) {\n        console.error(\"Client: Error fetching invoices:\", error);\n        throw error;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1rTixnQkFBZ0I7SUFDM0IsSUFBSTtRQUNGek4sUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTW9CLFdBQVcsTUFBTStMLE1BQU07UUFDN0IsTUFBTUMsU0FBUyxNQUFNaE0sU0FBU2lNLElBQUk7UUFFbEMsSUFBSUQsT0FBT0UsT0FBTyxFQUFFO1lBQ2xCdk4sUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ29OLE9BQU9HLEtBQUssRUFBRTtZQUMxRCxPQUFPSCxPQUFPOUwsSUFBSTtRQUNwQixPQUFPO1lBQ0x2QixRQUFRTyxLQUFLLENBQUMsK0JBQStCOE0sT0FBTzlNLEtBQUs7WUFDekQsTUFBTSxJQUFJUSxNQUFNc00sT0FBTzlNLEtBQUs7UUFDOUI7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZFAsUUFBUU8sS0FBSyxDQUFDLG9DQUFvQ0E7UUFDbEQsTUFBTUE7SUFDUjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96b2hvLWJpbGxpbmctcGxhdGZvcm0vLi9saWIvem9oby50cz9lNzBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgWm9ob1Byb2plY3Qge1xuICBwcm9qZWN0X2lkOiBzdHJpbmc7XG4gIHByb2plY3RfbmFtZTogc3RyaW5nOyAvLyBDaGFuZ2VkIGZyb20gbmFtZSB0byBwcm9qZWN0X25hbWVcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICBzdGFydF9kYXRlOiBzdHJpbmc7XG4gIGVuZF9kYXRlPzogc3RyaW5nO1xuICBidWRnZXRfYW1vdW50PzogbnVtYmVyO1xuICByYXRlX3Blcl9ob3VyPzogbnVtYmVyO1xuICBjdXN0b21lcl9pZDogc3RyaW5nO1xuICBjdXN0b21lcl9uYW1lOiBzdHJpbmc7XG4gIHNpZ25lZF9mZWU/OiBudW1iZXI7IC8vIEFkZGVkIGZvciBTaWduZWQgRmVlIGZyb20gWm9ob1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFpvaG9JbnZvaWNlIHtcbiAgaW52b2ljZV9pZDogc3RyaW5nO1xuICBwcm9qZWN0X2lkOiBzdHJpbmc7XG4gIGludm9pY2VfbnVtYmVyOiBzdHJpbmc7XG4gIGRhdGU6IHN0cmluZztcbiAgYW1vdW50OiBudW1iZXI7XG4gIHN0YXR1czogc3RyaW5nO1xuICBiaWxsZWRfYW1vdW50OiBudW1iZXI7XG4gIHVuYmlsbGVkX2Ftb3VudDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgVG9rZW5SZXNwb25zZSB7XG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICBleHBpcmVzX2luOiBudW1iZXI7XG4gIGFwaV9kb21haW46IHN0cmluZztcbiAgdG9rZW5fdHlwZTogc3RyaW5nO1xuICByZWZyZXNoX3Rva2VuPzogc3RyaW5nO1xufVxuXG5jbGFzcyBab2hvU2VydmljZSB7XG4gIHByaXZhdGUgYWNjZXNzVG9rZW46IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHRva2VuRXhwaXJ5OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHJlZnJlc2hQcm9taXNlOiBQcm9taXNlPHN0cmluZz4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBUT0tFTl9SRUZSRVNIX0JVRkZFUiA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlcyBidWZmZXJcbiAgcHJpdmF0ZSBhdXRvUmVmcmVzaFRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IEFVVE9fUkVGUkVTSF9JTlRFUlZBTCA9IDQ1ICogNjAgKiAxMDAwOyAvLyA0NSBtaW51dGVzXG4gIHByaXZhdGUgbGFzdFJlZnJlc2hUaW1lOiBudW1iZXIgPSAwOyAvLyBUcmFjayB3aGVuIGF1dG8tcmVmcmVzaCB3YXMgbGFzdCB0cmlnZ2VyZWRcbiAgcHJpdmF0ZSByZWFkb25seSBBQ0NPVU5UU19CQVNFID0gcHJvY2Vzcy5lbnYuWk9IT19BQ0NPVU5UU19CQVNFIHx8ICdodHRwczovL2FjY291bnRzLnpvaG8uY29tJztcbiAgcHJpdmF0ZSByZWFkb25seSBBUElfQkFTRSA9IHByb2Nlc3MuZW52LlpPSE9fQVBJX0JBU0UgfHwgJ2h0dHBzOi8vd3d3LnpvaG9hcGlzLmNvbSc7XG4gIHByaXZhdGUgb3JnYW5pemF0aW9uVmFsaWRhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIFxuICAvLyBSYXRlIGxpbWl0aW5nIHByb3BlcnRpZXNcbiAgcHJpdmF0ZSByZXF1ZXN0Q291bnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgbGFzdFJlcXVlc3RUaW1lOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IE1BWF9SRVFVRVNUU19QRVJfTUlOVVRFID0gODA7IC8vIENvbnNlcnZhdGl2ZSBsaW1pdCAoWm9obyBhbGxvd3MgMTAwLCB3ZSB1c2UgODApXG4gIHByaXZhdGUgcmVhZG9ubHkgTUlOX1JFUVVFU1RfSU5URVJWQUwgPSAzMDAwOyAvLyAzIHNlY29uZHMgYmV0d2VlbiByZXF1ZXN0cyAod2FzIDIpXG4gIHByaXZhdGUgcmV0cnlDb3VudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBNQVhfUkVUUklFUyA9IDM7XG4gIHByaXZhdGUgcmVhZG9ubHkgQkFTRV9ERUxBWSA9IDIwMDA7IC8vIDIgc2Vjb25kcyBiYXNlIGRlbGF5IGZvciBleHBvbmVudGlhbCBiYWNrb2ZmICh3YXMgMSlcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBTdGFydCBhdXRvbWF0aWMgdG9rZW4gcmVmcmVzaFxuICAgIHRoaXMuX3N0YXJ0QXV0b1JlZnJlc2goKTtcbiAgICBjb25zb2xlLmxvZyhgWm9obyBBUEkgYmFzZTogJHt0aGlzLkFQSV9CQVNFfSB8IEFjY291bnRzIGJhc2U6ICR7dGhpcy5BQ0NPVU5UU19CQVNFfWApO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnRBdXRvUmVmcmVzaCgpOiB2b2lkIHtcbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXJcbiAgICBpZiAodGhpcy5hdXRvUmVmcmVzaFRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1JlZnJlc2hUaW1lcik7XG4gICAgfVxuXG4gICAgLy8gU2V0IHVwIGF1dG9tYXRpYyByZWZyZXNoIGV2ZXJ5IDQ1IG1pbnV0ZXNcbiAgICB0aGlzLmF1dG9SZWZyZXNoVGltZXIgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygnQXV0by1yZWZyZXNoaW5nIFpvaG8gdG9rZW4gKDQ1LW1pbnV0ZSBpbnRlcnZhbCkuLi4nKTtcbiAgICAgICAgdGhpcy5sYXN0UmVmcmVzaFRpbWUgPSBEYXRlLm5vdygpOyAvLyBUcmFjayB3aGVuIHJlZnJlc2ggd2FzIHRyaWdnZXJlZFxuICAgICAgICBhd2FpdCB0aGlzLmZvcmNlUmVmcmVzaFRva2VuKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdXRvLXJlZnJlc2ggY29tcGxldGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXV0by1yZWZyZXNoIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSwgdGhpcy5BVVRPX1JFRlJFU0hfSU5URVJWQUwpO1xuXG4gICAgLy8gU2V0IGluaXRpYWwgcmVmcmVzaCB0aW1lXG4gICAgdGhpcy5sYXN0UmVmcmVzaFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnNvbGUubG9nKCdBdXRvbWF0aWMgWm9obyB0b2tlbiByZWZyZXNoIHN0YXJ0ZWQgKGV2ZXJ5IDQ1IG1pbnV0ZXMpJyk7XG4gIH1cblxuICBwcml2YXRlIF9zdG9wQXV0b1JlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hUaW1lcikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9SZWZyZXNoVGltZXIpO1xuICAgICAgdGhpcy5hdXRvUmVmcmVzaFRpbWVyID0gbnVsbDtcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRvbWF0aWMgWm9obyB0b2tlbiByZWZyZXNoIHN0b3BwZWQnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldEFjY2Vzc1Rva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYSB2YWxpZCB0b2tlblxuICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4gJiYgRGF0ZS5ub3coKSA8IHRoaXMudG9rZW5FeHBpcnkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIGV4aXN0aW5nIHZhbGlkIHRva2VuJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnVG9rZW4gZXhwaXJlZCBvciBtaXNzaW5nLCByZWZyZXNoaW5nLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0b2tlblxuICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IG51bGw7XG4gICAgICB0aGlzLnRva2VuRXhwaXJ5ID0gMDtcblxuICAgICAgaWYgKCFwcm9jZXNzLmVudi5aT0hPX0NMSUVOVF9JRCB8fCAhcHJvY2Vzcy5lbnYuWk9IT19DTElFTlRfU0VDUkVUIHx8ICFwcm9jZXNzLmVudi5aT0hPX1JFRlJFU0hfVE9LRU4pIHtcbiAgICAgICAgY29uc3QgbWlzc2luZ1ZhcnMgPSBbXTtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudi5aT0hPX0NMSUVOVF9JRCkgbWlzc2luZ1ZhcnMucHVzaCgnWk9IT19DTElFTlRfSUQnKTtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudi5aT0hPX0NMSUVOVF9TRUNSRVQpIG1pc3NpbmdWYXJzLnB1c2goJ1pPSE9fQ0xJRU5UX1NFQ1JFVCcpO1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52LlpPSE9fUkVGUkVTSF9UT0tFTikgbWlzc2luZ1ZhcnMucHVzaCgnWk9IT19SRUZSRVNIX1RPS0VOJyk7XG4gICAgICAgIFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgWm9obyBlbnZpcm9ubWVudCB2YXJpYWJsZXM6ICR7bWlzc2luZ1ZhcnMuam9pbignLCAnKX1gKTtcbiAgICAgIH1cbiAgICAgIC8vIEVuc3VyZSBvbmx5IG9uZSByZWZyZXNoIGhhcHBlbnMgYXQgYSB0aW1lIGFjcm9zcyBjb25jdXJyZW50IHJlcXVlc3RzXG4gICAgICBpZiAoIXRoaXMucmVmcmVzaFByb21pc2UpIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoUHJvbWlzZSA9IHRoaXMuX3BlcmZvcm1Ub2tlblJlZnJlc2hXaXRoQmFja29mZigpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMucmVmcmVzaFByb21pc2U7XG4gICAgICAvLyBDbGVhciB0aGUgaW4tZmxpZ2h0IHByb21pc2UgYWZ0ZXIgY29tcGxldGlvblxuICAgICAgdGhpcy5yZWZyZXNoUHJvbWlzZSA9IG51bGw7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZnJlc2hpbmcgWm9obyBhY2Nlc3MgdG9rZW46JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBMb2cgc3BlY2lmaWMgZXJyb3IgZGV0YWlscyBmb3IgZGVidWdnaW5nXG4gICAgICBpZiAoYXhpb3MuaXNBeGlvc0Vycm9yKGVycm9yKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBeGlvcyBlcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogZXJyb3IucmVzcG9uc2U/LnN0YXR1c1RleHQsXG4gICAgICAgICAgZGF0YTogZXJyb3IucmVzcG9uc2U/LmRhdGEsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gYXV0aGVudGljYXRlIHdpdGggWm9obzogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICAvLyBQZXJmb3JtIHRoZSB0b2tlbiByZWZyZXNoIHdpdGggZm9ybS1lbmNvZGVkIGJvZHkgYW5kIHNpbXBsZSBiYWNrb2ZmIGlmIHJhdGUtbGltaXRlZFxuICBwcml2YXRlIGFzeW5jIF9wZXJmb3JtVG9rZW5SZWZyZXNoV2l0aEJhY2tvZmYoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDM7XG4gICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gbWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIHByb2Nlc3MuZW52LlpPSE9fUkVGUkVTSF9UT0tFTiB8fCAnJyk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY2xpZW50X2lkJywgcHJvY2Vzcy5lbnYuWk9IT19DTElFTlRfSUQgfHwgJycpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NsaWVudF9zZWNyZXQnLCBwcm9jZXNzLmVudi5aT0hPX0NMSUVOVF9TRUNSRVQgfHwgJycpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2dyYW50X3R5cGUnLCAncmVmcmVzaF90b2tlbicpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdDxUb2tlblJlc3BvbnNlPihgJHt0aGlzLkFDQ09VTlRTX0JBU0V9L29hdXRoL3YyL3Rva2VuYCwgZm9ybURhdGEsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9LFxuICAgICAgICAgIHRpbWVvdXQ6IDE1MDAwLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhY2Nlc3MgdG9rZW4gcmVjZWl2ZWQgZnJvbSBab2hvJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47XG4gICAgICAgIHRoaXMudG9rZW5FeHBpcnkgPSBEYXRlLm5vdygpICsgKHJlc3BvbnNlLmRhdGEuZXhwaXJlc19pbiAqIDEwMDApO1xuICAgICAgICB0aGlzLmxhc3RSZWZyZXNoVGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYFRva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHkuIEV4cGlyZXMgaW4gJHtNYXRoLnJvdW5kKHJlc3BvbnNlLmRhdGEuZXhwaXJlc19pbiAvIDYwKX0gbWludXRlc2ApO1xuICAgICAgICBjb25zb2xlLmxvZygnWm9obyB0b2tlbiByZWZyZXNoIHJlc3BvbnNlOicsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAvLyBWYWxpZGF0ZSBzY29wZXMgb24gcmVmcmVzaGVkIHRva2VuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc2NvcGVJbmZvID0gYXdhaXQgdGhpcy5jaGVja1Rva2VuU2NvcGVzKHRoaXMuYWNjZXNzVG9rZW4pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdab2hvIGdyYW50ZWQgc2NvcGVzOicsIHNjb3BlSW5mbz8uc2NvcGUgfHwgJ3Vua25vd24nKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHNjb3BlSW5mbz8uc2NvcGUgPT09ICdzdHJpbmcnICYmICFzY29wZUluZm8uc2NvcGUuaW5jbHVkZXMoJ1pvaG9Cb29rcy5yZXBvcnRzLlJFQUQnKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gTWlzc2luZyBab2hvQm9va3MucmVwb3J0cy5SRUFEIHNjb3BlLiBSZWdlbmVyYXRlIHRva2VuLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoc2NvcGVFcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdab2hvIHRva2VuIHNjb3BlIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgKHNjb3BlRXJyIGFzIEVycm9yKT8ubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XG4gICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAvLyBJZiByYXRlLWxpbWl0ZWQgYnkgWm9obyBkdXJpbmcgdG9rZW4gcmVmcmVzaCwgYmFjayBvZmYgYW5kIHJldHJ5XG4gICAgICAgIGNvbnN0IGlzQXhpb3MgPSBheGlvcy5pc0F4aW9zRXJyb3IoZXJyKTtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gaXNBeGlvcyA/IGVyci5yZXNwb25zZT8uc3RhdHVzIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGlzQXhpb3MgPyAoZXJyLnJlc3BvbnNlPy5kYXRhIGFzIGFueSk/LmVycm9yX2Rlc2NyaXB0aW9uIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc3RhdHVzID09PSA0MDAgJiYgdHlwZW9mIGRlc2NyaXB0aW9uID09PSAnc3RyaW5nJyAmJiBkZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0b28gbWFueSByZXF1ZXN0cycpKSB7XG4gICAgICAgICAgY29uc3QgZGVsYXlNcyA9IDIwMDAgKiBhdHRlbXB0ICogYXR0ZW1wdCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwMCk7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBab2hvIHRva2VuIHJlZnJlc2ggcmF0ZS1saW1pdGVkIChhdHRlbXB0ICR7YXR0ZW1wdH0vJHttYXhBdHRlbXB0c30pLiBXYWl0aW5nICR7ZGVsYXlNc31tcyBiZWZvcmUgcmV0cnkuYCk7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5TXMpKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGb3Igb3RoZXIgZXJyb3JzLCBkbyBub3QgcmV0cnkgZW5kbGVzc2x5XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdab2hvIHRva2VuIHJlZnJlc2ggZmFpbGVkIGFmdGVyIG1heGltdW0gcmV0cmllcycpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQWNjZXNzVG9rZW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1JlZnJlc2hpbmcgWm9obyBhY2Nlc3MgdG9rZW4uLi4nKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGZvcm0gZGF0YSBmb3IgdGhlIHJlcXVlc3RcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdyZWZyZXNoX3Rva2VuJywgcHJvY2Vzcy5lbnYuWk9IT19SRUZSRVNIX1RPS0VOIHx8ICcnKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY2xpZW50X2lkJywgcHJvY2Vzcy5lbnYuWk9IT19DTElFTlRfSUQgfHwgJycpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgcHJvY2Vzcy5lbnYuWk9IT19DTElFTlRfU0VDUkVUIHx8ICcnKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdDxUb2tlblJlc3BvbnNlPihgJHt0aGlzLkFDQ09VTlRTX0JBU0V9L29hdXRoL3YyL3Rva2VuYCwgZm9ybURhdGEsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47XG4gICAgICB0aGlzLnRva2VuRXhwaXJ5ID0gRGF0ZS5ub3coKSArIChyZXNwb25zZS5kYXRhLmV4cGlyZXNfaW4gKiAxMDAwKTtcblxuICAgICAgY29uc29sZS5sb2coYFRva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHkuIEV4cGlyZXMgaW4gJHtNYXRoLnJvdW5kKHJlc3BvbnNlLmRhdGEuZXhwaXJlc19pbiAvIDYwKX0gbWludXRlc2ApO1xuICAgICAgXG4gICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVmcmVzaGluZyBab2hvIGFjY2VzcyB0b2tlbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhdXRoZW50aWNhdGUgd2l0aCBab2hvJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdChlbmRwb2ludDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQXBwbHkgcmF0ZSBsaW1pdGluZ1xuICAgICAgYXdhaXQgdGhpcy5hcHBseVJhdGVMaW1pdCgpO1xuICAgICAgXG4gICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuZ2V0QWNjZXNzVG9rZW4oKTtcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgdG9rZW4gYmVmb3JlIG1ha2luZyByZXF1ZXN0XG4gICAgICBpZiAoIXRva2VuIHx8IHRva2VuID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3IgbWlzc2luZyBhY2Nlc3MgdG9rZW4nKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgb3JnYW5pemF0aW9uIGJlZm9yZSBoaXR0aW5nIHJlcG9ydHMgZW5kcG9pbnRzXG4gICAgICBpZiAoIXRoaXMub3JnYW5pemF0aW9uVmFsaWRhdGVkICYmIGVuZHBvaW50LnN0YXJ0c1dpdGgoJ3JlcG9ydHMvJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZU9yZ2FuaXphdGlvbih0b2tlbik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUuaW5mbyhgTWFraW5nIFpvaG8gQVBJIHJlcXVlc3QgdG86ICR7ZW5kcG9pbnR9YCk7XG4gICAgICBjb25zb2xlLmluZm8oYFRva2VuIChmaXJzdCAxMCBjaGFycyk6ICR7dG9rZW4/LnN1YnN0cmluZygwLCAxMCkgPz8gJ04vQSd9Li4uYCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBBYm9ydENvbnRyb2xsZXIgZm9yIHRpbWVvdXRcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgMTUwMDApOyAvLyAxNSBzZWNvbmQgdGltZW91dFxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHt0aGlzLkFQSV9CQVNFfS9ib29rcy92My8ke2VuZHBvaW50fWAsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgb3JnYW5pemF0aW9uX2lkOiBwcm9jZXNzLmVudi5aT0hPX09SR0FOSVpBVElPTl9JRCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVvdXQ6IDE1MDAwLCAvLyAxNSBzZWNvbmQgdGltZW91dFxuICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVzZXQgcmV0cnkgY291bnQgb24gc3VjY2Vzc1xuICAgICAgICB0aGlzLnJldHJ5Q291bnQgPSAwO1xuICAgICAgICB0aGlzLnJlcXVlc3RDb3VudCsrO1xuICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgY29uc29sZS5pbmZvKGBab2hvIEFQSSByZXF1ZXN0IHN1Y2Nlc3NmdWw6ICR7ZW5kcG9pbnR9YCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgfSBjYXRjaCAoYXhpb3NFcnJvcjogYW55KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIHRpbWVvdXQgc3BlY2lmaWNhbGx5XG4gICAgICAgIGlmIChheGlvc0Vycm9yLmNvZGUgPT09ICdFQ09OTkFCT1JURUQnIHx8IGF4aW9zRXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3RpbWVvdXQnKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9obyBBUEkgcmVxdWVzdCB0aW1lZCBvdXQgZm9yICR7ZW5kcG9pbnR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRocm93IGF4aW9zRXJyb3I7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgLy8gSGFuZGxlIHJhdGUgbGltaXRpbmcgKDQwMCB3aXRoIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UpXG4gICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAwICYmIFxuICAgICAgICAgIGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvcl9kZXNjcmlwdGlvbj8uaW5jbHVkZXMoJ3RvbyBtYW55IHJlcXVlc3RzJykpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUud2FybignWm9obyByYXRlIGxpbWl0IGhpdCwgaW1wbGVtZW50aW5nIGV4cG9uZW50aWFsIGJhY2tvZmYuLi4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVSYXRlTGltaXQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJldHJ5IHRoZSByZXF1ZXN0IGFmdGVyIGJhY2tvZmZcbiAgICAgICAgaWYgKHRoaXMucmV0cnlDb3VudCA8IHRoaXMuTUFYX1JFVFJJRVMpIHtcbiAgICAgICAgICB0aGlzLnJldHJ5Q291bnQrKztcbiAgICAgICAgICBjb25zb2xlLmluZm8oYFJldHJ5aW5nIHJlcXVlc3QgYWZ0ZXIgcmF0ZSBsaW1pdCBiYWNrb2ZmIChhdHRlbXB0ICR7dGhpcy5yZXRyeUNvdW50fSlgKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChlbmRwb2ludCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdab2hvIEFQSSByYXRlIGxpbWl0IGV4Y2VlZGVkIGFmdGVyIG1heGltdW0gcmV0cmllcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgNDI5IFRvbyBNYW55IFJlcXVlc3RzIChleHBsaWNpdCByYXRlIGxpbWl0KVxuICAgICAgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1pvaG8gNDI5IHJhdGUgbGltaXQgaGl0LCBpbXBsZW1lbnRpbmcgZXhwb25lbnRpYWwgYmFja29mZi4uLicpO1xuICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVJhdGVMaW1pdCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmV0cnkgdGhlIHJlcXVlc3QgYWZ0ZXIgYmFja29mZlxuICAgICAgICBpZiAodGhpcy5yZXRyeUNvdW50IDwgdGhpcy5NQVhfUkVUUklFUykge1xuICAgICAgICAgIHRoaXMucmV0cnlDb3VudCsrO1xuICAgICAgICAgIGNvbnNvbGUuaW5mbyhgUmV0cnlpbmcgcmVxdWVzdCBhZnRlciA0MjkgYmFja29mZiAoYXR0ZW1wdCAke3RoaXMucmV0cnlDb3VudH0pYCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoZW5kcG9pbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9obyBBUEkgcmF0ZSBsaW1pdCBleGNlZWRlZCBhZnRlciBtYXhpbXVtIHJldHJpZXMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgd2UgZ2V0IGEgNDAxLCB0cnkgcmVmcmVzaGluZyB0aGUgdG9rZW4gb25jZVxuICAgICAgaWYgKGVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2U/LmRhdGE/LmNvZGUgPT09IDU3KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignWm9obyBBUEkgYXV0aG9yaXphdGlvbiBlcnJvciAoY29kZSA1NykuIExpa2VseSBtaXNzaW5nIHJlcXVpcmVkIHNjb3BlcyBzdWNoIGFzIFpvaG9Cb29rcy5yZXBvcnRzLlJFQUQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5pbmZvKCdUb2tlbiBleHBpcmVkLCByZWZyZXNoaW5nLi4uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGVhciB0aGUgY3VycmVudCB0b2tlbiBhbmQgZm9yY2UgYSByZWZyZXNoXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBudWxsO1xuICAgICAgICB0aGlzLnRva2VuRXhwaXJ5ID0gMDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCB0aGlzLmZvcmNlUmVmcmVzaFRva2VuKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVmFsaWRhdGUgdGhlIG5ldyB0b2tlblxuICAgICAgICAgIGlmICghbmV3VG9rZW4gfHwgbmV3VG9rZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBvYnRhaW4gdmFsaWQgdG9rZW4gYWZ0ZXIgcmVmcmVzaCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmluZm8oYFJldHJ5aW5nIHJlcXVlc3Qgd2l0aCBuZXcgdG9rZW46ICR7ZW5kcG9pbnR9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmV0cnkgdGhlIHJlcXVlc3Qgd2l0aCB0aGUgbmV3IHRva2VuXG4gICAgICAgICAgY29uc3QgcmV0cnlSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHt0aGlzLkFQSV9CQVNFfS9ib29rcy92My8ke2VuZHBvaW50fWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7bmV3VG9rZW59YCxcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uX2lkOiBwcm9jZXNzLmVudi5aT0hPX09SR0FOSVpBVElPTl9JRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aW1lb3V0OiAxNTAwMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmluZm8oJ1JlcXVlc3QgcmV0cnkgc3VjY2Vzc2Z1bCBhZnRlciB0b2tlbiByZWZyZXNoJyk7XG4gICAgICAgICAgcmV0dXJuIHJldHJ5UmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBjYXRjaCAocmVmcmVzaEVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVmcmVzaCB0b2tlbiBvciByZXRyeSByZXF1ZXN0OicsIHJlZnJlc2hFcnJvcik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTG9nIGRldGFpbGVkIHJlZnJlc2ggZXJyb3IgaW5mb3JtYXRpb25cbiAgICAgICAgICBpZiAoYXhpb3MuaXNBeGlvc0Vycm9yKHJlZnJlc2hFcnJvcikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHJlZnJlc2ggQXhpb3MgZXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgICAgICAgIHN0YXR1czogcmVmcmVzaEVycm9yLnJlc3BvbnNlPy5zdGF0dXMsXG4gICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlZnJlc2hFcnJvci5yZXNwb25zZT8uc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgZGF0YTogcmVmcmVzaEVycm9yLnJlc3BvbnNlPy5kYXRhLFxuICAgICAgICAgICAgICBtZXNzYWdlOiByZWZyZXNoRXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgZW5kcG9pbnQ6IGVuZHBvaW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIHJhdGUgbGltaXRpbmcgaXNzdWUgZHVyaW5nIHRva2VuIHJlZnJlc2hcbiAgICAgICAgICBpZiAocmVmcmVzaEVycm9yLnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMCAmJiBcbiAgICAgICAgICAgICAgcmVmcmVzaEVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvcl9kZXNjcmlwdGlvbj8uaW5jbHVkZXMoJ3RvbyBtYW55IHJlcXVlc3RzJykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9obyB0b2tlbiByZWZyZXNoIHJhdGUgbGltaXRlZDogJHtlbmRwb2ludH0uIFBsZWFzZSB3YWl0IGJlZm9yZSByZXRyeWluZy5gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhbiBhdXRoZW50aWNhdGlvbiBpc3N1ZSBkdXJpbmcgdG9rZW4gcmVmcmVzaFxuICAgICAgICAgIGlmIChyZWZyZXNoRXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAwICYmIFxuICAgICAgICAgICAgICByZWZyZXNoRXJyb3IucmVzcG9uc2U/LmRhdGE/LmVycm9yX2Rlc2NyaXB0aW9uPy5pbmNsdWRlcygnaW52YWxpZCcpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvaG8gdG9rZW4gcmVmcmVzaCBmYWlsZWQgLSBpbnZhbGlkIGNyZWRlbnRpYWxzOiAke2VuZHBvaW50fS4gQ2hlY2sgeW91ciBPQXV0aCBjb25maWd1cmF0aW9uLmApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvaG8gQVBJIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBhZnRlciB0b2tlbiByZWZyZXNoOiAke2VuZHBvaW50fS4gRXJyb3I6ICR7cmVmcmVzaEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gTG9nIHRoZSBlcnJvciBkZXRhaWxzIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFpvaG8gQVBJIHJlcXVlc3QgZmFpbGVkIGZvciAke2VuZHBvaW50fTpgLCB7XG4gICAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogZXJyb3IucmVzcG9uc2U/LnN0YXR1c1RleHQsXG4gICAgICAgIGRhdGE6IGVycm9yLnJlc3BvbnNlPy5kYXRhLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZT8uZGF0YT8uY29kZSA9PT0gNTcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignWm9obyBBUEkgYXV0aG9yaXphdGlvbiBlcnJvciAoY29kZSA1NykuIFZlcmlmeSBvcmdhbml6YXRpb25faWQgYW5kIE9BdXRoIHNjb3BlcyAoWm9ob0Jvb2tzLnJlcG9ydHMuUkVBRCkuJyk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGdyYW50ZWQgc2NvcGVzIGZvciBjdXJyZW50IGFjY2VzcyB0b2tlblxuICBwcml2YXRlIGFzeW5jIGNoZWNrVG9rZW5TY29wZXModG9rZW46IHN0cmluZyk6IFByb21pc2U8eyBzY29wZT86IHN0cmluZyB9IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLkFDQ09VTlRTX0JBU0V9L29hdXRoL3YyL3Rva2VuaW5mbz90b2tlbj0ke2VuY29kZVVSSUNvbXBvbmVudCh0b2tlbil9YDtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldCh1cmwsIHsgdGltZW91dDogMTAwMDAgfSk7XG4gICAgICByZXR1cm4gcmVzLmRhdGEgYXMgeyBzY29wZT86IHN0cmluZyB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAvLyBTdXJmYWNlIGNvbmNpc2UgY29udGV4dCBidXQgZG8gbm90IGZhaWwgdGhlIG1haW4gZmxvd1xuICAgICAgY29uc3QgbXNnID0gYXhpb3MuaXNBeGlvc0Vycm9yKGVycikgPyBlcnIucmVzcG9uc2U/LmRhdGEgfHwgZXJyLm1lc3NhZ2UgOiBTdHJpbmcoZXJyKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcih0eXBlb2YgbXNnID09PSAnc3RyaW5nJyA/IG1zZyA6IEpTT04uc3RyaW5naWZ5KG1zZykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFZhbGlkYXRlIHRoZSBjb25maWd1cmVkIG9yZ2FuaXphdGlvbiBJRCBieSBjYWxsaW5nIG9yZ2FuaXphdGlvbnMgZW5kcG9pbnRcbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZU9yZ2FuaXphdGlvbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9yZ0lkID0gcHJvY2Vzcy5lbnYuWk9IT19PUkdBTklaQVRJT05fSUQ7XG4gICAgICBpZiAoIW9yZ0lkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignWk9IT19PUkdBTklaQVRJT05fSUQgbm90IHNldC4gUmVwb3J0cyBjYWxscyBtYXkgZmFpbC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5BUElfQkFTRX0vYm9va3MvdjMvb3JnYW5pemF0aW9uc2A7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5nZXQodXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogMTUwMDBcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgb3JncyA9IChyZXMuZGF0YT8ub3JnYW5pemF0aW9ucyB8fCBbXSkgYXMgQXJyYXk8eyBvcmdhbml6YXRpb25faWQ/OiBzdHJpbmcgfCBudW1iZXIgfT47XG4gICAgICBjb25zdCBmb3VuZCA9IG9yZ3Muc29tZShvID0+IFN0cmluZyhvLm9yZ2FuaXphdGlvbl9pZCkgPT09IFN0cmluZyhvcmdJZCkpO1xuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBQcm92aWRlZCBvcmdhbml6YXRpb25faWQ9JHtvcmdJZH0gbm90IGZvdW5kIGluIFpvaG8gYWNjb3VudC4gRmV0Y2hlZCBvcmdhbml6YXRpb25zOiAke0pTT04uc3RyaW5naWZ5KG9yZ3MpfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25WYWxpZGF0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgVmFsaWRhdGVkIFpvaG8gb3JnYW5pemF0aW9uX2lkPSR7b3JnSWR9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGF4aW9zLmlzQXhpb3NFcnJvcihlcnIpID8gZXJyLnJlc3BvbnNlPy5zdGF0dXMgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBkYXRhID0gYXhpb3MuaXNBeGlvc0Vycm9yKGVycikgPyBlcnIucmVzcG9uc2U/LmRhdGEgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdmFsaWRhdGUgWm9obyBvcmdhbml6YXRpb246JywgeyBzdGF0dXMsIGRhdGEsIG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pO1xuICAgICAgLy8gRG8gbm90IHRocm93OyBhbGxvdyByZXF1ZXN0IHRvIHByb2NlZWQgYnV0IGxvZ3Mgd2lsbCBoZWxwIGRpYWdub3NlXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhcHBseVJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gd2FpdCBiZXR3ZWVuIHJlcXVlc3RzXG4gICAgaWYgKHRoaXMubGFzdFJlcXVlc3RUaW1lID4gMCkge1xuICAgICAgY29uc3QgdGltZVNpbmNlTGFzdFJlcXVlc3QgPSBub3cgLSB0aGlzLmxhc3RSZXF1ZXN0VGltZTtcbiAgICAgIGlmICh0aW1lU2luY2VMYXN0UmVxdWVzdCA8IHRoaXMuTUlOX1JFUVVFU1RfSU5URVJWQUwpIHtcbiAgICAgICAgY29uc3Qgd2FpdFRpbWUgPSB0aGlzLk1JTl9SRVFVRVNUX0lOVEVSVkFMIC0gdGltZVNpbmNlTGFzdFJlcXVlc3Q7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhgUmF0ZSBsaW1pdGluZzogd2FpdGluZyAke3dhaXRUaW1lfW1zIGJlZm9yZSBuZXh0IHJlcXVlc3RgKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHdhaXRUaW1lKSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHdlJ3ZlIGV4Y2VlZGVkIHRoZSBwZXItbWludXRlIGxpbWl0XG4gICAgaWYgKHRoaXMucmVxdWVzdENvdW50ID49IHRoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUpIHtcbiAgICAgIGNvbnN0IHRpbWVTaW5jZUZpcnN0UmVxdWVzdCA9IG5vdyAtIHRoaXMubGFzdFJlcXVlc3RUaW1lO1xuICAgICAgaWYgKHRpbWVTaW5jZUZpcnN0UmVxdWVzdCA8IDYwMDAwKSB7IC8vIExlc3MgdGhhbiAxIG1pbnV0ZVxuICAgICAgICBjb25zdCB3YWl0VGltZSA9IDYwMDAwIC0gdGltZVNpbmNlRmlyc3RSZXF1ZXN0O1xuICAgICAgICBjb25zb2xlLndhcm4oYFJhdGUgbGltaXRpbmc6IGV4Y2VlZGVkICR7dGhpcy5NQVhfUkVRVUVTVFNfUEVSX01JTlVURX0gcmVxdWVzdHMgcGVyIG1pbnV0ZSwgd2FpdGluZyAke3dhaXRUaW1lfW1zYCk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB3YWl0VGltZSkpO1xuICAgICAgICB0aGlzLnJlcXVlc3RDb3VudCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXNldCBjb3VudGVyIGlmIG1vcmUgdGhhbiAxIG1pbnV0ZSBoYXMgcGFzc2VkXG4gICAgICAgIHRoaXMucmVxdWVzdENvdW50ID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBkZWxheSA9IHRoaXMuQkFTRV9ERUxBWSAqIE1hdGgucG93KDIsIHRoaXMucmV0cnlDb3VudCk7XG4gICAgY29uc3Qgaml0dGVyID0gTWF0aC5yYW5kb20oKSAqIDEwMDA7IC8vIEFkZCB1cCB0byAxIHNlY29uZCBvZiBqaXR0ZXJcbiAgICBjb25zdCB0b3RhbERlbGF5ID0gZGVsYXkgKyBqaXR0ZXI7XG4gICAgXG4gICAgY29uc29sZS53YXJuKGBSYXRlIGxpbWl0IGJhY2tvZmY6IHdhaXRpbmcgJHt0b3RhbERlbGF5fW1zIGJlZm9yZSByZXRyeSAoYXR0ZW1wdCAke3RoaXMucmV0cnlDb3VudCArIDF9KWApO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB0b3RhbERlbGF5KSk7XG4gICAgXG4gICAgLy8gUmVzZXQgcmVxdWVzdCBjb3VudGVycyB0byBhbGxvdyBmcmVzaCBzdGFydFxuICAgIHRoaXMucmVxdWVzdENvdW50ID0gMDtcbiAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IDA7XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0cygpOiBQcm9taXNlPFpvaG9Qcm9qZWN0W10+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IGFsbFByb2plY3RzOiBab2hvUHJvamVjdFtdID0gW107XG4gICAgICBsZXQgcGFnZSA9IDE7XG4gICAgICBjb25zdCBwZXJQYWdlID0gMjAwO1xuICAgICAgXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgcHJvamVjdHM/cGFnZT0ke3BhZ2V9JnBlcl9wYWdlPSR7cGVyUGFnZX1gKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gZGF0YS5wcm9qZWN0cz8ubWFwKChwcm9qZWN0OiBhbnkpID0+IHtcbiAgICAgICAgICAvLyBMb2cgdGhlIGZpcnN0IHByb2plY3QgdG8gc2VlIGF2YWlsYWJsZSBmaWVsZHNcbiAgICAgICAgICBpZiAocGFnZSA9PT0gMSAmJiBhbGxQcm9qZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTYW1wbGUgWm9obyBwcm9qZWN0IGRhdGE6JywgSlNPTi5zdHJpbmdpZnkocHJvamVjdCwgbnVsbCwgMikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvamVjdF9pZDogcHJvamVjdC5wcm9qZWN0X2lkLFxuICAgICAgICAgICAgcHJvamVjdF9uYW1lOiBwcm9qZWN0LnByb2plY3RfbmFtZSB8fCBwcm9qZWN0Lm5hbWUgfHwgJycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcHJvamVjdC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgIHN0YXR1czogcHJvamVjdC5zdGF0dXMgfHwgJ2FjdGl2ZScsXG4gICAgICAgICAgICBzdGFydF9kYXRlOiBwcm9qZWN0LnN0YXJ0X2RhdGUgfHwgJycsXG4gICAgICAgICAgICBlbmRfZGF0ZTogcHJvamVjdC5lbmRfZGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIGJ1ZGdldF9hbW91bnQ6IHByb2plY3QuYnVkZ2V0X2Ftb3VudCB8fCAwLFxuICAgICAgICAgICAgcmF0ZV9wZXJfaG91cjogcHJvamVjdC5yYXRlX3Blcl9ob3VyIHx8IDAsXG4gICAgICAgICAgICBjdXN0b21lcl9pZDogcHJvamVjdC5jdXN0b21lcl9pZCB8fCAnJyxcbiAgICAgICAgICAgIGN1c3RvbWVyX25hbWU6IHByb2plY3QuY3VzdG9tZXJfbmFtZSB8fCAnJyxcbiAgICAgICAgICAgIHNpZ25lZF9mZWU6IHVuZGVmaW5lZCwgLy8gUmVtb3ZlIFpvaG8gc2lnbmVkIGZlZSwgb25seSB1c2UgdXNlci1lbnRlcmVkIGRhdGFcbiAgICAgICAgICB9O1xuICAgICAgICB9KSB8fCBbXTtcbiAgICAgICAgXG4gICAgICAgIGFsbFByb2plY3RzID0gYWxsUHJvamVjdHMuY29uY2F0KHByb2plY3RzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIGVuZFxuICAgICAgICBpZiAocHJvamVjdHMubGVuZ3RoIDwgcGVyUGFnZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwYWdlKys7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7YWxsUHJvamVjdHMubGVuZ3RofSBwcm9qZWN0cyBmcm9tIFpvaG9gKTtcbiAgICAgIHJldHVybiBhbGxQcm9qZWN0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RzV2l0aFJldmVudWVCdWRnZXQoKTogUHJvbWlzZTxab2hvUHJvamVjdFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBwcm9qZWN0cyB3aXRoIHJldmVudWUgYnVkZ2V0IGRhdGEuLi4nKTtcbiAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0cygpO1xuICAgICAgXG4gICAgICAvLyBMb2cgcHJvamVjdHMgdGhhdCBoYXZlIHJldmVudWVfYnVkZ2V0IGRhdGFcbiAgICAgIGNvbnN0IHByb2plY3RzV2l0aFJldmVudWVCdWRnZXQgPSBwcm9qZWN0cy5maWx0ZXIocHJvamVjdCA9PiB7XG4gICAgICAgIGNvbnN0IGhhc1JldmVudWVCdWRnZXQgPSBwcm9qZWN0LnNpZ25lZF9mZWUgJiYgcHJvamVjdC5zaWduZWRfZmVlID4gMDtcbiAgICAgICAgaWYgKGhhc1JldmVudWVCdWRnZXQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvamVjdCAke3Byb2plY3QucHJvamVjdF9uYW1lfSBoYXMgcmV2ZW51ZSBidWRnZXQ6ICQke3Byb2plY3Quc2lnbmVkX2ZlZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzUmV2ZW51ZUJ1ZGdldDtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtwcm9qZWN0c1dpdGhSZXZlbnVlQnVkZ2V0Lmxlbmd0aH0gcHJvamVjdHMgd2l0aCByZXZlbnVlIGJ1ZGdldCBkYXRhYCk7XG4gICAgICByZXR1cm4gcHJvamVjdHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3RzIHdpdGggcmV2ZW51ZSBidWRnZXQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlYnVnUHJvamVjdEZpZWxkcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0RlYnVnZ2luZyBab2hvIHByb2plY3QgZmllbGRzLi4uJyk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgncHJvamVjdHM/cGFnZT0xJnBlcl9wYWdlPTUnKTtcbiAgICAgIFxuICAgICAgaWYgKGRhdGEucHJvamVjdHMgJiYgZGF0YS5wcm9qZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdmFpbGFibGUgZmllbGRzIGluIFpvaG8gcHJvamVjdCByZXNwb25zZTonKTtcbiAgICAgICAgY29uc3Qgc2FtcGxlUHJvamVjdCA9IGRhdGEucHJvamVjdHNbMF07XG4gICAgICAgIE9iamVjdC5rZXlzKHNhbXBsZVByb2plY3QpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICAke2tleX06ICR7c2FtcGxlUHJvamVjdFtrZXldfSAoJHt0eXBlb2Ygc2FtcGxlUHJvamVjdFtrZXldfSlgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBzcGVjaWZpY2FsbHkgZm9yIHJldmVudWVfYnVkZ2V0XG4gICAgICAgIGlmIChzYW1wbGVQcm9qZWN0LnJldmVudWVfYnVkZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kIHJldmVudWVfYnVkZ2V0IGZpZWxkOiAke3NhbXBsZVByb2plY3QucmV2ZW51ZV9idWRnZXR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KdjCByZXZlbnVlX2J1ZGdldCBmaWVsZCBub3QgZm91bmQgaW4gWm9obyByZXNwb25zZScpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdmFpbGFibGUgYnVkZ2V0LXJlbGF0ZWQgZmllbGRzOicpO1xuICAgICAgICAgIE9iamVjdC5rZXlzKHNhbXBsZVByb2plY3QpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYnVkZ2V0JykgfHwga2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JldmVudWUnKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAke2tleX06ICR7c2FtcGxlUHJvamVjdFtrZXldfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnTm8gcHJvamVjdHMgZm91bmQgaW4gWm9obyByZXNwb25zZScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWJ1Z2dpbmcgcHJvamVjdCBmaWVsZHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RzV2l0aEVzdGltYXRlcygpOiBQcm9taXNlPFpvaG9Qcm9qZWN0W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCB0aGlzLmdldFByb2plY3RzKCk7XG4gICAgICBcbiAgICAgIC8vIEZvciB0aGUgZmlyc3QgZmV3IHByb2plY3RzLCB0cnkgdG8gZ2V0IGVzdGltYXRlcyB0byBzZWUgaWYgdGhhdCBjb250YWlucyB0aGUgc2lnbmVkIGZlZVxuICAgICAgY29uc3QgcHJvamVjdHNXaXRoRXN0aW1hdGVzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHByb2plY3RzLnNsaWNlKDAsIDUpLm1hcChhc3luYyAocHJvamVjdCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlc3RpbWF0ZXMgPSBhd2FpdCB0aGlzLmdldFByb2plY3RFc3RpbWF0ZXMocHJvamVjdC5wcm9qZWN0X2lkKTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsRXN0aW1hdGVBbW91bnQgPSBlc3RpbWF0ZXMucmVkdWNlKChzdW0sIGVzdGltYXRlKSA9PiBzdW0gKyAoZXN0aW1hdGUudG90YWwgfHwgMCksIDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvamVjdCAke3Byb2plY3QucHJvamVjdF9uYW1lfSBlc3RpbWF0ZXM6YCwgZXN0aW1hdGVzLmxlbmd0aCwgJ3RvdGFsIGFtb3VudDonLCB0b3RhbEVzdGltYXRlQW1vdW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4ucHJvamVjdCxcbiAgICAgICAgICAgICAgc2lnbmVkX2ZlZTogcHJvamVjdC5zaWduZWRfZmVlIHx8IHRvdGFsRXN0aW1hdGVBbW91bnQgfHwgMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGVzdGltYXRlcyBmb3IgcHJvamVjdCAke3Byb2plY3QucHJvamVjdF9pZH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHByb2plY3Q7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGFsbCBwcm9qZWN0cywgd2l0aCB0aGUgZmlyc3QgNSBoYXZpbmcgdXBkYXRlZCBzaWduZWQgZmVlcyBmcm9tIGVzdGltYXRlc1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgLi4ucHJvamVjdHNXaXRoRXN0aW1hdGVzLFxuICAgICAgICAuLi5wcm9qZWN0cy5zbGljZSg1KVxuICAgICAgXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHMgd2l0aCBlc3RpbWF0ZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RzV2l0aEludm9pY2VUb3RhbHMoKTogUHJvbWlzZTxab2hvUHJvamVjdFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFtwcm9qZWN0cywgaW52b2ljZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLmdldFByb2plY3RzKCksXG4gICAgICAgIHRoaXMuZ2V0SW52b2ljZXMoKSxcbiAgICAgIF0pO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgc2lnbmVkIGZlZSBhcyB0b3RhbCBvZiBhbGwgaW52b2ljZXMgZm9yIGVhY2ggcHJvamVjdFxuICAgICAgY29uc3QgcHJvamVjdHNXaXRoSW52b2ljZVRvdGFscyA9IHByb2plY3RzLm1hcChwcm9qZWN0ID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdEludm9pY2VzID0gaW52b2ljZXMuZmlsdGVyKGludm9pY2UgPT4gaW52b2ljZS5wcm9qZWN0X2lkID09PSBwcm9qZWN0LnByb2plY3RfaWQpO1xuICAgICAgICBjb25zdCB0b3RhbEludm9pY2VBbW91bnQgPSBwcm9qZWN0SW52b2ljZXMucmVkdWNlKChzdW0sIGludm9pY2UpID0+IHN1bSArIGludm9pY2UuYW1vdW50LCAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9qZWN0ICR7cHJvamVjdC5wcm9qZWN0X25hbWV9IGludm9pY2VzOmAsIHByb2plY3RJbnZvaWNlcy5sZW5ndGgsICd0b3RhbCBhbW91bnQ6JywgdG90YWxJbnZvaWNlQW1vdW50KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucHJvamVjdCxcbiAgICAgICAgICBzaWduZWRfZmVlOiBwcm9qZWN0LnNpZ25lZF9mZWUgfHwgdG90YWxJbnZvaWNlQW1vdW50IHx8IDAsXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHByb2plY3RzV2l0aEludm9pY2VUb3RhbHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3RzIHdpdGggaW52b2ljZSB0b3RhbHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEludm9pY2VzKCk6IFByb21pc2U8Wm9ob0ludm9pY2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnaW52b2ljZXMnKTtcbiAgICAgIHJldHVybiBkYXRhLmludm9pY2VzPy5tYXAoKGludm9pY2U6IGFueSkgPT4gKHtcbiAgICAgICAgaW52b2ljZV9pZDogaW52b2ljZS5pbnZvaWNlX2lkLFxuICAgICAgICBwcm9qZWN0X2lkOiBpbnZvaWNlLnByb2plY3RfaWQsXG4gICAgICAgIGludm9pY2VfbnVtYmVyOiBpbnZvaWNlLmludm9pY2VfbnVtYmVyLFxuICAgICAgICBkYXRlOiBpbnZvaWNlLmRhdGUsXG4gICAgICAgIGFtb3VudDogaW52b2ljZS50b3RhbCxcbiAgICAgICAgc3RhdHVzOiBpbnZvaWNlLnN0YXR1cyxcbiAgICAgICAgYmlsbGVkX2Ftb3VudDogaW52b2ljZS5iaWxsZWRfYW1vdW50IHx8IDAsXG4gICAgICAgIHVuYmlsbGVkX2Ftb3VudDogaW52b2ljZS51bmJpbGxlZF9hbW91bnQgfHwgMCxcbiAgICAgIH0pKSB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW52b2ljZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3RJbnZvaWNlcyhwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8Wm9ob0ludm9pY2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgcHJvamVjdHMvJHtwcm9qZWN0SWR9L2ludm9pY2VzYCk7XG4gICAgICByZXR1cm4gZGF0YS5pbnZvaWNlcz8ubWFwKChpbnZvaWNlOiBhbnkpID0+ICh7XG4gICAgICAgIGludm9pY2VfaWQ6IGludm9pY2UuaW52b2ljZV9pZCxcbiAgICAgICAgcHJvamVjdF9pZDogaW52b2ljZS5wcm9qZWN0X2lkLFxuICAgICAgICBpbnZvaWNlX251bWJlcjogaW52b2ljZS5pbnZvaWNlX251bWJlcixcbiAgICAgICAgZGF0ZTogaW52b2ljZS5kYXRlLFxuICAgICAgICBhbW91bnQ6IGludm9pY2UudG90YWwsXG4gICAgICAgIHN0YXR1czogaW52b2ljZS5zdGF0dXMsXG4gICAgICAgIGJpbGxlZF9hbW91bnQ6IGludm9pY2UuYmlsbGVkX2Ftb3VudCB8fCAwLFxuICAgICAgICB1bmJpbGxlZF9hbW91bnQ6IGludm9pY2UudW5iaWxsZWRfYW1vdW50IHx8IDAsXG4gICAgICB9KSkgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgaW52b2ljZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFByb2plY3REZXRhaWxzKHByb2plY3RJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHByb2plY3RzLyR7cHJvamVjdElkfWApO1xuICAgICAgY29uc29sZS5sb2coYFByb2plY3QgJHtwcm9qZWN0SWR9IGRldGFpbHM6YCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgZGV0YWlsczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0RXN0aW1hdGVzKHByb2plY3RJZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgcHJvamVjdHMvJHtwcm9qZWN0SWR9L2VzdGltYXRlc2ApO1xuICAgICAgY29uc29sZS5sb2coYFByb2plY3QgJHtwcm9qZWN0SWR9IGVzdGltYXRlczpgLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XG4gICAgICByZXR1cm4gZGF0YS5lc3RpbWF0ZXMgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgZXN0aW1hdGVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0Q29udHJhY3RzKHByb2plY3RJZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgcHJvamVjdHMvJHtwcm9qZWN0SWR9L2NvbnRyYWN0c2ApO1xuICAgICAgY29uc29sZS5sb2coYFByb2plY3QgJHtwcm9qZWN0SWR9IGNvbnRyYWN0czpgLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XG4gICAgICByZXR1cm4gZGF0YS5jb250cmFjdHMgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgY29udHJhY3RzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyBOZXcgbWV0aG9kIHRvIGdldCBQcm9maXQgJiBMb3NzIHN0YXRlbWVudFxuICBhc3luYyBnZXRQcm9maXRBbmRMb3NzKHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmluZm8oYPCfk4ogRmV0Y2hpbmcgWm9obyBQcm9maXQgJiBMb3NzIGZvciAke3N0YXJ0RGF0ZX0gdG8gJHtlbmREYXRlfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHJlcG9ydHMvcHJvZml0YW5kbG9zcz9mcm9tX2RhdGU9JHtzdGFydERhdGV9JnRvX2RhdGU9JHtlbmREYXRlfWApO1xuICAgICAgY29uc3Qgc2l6ZUJ5dGVzID0gSlNPTi5zdHJpbmdpZnkoZGF0YSB8fCB7fSkubGVuZ3RoO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEgfHwge30pLmxlbmd0aDtcbiAgICAgIGNvbnNvbGUuaW5mbyhg4pyFIFByb2ZpdCAmIExvc3MgZGF0YSBmZXRjaGVkIHN1Y2Nlc3NmdWxseSAoa2V5czogJHtrZXlzfSwgYnl0ZXM6ICR7c2l6ZUJ5dGVzfSlgKTtcbiAgICAgIGlmICghZGF0YSB8fCBrZXlzID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTm8gZGF0YSBmb3IgcmVwb3J0cy9wcm9maXRhbmRsb3NzLiBWZXJpZnkgb3JnYW5pemF0aW9uIElELCBkYXRlIHJhbmdlICgyMDI1LTAxLTAxIHRvIDIwMjUtMDgtMTMpLCBvciBkYXRhIGluIFpvaG8gZGFzaGJvYXJkLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBmZXRjaGluZyBQcm9maXQgJiBMb3NzOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUud2Fybign8J+OrSBQcm9maXQgJiBMb3NzIGRhdGEgdW5hdmFpbGFibGUsIHdpbGwgdXNlIGRlZmF1bHRzJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyBOZXcgbWV0aG9kIHRvIGdldCBDYXNoIEZsb3cgc3RhdGVtZW50XG4gIGFzeW5jIGdldENhc2hGbG93KHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmluZm8oYPCfkrAgRmV0Y2hpbmcgWm9obyBDYXNoIEZsb3cgZm9yICR7c3RhcnREYXRlfSB0byAke2VuZERhdGV9YCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgcmVwb3J0cy9jYXNoZmxvdz9mcm9tX2RhdGU9JHtzdGFydERhdGV9JnRvX2RhdGU9JHtlbmREYXRlfWApO1xuICAgICAgY29uc3Qgc2l6ZUJ5dGVzID0gSlNPTi5zdHJpbmdpZnkoZGF0YSB8fCB7fSkubGVuZ3RoO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEgfHwge30pLmxlbmd0aDtcbiAgICAgIGNvbnNvbGUuaW5mbyhg4pyFIENhc2ggRmxvdyBkYXRhIGZldGNoZWQgc3VjY2Vzc2Z1bGx5IChrZXlzOiAke2tleXN9LCBieXRlczogJHtzaXplQnl0ZXN9KWApO1xuICAgICAgaWYgKCFkYXRhIHx8IGtleXMgPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdObyBkYXRhIGZvciByZXBvcnRzL2Nhc2hmbG93LiBWZXJpZnkgb3JnYW5pemF0aW9uIElELCBkYXRlIHJhbmdlICgyMDI1LTAxLTAxIHRvIDIwMjUtMDgtMTMpLCBvciBkYXRhIGluIFpvaG8gZGFzaGJvYXJkLicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBmZXRjaGluZyBDYXNoIEZsb3c6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS53YXJuKCfwn46tIENhc2ggRmxvdyBkYXRhIHVuYXZhaWxhYmxlLCB3aWxsIHVzZSBkZWZhdWx0cycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gTmV3IG1ldGhvZCB0byBnZXQgQmFsYW5jZSBTaGVldFxuICBhc3luYyBnZXRCYWxhbmNlU2hlZXQoZGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5pbmZvKGDwn5OIIEZldGNoaW5nIFpvaG8gQmFsYW5jZSBTaGVldCBmb3IgJHtkYXRlfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHJlcG9ydHMvYmFsYW5jZXNoZWV0P2RhdGU9JHtkYXRlfWApO1xuICAgICAgY29uc3Qgc2l6ZUJ5dGVzID0gSlNPTi5zdHJpbmdpZnkoZGF0YSB8fCB7fSkubGVuZ3RoO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEgfHwge30pLmxlbmd0aDtcbiAgICAgIGNvbnNvbGUuaW5mbyhg4pyFIEJhbGFuY2UgU2hlZXQgZGF0YSBmZXRjaGVkIHN1Y2Nlc3NmdWxseSAoa2V5czogJHtrZXlzfSwgYnl0ZXM6ICR7c2l6ZUJ5dGVzfSlgKTtcbiAgICAgIGlmICghZGF0YSB8fCBrZXlzID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTm8gZGF0YSBmb3IgcmVwb3J0cy9iYWxhbmNlc2hlZXQuIFZlcmlmeSBvcmdhbml6YXRpb24gSUQsIGRhdGUgcmFuZ2UgKDIwMjUtMDEtMDEgdG8gMjAyNS0wOC0xMyksIG9yIGRhdGEgaW4gWm9obyBkYXNoYm9hcmQuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIEJhbGFuY2UgU2hlZXQ6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS53YXJuKCfwn46tIEJhbGFuY2UgU2hlZXQgZGF0YSB1bmF2YWlsYWJsZSwgd2lsbCB1c2UgZGVmYXVsdHMnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5ldyBtZXRob2QgdG8gZ2V0IENoYXJ0IG9mIEFjY291bnRzXG4gIGFzeW5jIGdldENoYXJ0T2ZBY2NvdW50cygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCdjaGFydG9mYWNjb3VudHMnKTtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGFydCBvZiBBY2NvdW50cyBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcbiAgICAgIHJldHVybiBkYXRhLmNoYXJ0b2ZhY2NvdW50cyB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQ2hhcnQgb2YgQWNjb3VudHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5ldyBtZXRob2QgdG8gZ2V0IEpvdXJuYWwgRW50cmllcyBmb3IgYSBkYXRlIHJhbmdlXG4gIGFzeW5jIGdldEpvdXJuYWxFbnRyaWVzKHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGBqb3VybmFsZW50cmllcz9mcm9tX2RhdGU9JHtzdGFydERhdGV9JnRvX2RhdGU9JHtlbmREYXRlfWApO1xuICAgICAgY29uc29sZS5sb2coJ0pvdXJuYWwgRW50cmllcyBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcbiAgICAgIHJldHVybiBkYXRhLmpvdXJuYWxlbnRyaWVzIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBKb3VybmFsIEVudHJpZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5ldyBtZXRob2QgdG8gZ2V0IGNvbXByZWhlbnNpdmUgZmluYW5jaWFsIG1ldHJpY3NcbiAgYXN5bmMgZ2V0RmluYW5jaWFsTWV0cmljcyhzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgcmV2ZW51ZTogbnVtYmVyO1xuICAgIGV4cGVuc2VzOiBudW1iZXI7XG4gICAgZ3Jvc3NQcm9maXQ6IG51bWJlcjtcbiAgICBuZXRQcm9maXQ6IG51bWJlcjtcbiAgICBvcGVyYXRpbmdJbmNvbWU6IG51bWJlcjtcbiAgICBjYXNoRmxvdzogbnVtYmVyO1xuICAgIGFjY291bnRzUmVjZWl2YWJsZTogbnVtYmVyO1xuICAgIGFjY291bnRzUGF5YWJsZTogbnVtYmVyO1xuICAgIGNhc2hCYWxhbmNlOiBudW1iZXI7XG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5pbmZvKGDwn5KwIEZldGNoaW5nIFpvaG8gZmluYW5jaWFsIG1ldHJpY3MgZm9yICR7c3RhcnREYXRlfSB0byAke2VuZERhdGV9YCk7XG4gICAgICBcbiAgICAgIGNvbnN0IFtwbERhdGEsIGNmRGF0YSwgYnNEYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXG4gICAgICAgIHRoaXMuZ2V0UHJvZml0QW5kTG9zcyhzdGFydERhdGUsIGVuZERhdGUpLFxuICAgICAgICB0aGlzLmdldENhc2hGbG93KHN0YXJ0RGF0ZSwgZW5kRGF0ZSksXG4gICAgICAgIHRoaXMuZ2V0QmFsYW5jZVNoZWV0KGVuZERhdGUpXG4gICAgICBdKTtcblxuICAgICAgLy8gTG9nIHJhdyByZXNwb25zZSBzdGF0dXMgYW5kIGJvZHkgbGVuZ3RoIGZvciBlYWNoIHJlcG9ydFxuICAgICAgY29uc29sZS5pbmZvKCfwn5OKIFJhdyByZXNwb25zZSBkZXRhaWxzIGZvciBmaW5hbmNpYWwgcmVwb3J0czonKTtcbiAgICAgIGlmIChwbERhdGEuc3RhdHVzID09PSAnZnVsZmlsbGVkJykge1xuICAgICAgICBjb25zdCBwbEJvZHlMZW5ndGggPSBKU09OLnN0cmluZ2lmeShwbERhdGEudmFsdWUgfHwge30pLmxlbmd0aDtcbiAgICAgICAgY29uc29sZS5pbmZvKGAgIFByb2ZpdCAmIExvc3M6IOKchSBTVUNDRVNTLCBib2R5IGxlbmd0aDogJHtwbEJvZHlMZW5ndGh9IGJ5dGVzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgIFByb2ZpdCAmIExvc3M6IOKdjCBGQUlMRUQsIGVycm9yOiAke3BsRGF0YS5yZWFzb259YCk7XG4gICAgICAgIGlmIChwbERhdGEucmVhc29uPy5yZXNwb25zZT8uc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCcgIEludmFsaWQgZW5kcG9pbnQgLSBjaGVjayBab2hvIEFQSSBkb2NzIGZvciByZXBvcnRzL3Byb2ZpdGFuZGxvc3MnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2ZEYXRhLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgICAgY29uc3QgY2ZCb2R5TGVuZ3RoID0gSlNPTi5zdHJpbmdpZnkoY2ZEYXRhLnZhbHVlIHx8IHt9KS5sZW5ndGg7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhgICBDYXNoIEZsb3c6IOKchSBTVUNDRVNTLCBib2R5IGxlbmd0aDogJHtjZkJvZHlMZW5ndGh9IGJ5dGVzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgIENhc2ggRmxvdzog4p2MIEZBSUxFRCwgZXJyb3I6ICR7Y2ZEYXRhLnJlYXNvbn1gKTtcbiAgICAgICAgaWYgKGNmRGF0YS5yZWFzb24/LnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJyAgSW52YWxpZCBlbmRwb2ludCAtIGNoZWNrIFpvaG8gQVBJIGRvY3MgZm9yIHJlcG9ydHMvY2FzaGZsb3cnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYnNEYXRhLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgICAgY29uc3QgYnNCb2R5TGVuZ3RoID0gSlNPTi5zdHJpbmdpZnkoYnNEYXRhLnZhbHVlIHx8IHt9KS5sZW5ndGg7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhgICBCYWxhbmNlIFNoZWV0OiDinIUgU1VDQ0VTUywgYm9keSBsZW5ndGg6ICR7YnNCb2R5TGVuZ3RofSBieXRlc2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgICBCYWxhbmNlIFNoZWV0OiDinYwgRkFJTEVELCBlcnJvcjogJHtic0RhdGEucmVhc29ufWApO1xuICAgICAgICBpZiAoYnNEYXRhLnJlYXNvbj8ucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignICBJbnZhbGlkIGVuZHBvaW50IC0gY2hlY2sgWm9obyBBUEkgZG9jcyBmb3IgcmVwb3J0cy9iYWxhbmNlc2hlZXQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWN0IGZpbmFuY2lhbCBtZXRyaWNzIGZyb20gdGhlIHJlc3BvbnNlcyB3aXRoIGZhbGxiYWNrc1xuICAgICAgY29uc3QgcmV2ZW51ZSA9IHBsRGF0YS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gKHBsRGF0YS52YWx1ZT8ucmV2ZW51ZT8udG90YWwgfHwgMCkgOiAwO1xuICAgICAgY29uc3QgZXhwZW5zZXMgPSBwbERhdGEuc3RhdHVzID09PSAnZnVsZmlsbGVkJyA/IChwbERhdGEudmFsdWU/LmV4cGVuc2VzPy50b3RhbCB8fCAwKSA6IDA7XG4gICAgICBjb25zdCBncm9zc1Byb2ZpdCA9IHJldmVudWUgLSBleHBlbnNlcztcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIG5ldCBwcm9maXQgKG1heSBuZWVkIGFkanVzdG1lbnQgYmFzZWQgb24gYWN0dWFsIFpvaG8gcmVzcG9uc2Ugc3RydWN0dXJlKVxuICAgICAgY29uc3Qgb3BlcmF0aW5nRXhwZW5zZXMgPSBwbERhdGEuc3RhdHVzID09PSAnZnVsZmlsbGVkJyA/IChwbERhdGEudmFsdWU/Lm9wZXJhdGluZ19leHBlbnNlcz8udG90YWwgfHwgMCkgOiAwO1xuICAgICAgY29uc3QgbmV0UHJvZml0ID0gZ3Jvc3NQcm9maXQgLSBvcGVyYXRpbmdFeHBlbnNlcztcbiAgICAgIGNvbnN0IG9wZXJhdGluZ0luY29tZSA9IGdyb3NzUHJvZml0IC0gb3BlcmF0aW5nRXhwZW5zZXM7XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgY2FzaCBmbG93IGRhdGFcbiAgICAgIGNvbnN0IGNhc2hGbG93ID0gY2ZEYXRhLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgPyAoY2ZEYXRhLnZhbHVlPy5uZXRfY2FzaF9mbG93IHx8IDApIDogMDtcbiAgICAgIGNvbnN0IGFjY291bnRzUmVjZWl2YWJsZSA9IGJzRGF0YS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gKGJzRGF0YS52YWx1ZT8uY3VycmVudF9hc3NldHM/LmFjY291bnRzX3JlY2VpdmFibGUgfHwgMCkgOiAwO1xuICAgICAgY29uc3QgYWNjb3VudHNQYXlhYmxlID0gYnNEYXRhLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgPyAoYnNEYXRhLnZhbHVlPy5jdXJyZW50X2xpYWJpbGl0aWVzPy5hY2NvdW50c19wYXlhYmxlIHx8IDApIDogMDtcbiAgICAgIGNvbnN0IGNhc2hCYWxhbmNlID0gYnNEYXRhLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcgPyAoYnNEYXRhLnZhbHVlPy5jdXJyZW50X2Fzc2V0cz8uY2FzaF9hbmRfYmFuayB8fCAwKSA6IDA7XG5cbiAgICAgIC8vIExvZyB3aGljaCBkYXRhIHNvdXJjZXMgc3VjY2VlZGVkL2ZhaWxlZFxuICAgICAgY29uc29sZS5pbmZvKCfwn5OKIEZpbmFuY2lhbCBtZXRyaWNzIGRhdGEgc291cmNlczonLCB7XG4gICAgICAgIHByb2ZpdExvc3M6IHBsRGF0YS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gJ+KchScgOiAn4p2MJyxcbiAgICAgICAgY2FzaEZsb3c6IGNmRGF0YS5zdGF0dXMgPT09ICdmdWxmaWxsZWQnID8gJ+KchScgOiAn4p2MJyxcbiAgICAgICAgYmFsYW5jZVNoZWV0OiBic0RhdGEuc3RhdHVzID09PSAnZnVsZmlsbGVkJyA/ICfinIUnIDogJ+KdjCdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocGxEYXRhLnN0YXR1cyA9PT0gJ3JlamVjdGVkJykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBQcm9maXQgJiBMb3NzIGRhdGEgZmFpbGVkOicsIHBsRGF0YS5yZWFzb24pO1xuICAgICAgfVxuICAgICAgaWYgKGNmRGF0YS5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQ2FzaCBGbG93IGRhdGEgZmFpbGVkOicsIGNmRGF0YS5yZWFzb24pO1xuICAgICAgfVxuICAgICAgaWYgKGJzRGF0YS5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQmFsYW5jZSBTaGVldCBkYXRhIGZhaWxlZDonLCBic0RhdGEucmVhc29uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmV2ZW51ZSxcbiAgICAgICAgZXhwZW5zZXMsXG4gICAgICAgIGdyb3NzUHJvZml0LFxuICAgICAgICBuZXRQcm9maXQsXG4gICAgICAgIG9wZXJhdGluZ0luY29tZSxcbiAgICAgICAgY2FzaEZsb3csXG4gICAgICAgIGFjY291bnRzUmVjZWl2YWJsZSxcbiAgICAgICAgYWNjb3VudHNQYXlhYmxlLFxuICAgICAgICBjYXNoQmFsYW5jZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIGZpbmFuY2lhbCBtZXRyaWNzOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUud2Fybign8J+OrSBSZXR1cm5pbmcgZGVmYXVsdCBmaW5hbmNpYWwgbWV0cmljcyBkdWUgdG8gQVBJIGZhaWx1cmUnKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGRlZmF1bHQgdmFsdWVzIGlmIEFQSSBjYWxscyBmYWlsXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXZlbnVlOiAwLFxuICAgICAgICBleHBlbnNlczogMCxcbiAgICAgICAgZ3Jvc3NQcm9maXQ6IDAsXG4gICAgICAgIG5ldFByb2ZpdDogMCxcbiAgICAgICAgb3BlcmF0aW5nSW5jb21lOiAwLFxuICAgICAgICBjYXNoRmxvdzogMCxcbiAgICAgICAgYWNjb3VudHNSZWNlaXZhYmxlOiAwLFxuICAgICAgICBhY2NvdW50c1BheWFibGU6IDAsXG4gICAgICAgIGNhc2hCYWxhbmNlOiAwXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBtYW51YWxseSByZWZyZXNoIHRva2VuIChmb3IgdGVzdGluZylcbiAgYXN5bmMgZm9yY2VSZWZyZXNoVG9rZW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcbiAgICB0aGlzLnRva2VuRXhwaXJ5ID0gMDtcbiAgICB0aGlzLmxhc3RSZWZyZXNoVGltZSA9IERhdGUubm93KCk7IC8vIFRyYWNrIG1hbnVhbCByZWZyZXNoIHRpbWVcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuICB9XG5cbiAgLy8gR2V0IHRva2VuIHN0YXR1cyBmb3IgZGVidWdnaW5nXG4gIGdldFRva2VuU3RhdHVzKCk6IHsgaGFzVG9rZW46IGJvb2xlYW47IGV4cGlyZXNJbjogbnVtYmVyOyBpc0V4cGlyZWQ6IGJvb2xlYW4gfSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4ge1xuICAgICAgaGFzVG9rZW46ICEhdGhpcy5hY2Nlc3NUb2tlbixcbiAgICAgIGV4cGlyZXNJbjogdGhpcy50b2tlbkV4cGlyeSAtIG5vdyxcbiAgICAgIGlzRXhwaXJlZDogbm93ID49IHRoaXMudG9rZW5FeHBpcnksXG4gICAgfTtcbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBnZXQgYXV0by1yZWZyZXNoIHN0YXR1c1xuICBnZXRBdXRvUmVmcmVzaFN0YXR1cygpOiB7IGlzQWN0aXZlOiBib29sZWFuOyBuZXh0UmVmcmVzaEluOiBudW1iZXIgfSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB0aW1lU2luY2VMYXN0UmVmcmVzaCA9IG5vdyAtIHRoaXMubGFzdFJlZnJlc2hUaW1lO1xuICAgIGNvbnN0IG5leHRSZWZyZXNoSW4gPSBNYXRoLm1heCgwLCB0aGlzLkFVVE9fUkVGUkVTSF9JTlRFUlZBTCAtIHRpbWVTaW5jZUxhc3RSZWZyZXNoKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaXNBY3RpdmU6ICEhdGhpcy5hdXRvUmVmcmVzaFRpbWVyLFxuICAgICAgbmV4dFJlZnJlc2hJbixcbiAgICB9O1xuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZCB0byBzdGFydCBhdXRvLXJlZnJlc2hcbiAgZW5hYmxlQXV0b1JlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5fc3RhcnRBdXRvUmVmcmVzaCgpO1xuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZCB0byBzdG9wIGF1dG8tcmVmcmVzaFxuICBkaXNhYmxlQXV0b1JlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5fc3RvcEF1dG9SZWZyZXNoKCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGdldCBjb21wcmVoZW5zaXZlIHN0YXR1c1xuICBnZXRTdGF0dXMoKTogeyBcbiAgICBoYXNUb2tlbjogYm9vbGVhbjsgXG4gICAgZXhwaXJlc0luOiBudW1iZXI7IFxuICAgIGlzRXhwaXJlZDogYm9vbGVhbjtcbiAgICBhdXRvUmVmcmVzaDogeyBpc0FjdGl2ZTogYm9vbGVhbjsgbmV4dFJlZnJlc2hJbjogbnVtYmVyIH07XG4gIH0ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLmdldFRva2VuU3RhdHVzKCksXG4gICAgICBhdXRvUmVmcmVzaDogdGhpcy5nZXRBdXRvUmVmcmVzaFN0YXR1cygpLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHpvaG9TZXJ2aWNlID0gbmV3IFpvaG9TZXJ2aWNlKCk7IFxuXG4vLyBFeHBvcnQgdGhlIGZ1bmN0aW9ucyB0aGF0IGFyZSBiZWluZyBpbXBvcnRlZCBpbiBwYWdlLnRzeFxuZXhwb3J0IGNvbnN0IGZldGNoUHJvamVjdHMgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ0NsaWVudDogRmV0Y2hpbmcgcHJvamVjdHMgZnJvbSBBUEknKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Byb2plY3RzJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5sb2coJ0NsaWVudDogU3VjY2Vzc2Z1bGx5IGZldGNoZWQnLCByZXN1bHQuY291bnQsICdwcm9qZWN0cycpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDbGllbnQ6IEFQSSByZXR1cm5lZCBlcnJvcjonLCByZXN1bHQuZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0NsaWVudDogRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hJbnZvaWNlcyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnQ2xpZW50OiBGZXRjaGluZyBpbnZvaWNlcyBmcm9tIEFQSScpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvaW52b2ljZXMnKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xpZW50OiBTdWNjZXNzZnVsbHkgZmV0Y2hlZCcsIHJlc3VsdC5jb3VudCwgJ2ludm9pY2VzJyk7XG4gICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NsaWVudDogQVBJIHJldHVybmVkIGVycm9yOicsIHJlc3VsdC5lcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2xpZW50OiBFcnJvciBmZXRjaGluZyBpbnZvaWNlczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07ICJdLCJuYW1lcyI6WyJheGlvcyIsIlpvaG9TZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhY2Nlc3NUb2tlbiIsInRva2VuRXhwaXJ5IiwicmVmcmVzaFByb21pc2UiLCJUT0tFTl9SRUZSRVNIX0JVRkZFUiIsImF1dG9SZWZyZXNoVGltZXIiLCJBVVRPX1JFRlJFU0hfSU5URVJWQUwiLCJsYXN0UmVmcmVzaFRpbWUiLCJBQ0NPVU5UU19CQVNFIiwicHJvY2VzcyIsImVudiIsIlpPSE9fQUNDT1VOVFNfQkFTRSIsIkFQSV9CQVNFIiwiWk9IT19BUElfQkFTRSIsIm9yZ2FuaXphdGlvblZhbGlkYXRlZCIsInJlcXVlc3RDb3VudCIsImxhc3RSZXF1ZXN0VGltZSIsIk1BWF9SRVFVRVNUU19QRVJfTUlOVVRFIiwiTUlOX1JFUVVFU1RfSU5URVJWQUwiLCJyZXRyeUNvdW50IiwiTUFYX1JFVFJJRVMiLCJCQVNFX0RFTEFZIiwiX3N0YXJ0QXV0b1JlZnJlc2giLCJjb25zb2xlIiwibG9nIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiRGF0ZSIsIm5vdyIsImZvcmNlUmVmcmVzaFRva2VuIiwiZXJyb3IiLCJfc3RvcEF1dG9SZWZyZXNoIiwiZ2V0QWNjZXNzVG9rZW4iLCJaT0hPX0NMSUVOVF9JRCIsIlpPSE9fQ0xJRU5UX1NFQ1JFVCIsIlpPSE9fUkVGUkVTSF9UT0tFTiIsIm1pc3NpbmdWYXJzIiwicHVzaCIsIkVycm9yIiwiam9pbiIsIl9wZXJmb3JtVG9rZW5SZWZyZXNoV2l0aEJhY2tvZmYiLCJ0b2tlbiIsImlzQXhpb3NFcnJvciIsInN0YXR1cyIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsImRhdGEiLCJtZXNzYWdlIiwibWF4QXR0ZW1wdHMiLCJhdHRlbXB0IiwiZm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJwb3N0IiwiaGVhZGVycyIsInRpbWVvdXQiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwiTWF0aCIsInJvdW5kIiwic2NvcGVJbmZvIiwiY2hlY2tUb2tlblNjb3BlcyIsInNjb3BlIiwiaW5jbHVkZXMiLCJ3YXJuIiwic2NvcGVFcnIiLCJlcnIiLCJpc0F4aW9zIiwidW5kZWZpbmVkIiwiZGVzY3JpcHRpb24iLCJlcnJvcl9kZXNjcmlwdGlvbiIsInRvTG93ZXJDYXNlIiwiZGVsYXlNcyIsImZsb29yIiwicmFuZG9tIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVmcmVzaEFjY2Vzc1Rva2VuIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludCIsImFwcGx5UmF0ZUxpbWl0Iiwic3RhcnRzV2l0aCIsInZhbGlkYXRlT3JnYW5pemF0aW9uIiwiaW5mbyIsInN1YnN0cmluZyIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJhYm9ydCIsImdldCIsInBhcmFtcyIsIm9yZ2FuaXphdGlvbl9pZCIsIlpPSE9fT1JHQU5JWkFUSU9OX0lEIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwiYXhpb3NFcnJvciIsImNvZGUiLCJoYW5kbGVSYXRlTGltaXQiLCJuZXdUb2tlbiIsInJldHJ5UmVzcG9uc2UiLCJyZWZyZXNoRXJyb3IiLCJ1cmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXMiLCJtc2ciLCJTdHJpbmciLCJKU09OIiwic3RyaW5naWZ5Iiwib3JnSWQiLCJvcmdzIiwib3JnYW5pemF0aW9ucyIsImZvdW5kIiwic29tZSIsIm8iLCJ0aW1lU2luY2VMYXN0UmVxdWVzdCIsIndhaXRUaW1lIiwidGltZVNpbmNlRmlyc3RSZXF1ZXN0IiwiZGVsYXkiLCJwb3ciLCJqaXR0ZXIiLCJ0b3RhbERlbGF5IiwiZ2V0UHJvamVjdHMiLCJhbGxQcm9qZWN0cyIsInBhZ2UiLCJwZXJQYWdlIiwicHJvamVjdHMiLCJtYXAiLCJwcm9qZWN0IiwibGVuZ3RoIiwicHJvamVjdF9pZCIsInByb2plY3RfbmFtZSIsIm5hbWUiLCJzdGFydF9kYXRlIiwiZW5kX2RhdGUiLCJidWRnZXRfYW1vdW50IiwicmF0ZV9wZXJfaG91ciIsImN1c3RvbWVyX2lkIiwiY3VzdG9tZXJfbmFtZSIsInNpZ25lZF9mZWUiLCJjb25jYXQiLCJnZXRQcm9qZWN0c1dpdGhSZXZlbnVlQnVkZ2V0IiwicHJvamVjdHNXaXRoUmV2ZW51ZUJ1ZGdldCIsImZpbHRlciIsImhhc1JldmVudWVCdWRnZXQiLCJkZWJ1Z1Byb2plY3RGaWVsZHMiLCJzYW1wbGVQcm9qZWN0IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJyZXZlbnVlX2J1ZGdldCIsImdldFByb2plY3RzV2l0aEVzdGltYXRlcyIsInByb2plY3RzV2l0aEVzdGltYXRlcyIsImFsbCIsInNsaWNlIiwiZXN0aW1hdGVzIiwiZ2V0UHJvamVjdEVzdGltYXRlcyIsInRvdGFsRXN0aW1hdGVBbW91bnQiLCJyZWR1Y2UiLCJzdW0iLCJlc3RpbWF0ZSIsInRvdGFsIiwiZ2V0UHJvamVjdHNXaXRoSW52b2ljZVRvdGFscyIsImludm9pY2VzIiwiZ2V0SW52b2ljZXMiLCJwcm9qZWN0c1dpdGhJbnZvaWNlVG90YWxzIiwicHJvamVjdEludm9pY2VzIiwiaW52b2ljZSIsInRvdGFsSW52b2ljZUFtb3VudCIsImFtb3VudCIsImludm9pY2VfaWQiLCJpbnZvaWNlX251bWJlciIsImRhdGUiLCJiaWxsZWRfYW1vdW50IiwidW5iaWxsZWRfYW1vdW50IiwiZ2V0UHJvamVjdEludm9pY2VzIiwicHJvamVjdElkIiwiZ2V0UHJvamVjdERldGFpbHMiLCJnZXRQcm9qZWN0Q29udHJhY3RzIiwiY29udHJhY3RzIiwiZ2V0UHJvZml0QW5kTG9zcyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJzaXplQnl0ZXMiLCJnZXRDYXNoRmxvdyIsImdldEJhbGFuY2VTaGVldCIsImdldENoYXJ0T2ZBY2NvdW50cyIsImNoYXJ0b2ZhY2NvdW50cyIsImdldEpvdXJuYWxFbnRyaWVzIiwiam91cm5hbGVudHJpZXMiLCJnZXRGaW5hbmNpYWxNZXRyaWNzIiwicGxEYXRhIiwiY2ZEYXRhIiwiYnNEYXRhIiwiYWxsU2V0dGxlZCIsInBsQm9keUxlbmd0aCIsInZhbHVlIiwicmVhc29uIiwiY2ZCb2R5TGVuZ3RoIiwiYnNCb2R5TGVuZ3RoIiwicmV2ZW51ZSIsImV4cGVuc2VzIiwiZ3Jvc3NQcm9maXQiLCJvcGVyYXRpbmdFeHBlbnNlcyIsIm9wZXJhdGluZ19leHBlbnNlcyIsIm5ldFByb2ZpdCIsIm9wZXJhdGluZ0luY29tZSIsImNhc2hGbG93IiwibmV0X2Nhc2hfZmxvdyIsImFjY291bnRzUmVjZWl2YWJsZSIsImN1cnJlbnRfYXNzZXRzIiwiYWNjb3VudHNfcmVjZWl2YWJsZSIsImFjY291bnRzUGF5YWJsZSIsImN1cnJlbnRfbGlhYmlsaXRpZXMiLCJhY2NvdW50c19wYXlhYmxlIiwiY2FzaEJhbGFuY2UiLCJjYXNoX2FuZF9iYW5rIiwicHJvZml0TG9zcyIsImJhbGFuY2VTaGVldCIsImdldFRva2VuU3RhdHVzIiwiaGFzVG9rZW4iLCJleHBpcmVzSW4iLCJpc0V4cGlyZWQiLCJnZXRBdXRvUmVmcmVzaFN0YXR1cyIsInRpbWVTaW5jZUxhc3RSZWZyZXNoIiwibmV4dFJlZnJlc2hJbiIsIm1heCIsImlzQWN0aXZlIiwiZW5hYmxlQXV0b1JlZnJlc2giLCJkaXNhYmxlQXV0b1JlZnJlc2giLCJnZXRTdGF0dXMiLCJhdXRvUmVmcmVzaCIsInpvaG9TZXJ2aWNlIiwiZmV0Y2hQcm9qZWN0cyIsImZldGNoIiwicmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJjb3VudCIsImZldGNoSW52b2ljZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/zoho.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/axios","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/get-proto","vendor-chunks/mime-db","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/supports-color","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhomepage-dashboard%2Froute&page=%2Fapi%2Fhomepage-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhomepage-dashboard%2Froute.ts&appDir=%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();