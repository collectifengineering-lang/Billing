"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/top-projects/route";
exports.ids = ["app/api/top-projects/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftop-projects%2Froute&page=%2Fapi%2Ftop-projects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftop-projects%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftop-projects%2Froute&page=%2Fapi%2Ftop-projects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftop-projects%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Jonathan_Desktop_Billing_app_api_top_projects_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/top-projects/route.ts */ \"(rsc)/./app/api/top-projects/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/top-projects/route\",\n        pathname: \"/api/top-projects\",\n        filename: \"route\",\n        bundlePath: \"app/api/top-projects/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Jonathan\\\\Desktop\\\\Billing\\\\app\\\\api\\\\top-projects\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Jonathan_Desktop_Billing_app_api_top_projects_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/top-projects/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0b3AtcHJvamVjdHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRvcC1wcm9qZWN0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRvcC1wcm9qZWN0cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNKb25hdGhhbiU1Q0Rlc2t0b3AlNUNCaWxsaW5nJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNKb25hdGhhbiU1Q0Rlc2t0b3AlNUNCaWxsaW5nJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QjtBQUNwRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8/NDgyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxKb25hdGhhblxcXFxEZXNrdG9wXFxcXEJpbGxpbmdcXFxcYXBwXFxcXGFwaVxcXFx0b3AtcHJvamVjdHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RvcC1wcm9qZWN0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RvcC1wcm9qZWN0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdG9wLXByb2plY3RzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcSm9uYXRoYW5cXFxcRGVza3RvcFxcXFxCaWxsaW5nXFxcXGFwcFxcXFxhcGlcXFxcdG9wLXByb2plY3RzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90b3AtcHJvamVjdHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftop-projects%2Froute&page=%2Fapi%2Ftop-projects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftop-projects%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/top-projects/route.ts":
/*!***************************************!*\
  !*** ./app/api/top-projects/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_zoho__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/zoho */ \"(rsc)/./lib/zoho.ts\");\n/* harmony import */ var _lib_clockify__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/clockify */ \"(rsc)/./lib/clockify.ts\");\n\n\n\n// Force dynamic rendering to prevent static generation errors\nconst dynamic = \"force-dynamic\";\nasync function GET(request) {\n    try {\n        console.log(\"\\uD83D\\uDE80 Top Projects API called - starting data collection...\");\n        const now = new Date();\n        const currentYear = now.getFullYear();\n        const currentYearStart = new Date(currentYear, 0, 1);\n        console.log(\"\\uD83D\\uDCC5 Date range calculated:\", {\n            currentYear,\n            currentYearStart: currentYearStart.toISOString()\n        });\n        // Initialize data containers\n        let projects = [];\n        let invoices = [];\n        let clockifyData = null;\n        // Fetch Zoho data\n        try {\n            console.log(\"\\uD83D\\uDD04 Starting Zoho data fetch...\");\n            [projects, invoices] = await Promise.all([\n                _lib_zoho__WEBPACK_IMPORTED_MODULE_1__.zohoService.getProjects(),\n                _lib_zoho__WEBPACK_IMPORTED_MODULE_1__.zohoService.getInvoices()\n            ]);\n            console.log(\"âœ… Zoho data fetched:\", {\n                projectsCount: projects.length,\n                invoicesCount: invoices.length\n            });\n        } catch (error) {\n            console.error(\"âŒ Failed to fetch Zoho data:\", error);\n            projects = [];\n            invoices = [];\n        }\n        // Fetch Clockify data for time tracking\n        try {\n            console.log(\"\\uD83D\\uDD04 Starting Clockify data fetch...\");\n            const clockifyConfig = _lib_clockify__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConfigurationStatus();\n            if (clockifyConfig.configured) {\n                console.log(\"â° Clockify configured, fetching real data...\");\n                const timeEntries = await _lib_clockify__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getAllTimeEntries(currentYearStart.toISOString(), now.toISOString());\n                // Group time entries by project\n                const projectTimeMap = new Map();\n                timeEntries.forEach((entry)=>{\n                    const projectId = entry.projectId;\n                    if (!projectTimeMap.has(projectId)) {\n                        projectTimeMap.set(projectId, {\n                            totalHours: 0,\n                            billableHours: 0,\n                            nonBillableHours: 0\n                        });\n                    }\n                    const duration = entry.timeInterval?.duration || \"PT0H\";\n                    const hours = parseDuration(duration);\n                    const projectData = projectTimeMap.get(projectId);\n                    projectData.totalHours += hours;\n                    if (entry.billable) {\n                        projectData.billableHours += hours;\n                    } else {\n                        projectData.nonBillableHours += hours;\n                    }\n                });\n                clockifyData = projectTimeMap;\n                console.log(\"âœ… Clockify data processed for\", projectTimeMap.size, \"projects\");\n            } else {\n                console.log(\"\\uD83C\\uDFAD Clockify not configured, using mock data\");\n                clockifyData = new Map();\n            }\n        } catch (error) {\n            console.warn(\"âš ï¸ Failed to fetch Clockify data, using defaults:\", error);\n            clockifyData = new Map();\n        }\n        // Calculate project performance metrics\n        const projectMetrics = projects.filter((p)=>p.status === \"active\").map((project)=>{\n            // Get invoice data for this project\n            const projectInvoices = invoices.filter((inv)=>inv.project_id === project.project_id);\n            const totalRevenue = projectInvoices.reduce((sum, inv)=>sum + (inv.total || 0), 0);\n            // Get time tracking data for this project\n            const projectTimeData = clockifyData.get(project.project_id) || {\n                totalHours: 0,\n                billableHours: 0,\n                nonBillableHours: 0\n            };\n            // Calculate efficiency\n            const efficiency = projectTimeData.totalHours > 0 ? projectTimeData.billableHours / projectTimeData.totalHours : 0.85; // Default efficiency\n            // Calculate hourly rate (use project rate or default)\n            const hourlyRate = project.rate_per_hour || 125;\n            // Calculate project cost (estimated based on hours and rate)\n            const estimatedCost = projectTimeData.totalHours * hourlyRate;\n            // Calculate multiplier (revenue/cost ratio) - higher is better\n            const multiplier = estimatedCost > 0 ? totalRevenue / estimatedCost : 0;\n            return {\n                id: project.project_id,\n                name: project.project_code || project.project_name,\n                customer: project.customer_name,\n                status: project.status,\n                startDate: project.start_date,\n                budget: project.budget_amount || totalRevenue * 1.2,\n                billed: totalRevenue,\n                hours: projectTimeData.totalHours || Math.floor(Math.random() * 400) + 200,\n                efficiency: efficiency,\n                revenue: totalRevenue,\n                profitMargin: 0.25,\n                hourlyRate: hourlyRate,\n                billableHours: projectTimeData.billableHours || 0,\n                nonBillableHours: projectTimeData.nonBillableHours || 0,\n                multiplier: multiplier,\n                estimatedCost: estimatedCost\n            };\n        }).filter((project)=>project.revenue > 0 || project.hours > 0) // Only include projects with activity\n        .sort((a, b)=>b.multiplier - a.multiplier) // Sort by multiplier (highest first)\n        .slice(0, 10); // Top 10 projects\n        console.log(\"âœ… Top projects data generated for\", projectMetrics.length, \"projects\");\n        console.log(\"\\uD83D\\uDE80 Returning top projects data to client...\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: projectMetrics,\n            count: projectMetrics.length\n        });\n    } catch (error) {\n        console.error(\"âŒ Top Projects API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to generate top projects data\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to parse duration strings (e.g., \"PT2H30M\")\nfunction parseDuration(duration) {\n    if (!duration) return 0;\n    const regex = /PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/;\n    const match = duration.match(regex);\n    if (!match) return 0;\n    const hours = parseInt(match[1] || \"0\");\n    const minutes = parseInt(match[2] || \"0\");\n    const seconds = parseInt(match[3] || \"0\");\n    return hours + minutes / 60 + seconds / 3600;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTtJQUVyQyxPQUFPdEQsUUFBU3dELFVBQVUsS0FBT0MsVUFBVTtBQUM3QyIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8uL2FwcC9hcGkvdG9wLXByb2plY3RzL3JvdXRlLnRzPzU5ODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgem9ob1NlcnZpY2UgfSBmcm9tICdAL2xpYi96b2hvJztcclxuaW1wb3J0IGNsb2NraWZ5U2VydmljZSBmcm9tICdAL2xpYi9jbG9ja2lmeSc7XHJcblxyXG4vLyBGb3JjZSBkeW5hbWljIHJlbmRlcmluZyB0byBwcmV2ZW50IHN0YXRpYyBnZW5lcmF0aW9uIGVycm9yc1xyXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CfmoAgVG9wIFByb2plY3RzIEFQSSBjYWxsZWQgLSBzdGFydGluZyBkYXRhIGNvbGxlY3Rpb24uLi4nKTtcclxuICAgIFxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBjdXJyZW50WWVhclN0YXJ0ID0gbmV3IERhdGUoY3VycmVudFllYXIsIDAsIDEpO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn8J+ThSBEYXRlIHJhbmdlIGNhbGN1bGF0ZWQ6Jywge1xyXG4gICAgICBjdXJyZW50WWVhcixcclxuICAgICAgY3VycmVudFllYXJTdGFydDogY3VycmVudFllYXJTdGFydC50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXplIGRhdGEgY29udGFpbmVyc1xyXG4gICAgbGV0IHByb2plY3RzOiBhbnlbXSA9IFtdO1xyXG4gICAgbGV0IGludm9pY2VzOiBhbnlbXSA9IFtdO1xyXG4gICAgbGV0IGNsb2NraWZ5RGF0YTogYW55ID0gbnVsbDtcclxuXHJcbiAgICAvLyBGZXRjaCBab2hvIGRhdGFcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFN0YXJ0aW5nIFpvaG8gZGF0YSBmZXRjaC4uLicpO1xyXG4gICAgICBbcHJvamVjdHMsIGludm9pY2VzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB6b2hvU2VydmljZS5nZXRQcm9qZWN0cygpLFxyXG4gICAgICAgIHpvaG9TZXJ2aWNlLmdldEludm9pY2VzKClcclxuICAgICAgXSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgWm9obyBkYXRhIGZldGNoZWQ6JywgeyBwcm9qZWN0c0NvdW50OiBwcm9qZWN0cy5sZW5ndGgsIGludm9pY2VzQ291bnQ6IGludm9pY2VzLmxlbmd0aCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gZmV0Y2ggWm9obyBkYXRhOicsIGVycm9yKTtcclxuICAgICAgcHJvamVjdHMgPSBbXTtcclxuICAgICAgaW52b2ljZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBDbG9ja2lmeSBkYXRhIGZvciB0aW1lIHRyYWNraW5nXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBTdGFydGluZyBDbG9ja2lmeSBkYXRhIGZldGNoLi4uJyk7XHJcbiAgICAgIGNvbnN0IGNsb2NraWZ5Q29uZmlnID0gY2xvY2tpZnlTZXJ2aWNlLmdldENvbmZpZ3VyYXRpb25TdGF0dXMoKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChjbG9ja2lmeUNvbmZpZy5jb25maWd1cmVkKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KPsCBDbG9ja2lmeSBjb25maWd1cmVkLCBmZXRjaGluZyByZWFsIGRhdGEuLi4nKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0aW1lRW50cmllcyA9IGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRBbGxUaW1lRW50cmllcyhcclxuICAgICAgICAgIGN1cnJlbnRZZWFyU3RhcnQudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIG5vdy50b0lTT1N0cmluZygpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gR3JvdXAgdGltZSBlbnRyaWVzIGJ5IHByb2plY3RcclxuICAgICAgICBjb25zdCBwcm9qZWN0VGltZU1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aW1lRW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcclxuICAgICAgICAgIGNvbnN0IHByb2plY3RJZCA9IGVudHJ5LnByb2plY3RJZDtcclxuICAgICAgICAgIGlmICghcHJvamVjdFRpbWVNYXAuaGFzKHByb2plY3RJZCkpIHtcclxuICAgICAgICAgICAgcHJvamVjdFRpbWVNYXAuc2V0KHByb2plY3RJZCwge1xyXG4gICAgICAgICAgICAgIHRvdGFsSG91cnM6IDAsXHJcbiAgICAgICAgICAgICAgYmlsbGFibGVIb3VyczogMCxcclxuICAgICAgICAgICAgICBub25CaWxsYWJsZUhvdXJzOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGVudHJ5LnRpbWVJbnRlcnZhbD8uZHVyYXRpb24gfHwgJ1BUMEgnO1xyXG4gICAgICAgICAgY29uc3QgaG91cnMgPSBwYXJzZUR1cmF0aW9uKGR1cmF0aW9uKTtcclxuICAgICAgICAgIGNvbnN0IHByb2plY3REYXRhID0gcHJvamVjdFRpbWVNYXAuZ2V0KHByb2plY3RJZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHByb2plY3REYXRhLnRvdGFsSG91cnMgKz0gaG91cnM7XHJcbiAgICAgICAgICBpZiAoZW50cnkuYmlsbGFibGUpIHtcclxuICAgICAgICAgICAgcHJvamVjdERhdGEuYmlsbGFibGVIb3VycyArPSBob3VycztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb2plY3REYXRhLm5vbkJpbGxhYmxlSG91cnMgKz0gaG91cnM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNsb2NraWZ5RGF0YSA9IHByb2plY3RUaW1lTWFwO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2xvY2tpZnkgZGF0YSBwcm9jZXNzZWQgZm9yJywgcHJvamVjdFRpbWVNYXAuc2l6ZSwgJ3Byb2plY3RzJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjq0gQ2xvY2tpZnkgbm90IGNvbmZpZ3VyZWQsIHVzaW5nIG1vY2sgZGF0YScpO1xyXG4gICAgICAgIGNsb2NraWZ5RGF0YSA9IG5ldyBNYXAoKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRmFpbGVkIHRvIGZldGNoIENsb2NraWZ5IGRhdGEsIHVzaW5nIGRlZmF1bHRzOicsIGVycm9yKTtcclxuICAgICAgY2xvY2tpZnlEYXRhID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBwcm9qZWN0IHBlcmZvcm1hbmNlIG1ldHJpY3NcclxuICAgIGNvbnN0IHByb2plY3RNZXRyaWNzID0gcHJvamVjdHNcclxuICAgICAgLmZpbHRlcihwID0+IHAuc3RhdHVzID09PSAnYWN0aXZlJylcclxuICAgICAgLm1hcChwcm9qZWN0ID0+IHtcclxuICAgICAgICAvLyBHZXQgaW52b2ljZSBkYXRhIGZvciB0aGlzIHByb2plY3RcclxuICAgICAgICBjb25zdCBwcm9qZWN0SW52b2ljZXMgPSBpbnZvaWNlcy5maWx0ZXIoaW52ID0+IGludi5wcm9qZWN0X2lkID09PSBwcm9qZWN0LnByb2plY3RfaWQpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IHByb2plY3RJbnZvaWNlcy5yZWR1Y2UoKHN1bSwgaW52KSA9PiBzdW0gKyAoaW52LnRvdGFsIHx8IDApLCAwKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBHZXQgdGltZSB0cmFja2luZyBkYXRhIGZvciB0aGlzIHByb2plY3RcclxuICAgICAgICBjb25zdCBwcm9qZWN0VGltZURhdGEgPSBjbG9ja2lmeURhdGEuZ2V0KHByb2plY3QucHJvamVjdF9pZCkgfHwge1xyXG4gICAgICAgICAgdG90YWxIb3VyczogMCxcclxuICAgICAgICAgIGJpbGxhYmxlSG91cnM6IDAsXHJcbiAgICAgICAgICBub25CaWxsYWJsZUhvdXJzOiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDYWxjdWxhdGUgZWZmaWNpZW5jeVxyXG4gICAgICAgIGNvbnN0IGVmZmljaWVuY3kgPSBwcm9qZWN0VGltZURhdGEudG90YWxIb3VycyA+IDAgXHJcbiAgICAgICAgICA/IHByb2plY3RUaW1lRGF0YS5iaWxsYWJsZUhvdXJzIC8gcHJvamVjdFRpbWVEYXRhLnRvdGFsSG91cnMgXHJcbiAgICAgICAgICA6IDAuODU7IC8vIERlZmF1bHQgZWZmaWNpZW5jeVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBob3VybHkgcmF0ZSAodXNlIHByb2plY3QgcmF0ZSBvciBkZWZhdWx0KVxyXG4gICAgICAgIGNvbnN0IGhvdXJseVJhdGUgPSBwcm9qZWN0LnJhdGVfcGVyX2hvdXIgfHwgMTI1O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBwcm9qZWN0IGNvc3QgKGVzdGltYXRlZCBiYXNlZCBvbiBob3VycyBhbmQgcmF0ZSlcclxuICAgICAgICBjb25zdCBlc3RpbWF0ZWRDb3N0ID0gcHJvamVjdFRpbWVEYXRhLnRvdGFsSG91cnMgKiBob3VybHlSYXRlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBtdWx0aXBsaWVyIChyZXZlbnVlL2Nvc3QgcmF0aW8pIC0gaGlnaGVyIGlzIGJldHRlclxyXG4gICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlc3RpbWF0ZWRDb3N0ID4gMCA/IHRvdGFsUmV2ZW51ZSAvIGVzdGltYXRlZENvc3QgOiAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpZDogcHJvamVjdC5wcm9qZWN0X2lkLFxyXG4gICAgICAgICAgbmFtZTogcHJvamVjdC5wcm9qZWN0X2NvZGUgfHwgcHJvamVjdC5wcm9qZWN0X25hbWUsXHJcbiAgICAgICAgICBjdXN0b21lcjogcHJvamVjdC5jdXN0b21lcl9uYW1lLFxyXG4gICAgICAgICAgc3RhdHVzOiBwcm9qZWN0LnN0YXR1cyxcclxuICAgICAgICAgIHN0YXJ0RGF0ZTogcHJvamVjdC5zdGFydF9kYXRlLFxyXG4gICAgICAgICAgYnVkZ2V0OiBwcm9qZWN0LmJ1ZGdldF9hbW91bnQgfHwgdG90YWxSZXZlbnVlICogMS4yLCAvLyBFc3RpbWF0ZSBidWRnZXQgaWYgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgICAgYmlsbGVkOiB0b3RhbFJldmVudWUsXHJcbiAgICAgICAgICBob3VyczogcHJvamVjdFRpbWVEYXRhLnRvdGFsSG91cnMgfHwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDAwKSArIDIwMCwgLy8gRmFsbGJhY2sgdG8gbW9jayBkYXRhXHJcbiAgICAgICAgICBlZmZpY2llbmN5OiBlZmZpY2llbmN5LFxyXG4gICAgICAgICAgcmV2ZW51ZTogdG90YWxSZXZlbnVlLFxyXG4gICAgICAgICAgcHJvZml0TWFyZ2luOiAwLjI1LCAvLyBEZWZhdWx0IHByb2ZpdCBtYXJnaW5cclxuICAgICAgICAgIGhvdXJseVJhdGU6IGhvdXJseVJhdGUsXHJcbiAgICAgICAgICBiaWxsYWJsZUhvdXJzOiBwcm9qZWN0VGltZURhdGEuYmlsbGFibGVIb3VycyB8fCAwLFxyXG4gICAgICAgICAgbm9uQmlsbGFibGVIb3VyczogcHJvamVjdFRpbWVEYXRhLm5vbkJpbGxhYmxlSG91cnMgfHwgMCxcclxuICAgICAgICAgIG11bHRpcGxpZXI6IG11bHRpcGxpZXIsXHJcbiAgICAgICAgICBlc3RpbWF0ZWRDb3N0OiBlc3RpbWF0ZWRDb3N0XHJcbiAgICAgICAgfTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QucmV2ZW51ZSA+IDAgfHwgcHJvamVjdC5ob3VycyA+IDApIC8vIE9ubHkgaW5jbHVkZSBwcm9qZWN0cyB3aXRoIGFjdGl2aXR5XHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLm11bHRpcGxpZXIgLSBhLm11bHRpcGxpZXIpIC8vIFNvcnQgYnkgbXVsdGlwbGllciAoaGlnaGVzdCBmaXJzdClcclxuICAgICAgLnNsaWNlKDAsIDEwKTsgLy8gVG9wIDEwIHByb2plY3RzXHJcblxyXG4gICAgY29uc29sZS5sb2coJ+KchSBUb3AgcHJvamVjdHMgZGF0YSBnZW5lcmF0ZWQgZm9yJywgcHJvamVjdE1ldHJpY3MubGVuZ3RoLCAncHJvamVjdHMnKTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5qAIFJldHVybmluZyB0b3AgcHJvamVjdHMgZGF0YSB0byBjbGllbnQuLi4nKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiBwcm9qZWN0TWV0cmljcyxcclxuICAgICAgY291bnQ6IHByb2plY3RNZXRyaWNzLmxlbmd0aFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBUb3AgUHJvamVjdHMgQVBJIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSB0b3AgcHJvamVjdHMgZGF0YScsXHJcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIGR1cmF0aW9uIHN0cmluZ3MgKGUuZy4sIFwiUFQySDMwTVwiKVxyXG5mdW5jdGlvbiBwYXJzZUR1cmF0aW9uKGR1cmF0aW9uOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gIGlmICghZHVyYXRpb24pIHJldHVybiAwO1xyXG4gIFxyXG4gIGNvbnN0IHJlZ2V4ID0gL1BUKD86KFxcZCspSCk/KD86KFxcZCspTSk/KD86KFxcZCspUyk/LztcclxuICBjb25zdCBtYXRjaCA9IGR1cmF0aW9uLm1hdGNoKHJlZ2V4KTtcclxuICBcclxuICBpZiAoIW1hdGNoKSByZXR1cm4gMDtcclxuICBcclxuICBjb25zdCBob3VycyA9IHBhcnNlSW50KG1hdGNoWzFdIHx8ICcwJyk7XHJcbiAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KG1hdGNoWzJdIHx8ICcwJyk7XHJcbiAgY29uc3Qgc2Vjb25kcyA9IHBhcnNlSW50KG1hdGNoWzNdIHx8ICcwJyk7XHJcbiAgXHJcbiAgcmV0dXJuIGhvdXJzICsgKG1pbnV0ZXMgLyA2MCkgKyAoc2Vjb25kcyAvIDM2MDApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ6b2hvU2VydmljZSIsImNsb2NraWZ5U2VydmljZSIsImR5bmFtaWMiLCJHRVQiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsIm5vdyIsIkRhdGUiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwiY3VycmVudFllYXJTdGFydCIsInRvSVNPU3RyaW5nIiwicHJvamVjdHMiLCJpbnZvaWNlcyIsImNsb2NraWZ5RGF0YSIsIlByb21pc2UiLCJhbGwiLCJnZXRQcm9qZWN0cyIsImdldEludm9pY2VzIiwicHJvamVjdHNDb3VudCIsImxlbmd0aCIsImludm9pY2VzQ291bnQiLCJlcnJvciIsImNsb2NraWZ5Q29uZmlnIiwiZ2V0Q29uZmlndXJhdGlvblN0YXR1cyIsImNvbmZpZ3VyZWQiLCJ0aW1lRW50cmllcyIsImdldEFsbFRpbWVFbnRyaWVzIiwicHJvamVjdFRpbWVNYXAiLCJNYXAiLCJmb3JFYWNoIiwiZW50cnkiLCJwcm9qZWN0SWQiLCJoYXMiLCJzZXQiLCJ0b3RhbEhvdXJzIiwiYmlsbGFibGVIb3VycyIsIm5vbkJpbGxhYmxlSG91cnMiLCJkdXJhdGlvbiIsInRpbWVJbnRlcnZhbCIsImhvdXJzIiwicGFyc2VEdXJhdGlvbiIsInByb2plY3REYXRhIiwiZ2V0IiwiYmlsbGFibGUiLCJzaXplIiwid2FybiIsInByb2plY3RNZXRyaWNzIiwiZmlsdGVyIiwicCIsInN0YXR1cyIsIm1hcCIsInByb2plY3QiLCJwcm9qZWN0SW52b2ljZXMiLCJpbnYiLCJwcm9qZWN0X2lkIiwidG90YWxSZXZlbnVlIiwicmVkdWNlIiwic3VtIiwidG90YWwiLCJwcm9qZWN0VGltZURhdGEiLCJlZmZpY2llbmN5IiwiaG91cmx5UmF0ZSIsInJhdGVfcGVyX2hvdXIiLCJlc3RpbWF0ZWRDb3N0IiwibXVsdGlwbGllciIsImlkIiwibmFtZSIsInByb2plY3RfY29kZSIsInByb2plY3RfbmFtZSIsImN1c3RvbWVyIiwiY3VzdG9tZXJfbmFtZSIsInN0YXJ0RGF0ZSIsInN0YXJ0X2RhdGUiLCJidWRnZXQiLCJidWRnZXRfYW1vdW50IiwiYmlsbGVkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmV2ZW51ZSIsInByb2ZpdE1hcmdpbiIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiY291bnQiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIiwicmVnZXgiLCJtYXRjaCIsInBhcnNlSW50IiwibWludXRlcyIsInNlY29uZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/top-projects/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/clockify.ts":
/*!*************************!*\
  !*** ./lib/clockify.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clockifyService: () => (/* binding */ clockifyService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   fetchAllClockifyTimeSummaries: () => (/* binding */ fetchAllClockifyTimeSummaries),\n/* harmony export */   fetchClockifyProjects: () => (/* binding */ fetchClockifyProjects),\n/* harmony export */   fetchClockifyTimeEntries: () => (/* binding */ fetchClockifyTimeEntries),\n/* harmony export */   fetchClockifyTimeReport: () => (/* binding */ fetchClockifyTimeReport)\n/* harmony export */ });\nclass ClockifyService {\n    constructor(){\n        this.apiKey = null;\n        this.workspaceId = null;\n        this.baseUrl = \"https://api.clockify.me/api/v1\";\n        this._isConfigured = false;\n        this.apiKey = process.env.CLOCKIFY_API_KEY || null;\n        this.workspaceId = process.env.CLOCKIFY_WORKSPACE_ID || null;\n        // Check if we have valid credentials\n        if (this.apiKey && this.apiKey !== \"your_clockify_api_key_here\" && this.workspaceId && this.workspaceId !== \"your_clockify_workspace_id_here\") {\n            this._isConfigured = true;\n            console.log(\"Clockify service initialized with valid credentials\");\n        } else {\n            this._isConfigured = false;\n            console.warn(\"Clockify service initialized without valid credentials - will use mock data\");\n            console.warn(\"Please set CLOCKIFY_API_KEY and CLOCKIFY_WORKSPACE_ID in your environment variables\");\n        }\n    }\n    getHeaders() {\n        if (!this.apiKey) {\n            throw new Error(\"Clockify API key not configured\");\n        }\n        return {\n            \"X-Api-Key\": this.apiKey,\n            \"Content-Type\": \"application/json\"\n        };\n    }\n    async makeRequest(endpoint, params) {\n        if (!this._isConfigured) {\n            throw new Error(\"Clockify service not properly configured\");\n        }\n        try {\n            const url = new URL(`${this.baseUrl}${endpoint}`);\n            if (params) {\n                Object.keys(params).forEach((key)=>{\n                    if (params[key] !== undefined && params[key] !== null) {\n                        url.searchParams.append(key, params[key]);\n                    }\n                });\n            }\n            console.log(`ðŸ” Clockify API Request: ${url.toString()}`);\n            console.log(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            console.log(`ðŸ“¡ Clockify API Response: ${response.status} ${response.statusText}`);\n            if (response.status === 401) {\n                throw new Error(\"Clockify API authentication failed - check your API key\");\n            }\n            if (response.status === 403) {\n                throw new Error(\"Clockify API access forbidden - check your workspace ID and permissions\");\n            }\n            if (response.status === 404) {\n                const errorDetails = `Endpoint not found: ${endpoint}`;\n                console.error(`âŒ 404 Error Details: ${errorDetails}`);\n                console.error(`   Full URL: ${url.toString()}`);\n                console.error(`   Workspace ID: ${this.workspaceId}`);\n                console.error(`   API Key configured: ${!!this.apiKey}`);\n                throw new Error(`Clockify API error: 404 Not Found - ${errorDetails}`);\n            }\n            if (response.status === 429) {\n                throw new Error(\"Clockify API rate limit exceeded - try again later\");\n            }\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.log(`âœ… Clockify API Success: ${endpoint}`);\n            return data;\n        } catch (error) {\n            if (error instanceof Error) {\n                console.error(`âŒ Clockify API Error in ${endpoint}:`, error.message);\n                throw error;\n            }\n            throw new Error(`Clockify API request failed: ${error}`);\n        }\n    }\n    // Check if the service is properly configured\n    isConfigured() {\n        return this._isConfigured;\n    }\n    // Get configuration status for debugging\n    getConfigurationStatus() {\n        return {\n            configured: this._isConfigured,\n            hasApiKey: !!(this.apiKey && this.apiKey !== \"your_clockify_api_key_here\"),\n            hasWorkspaceId: !!(this.workspaceId && this.workspaceId !== \"your_clockify_workspace_id_here\")\n        };\n    }\n    // Alias for getConfigurationStatus to match API usage\n    getConfigStatus() {\n        return this.getConfigurationStatus();\n    }\n    // Method to set workspace ID dynamically\n    setWorkspaceId(workspaceId) {\n        this.workspaceId = workspaceId;\n        if (this.apiKey && this.apiKey !== \"your_clockify_api_key_here\") {\n            this._isConfigured = true;\n        }\n    }\n    async getUser() {\n        try {\n            if (!this._isConfigured) {\n                console.log(\"Clockify not configured, returning mock user\");\n                return this.getMockUser();\n            }\n            const url = new URL(`${this.baseUrl}/user`);\n            console.log(`ðŸ” Clockify API Request: ${url.toString()}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            if (!response.ok) {\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log(`âœ… Clockify API Success: /user`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get Clockify user:\", error);\n            console.log(\"Returning mock user due to Clockify API failure\");\n            return this.getMockUser();\n        }\n    }\n    async getWorkspaces() {\n        try {\n            return await this.makeRequest(\"/workspaces\");\n        } catch (error) {\n            console.error(\"Failed to get Clockify workspaces:\", error);\n            // Return mock workspace data when Clockify fails\n            return [\n                {\n                    id: \"mock-workspace-id\",\n                    name: \"Mock Workspace\",\n                    hourlyRate: {\n                        amount: 100,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getProjects() {\n        try {\n            if (!this._isConfigured) {\n                console.log(\"Clockify not configured, returning mock projects\");\n                return this.getMockProjects();\n            }\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/projects`);\n            console.log(`ðŸ” Clockify API Request: ${url.toString()}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            if (!response.ok) {\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log(`âœ… Clockify API Success: /workspaces/${this.workspaceId}/projects`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get Clockify projects:\", error);\n            console.log(\"Returning mock projects due to Clockify API failure\");\n            return this.getMockProjects();\n        }\n    }\n    async getTimeEntries(projectId, startDate, endDate) {\n        try {\n            if (!this._isConfigured) {\n                console.log(\"Clockify not configured, returning mock data\");\n                return this.getMockTimeEntries(projectId, startDate, endDate);\n            }\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/projects/${projectId}/time-entries`);\n            url.searchParams.append(\"start\", startDate);\n            url.searchParams.append(\"end\", endDate);\n            console.log(`ðŸ” Clockify API Request: ${url.toString()}`);\n            const response = await fetch(url.toString(), {\n                method: \"GET\",\n                headers: this.getHeaders()\n            });\n            if (!response.ok) {\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            console.log(`âœ… Clockify API Success: /workspaces/${this.workspaceId}/projects/${projectId}/time-entries`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get Clockify time entries:\", error);\n            console.log(\"Returning mock time entry data due to Clockify API failure\");\n            return this.getMockTimeEntries(projectId, startDate, endDate);\n        }\n    }\n    async getAllTimeEntries(startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            // Clockify API requires POST for filtered time entries with date parameters\n            const url = new URL(`${this.baseUrl}/workspaces/${this.workspaceId}/time-entries`);\n            console.log(`ðŸ” Clockify API Request: ${url.toString()}`);\n            console.log(`   Method: POST`);\n            console.log(`   Headers: ${JSON.stringify(this.getHeaders())}`);\n            console.log(`   Body: ${JSON.stringify({\n                start: startDate,\n                end: endDate\n            })}`);\n            const response = await fetch(url.toString(), {\n                method: \"POST\",\n                headers: {\n                    ...this.getHeaders(),\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    start: startDate,\n                    end: endDate\n                })\n            });\n            console.log(`ðŸ“¡ Clockify API Response: ${response.status} ${response.statusText}`);\n            if (response.status === 401) {\n                throw new Error(\"Clockify API authentication failed - check your API key\");\n            }\n            if (response.status === 403) {\n                throw new Error(\"Clockify API access forbidden - check your workspace ID and permissions\");\n            }\n            if (response.status === 404) {\n                const errorDetails = `Endpoint not found: /workspaces/${this.workspaceId}/time-entries`;\n                console.error(`âŒ 404 Error Details: ${errorDetails}`);\n                console.error(`   Full URL: ${url.toString()}`);\n                console.error(`   Workspace ID: ${this.workspaceId}`);\n                console.error(`   API Key configured: ${!!this.apiKey}`);\n                throw new Error(`Clockify API error: 404 Not Found - ${errorDetails}`);\n            }\n            if (response.status === 405) {\n                throw new Error(\"Clockify API method not allowed - this endpoint requires POST method\");\n            }\n            if (response.status === 429) {\n                throw new Error(\"Clockify API rate limit exceeded - try again later\");\n            }\n            if (!response.ok) {\n                const errorText = await response.text().catch(()=>\"Unknown error\");\n                throw new Error(`Clockify API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.log(`âœ… Clockify API Success: /workspaces/${this.workspaceId}/time-entries`);\n            return data;\n        } catch (error) {\n            console.error(\"Failed to get all Clockify time entries:\", error);\n            // Return mock time entry data when Clockify fails\n            console.log(\"Returning mock time entry data due to Clockify API failure\");\n            return [\n                {\n                    id: \"mock-time-entry-1\",\n                    description: \"Mock work session\",\n                    timeInterval: {\n                        start: startDate,\n                        end: endDate,\n                        duration: \"PT8H0M\"\n                    },\n                    billable: true,\n                    userId: \"mock-user-id\",\n                    userName: \"Mock User\",\n                    projectId: \"mock-project-1\",\n                    projectName: \"Mock Project 1\"\n                }\n            ];\n        }\n    }\n    async getUsers() {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            return await this.makeRequest(`/workspaces/${this.workspaceId}/users`);\n        } catch (error) {\n            console.error(\"Failed to get Clockify users:\", error);\n            // Return mock user data when Clockify fails\n            return [\n                {\n                    id: \"mock-user-1\",\n                    name: \"Mock User 1\",\n                    email: \"user1@example.com\",\n                    status: \"ACTIVE\",\n                    hourlyRate: {\n                        amount: 100,\n                        currency: \"USD\"\n                    }\n                },\n                {\n                    id: \"mock-user-2\",\n                    name: \"Mock User 2\",\n                    email: \"user2@example.com\",\n                    status: \"ACTIVE\",\n                    hourlyRate: {\n                        amount: 120,\n                        currency: \"USD\"\n                    }\n                }\n            ];\n        }\n    }\n    async getProjectTimeReport(projectId, startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const timeEntries = await this.getTimeEntries(projectId, startDate, endDate);\n            const project = await this.getProjects().then((projects)=>projects.find((p)=>p.id === projectId));\n            if (!project) {\n                throw new Error(\"Project not found\");\n            }\n            const totalHours = timeEntries.reduce((sum, entry)=>{\n                const duration = entry.timeInterval.duration;\n                const hours = this.parseDuration(duration);\n                return sum + hours;\n            }, 0);\n            const billableHours = timeEntries.filter((entry)=>entry.billable).reduce((sum, entry)=>{\n                const duration = entry.timeInterval.duration;\n                const hours = this.parseDuration(duration);\n                return sum + hours;\n            }, 0);\n            const nonBillableHours = totalHours - billableHours;\n            return {\n                projectId,\n                projectName: project.name,\n                totalHours,\n                billableHours,\n                nonBillableHours,\n                totalAmount: totalHours * (project.hourlyRate?.amount || 0),\n                billableAmount: billableHours * (project.hourlyRate?.amount || 0),\n                nonBillableAmount: nonBillableHours * (project.hourlyRate?.amount || 0),\n                entries: timeEntries,\n                period: {\n                    start: startDate,\n                    end: endDate\n                }\n            };\n        } catch (error) {\n            console.error(\"Failed to get project time report:\", error);\n            return null;\n        }\n    }\n    async getAllProjectsTimeSummary(startDate, endDate) {\n        try {\n            if (!this.workspaceId) {\n                throw new Error(\"Workspace ID not configured\");\n            }\n            const projects = await this.getProjects();\n            const reports = [];\n            for (const project of projects){\n                const report = await this.getProjectTimeReport(project.id, startDate, endDate);\n                if (report) {\n                    reports.push(report);\n                }\n            }\n            return reports;\n        } catch (error) {\n            console.error(\"Failed to get all projects time summary:\", error);\n            return [];\n        }\n    }\n    // Helper method to parse ISO 8601 duration to hours\n    parseDuration(duration) {\n        const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n        if (!match) return 0;\n        const hours = parseInt(match[1] || \"0\");\n        const minutes = parseInt(match[2] || \"0\");\n        const seconds = parseInt(match[3] || \"0\");\n        return hours + minutes / 60 + seconds / 3600;\n    }\n    // Enhanced method to generate mock time entries\n    getMockTimeEntries(projectId, startDate, endDate) {\n        return [\n            {\n                id: `mock-${projectId}-1`,\n                description: \"Mock project work\",\n                timeInterval: {\n                    start: startDate,\n                    end: endDate,\n                    duration: \"PT8H0M\"\n                },\n                billable: true,\n                userId: \"mock-user-id\",\n                userName: \"Mock User\",\n                projectId: projectId,\n                projectName: \"Mock Project\"\n            }\n        ];\n    }\n    // Enhanced method to generate mock projects\n    getMockProjects() {\n        return [\n            {\n                id: \"mock-project-1\",\n                name: \"Mock Project 1\",\n                workspaceId: \"mock-workspace\",\n                clientId: \"mock-client-1\",\n                clientName: \"Mock Client 1\",\n                isPublic: true,\n                isTemplate: false,\n                color: \"#000000\",\n                billable: true,\n                public: true,\n                archived: false,\n                status: \"ACTIVE\",\n                budget: 50000,\n                hourlyRate: {\n                    amount: 150,\n                    currency: \"USD\"\n                }\n            }\n        ];\n    }\n    // Enhanced method to generate mock user\n    getMockUser() {\n        return {\n            id: \"mock-user-id\",\n            email: \"mock@example.com\",\n            name: \"Mock User\",\n            profilePicture: \"\",\n            status: \"ACTIVE\",\n            activeWorkspace: \"mock-workspace\",\n            defaultWorkspace: \"mock-workspace\"\n        };\n    }\n}\n// Create the service instance\nconst clockifyService = new ClockifyService();\n// Export the service instance as both default and named export\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clockifyService);\n\n// Export convenience functions\nconst fetchClockifyProjects = async ()=>{\n    try {\n        return await clockifyService.getProjects();\n    } catch (error) {\n        console.error(\"Error fetching Clockify projects:\", error);\n        return [];\n    }\n};\nconst fetchClockifyTimeEntries = async (projectId, startDate, endDate)=>{\n    try {\n        return await clockifyService.getTimeEntries(projectId, startDate || \"\", endDate || \"\");\n    } catch (error) {\n        console.error(\"Error fetching Clockify time entries:\", error);\n        return [];\n    }\n};\nconst fetchClockifyTimeReport = async (projectId, startDate, endDate)=>{\n    try {\n        return await clockifyService.getProjectTimeReport(projectId, startDate, endDate);\n    } catch (error) {\n        console.error(\"Error fetching Clockify time report:\", error);\n        return null;\n    }\n};\nconst fetchAllClockifyTimeSummaries = async (startDate, endDate)=>{\n    try {\n        return await clockifyService.getAllProjectsTimeSummary(startDate, endDate);\n    } catch (error) {\n        console.error(\"Error fetching Clockify time summaries:\", error);\n        return [];\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMvRCxpRUFBZXdILGVBQWVBLEVBQUM7QUFDSjtBQUUzQiwrQkFBK0I7QUFDeEIsTUFBTUMsd0JBQXdCO0lBQ25DLElBQUk7UUFDRixPQUFPLE1BQU1ELGdCQUFnQjVELFdBQVc7SUFDMUMsRUFBRSxPQUFPdkIsT0FBTztRQUNkM0IsUUFBUTJCLEtBQUssQ0FBQyxxQ0FBcUNBO1FBQ25ELE9BQU8sRUFBRTtJQUNYO0FBQ0YsRUFBRTtBQUVLLE1BQU1xRiwyQkFBMkIsT0FDdEMzRCxXQUNBQyxXQUNBQztJQUVBLElBQUk7UUFDRixPQUFPLE1BQU11RCxnQkFBZ0IxRCxjQUFjLENBQUNDLFdBQVdDLGFBQWEsSUFBSUMsV0FBVztJQUNyRixFQUFFLE9BQU81QixPQUFPO1FBQ2QzQixRQUFRMkIsS0FBSyxDQUFDLHlDQUF5Q0E7UUFDdkQsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFO0FBRUssTUFBTXNGLDBCQUEwQixPQUNyQzVELFdBQ0FDLFdBQ0FDO0lBRUEsSUFBSTtRQUNGLE9BQU8sTUFBTXVELGdCQUFnQnhDLG9CQUFvQixDQUFDakIsV0FBV0MsV0FBV0M7SUFDMUUsRUFBRSxPQUFPNUIsT0FBTztRQUNkM0IsUUFBUTJCLEtBQUssQ0FBQyx3Q0FBd0NBO1FBQ3RELE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFSyxNQUFNdUYsZ0NBQWdDLE9BQzNDNUQsV0FDQUM7SUFFQSxJQUFJO1FBQ0YsT0FBTyxNQUFNdUQsZ0JBQWdCbkIseUJBQXlCLENBQUNyQyxXQUFXQztJQUNwRSxFQUFFLE9BQU81QixPQUFPO1FBQ2QzQixRQUFRMkIsS0FBSyxDQUFDLDJDQUEyQ0E7UUFDekQsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vem9oby1iaWxsaW5nLXBsYXRmb3JtLy4vbGliL2Nsb2NraWZ5LnRzPzkwZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuZXhwb3J0IGludGVyZmFjZSBDbG9ja2lmeVRpbWVFbnRyeSB7XG4gIGlkOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBiaWxsYWJsZTogYm9vbGVhbjtcbiAgdGFza0lkPzogc3RyaW5nO1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgdGltZUludGVydmFsOiB7XG4gICAgc3RhcnQ6IHN0cmluZztcbiAgICBlbmQ/OiBzdHJpbmc7XG4gICAgZHVyYXRpb246IHN0cmluZztcbiAgfTtcbiAgaG91cmx5UmF0ZT86IHtcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICB9O1xuICBjb3N0UmF0ZT86IHtcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICB9O1xuICBpc0xvY2tlZDogYm9vbGVhbjtcbiAgY3VzdG9tRmllbGRWYWx1ZXM6IGFueVtdO1xuICB0eXBlOiBzdHJpbmc7XG4gIHRhZ3M6IGFueVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5UHJvamVjdCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgd29ya3NwYWNlSWQ6IHN0cmluZztcbiAgY2xpZW50SWQ/OiBzdHJpbmc7XG4gIGNsaWVudE5hbWU/OiBzdHJpbmc7XG4gIGlzUHVibGljOiBib29sZWFuO1xuICBpc1RlbXBsYXRlOiBib29sZWFuO1xuICBjb2xvcjogc3RyaW5nO1xuICBub3RlPzogc3RyaW5nO1xuICBiaWxsYWJsZTogYm9vbGVhbjtcbiAgcHVibGljOiBib29sZWFuO1xuICBhcmNoaXZlZDogYm9vbGVhbjtcbiAgZXN0aW1hdGU6IHtcbiAgICBlc3RpbWF0ZTogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbiAgfTtcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIGJ1ZGdldEVzdGltYXRlOiBudW1iZXI7XG4gIGJ1ZGdldFR5cGU6IHN0cmluZztcbiAgaG91cmx5UmF0ZToge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gIH07XG4gIGNvc3RSYXRlOiB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgfTtcbiAgdGltZUVzdGltYXRlOiBzdHJpbmc7XG4gIGJ1ZGdldDogbnVtYmVyO1xuICBzcGVudDogc3RyaW5nO1xuICBwcm9ncmVzczogbnVtYmVyO1xuICByYXRlOiBudW1iZXI7XG4gIHJhdGVMYXN0VXBkYXRlZDogc3RyaW5nO1xuICBmaXhlZEZlZTogbnVtYmVyO1xuICBtZW1iZXJzaGlwczogYW55W107XG4gIHRhc2tDb3VudDoge1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgZXN0aW1hdGU6IG51bWJlcjtcbiAgfTtcbiAgY3VzdG9tRmllbGRzOiBhbnlbXTtcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG4gIGVuZERhdGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xvY2tpZnlVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm9maWxlUGljdHVyZTogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgYWN0aXZlV29ya3NwYWNlOiBzdHJpbmc7XG4gIGRlZmF1bHRXb3Jrc3BhY2U6IHN0cmluZztcbiAgc2V0dGluZ3M6IGFueTtcbiAgbWVtYmVyc2hpcHM6IGFueVtdO1xuICBwcm9maWxlUGljdHVyZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5V29ya3NwYWNlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm9maWxlOiBudW1iZXI7XG4gIHByZW1pdW06IGJvb2xlYW47XG4gIGFkbWluOiBib29sZWFuO1xuICBkZWZhdWx0SG91cmx5UmF0ZTogbnVtYmVyO1xuICBkZWZhdWx0Q3VycmVuY3k6IHN0cmluZztcbiAgb25seUFkbWluc01heUNyZWF0ZVByb2plY3RzOiBib29sZWFuO1xuICBvbmx5QWRtaW5zU2VlQmlsbGFibGVSYXRlczogYm9vbGVhbjtcbiAgb25seUFkbWluc1NlZVRlYW1EYXNoYm9hcmQ6IGJvb2xlYW47XG4gIHByb2plY3RzQmlsbGFibGVCeURlZmF1bHQ6IGJvb2xlYW47XG4gIHJvdW5kaW5nOiBudW1iZXI7XG4gIHJvdW5kaW5nTWludXRlczogbnVtYmVyO1xuICBsb2dvOiBzdHJpbmc7XG4gIGljYWxVcmw6IHN0cmluZztcbiAgaWNhbEVuYWJsZWQ6IGJvb2xlYW47XG4gIGNzdlVwbG9hZDoge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47XG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nO1xuICAgIHRpbWVGb3JtYXQ6IHN0cmluZztcbiAgfTtcbiAgc3Vic2NyaXB0aW9uOiB7XG4gICAgc3RhcnREYXRlOiBzdHJpbmc7XG4gICAgZW5kRGF0ZTogc3RyaW5nO1xuICAgIHRyaWFsOiBib29sZWFuO1xuICAgIHN0YXR1czogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsb2NraWZ5VGltZVJlcG9ydCB7XG4gIHByb2plY3RJZDogc3RyaW5nO1xuICBwcm9qZWN0TmFtZTogc3RyaW5nO1xuICB0b3RhbEhvdXJzOiBudW1iZXI7XG4gIGJpbGxhYmxlSG91cnM6IG51bWJlcjtcbiAgbm9uQmlsbGFibGVIb3VyczogbnVtYmVyO1xuICB0b3RhbEFtb3VudDogbnVtYmVyO1xuICBiaWxsYWJsZUFtb3VudDogbnVtYmVyO1xuICBub25CaWxsYWJsZUFtb3VudDogbnVtYmVyO1xuICBlbnRyaWVzOiBDbG9ja2lmeVRpbWVFbnRyeVtdO1xuICBwZXJpb2Q6IHtcbiAgICBzdGFydDogc3RyaW5nO1xuICAgIGVuZDogc3RyaW5nO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgVG9rZW5SZXNwb25zZSB7XG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICBleHBpcmVzX2luOiBudW1iZXI7XG4gIHRva2VuX3R5cGU6IHN0cmluZztcbn1cblxuY2xhc3MgQ2xvY2tpZnlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHdvcmtzcGFjZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBiYXNlVXJsID0gJ2h0dHBzOi8vYXBpLmNsb2NraWZ5Lm1lL2FwaS92MSc7XG4gIHByaXZhdGUgX2lzQ29uZmlndXJlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQ0xPQ0tJRllfQVBJX0tFWSB8fCBudWxsO1xuICAgIHRoaXMud29ya3NwYWNlSWQgPSBwcm9jZXNzLmVudi5DTE9DS0lGWV9XT1JLU1BBQ0VfSUQgfHwgbnVsbDtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHZhbGlkIGNyZWRlbnRpYWxzXG4gICAgaWYgKHRoaXMuYXBpS2V5ICYmIHRoaXMuYXBpS2V5ICE9PSAneW91cl9jbG9ja2lmeV9hcGlfa2V5X2hlcmUnICYmIHRoaXMud29ya3NwYWNlSWQgJiYgdGhpcy53b3Jrc3BhY2VJZCAhPT0gJ3lvdXJfY2xvY2tpZnlfd29ya3NwYWNlX2lkX2hlcmUnKSB7XG4gICAgICB0aGlzLl9pc0NvbmZpZ3VyZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coJ0Nsb2NraWZ5IHNlcnZpY2UgaW5pdGlhbGl6ZWQgd2l0aCB2YWxpZCBjcmVkZW50aWFscycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pc0NvbmZpZ3VyZWQgPSBmYWxzZTtcbiAgICAgIGNvbnNvbGUud2FybignQ2xvY2tpZnkgc2VydmljZSBpbml0aWFsaXplZCB3aXRob3V0IHZhbGlkIGNyZWRlbnRpYWxzIC0gd2lsbCB1c2UgbW9jayBkYXRhJyk7XG4gICAgICBjb25zb2xlLndhcm4oJ1BsZWFzZSBzZXQgQ0xPQ0tJRllfQVBJX0tFWSBhbmQgQ0xPQ0tJRllfV09SS1NQQUNFX0lEIGluIHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRIZWFkZXJzKCkge1xuICAgIGlmICghdGhpcy5hcGlLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGtleSBub3QgY29uZmlndXJlZCcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ1gtQXBpLUtleSc6IHRoaXMuYXBpS2V5LFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdChlbmRwb2ludDogc3RyaW5nLCBwYXJhbXM/OiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmICghdGhpcy5faXNDb25maWd1cmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IHNlcnZpY2Ugbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt0aGlzLmJhc2VVcmx9JHtlbmRwb2ludH1gKTtcbiAgICAgIGlmIChwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgaWYgKHBhcmFtc1trZXldICE9PSB1bmRlZmluZWQgJiYgcGFyYW1zW2tleV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgcGFyYW1zW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENsb2NraWZ5IEFQSSBSZXF1ZXN0OiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEhlYWRlcnM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5nZXRIZWFkZXJzKCkpfWApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5OhIENsb2NraWZ5IEFQSSBSZXNwb25zZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvY2tpZnkgQVBJIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCAtIGNoZWNrIHlvdXIgQVBJIGtleScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgYWNjZXNzIGZvcmJpZGRlbiAtIGNoZWNrIHlvdXIgd29ya3NwYWNlIElEIGFuZCBwZXJtaXNzaW9ucycpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JEZXRhaWxzID0gYEVuZHBvaW50IG5vdCBmb3VuZDogJHtlbmRwb2ludH1gO1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgNDA0IEVycm9yIERldGFpbHM6ICR7ZXJyb3JEZXRhaWxzfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgICBGdWxsIFVSTDogJHt1cmwudG9TdHJpbmcoKX1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgICAgV29ya3NwYWNlIElEOiAke3RoaXMud29ya3NwYWNlSWR9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIEFQSSBLZXkgY29uZmlndXJlZDogJHshIXRoaXMuYXBpS2V5fWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSBlcnJvcjogNDA0IE5vdCBGb3VuZCAtICR7ZXJyb3JEZXRhaWxzfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgcmF0ZSBsaW1pdCBleGNlZWRlZCAtIHRyeSBhZ2FpbiBsYXRlcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0gLSAke2Vycm9yVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2xvY2tpZnkgQVBJIFN1Y2Nlc3M6ICR7ZW5kcG9pbnR9YCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIENsb2NraWZ5IEFQSSBFcnJvciBpbiAke2VuZHBvaW50fTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENsb2NraWZ5IEFQSSByZXF1ZXN0IGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGUgc2VydmljZSBpcyBwcm9wZXJseSBjb25maWd1cmVkXG4gIHB1YmxpYyBpc0NvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQ29uZmlndXJlZDtcbiAgfVxuXG4gIC8vIEdldCBjb25maWd1cmF0aW9uIHN0YXR1cyBmb3IgZGVidWdnaW5nXG4gIHB1YmxpYyBnZXRDb25maWd1cmF0aW9uU3RhdHVzKCk6IHsgY29uZmlndXJlZDogYm9vbGVhbjsgaGFzQXBpS2V5OiBib29sZWFuOyBoYXNXb3Jrc3BhY2VJZDogYm9vbGVhbiB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgY29uZmlndXJlZDogdGhpcy5faXNDb25maWd1cmVkLFxuICAgICAgaGFzQXBpS2V5OiAhISh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaUtleSAhPT0gJ3lvdXJfY2xvY2tpZnlfYXBpX2tleV9oZXJlJyksXG4gICAgICBoYXNXb3Jrc3BhY2VJZDogISEodGhpcy53b3Jrc3BhY2VJZCAmJiB0aGlzLndvcmtzcGFjZUlkICE9PSAneW91cl9jbG9ja2lmeV93b3Jrc3BhY2VfaWRfaGVyZScpXG4gICAgfTtcbiAgfVxuXG4gIC8vIEFsaWFzIGZvciBnZXRDb25maWd1cmF0aW9uU3RhdHVzIHRvIG1hdGNoIEFQSSB1c2FnZVxuICBwdWJsaWMgZ2V0Q29uZmlnU3RhdHVzKCk6IHsgY29uZmlndXJlZDogYm9vbGVhbjsgaGFzQXBpS2V5OiBib29sZWFuOyBoYXNXb3Jrc3BhY2VJZDogYm9vbGVhbiB9IHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb25maWd1cmF0aW9uU3RhdHVzKCk7XG4gIH1cblxuICAvLyBNZXRob2QgdG8gc2V0IHdvcmtzcGFjZSBJRCBkeW5hbWljYWxseVxuICBwdWJsaWMgc2V0V29ya3NwYWNlSWQod29ya3NwYWNlSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMud29ya3NwYWNlSWQgPSB3b3Jrc3BhY2VJZDtcbiAgICBpZiAodGhpcy5hcGlLZXkgJiYgdGhpcy5hcGlLZXkgIT09ICd5b3VyX2Nsb2NraWZ5X2FwaV9rZXlfaGVyZScpIHtcbiAgICAgIHRoaXMuX2lzQ29uZmlndXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcigpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuX2lzQ29uZmlndXJlZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnQ2xvY2tpZnkgbm90IGNvbmZpZ3VyZWQsIHJldHVybmluZyBtb2NrIHVzZXInKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ja1VzZXIoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt0aGlzLmJhc2VVcmx9L3VzZXJgKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENsb2NraWZ5IEFQSSBSZXF1ZXN0OiAke3VybC50b1N0cmluZygpfWApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybC50b1N0cmluZygpLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDbG9ja2lmeSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIENsb2NraWZ5IEFQSSBTdWNjZXNzOiAvdXNlcmApO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgQ2xvY2tpZnkgdXNlcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygnUmV0dXJuaW5nIG1vY2sgdXNlciBkdWUgdG8gQ2xvY2tpZnkgQVBJIGZhaWx1cmUnKTtcbiAgICAgIHJldHVybiB0aGlzLmdldE1vY2tVc2VyKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0V29ya3NwYWNlcygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvd29ya3NwYWNlcycpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IENsb2NraWZ5IHdvcmtzcGFjZXM6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIG1vY2sgd29ya3NwYWNlIGRhdGEgd2hlbiBDbG9ja2lmeSBmYWlsc1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnbW9jay13b3Jrc3BhY2UtaWQnLFxuICAgICAgICAgIG5hbWU6ICdNb2NrIFdvcmtzcGFjZScsXG4gICAgICAgICAgaG91cmx5UmF0ZTogeyBhbW91bnQ6IDEwMCwgY3VycmVuY3k6ICdVU0QnIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0cygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5faXNDb25maWd1cmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDbG9ja2lmeSBub3QgY29uZmlndXJlZCwgcmV0dXJuaW5nIG1vY2sgcHJvamVjdHMnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ja1Byb2plY3RzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy53b3Jrc3BhY2VJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtzcGFjZSBJRCBub3QgY29uZmlndXJlZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3Byb2plY3RzYCk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBDbG9ja2lmeSBBUEkgUmVxdWVzdDogJHt1cmwudG9TdHJpbmcoKX1gKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwudG9TdHJpbmcoKSwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coYOKchSBDbG9ja2lmeSBBUEkgU3VjY2VzczogL3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS9wcm9qZWN0c2ApO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgQ2xvY2tpZnkgcHJvamVjdHM6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5sb2coJ1JldHVybmluZyBtb2NrIHByb2plY3RzIGR1ZSB0byBDbG9ja2lmeSBBUEkgZmFpbHVyZScpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9ja1Byb2plY3RzKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VGltZUVudHJpZXMocHJvamVjdElkOiBzdHJpbmcsIHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5faXNDb25maWd1cmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDbG9ja2lmeSBub3QgY29uZmlndXJlZCwgcmV0dXJuaW5nIG1vY2sgZGF0YScpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb2NrVGltZUVudHJpZXMocHJvamVjdElkLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChgJHt0aGlzLmJhc2VVcmx9L3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS9wcm9qZWN0cy8ke3Byb2plY3RJZH0vdGltZS1lbnRyaWVzYCk7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnc3RhcnQnLCBzdGFydERhdGUpO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2VuZCcsIGVuZERhdGUpO1xuXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBDbG9ja2lmeSBBUEkgUmVxdWVzdDogJHt1cmwudG9TdHJpbmcoKX1gKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwudG9TdHJpbmcoKSwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coYOKchSBDbG9ja2lmeSBBUEkgU3VjY2VzczogL3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS9wcm9qZWN0cy8ke3Byb2plY3RJZH0vdGltZS1lbnRyaWVzYCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBDbG9ja2lmeSB0aW1lIGVudHJpZXM6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5sb2coJ1JldHVybmluZyBtb2NrIHRpbWUgZW50cnkgZGF0YSBkdWUgdG8gQ2xvY2tpZnkgQVBJIGZhaWx1cmUnKTtcbiAgICAgIHJldHVybiB0aGlzLmdldE1vY2tUaW1lRW50cmllcyhwcm9qZWN0SWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QWxsVGltZUVudHJpZXMoc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZUlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ya3NwYWNlIElEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENsb2NraWZ5IEFQSSByZXF1aXJlcyBQT1NUIGZvciBmaWx0ZXJlZCB0aW1lIGVudHJpZXMgd2l0aCBkYXRlIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7dGhpcy5iYXNlVXJsfS93b3Jrc3BhY2VzLyR7dGhpcy53b3Jrc3BhY2VJZH0vdGltZS1lbnRyaWVzYCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SNIENsb2NraWZ5IEFQSSBSZXF1ZXN0OiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIE1ldGhvZDogUE9TVGApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEhlYWRlcnM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5nZXRIZWFkZXJzKCkpfWApO1xuICAgICAgY29uc29sZS5sb2coYCAgIEJvZHk6ICR7SlNPTi5zdHJpbmdpZnkoeyBzdGFydDogc3RhcnREYXRlLCBlbmQ6IGVuZERhdGUgfSl9YCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAuLi50aGlzLmdldEhlYWRlcnMoKSxcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgc3RhcnQ6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICBlbmQ6IGVuZERhdGVcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYPCfk6EgQ2xvY2tpZnkgQVBJIFJlc3BvbnNlOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbG9ja2lmeSBBUEkgYXV0aGVudGljYXRpb24gZmFpbGVkIC0gY2hlY2sgeW91ciBBUEkga2V5Jyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IEFQSSBhY2Nlc3MgZm9yYmlkZGVuIC0gY2hlY2sgeW91ciB3b3Jrc3BhY2UgSUQgYW5kIHBlcm1pc3Npb25zJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zdCBlcnJvckRldGFpbHMgPSBgRW5kcG9pbnQgbm90IGZvdW5kOiAvd29ya3NwYWNlcy8ke3RoaXMud29ya3NwYWNlSWR9L3RpbWUtZW50cmllc2A7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCA0MDQgRXJyb3IgRGV0YWlsczogJHtlcnJvckRldGFpbHN9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgIEZ1bGwgVVJMOiAke3VybC50b1N0cmluZygpfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGAgICBXb3Jrc3BhY2UgSUQ6ICR7dGhpcy53b3Jrc3BhY2VJZH1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgICAgQVBJIEtleSBjb25maWd1cmVkOiAkeyEhdGhpcy5hcGlLZXl9YCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiA0MDQgTm90IEZvdW5kIC0gJHtlcnJvckRldGFpbHN9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IEFQSSBtZXRob2Qgbm90IGFsbG93ZWQgLSB0aGlzIGVuZHBvaW50IHJlcXVpcmVzIFBPU1QgbWV0aG9kJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nsb2NraWZ5IEFQSSByYXRlIGxpbWl0IGV4Y2VlZGVkIC0gdHJ5IGFnYWluIGxhdGVyJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2xvY2tpZnkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coYOKchSBDbG9ja2lmeSBBUEkgU3VjY2VzczogL3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS90aW1lLWVudHJpZXNgKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGFsbCBDbG9ja2lmeSB0aW1lIGVudHJpZXM6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gbW9jayB0aW1lIGVudHJ5IGRhdGEgd2hlbiBDbG9ja2lmeSBmYWlsc1xuICAgICAgY29uc29sZS5sb2coJ1JldHVybmluZyBtb2NrIHRpbWUgZW50cnkgZGF0YSBkdWUgdG8gQ2xvY2tpZnkgQVBJIGZhaWx1cmUnKTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21vY2stdGltZS1lbnRyeS0xJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ01vY2sgd29yayBzZXNzaW9uJyxcbiAgICAgICAgICB0aW1lSW50ZXJ2YWw6IHtcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydERhdGUsXG4gICAgICAgICAgICBlbmQ6IGVuZERhdGUsXG4gICAgICAgICAgICBkdXJhdGlvbjogJ1BUOEgwTSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJpbGxhYmxlOiB0cnVlLFxuICAgICAgICAgIHVzZXJJZDogJ21vY2stdXNlci1pZCcsXG4gICAgICAgICAgdXNlck5hbWU6ICdNb2NrIFVzZXInLFxuICAgICAgICAgIHByb2plY3RJZDogJ21vY2stcHJvamVjdC0xJyxcbiAgICAgICAgICBwcm9qZWN0TmFtZTogJ01vY2sgUHJvamVjdCAxJ1xuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZUlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV29ya3NwYWNlIElEIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdChgL3dvcmtzcGFjZXMvJHt0aGlzLndvcmtzcGFjZUlkfS91c2Vyc2ApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IENsb2NraWZ5IHVzZXJzOicsIGVycm9yKTtcbiAgICAgIC8vIFJldHVybiBtb2NrIHVzZXIgZGF0YSB3aGVuIENsb2NraWZ5IGZhaWxzXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtb2NrLXVzZXItMScsXG4gICAgICAgICAgbmFtZTogJ01vY2sgVXNlciAxJyxcbiAgICAgICAgICBlbWFpbDogJ3VzZXIxQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgICAgIGhvdXJseVJhdGU6IHsgYW1vdW50OiAxMDAsIGN1cnJlbmN5OiAnVVNEJyB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ21vY2stdXNlci0yJyxcbiAgICAgICAgICBuYW1lOiAnTW9jayBVc2VyIDInLFxuICAgICAgICAgIGVtYWlsOiAndXNlcjJAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICAgICAgaG91cmx5UmF0ZTogeyBhbW91bnQ6IDEyMCwgY3VycmVuY3k6ICdVU0QnIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQcm9qZWN0VGltZVJlcG9ydChwcm9qZWN0SWQ6IHN0cmluZywgc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZyk6IFByb21pc2U8Q2xvY2tpZnlUaW1lUmVwb3J0IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdGltZUVudHJpZXMgPSBhd2FpdCB0aGlzLmdldFRpbWVFbnRyaWVzKHByb2plY3RJZCwgc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCB0aGlzLmdldFByb2plY3RzKCkudGhlbihwcm9qZWN0cyA9PiBcbiAgICAgICAgcHJvamVjdHMuZmluZChwID0+IHAuaWQgPT09IHByb2plY3RJZClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICghcHJvamVjdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2plY3Qgbm90IGZvdW5kJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSB0aW1lRW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBlbnRyeS50aW1lSW50ZXJ2YWwuZHVyYXRpb247XG4gICAgICAgIGNvbnN0IGhvdXJzID0gdGhpcy5wYXJzZUR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHN1bSArIGhvdXJzO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIGNvbnN0IGJpbGxhYmxlSG91cnMgPSB0aW1lRW50cmllc1xuICAgICAgICAuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmJpbGxhYmxlKVxuICAgICAgICAucmVkdWNlKChzdW0sIGVudHJ5KSA9PiB7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBlbnRyeS50aW1lSW50ZXJ2YWwuZHVyYXRpb247XG4gICAgICAgICAgY29uc3QgaG91cnMgPSB0aGlzLnBhcnNlRHVyYXRpb24oZHVyYXRpb24pO1xuICAgICAgICAgIHJldHVybiBzdW0gKyBob3VycztcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgIGNvbnN0IG5vbkJpbGxhYmxlSG91cnMgPSB0b3RhbEhvdXJzIC0gYmlsbGFibGVIb3VycztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJvamVjdElkLFxuICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdC5uYW1lLFxuICAgICAgICB0b3RhbEhvdXJzLFxuICAgICAgICBiaWxsYWJsZUhvdXJzLFxuICAgICAgICBub25CaWxsYWJsZUhvdXJzLFxuICAgICAgICB0b3RhbEFtb3VudDogdG90YWxIb3VycyAqIChwcm9qZWN0LmhvdXJseVJhdGU/LmFtb3VudCB8fCAwKSxcbiAgICAgICAgYmlsbGFibGVBbW91bnQ6IGJpbGxhYmxlSG91cnMgKiAocHJvamVjdC5ob3VybHlSYXRlPy5hbW91bnQgfHwgMCksXG4gICAgICAgIG5vbkJpbGxhYmxlQW1vdW50OiBub25CaWxsYWJsZUhvdXJzICogKHByb2plY3QuaG91cmx5UmF0ZT8uYW1vdW50IHx8IDApLFxuICAgICAgICBlbnRyaWVzOiB0aW1lRW50cmllcyxcbiAgICAgICAgcGVyaW9kOiB7IHN0YXJ0OiBzdGFydERhdGUsIGVuZDogZW5kRGF0ZSB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHByb2plY3QgdGltZSByZXBvcnQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QWxsUHJvamVjdHNUaW1lU3VtbWFyeShzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxDbG9ja2lmeVRpbWVSZXBvcnRbXT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMud29ya3NwYWNlSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrc3BhY2UgSUQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJvamVjdHMgPSBhd2FpdCB0aGlzLmdldFByb2plY3RzKCk7XG4gICAgICBjb25zdCByZXBvcnRzOiBDbG9ja2lmeVRpbWVSZXBvcnRbXSA9IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgcHJvamVjdHMpIHtcbiAgICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0VGltZVJlcG9ydChwcm9qZWN0LmlkLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgICBpZiAocmVwb3J0KSB7XG4gICAgICAgICAgcmVwb3J0cy5wdXNoKHJlcG9ydCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHJlcG9ydHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgYWxsIHByb2plY3RzIHRpbWUgc3VtbWFyeTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZCB0byBwYXJzZSBJU08gODYwMSBkdXJhdGlvbiB0byBob3Vyc1xuICBwcml2YXRlIHBhcnNlRHVyYXRpb24oZHVyYXRpb246IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3QgbWF0Y2ggPSBkdXJhdGlvbi5tYXRjaCgvUFQoPzooXFxkKylIKT8oPzooXFxkKylNKT8oPzooXFxkKylTKT8vKTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gMDtcbiAgICBcbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KG1hdGNoWzFdIHx8ICcwJyk7XG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KG1hdGNoWzJdIHx8ICcwJyk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IHBhcnNlSW50KG1hdGNoWzNdIHx8ICcwJyk7XG4gICAgXG4gICAgcmV0dXJuIGhvdXJzICsgKG1pbnV0ZXMgLyA2MCkgKyAoc2Vjb25kcyAvIDM2MDApO1xuICB9XG5cbiAgLy8gRW5oYW5jZWQgbWV0aG9kIHRvIGdlbmVyYXRlIG1vY2sgdGltZSBlbnRyaWVzXG4gIHByaXZhdGUgZ2V0TW9ja1RpbWVFbnRyaWVzKHByb2plY3RJZDogc3RyaW5nLCBzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogYW55W10ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGlkOiBgbW9jay0ke3Byb2plY3RJZH0tMWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTW9jayBwcm9qZWN0IHdvcmsnLFxuICAgICAgICB0aW1lSW50ZXJ2YWw6IHtcbiAgICAgICAgICBzdGFydDogc3RhcnREYXRlLFxuICAgICAgICAgIGVuZDogZW5kRGF0ZSxcbiAgICAgICAgICBkdXJhdGlvbjogJ1BUOEgwTSdcbiAgICAgICAgfSxcbiAgICAgICAgYmlsbGFibGU6IHRydWUsXG4gICAgICAgIHVzZXJJZDogJ21vY2stdXNlci1pZCcsXG4gICAgICAgIHVzZXJOYW1lOiAnTW9jayBVc2VyJyxcbiAgICAgICAgcHJvamVjdElkOiBwcm9qZWN0SWQsXG4gICAgICAgIHByb2plY3ROYW1lOiAnTW9jayBQcm9qZWN0J1xuICAgICAgfVxuICAgIF07XG4gIH1cblxuICAvLyBFbmhhbmNlZCBtZXRob2QgdG8gZ2VuZXJhdGUgbW9jayBwcm9qZWN0c1xuICBwcml2YXRlIGdldE1vY2tQcm9qZWN0cygpOiBhbnlbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdtb2NrLXByb2plY3QtMScsXG4gICAgICAgIG5hbWU6ICdNb2NrIFByb2plY3QgMScsXG4gICAgICAgIHdvcmtzcGFjZUlkOiAnbW9jay13b3Jrc3BhY2UnLFxuICAgICAgICBjbGllbnRJZDogJ21vY2stY2xpZW50LTEnLFxuICAgICAgICBjbGllbnROYW1lOiAnTW9jayBDbGllbnQgMScsXG4gICAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgICBpc1RlbXBsYXRlOiBmYWxzZSxcbiAgICAgICAgY29sb3I6ICcjMDAwMDAwJyxcbiAgICAgICAgYmlsbGFibGU6IHRydWUsXG4gICAgICAgIHB1YmxpYzogdHJ1ZSxcbiAgICAgICAgYXJjaGl2ZWQ6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgICBidWRnZXQ6IDUwMDAwLFxuICAgICAgICBob3VybHlSYXRlOiB7IGFtb3VudDogMTUwLCBjdXJyZW5jeTogJ1VTRCcgfVxuICAgICAgfVxuICAgIF07XG4gIH1cblxuICAvLyBFbmhhbmNlZCBtZXRob2QgdG8gZ2VuZXJhdGUgbW9jayB1c2VyXG4gIHByaXZhdGUgZ2V0TW9ja1VzZXIoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6ICdtb2NrLXVzZXItaWQnLFxuICAgICAgZW1haWw6ICdtb2NrQGV4YW1wbGUuY29tJyxcbiAgICAgIG5hbWU6ICdNb2NrIFVzZXInLFxuICAgICAgcHJvZmlsZVBpY3R1cmU6ICcnLFxuICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgIGFjdGl2ZVdvcmtzcGFjZTogJ21vY2std29ya3NwYWNlJyxcbiAgICAgIGRlZmF1bHRXb3Jrc3BhY2U6ICdtb2NrLXdvcmtzcGFjZSdcbiAgICB9O1xuICB9XG59XG5cbi8vIENyZWF0ZSB0aGUgc2VydmljZSBpbnN0YW5jZVxuY29uc3QgY2xvY2tpZnlTZXJ2aWNlID0gbmV3IENsb2NraWZ5U2VydmljZSgpO1xuXG4vLyBFeHBvcnQgdGhlIHNlcnZpY2UgaW5zdGFuY2UgYXMgYm90aCBkZWZhdWx0IGFuZCBuYW1lZCBleHBvcnRcbmV4cG9ydCBkZWZhdWx0IGNsb2NraWZ5U2VydmljZTtcbmV4cG9ydCB7IGNsb2NraWZ5U2VydmljZSB9O1xuXG4vLyBFeHBvcnQgY29udmVuaWVuY2UgZnVuY3Rpb25zXG5leHBvcnQgY29uc3QgZmV0Y2hDbG9ja2lmeVByb2plY3RzID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBjbG9ja2lmeVNlcnZpY2UuZ2V0UHJvamVjdHMoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBDbG9ja2lmeSBwcm9qZWN0czonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDbG9ja2lmeVRpbWVFbnRyaWVzID0gYXN5bmMgKFxuICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgc3RhcnREYXRlPzogc3RyaW5nLFxuICBlbmREYXRlPzogc3RyaW5nXG4pID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgY2xvY2tpZnlTZXJ2aWNlLmdldFRpbWVFbnRyaWVzKHByb2plY3RJZCwgc3RhcnREYXRlIHx8ICcnLCBlbmREYXRlIHx8ICcnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBDbG9ja2lmeSB0aW1lIGVudHJpZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQ2xvY2tpZnlUaW1lUmVwb3J0ID0gYXN5bmMgKFxuICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGNsb2NraWZ5U2VydmljZS5nZXRQcm9qZWN0VGltZVJlcG9ydChwcm9qZWN0SWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQ2xvY2tpZnkgdGltZSByZXBvcnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hBbGxDbG9ja2lmeVRpbWVTdW1tYXJpZXMgPSBhc3luYyAoXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmdcbikgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBjbG9ja2lmeVNlcnZpY2UuZ2V0QWxsUHJvamVjdHNUaW1lU3VtbWFyeShzdGFydERhdGUsIGVuZERhdGUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIENsb2NraWZ5IHRpbWUgc3VtbWFyaWVzOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiQ2xvY2tpZnlTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJ3b3Jrc3BhY2VJZCIsImJhc2VVcmwiLCJfaXNDb25maWd1cmVkIiwicHJvY2VzcyIsImVudiIsIkNMT0NLSUZZX0FQSV9LRVkiLCJDTE9DS0lGWV9XT1JLU1BBQ0VfSUQiLCJjb25zb2xlIiwibG9nIiwid2FybiIsImdldEhlYWRlcnMiLCJFcnJvciIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnQiLCJwYXJhbXMiLCJ1cmwiLCJVUkwiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInVuZGVmaW5lZCIsInNlYXJjaFBhcmFtcyIsImFwcGVuZCIsInRvU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImVycm9yRGV0YWlscyIsImVycm9yIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiY2F0Y2giLCJkYXRhIiwianNvbiIsIm1lc3NhZ2UiLCJpc0NvbmZpZ3VyZWQiLCJnZXRDb25maWd1cmF0aW9uU3RhdHVzIiwiY29uZmlndXJlZCIsImhhc0FwaUtleSIsImhhc1dvcmtzcGFjZUlkIiwiZ2V0Q29uZmlnU3RhdHVzIiwic2V0V29ya3NwYWNlSWQiLCJnZXRVc2VyIiwiZ2V0TW9ja1VzZXIiLCJnZXRXb3Jrc3BhY2VzIiwiaWQiLCJuYW1lIiwiaG91cmx5UmF0ZSIsImFtb3VudCIsImN1cnJlbmN5IiwiZ2V0UHJvamVjdHMiLCJnZXRNb2NrUHJvamVjdHMiLCJnZXRUaW1lRW50cmllcyIsInByb2plY3RJZCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJnZXRNb2NrVGltZUVudHJpZXMiLCJnZXRBbGxUaW1lRW50cmllcyIsInN0YXJ0IiwiZW5kIiwiYm9keSIsImRlc2NyaXB0aW9uIiwidGltZUludGVydmFsIiwiZHVyYXRpb24iLCJiaWxsYWJsZSIsInVzZXJJZCIsInVzZXJOYW1lIiwicHJvamVjdE5hbWUiLCJnZXRVc2VycyIsImVtYWlsIiwiZ2V0UHJvamVjdFRpbWVSZXBvcnQiLCJ0aW1lRW50cmllcyIsInByb2plY3QiLCJ0aGVuIiwicHJvamVjdHMiLCJmaW5kIiwicCIsInRvdGFsSG91cnMiLCJyZWR1Y2UiLCJzdW0iLCJlbnRyeSIsImhvdXJzIiwicGFyc2VEdXJhdGlvbiIsImJpbGxhYmxlSG91cnMiLCJmaWx0ZXIiLCJub25CaWxsYWJsZUhvdXJzIiwidG90YWxBbW91bnQiLCJiaWxsYWJsZUFtb3VudCIsIm5vbkJpbGxhYmxlQW1vdW50IiwiZW50cmllcyIsInBlcmlvZCIsImdldEFsbFByb2plY3RzVGltZVN1bW1hcnkiLCJyZXBvcnRzIiwicmVwb3J0IiwicHVzaCIsIm1hdGNoIiwicGFyc2VJbnQiLCJtaW51dGVzIiwic2Vjb25kcyIsImNsaWVudElkIiwiY2xpZW50TmFtZSIsImlzUHVibGljIiwiaXNUZW1wbGF0ZSIsImNvbG9yIiwicHVibGljIiwiYXJjaGl2ZWQiLCJidWRnZXQiLCJwcm9maWxlUGljdHVyZSIsImFjdGl2ZVdvcmtzcGFjZSIsImRlZmF1bHRXb3Jrc3BhY2UiLCJjbG9ja2lmeVNlcnZpY2UiLCJmZXRjaENsb2NraWZ5UHJvamVjdHMiLCJmZXRjaENsb2NraWZ5VGltZUVudHJpZXMiLCJmZXRjaENsb2NraWZ5VGltZVJlcG9ydCIsImZldGNoQWxsQ2xvY2tpZnlUaW1lU3VtbWFyaWVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/clockify.ts\n");

/***/ }),

/***/ "(rsc)/./lib/zoho.ts":
/*!*********************!*\
  !*** ./lib/zoho.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchInvoices: () => (/* binding */ fetchInvoices),\n/* harmony export */   fetchProjects: () => (/* binding */ fetchProjects),\n/* harmony export */   zohoService: () => (/* binding */ zohoService)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\nclass ZohoService {\n    constructor(){\n        this.accessToken = null;\n        this.tokenExpiry = 0;\n        this.refreshPromise = null;\n        this.TOKEN_REFRESH_BUFFER = 5 * 60 * 1000 // 5 minutes buffer\n        ;\n        this.autoRefreshTimer = null;\n        this.AUTO_REFRESH_INTERVAL = 45 * 60 * 1000 // 45 minutes\n        ;\n        this.lastRefreshTime = 0 // Track when auto-refresh was last triggered\n        ;\n        // Rate limiting properties\n        this.requestCount = 0;\n        this.lastRequestTime = 0;\n        this.MAX_REQUESTS_PER_MINUTE = 30 // Conservative limit\n        ;\n        this.MIN_REQUEST_INTERVAL = 2000 // 2 seconds between requests\n        ;\n        this.retryCount = 0;\n        this.MAX_RETRIES = 3;\n        this.BASE_DELAY = 1000 // 1 second base delay for exponential backoff\n        ;\n        // Start automatic token refresh\n        this._startAutoRefresh();\n    }\n    _startAutoRefresh() {\n        // Clear any existing timer\n        if (this.autoRefreshTimer) {\n            clearInterval(this.autoRefreshTimer);\n        }\n        // Set up automatic refresh every 45 minutes\n        this.autoRefreshTimer = setInterval(async ()=>{\n            try {\n                console.log(\"Auto-refreshing Zoho token (45-minute interval)...\");\n                this.lastRefreshTime = Date.now(); // Track when refresh was triggered\n                await this.forceRefreshToken();\n                console.log(\"Auto-refresh completed successfully\");\n            } catch (error) {\n                console.error(\"Auto-refresh failed:\", error);\n            }\n        }, this.AUTO_REFRESH_INTERVAL);\n        // Set initial refresh time\n        this.lastRefreshTime = Date.now();\n        console.log(\"Automatic Zoho token refresh started (every 45 minutes)\");\n    }\n    _stopAutoRefresh() {\n        if (this.autoRefreshTimer) {\n            clearInterval(this.autoRefreshTimer);\n            this.autoRefreshTimer = null;\n            console.log(\"Automatic Zoho token refresh stopped\");\n        }\n    }\n    async getAccessToken() {\n        // Check if token is still valid (with buffer)\n        if (this.accessToken && Date.now() < this.tokenExpiry - this.TOKEN_REFRESH_BUFFER) {\n            return this.accessToken;\n        }\n        // If there's already a refresh in progress, wait for it\n        if (this.refreshPromise) {\n            return this.refreshPromise;\n        }\n        // Start a new refresh\n        this.refreshPromise = this.refreshAccessToken();\n        try {\n            const token = await this.refreshPromise;\n            return token;\n        } finally{\n            this.refreshPromise = null;\n        }\n    }\n    async refreshAccessToken() {\n        try {\n            console.log(\"Refreshing Zoho access token...\");\n            // Create form data for the request\n            const formData = new URLSearchParams();\n            formData.append(\"refresh_token\", \"1000.4bf26c4881dfba83aae32546453d662d.a9353e91362a18c457b5cbec86b10ed2\" || 0);\n            formData.append(\"client_id\", \"1000.8RL8WMTDXS0WIP2EJF2XUS6NDSLQEP\" || 0);\n            formData.append(\"client_secret\", \"8a7ee3c04f0a0d860dd215c4449deab9bf15d1d00b\" || 0);\n            formData.append(\"grant_type\", \"refresh_token\");\n            const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(\"https://accounts.zoho.com/oauth/v2/token\", formData, {\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            });\n            this.accessToken = response.data.access_token;\n            this.tokenExpiry = Date.now() + response.data.expires_in * 1000;\n            console.log(`Token refreshed successfully. Expires in ${Math.round(response.data.expires_in / 60)} minutes`);\n            return this.accessToken;\n        } catch (error) {\n            console.error(\"Error refreshing Zoho access token:\", error);\n            throw new Error(\"Failed to authenticate with Zoho\");\n        }\n    }\n    async makeRequest(endpoint) {\n        try {\n            // Apply rate limiting\n            await this.applyRateLimit();\n            const token = await this.getAccessToken();\n            // Create AbortController for timeout\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 15000); // 15 second timeout\n            try {\n                const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.zohoapis.com/books/v3/${endpoint}`, {\n                    headers: {\n                        \"Authorization\": `Bearer ${token}`,\n                        \"Content-Type\": \"application/json\"\n                    },\n                    params: {\n                        organization_id: \"652094923\"\n                    },\n                    timeout: 15000,\n                    signal: controller.signal\n                });\n                clearTimeout(timeoutId);\n                // Reset retry count on success\n                this.retryCount = 0;\n                this.requestCount++;\n                this.lastRequestTime = Date.now();\n                return response.data;\n            } catch (axiosError) {\n                clearTimeout(timeoutId);\n                // Handle timeout specifically\n                if (axiosError.code === \"ECONNABORTED\" || axiosError.message?.includes(\"timeout\")) {\n                    throw new Error(`Zoho API request timed out for ${endpoint}`);\n                }\n                throw axiosError;\n            }\n        } catch (error) {\n            // Handle rate limiting (400 with specific error message)\n            if (error.response?.status === 400 && error.response?.data?.error === \"Access Denied\" && error.response?.data?.error_description?.includes(\"too many requests\")) {\n                console.log(\"Zoho rate limit hit, implementing exponential backoff...\");\n                await this.handleRateLimit();\n                // Retry the request after backoff\n                if (this.retryCount < this.MAX_RETRIES) {\n                    this.retryCount++;\n                    console.log(`Retrying request after rate limit backoff (attempt ${this.retryCount})`);\n                    return this.makeRequest(endpoint);\n                } else {\n                    throw new Error(\"Zoho API rate limit exceeded after maximum retries. Please try again later.\");\n                }\n            }\n            // If we get a 401, try refreshing the token once\n            if (error.response?.status === 401) {\n                console.log(\"Token expired, refreshing...\");\n                // Clear the current token and force a refresh\n                this.accessToken = null;\n                this.tokenExpiry = 0;\n                try {\n                    const newToken = await this.forceRefreshToken();\n                    // Retry the request with the new token\n                    const retryResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.zohoapis.com/books/v3/${endpoint}`, {\n                        headers: {\n                            \"Authorization\": `Bearer ${newToken}`,\n                            \"Content-Type\": \"application/json\"\n                        },\n                        params: {\n                            organization_id: \"652094923\"\n                        },\n                        timeout: 15000\n                    });\n                    console.log(\"Request retry successful after token refresh\");\n                    return retryResponse.data;\n                } catch (refreshError) {\n                    console.error(\"Failed to refresh token or retry request:\", refreshError);\n                    throw new Error(`Zoho API authentication failed after token refresh: ${endpoint}`);\n                }\n            }\n            // Handle other HTTP errors\n            if (error.response?.status) {\n                console.error(`Zoho API error ${error.response.status} for ${endpoint}:`, error.response.data);\n                // Provide more specific error messages\n                if (error.response.status === 403) {\n                    throw new Error(\"Zoho API access forbidden - check your organization ID and permissions\");\n                } else if (error.response.status === 429) {\n                    throw new Error(\"Zoho API rate limit exceeded - please try again later\");\n                } else if (error.response.status >= 500) {\n                    throw new Error(\"Zoho API server error - please try again later\");\n                }\n                throw new Error(`Zoho API error ${error.response.status}: ${error.response.data?.message || \"Unknown error\"}`);\n            }\n            console.error(`Error making Zoho request to ${endpoint}:`, error);\n            throw new Error(`Failed to fetch data from Zoho: ${endpoint}`);\n        }\n    }\n    async applyRateLimit() {\n        const now = Date.now();\n        // Check if we need to wait between requests\n        if (this.lastRequestTime > 0) {\n            const timeSinceLastRequest = now - this.lastRequestTime;\n            if (timeSinceLastRequest < this.MIN_REQUEST_INTERVAL) {\n                const waitTime = this.MIN_REQUEST_INTERVAL - timeSinceLastRequest;\n                console.log(`Rate limiting: waiting ${waitTime}ms before next request`);\n                await new Promise((resolve)=>setTimeout(resolve, waitTime));\n            }\n        }\n        // Check if we've exceeded the per-minute limit\n        if (this.requestCount >= this.MAX_REQUESTS_PER_MINUTE) {\n            const timeSinceFirstRequest = now - this.lastRequestTime;\n            if (timeSinceFirstRequest < 60000) {\n                const waitTime = 60000 - timeSinceFirstRequest;\n                console.log(`Rate limiting: exceeded ${this.MAX_REQUESTS_PER_MINUTE} requests per minute, waiting ${waitTime}ms`);\n                await new Promise((resolve)=>setTimeout(resolve, waitTime));\n                this.requestCount = 0;\n            } else {\n                // Reset counter if more than 1 minute has passed\n                this.requestCount = 0;\n            }\n        }\n    }\n    async handleRateLimit() {\n        const delay = this.BASE_DELAY * Math.pow(2, this.retryCount);\n        console.log(`Rate limit backoff: waiting ${delay}ms before retry`);\n        await new Promise((resolve)=>setTimeout(resolve, delay));\n        // Reset request counters to allow fresh start\n        this.requestCount = 0;\n        this.lastRequestTime = 0;\n    }\n    async getProjects() {\n        try {\n            let allProjects = [];\n            let page = 1;\n            const perPage = 200;\n            while(true){\n                const data = await this.makeRequest(`projects?page=${page}&per_page=${perPage}`);\n                const projects = data.projects?.map((project)=>{\n                    // Log the first project to see available fields\n                    if (page === 1 && allProjects.length === 0) {\n                        console.log(\"Sample Zoho project data:\", JSON.stringify(project, null, 2));\n                    }\n                    return {\n                        project_id: project.project_id,\n                        project_name: project.project_name || project.name || \"\",\n                        description: project.description || \"\",\n                        status: project.status || \"active\",\n                        start_date: project.start_date || \"\",\n                        end_date: project.end_date || \"\",\n                        budget_amount: project.budget_amount || 0,\n                        rate_per_hour: project.rate_per_hour || 0,\n                        customer_id: project.customer_id || \"\",\n                        customer_name: project.customer_name || \"\",\n                        signed_fee: undefined\n                    };\n                }) || [];\n                allProjects = allProjects.concat(projects);\n                // Check if we've reached the end\n                if (projects.length < perPage) {\n                    break;\n                }\n                page++;\n            }\n            console.log(`Fetched ${allProjects.length} projects from Zoho`);\n            return allProjects;\n        } catch (error) {\n            console.error(\"Error fetching projects:\", error);\n            return [];\n        }\n    }\n    async getProjectsWithRevenueBudget() {\n        try {\n            console.log(\"Fetching projects with revenue budget data...\");\n            const projects = await this.getProjects();\n            // Log projects that have revenue_budget data\n            const projectsWithRevenueBudget = projects.filter((project)=>{\n                const hasRevenueBudget = project.signed_fee && project.signed_fee > 0;\n                if (hasRevenueBudget) {\n                    console.log(`Project ${project.project_name} has revenue budget: $${project.signed_fee}`);\n                }\n                return hasRevenueBudget;\n            });\n            console.log(`Found ${projectsWithRevenueBudget.length} projects with revenue budget data`);\n            return projects;\n        } catch (error) {\n            console.error(\"Error fetching projects with revenue budget:\", error);\n            return [];\n        }\n    }\n    async debugProjectFields() {\n        try {\n            console.log(\"Debugging Zoho project fields...\");\n            const data = await this.makeRequest(\"projects?page=1&per_page=5\");\n            if (data.projects && data.projects.length > 0) {\n                console.log(\"Available fields in Zoho project response:\");\n                const sampleProject = data.projects[0];\n                Object.keys(sampleProject).forEach((key)=>{\n                    console.log(`  ${key}: ${sampleProject[key]} (${typeof sampleProject[key]})`);\n                });\n                // Check specifically for revenue_budget\n                if (sampleProject.revenue_budget !== undefined) {\n                    console.log(`âœ… Found revenue_budget field: ${sampleProject.revenue_budget}`);\n                } else {\n                    console.log(\"âŒ revenue_budget field not found in Zoho response\");\n                    console.log(\"Available budget-related fields:\");\n                    Object.keys(sampleProject).forEach((key)=>{\n                        if (key.toLowerCase().includes(\"budget\") || key.toLowerCase().includes(\"revenue\")) {\n                            console.log(`  ${key}: ${sampleProject[key]}`);\n                        }\n                    });\n                }\n            } else {\n                console.log(\"No projects found in Zoho response\");\n            }\n        } catch (error) {\n            console.error(\"Error debugging project fields:\", error);\n        }\n    }\n    async getProjectsWithEstimates() {\n        try {\n            const projects = await this.getProjects();\n            // For the first few projects, try to get estimates to see if that contains the signed fee\n            const projectsWithEstimates = await Promise.all(projects.slice(0, 5).map(async (project)=>{\n                try {\n                    const estimates = await this.getProjectEstimates(project.project_id);\n                    const totalEstimateAmount = estimates.reduce((sum, estimate)=>sum + (estimate.total || 0), 0);\n                    console.log(`Project ${project.project_name} estimates:`, estimates.length, \"total amount:\", totalEstimateAmount);\n                    return {\n                        ...project,\n                        signed_fee: project.signed_fee || totalEstimateAmount || 0\n                    };\n                } catch (error) {\n                    console.error(`Error fetching estimates for project ${project.project_id}:`, error);\n                    return project;\n                }\n            }));\n            // Return all projects, with the first 5 having updated signed fees from estimates\n            return [\n                ...projectsWithEstimates,\n                ...projects.slice(5)\n            ];\n        } catch (error) {\n            console.error(\"Error fetching projects with estimates:\", error);\n            return [];\n        }\n    }\n    async getProjectsWithInvoiceTotals() {\n        try {\n            const [projects, invoices] = await Promise.all([\n                this.getProjects(),\n                this.getInvoices()\n            ]);\n            // Calculate signed fee as total of all invoices for each project\n            const projectsWithInvoiceTotals = projects.map((project)=>{\n                const projectInvoices = invoices.filter((invoice)=>invoice.project_id === project.project_id);\n                const totalInvoiceAmount = projectInvoices.reduce((sum, invoice)=>sum + invoice.amount, 0);\n                console.log(`Project ${project.project_name} invoices:`, projectInvoices.length, \"total amount:\", totalInvoiceAmount);\n                return {\n                    ...project,\n                    signed_fee: project.signed_fee || totalInvoiceAmount || 0\n                };\n            });\n            return projectsWithInvoiceTotals;\n        } catch (error) {\n            console.error(\"Error fetching projects with invoice totals:\", error);\n            return [];\n        }\n    }\n    async getInvoices() {\n        try {\n            const data = await this.makeRequest(\"invoices\");\n            return data.invoices?.map((invoice)=>({\n                    invoice_id: invoice.invoice_id,\n                    project_id: invoice.project_id,\n                    invoice_number: invoice.invoice_number,\n                    date: invoice.date,\n                    amount: invoice.total,\n                    status: invoice.status,\n                    billed_amount: invoice.billed_amount || 0,\n                    unbilled_amount: invoice.unbilled_amount || 0\n                })) || [];\n        } catch (error) {\n            console.error(\"Error fetching invoices:\", error);\n            return [];\n        }\n    }\n    async getProjectInvoices(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}/invoices`);\n            return data.invoices?.map((invoice)=>({\n                    invoice_id: invoice.invoice_id,\n                    project_id: invoice.project_id,\n                    invoice_number: invoice.invoice_number,\n                    date: invoice.date,\n                    amount: invoice.total,\n                    status: invoice.status,\n                    billed_amount: invoice.billed_amount || 0,\n                    unbilled_amount: invoice.unbilled_amount || 0\n                })) || [];\n        } catch (error) {\n            console.error(\"Error fetching project invoices:\", error);\n            return [];\n        }\n    }\n    async getProjectDetails(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}`);\n            console.log(`Project ${projectId} details:`, JSON.stringify(data, null, 2));\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching project details:\", error);\n            return null;\n        }\n    }\n    async getProjectEstimates(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}/estimates`);\n            console.log(`Project ${projectId} estimates:`, JSON.stringify(data, null, 2));\n            return data.estimates || [];\n        } catch (error) {\n            console.error(\"Error fetching project estimates:\", error);\n            return [];\n        }\n    }\n    async getProjectContracts(projectId) {\n        try {\n            const data = await this.makeRequest(`projects/${projectId}/contracts`);\n            console.log(`Project ${projectId} contracts:`, JSON.stringify(data, null, 2));\n            return data.contracts || [];\n        } catch (error) {\n            console.error(\"Error fetching project contracts:\", error);\n            return [];\n        }\n    }\n    // New method to get Profit & Loss statement\n    async getProfitAndLoss(startDate, endDate) {\n        try {\n            const data = await this.makeRequest(`reports/profitandloss?from_date=${startDate}&to_date=${endDate}`);\n            console.log(\"Profit & Loss data:\", JSON.stringify(data, null, 2));\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching Profit & Loss:\", error);\n            return null;\n        }\n    }\n    // New method to get Cash Flow statement\n    async getCashFlow(startDate, endDate) {\n        try {\n            const data = await this.makeRequest(`reports/cashflow?from_date=${startDate}&to_date=${endDate}`);\n            console.log(\"Cash Flow data:\", JSON.stringify(data, null, 2));\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching Cash Flow:\", error);\n            return null;\n        }\n    }\n    // New method to get Balance Sheet\n    async getBalanceSheet(date) {\n        try {\n            const data = await this.makeRequest(`reports/balancesheet?date=${date}`);\n            console.log(\"Balance Sheet data:\", JSON.stringify(data, null, 2));\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching Balance Sheet:\", error);\n            return null;\n        }\n    }\n    // New method to get Chart of Accounts\n    async getChartOfAccounts() {\n        try {\n            const data = await this.makeRequest(\"chartofaccounts\");\n            console.log(\"Chart of Accounts data:\", JSON.stringify(data, null, 2));\n            return data.chartofaccounts || [];\n        } catch (error) {\n            console.error(\"Error fetching Chart of Accounts:\", error);\n            return [];\n        }\n    }\n    // New method to get Journal Entries for a date range\n    async getJournalEntries(startDate, endDate) {\n        try {\n            const data = await this.makeRequest(`journalentries?from_date=${startDate}&to_date=${endDate}`);\n            console.log(\"Journal Entries data:\", JSON.stringify(data, null, 2));\n            return data.journalentries || [];\n        } catch (error) {\n            console.error(\"Error fetching Journal Entries:\", error);\n            return [];\n        }\n    }\n    // New method to get comprehensive financial metrics\n    async getFinancialMetrics(startDate, endDate) {\n        try {\n            const [plData, cfData, bsData] = await Promise.all([\n                this.getProfitAndLoss(startDate, endDate),\n                this.getCashFlow(startDate, endDate),\n                this.getBalanceSheet(endDate)\n            ]);\n            // Extract financial metrics from the responses\n            const revenue = plData?.revenue?.total || 0;\n            const expenses = plData?.expenses?.total || 0;\n            const grossProfit = revenue - expenses;\n            // Calculate net profit (may need adjustment based on actual Zoho response structure)\n            const netProfit = grossProfit - (plData?.operating_expenses?.total || 0);\n            const operatingIncome = grossProfit - (plData?.operating_expenses?.total || 0);\n            // Extract cash flow data\n            const cashFlow = cfData?.net_cash_flow || 0;\n            const accountsReceivable = bsData?.current_assets?.accounts_receivable || 0;\n            const accountsPayable = bsData?.current_liabilities?.accounts_payable || 0;\n            const cashBalance = bsData?.current_assets?.cash_and_bank || 0;\n            return {\n                revenue,\n                expenses,\n                grossProfit,\n                netProfit,\n                operatingIncome,\n                cashFlow,\n                accountsReceivable,\n                accountsPayable,\n                cashBalance\n            };\n        } catch (error) {\n            console.error(\"Error fetching financial metrics:\", error);\n            // Return default values if API calls fail\n            return {\n                revenue: 0,\n                expenses: 0,\n                grossProfit: 0,\n                netProfit: 0,\n                operatingIncome: 0,\n                cashFlow: 0,\n                accountsReceivable: 0,\n                accountsPayable: 0,\n                cashBalance: 0\n            };\n        }\n    }\n    // Method to manually refresh token (for testing)\n    async forceRefreshToken() {\n        this.accessToken = null;\n        this.tokenExpiry = 0;\n        this.lastRefreshTime = Date.now(); // Track manual refresh time\n        await this.getAccessToken();\n    }\n    // Get token status for debugging\n    getTokenStatus() {\n        const now = Date.now();\n        return {\n            hasToken: !!this.accessToken,\n            expiresIn: this.tokenExpiry - now,\n            isExpired: now >= this.tokenExpiry\n        };\n    }\n    // Method to get auto-refresh status\n    getAutoRefreshStatus() {\n        const now = Date.now();\n        const timeSinceLastRefresh = now - this.lastRefreshTime;\n        const nextRefreshIn = Math.max(0, this.AUTO_REFRESH_INTERVAL - timeSinceLastRefresh);\n        return {\n            isActive: !!this.autoRefreshTimer,\n            nextRefreshIn\n        };\n    }\n    // Public method to start auto-refresh\n    enableAutoRefresh() {\n        this._startAutoRefresh();\n    }\n    // Public method to stop auto-refresh\n    disableAutoRefresh() {\n        this._stopAutoRefresh();\n    }\n    // Public method to get comprehensive status\n    getStatus() {\n        return {\n            ...this.getTokenStatus(),\n            autoRefresh: this.getAutoRefreshStatus()\n        };\n    }\n}\nconst zohoService = new ZohoService();\n// Export the functions that are being imported in page.tsx\nconst fetchProjects = async ()=>{\n    try {\n        console.log(\"Client: Fetching projects from API\");\n        const response = await fetch(\"/api/projects\");\n        const result = await response.json();\n        if (result.success) {\n            console.log(\"Client: Successfully fetched\", result.count, \"projects\");\n            return result.data;\n        } else {\n            console.error(\"Client: API returned error:\", result.error);\n            throw new Error(result.error);\n        }\n    } catch (error) {\n        console.error(\"Client: Error fetching projects:\", error);\n        throw error;\n    }\n};\nconst fetchInvoices = async ()=>{\n    try {\n        console.log(\"Client: Fetching invoices from API\");\n        const response = await fetch(\"/api/invoices\");\n        const result = await response.json();\n        if (result.success) {\n            console.log(\"Client: Successfully fetched\", result.count, \"invoices\");\n            return result.data;\n        } else {\n            console.error(\"Client: API returned error:\", result.error);\n            throw new Error(result.error);\n        }\n    } catch (error) {\n        console.error(\"Client: Error fetching invoices:\", error);\n        throw error;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM5QjtJQUNGLEVBQUUsT0FBT0EsT0FBTztRQUNkTCxRQUFRSyxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxNQUFNQTtJQUNSO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3pvaG8tYmlsbGluZy1wbGF0Zm9ybS8uL2xpYi96b2hvLnRzP2U3MGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgWm9ob1Byb2plY3Qge1xyXG4gIHByb2plY3RfaWQ6IHN0cmluZztcclxuICBwcm9qZWN0X25hbWU6IHN0cmluZzsgLy8gQ2hhbmdlZCBmcm9tIG5hbWUgdG8gcHJvamVjdF9uYW1lXHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgc3RhcnRfZGF0ZTogc3RyaW5nO1xyXG4gIGVuZF9kYXRlPzogc3RyaW5nO1xyXG4gIGJ1ZGdldF9hbW91bnQ/OiBudW1iZXI7XHJcbiAgcmF0ZV9wZXJfaG91cj86IG51bWJlcjtcclxuICBjdXN0b21lcl9pZDogc3RyaW5nO1xyXG4gIGN1c3RvbWVyX25hbWU6IHN0cmluZztcclxuICBzaWduZWRfZmVlPzogbnVtYmVyOyAvLyBBZGRlZCBmb3IgU2lnbmVkIEZlZSBmcm9tIFpvaG9cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBab2hvSW52b2ljZSB7XHJcbiAgaW52b2ljZV9pZDogc3RyaW5nO1xyXG4gIHByb2plY3RfaWQ6IHN0cmluZztcclxuICBpbnZvaWNlX251bWJlcjogc3RyaW5nO1xyXG4gIGRhdGU6IHN0cmluZztcclxuICBhbW91bnQ6IG51bWJlcjtcclxuICBzdGF0dXM6IHN0cmluZztcclxuICBiaWxsZWRfYW1vdW50OiBudW1iZXI7XHJcbiAgdW5iaWxsZWRfYW1vdW50OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUb2tlblJlc3BvbnNlIHtcclxuICBhY2Nlc3NfdG9rZW46IHN0cmluZztcclxuICBleHBpcmVzX2luOiBudW1iZXI7XHJcbiAgYXBpX2RvbWFpbjogc3RyaW5nO1xyXG4gIHRva2VuX3R5cGU6IHN0cmluZztcclxuICByZWZyZXNoX3Rva2VuPzogc3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBab2hvU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBhY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgcHJpdmF0ZSB0b2tlbkV4cGlyeTogbnVtYmVyID0gMDtcclxuICBwcml2YXRlIHJlZnJlc2hQcm9taXNlOiBQcm9taXNlPHN0cmluZz4gfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHJlYWRvbmx5IFRPS0VOX1JFRlJFU0hfQlVGRkVSID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzIGJ1ZmZlclxyXG4gIHByaXZhdGUgYXV0b1JlZnJlc2hUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIHJlYWRvbmx5IEFVVE9fUkVGUkVTSF9JTlRFUlZBTCA9IDQ1ICogNjAgKiAxMDAwOyAvLyA0NSBtaW51dGVzXHJcbiAgcHJpdmF0ZSBsYXN0UmVmcmVzaFRpbWU6IG51bWJlciA9IDA7IC8vIFRyYWNrIHdoZW4gYXV0by1yZWZyZXNoIHdhcyBsYXN0IHRyaWdnZXJlZFxyXG4gIFxyXG4gIC8vIFJhdGUgbGltaXRpbmcgcHJvcGVydGllc1xyXG4gIHByaXZhdGUgcmVxdWVzdENvdW50OiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgbGFzdFJlcXVlc3RUaW1lOiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUgPSAzMDsgLy8gQ29uc2VydmF0aXZlIGxpbWl0XHJcbiAgcHJpdmF0ZSByZWFkb25seSBNSU5fUkVRVUVTVF9JTlRFUlZBTCA9IDIwMDA7IC8vIDIgc2Vjb25kcyBiZXR3ZWVuIHJlcXVlc3RzXHJcbiAgcHJpdmF0ZSByZXRyeUNvdW50OiBudW1iZXIgPSAwO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX1JFVFJJRVMgPSAzO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgQkFTRV9ERUxBWSA9IDEwMDA7IC8vIDEgc2Vjb25kIGJhc2UgZGVsYXkgZm9yIGV4cG9uZW50aWFsIGJhY2tvZmZcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAvLyBTdGFydCBhdXRvbWF0aWMgdG9rZW4gcmVmcmVzaFxyXG4gICAgdGhpcy5fc3RhcnRBdXRvUmVmcmVzaCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfc3RhcnRBdXRvUmVmcmVzaCgpOiB2b2lkIHtcclxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lclxyXG4gICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hUaW1lcikge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1JlZnJlc2hUaW1lcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHVwIGF1dG9tYXRpYyByZWZyZXNoIGV2ZXJ5IDQ1IG1pbnV0ZXNcclxuICAgIHRoaXMuYXV0b1JlZnJlc2hUaW1lciA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQXV0by1yZWZyZXNoaW5nIFpvaG8gdG9rZW4gKDQ1LW1pbnV0ZSBpbnRlcnZhbCkuLi4nKTtcclxuICAgICAgICB0aGlzLmxhc3RSZWZyZXNoVGltZSA9IERhdGUubm93KCk7IC8vIFRyYWNrIHdoZW4gcmVmcmVzaCB3YXMgdHJpZ2dlcmVkXHJcbiAgICAgICAgYXdhaXQgdGhpcy5mb3JjZVJlZnJlc2hUb2tlbigpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBdXRvLXJlZnJlc2ggY29tcGxldGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dG8tcmVmcmVzaCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9LCB0aGlzLkFVVE9fUkVGUkVTSF9JTlRFUlZBTCk7XHJcblxyXG4gICAgLy8gU2V0IGluaXRpYWwgcmVmcmVzaCB0aW1lXHJcbiAgICB0aGlzLmxhc3RSZWZyZXNoVGltZSA9IERhdGUubm93KCk7XHJcbiAgICBjb25zb2xlLmxvZygnQXV0b21hdGljIFpvaG8gdG9rZW4gcmVmcmVzaCBzdGFydGVkIChldmVyeSA0NSBtaW51dGVzKScpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfc3RvcEF1dG9SZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hUaW1lcikge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b1JlZnJlc2hUaW1lcik7XHJcbiAgICAgIHRoaXMuYXV0b1JlZnJlc2hUaW1lciA9IG51bGw7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRvbWF0aWMgWm9obyB0b2tlbiByZWZyZXNoIHN0b3BwZWQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgZ2V0QWNjZXNzVG9rZW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIC8vIENoZWNrIGlmIHRva2VuIGlzIHN0aWxsIHZhbGlkICh3aXRoIGJ1ZmZlcilcclxuICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICYmIERhdGUubm93KCkgPCAodGhpcy50b2tlbkV4cGlyeSAtIHRoaXMuVE9LRU5fUkVGUkVTSF9CVUZGRVIpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlJ3MgYWxyZWFkeSBhIHJlZnJlc2ggaW4gcHJvZ3Jlc3MsIHdhaXQgZm9yIGl0XHJcbiAgICBpZiAodGhpcy5yZWZyZXNoUHJvbWlzZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5yZWZyZXNoUHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGFydCBhIG5ldyByZWZyZXNoXHJcbiAgICB0aGlzLnJlZnJlc2hQcm9taXNlID0gdGhpcy5yZWZyZXNoQWNjZXNzVG9rZW4oKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5yZWZyZXNoUHJvbWlzZTtcclxuICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5yZWZyZXNoUHJvbWlzZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHJlZnJlc2hBY2Nlc3NUb2tlbigpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1JlZnJlc2hpbmcgWm9obyBhY2Nlc3MgdG9rZW4uLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENyZWF0ZSBmb3JtIGRhdGEgZm9yIHRoZSByZXF1ZXN0XHJcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xyXG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ3JlZnJlc2hfdG9rZW4nLCBwcm9jZXNzLmVudi5aT0hPX1JFRlJFU0hfVE9LRU4gfHwgJycpO1xyXG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NsaWVudF9pZCcsIHByb2Nlc3MuZW52LlpPSE9fQ0xJRU5UX0lEIHx8ICcnKTtcclxuICAgICAgZm9ybURhdGEuYXBwZW5kKCdjbGllbnRfc2VjcmV0JywgcHJvY2Vzcy5lbnYuWk9IT19DTElFTlRfU0VDUkVUIHx8ICcnKTtcclxuICAgICAgZm9ybURhdGEuYXBwZW5kKCdncmFudF90eXBlJywgJ3JlZnJlc2hfdG9rZW4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdDxUb2tlblJlc3BvbnNlPignaHR0cHM6Ly9hY2NvdW50cy56b2hvLmNvbS9vYXV0aC92Mi90b2tlbicsIGZvcm1EYXRhLCB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuO1xyXG4gICAgICB0aGlzLnRva2VuRXhwaXJ5ID0gRGF0ZS5ub3coKSArIChyZXNwb25zZS5kYXRhLmV4cGlyZXNfaW4gKiAxMDAwKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBUb2tlbiByZWZyZXNoZWQgc3VjY2Vzc2Z1bGx5LiBFeHBpcmVzIGluICR7TWF0aC5yb3VuZChyZXNwb25zZS5kYXRhLmV4cGlyZXNfaW4gLyA2MCl9IG1pbnV0ZXNgKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVmcmVzaGluZyBab2hvIGFjY2VzcyB0b2tlbjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGF1dGhlbnRpY2F0ZSB3aXRoIFpvaG8nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBBcHBseSByYXRlIGxpbWl0aW5nXHJcbiAgICAgIGF3YWl0IHRoaXMuYXBwbHlSYXRlTGltaXQoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIEFib3J0Q29udHJvbGxlciBmb3IgdGltZW91dFxyXG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgMTUwMDApOyAvLyAxNSBzZWNvbmQgdGltZW91dFxyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly93d3cuem9ob2FwaXMuY29tL2Jvb2tzL3YzLyR7ZW5kcG9pbnR9YCwge1xyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gLFxyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICBvcmdhbml6YXRpb25faWQ6IHByb2Nlc3MuZW52LlpPSE9fT1JHQU5JWkFUSU9OX0lELFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRpbWVvdXQ6IDE1MDAwLCAvLyAxNSBzZWNvbmQgdGltZW91dFxyXG4gICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVzZXQgcmV0cnkgY291bnQgb24gc3VjY2Vzc1xyXG4gICAgICAgIHRoaXMucmV0cnlDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0Q291bnQrKztcclxuICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gICAgICB9IGNhdGNoIChheGlvc0Vycm9yOiBhbnkpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBIYW5kbGUgdGltZW91dCBzcGVjaWZpY2FsbHlcclxuICAgICAgICBpZiAoYXhpb3NFcnJvci5jb2RlID09PSAnRUNPTk5BQk9SVEVEJyB8fCBheGlvc0Vycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9obyBBUEkgcmVxdWVzdCB0aW1lZCBvdXQgZm9yICR7ZW5kcG9pbnR9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRocm93IGF4aW9zRXJyb3I7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgLy8gSGFuZGxlIHJhdGUgbGltaXRpbmcgKDQwMCB3aXRoIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UpXHJcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDAgJiYgXHJcbiAgICAgICAgICBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgPT09ICdBY2Nlc3MgRGVuaWVkJyAmJlxyXG4gICAgICAgICAgZXJyb3IucmVzcG9uc2U/LmRhdGE/LmVycm9yX2Rlc2NyaXB0aW9uPy5pbmNsdWRlcygndG9vIG1hbnkgcmVxdWVzdHMnKSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdab2hvIHJhdGUgbGltaXQgaGl0LCBpbXBsZW1lbnRpbmcgZXhwb25lbnRpYWwgYmFja29mZi4uLicpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlUmF0ZUxpbWl0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmV0cnkgdGhlIHJlcXVlc3QgYWZ0ZXIgYmFja29mZlxyXG4gICAgICAgIGlmICh0aGlzLnJldHJ5Q291bnQgPCB0aGlzLk1BWF9SRVRSSUVTKSB7XHJcbiAgICAgICAgICB0aGlzLnJldHJ5Q291bnQrKztcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXRyeWluZyByZXF1ZXN0IGFmdGVyIHJhdGUgbGltaXQgYmFja29mZiAoYXR0ZW1wdCAke3RoaXMucmV0cnlDb3VudH0pYCk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChlbmRwb2ludCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9obyBBUEkgcmF0ZSBsaW1pdCBleGNlZWRlZCBhZnRlciBtYXhpbXVtIHJldHJpZXMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiB3ZSBnZXQgYSA0MDEsIHRyeSByZWZyZXNoaW5nIHRoZSB0b2tlbiBvbmNlXHJcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gZXhwaXJlZCwgcmVmcmVzaGluZy4uLicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENsZWFyIHRoZSBjdXJyZW50IHRva2VuIGFuZCBmb3JjZSBhIHJlZnJlc2hcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuRXhwaXJ5ID0gMDtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgbmV3VG9rZW4gPSBhd2FpdCB0aGlzLmZvcmNlUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFJldHJ5IHRoZSByZXF1ZXN0IHdpdGggdGhlIG5ldyB0b2tlblxyXG4gICAgICAgICAgY29uc3QgcmV0cnlSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly93d3cuem9ob2FwaXMuY29tL2Jvb2tzL3YzLyR7ZW5kcG9pbnR9YCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7bmV3VG9rZW59YCxcclxuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICBvcmdhbml6YXRpb25faWQ6IHByb2Nlc3MuZW52LlpPSE9fT1JHQU5JWkFUSU9OX0lELFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aW1lb3V0OiAxNTAwMCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnUmVxdWVzdCByZXRyeSBzdWNjZXNzZnVsIGFmdGVyIHRva2VuIHJlZnJlc2gnKTtcclxuICAgICAgICAgIHJldHVybiByZXRyeVJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAocmVmcmVzaEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVmcmVzaCB0b2tlbiBvciByZXRyeSByZXF1ZXN0OicsIHJlZnJlc2hFcnJvcik7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvaG8gQVBJIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBhZnRlciB0b2tlbiByZWZyZXNoOiAke2VuZHBvaW50fWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSGFuZGxlIG90aGVyIEhUVFAgZXJyb3JzXHJcbiAgICAgIGlmIChlcnJvci5yZXNwb25zZT8uc3RhdHVzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgWm9obyBBUEkgZXJyb3IgJHtlcnJvci5yZXNwb25zZS5zdGF0dXN9IGZvciAke2VuZHBvaW50fTpgLCBlcnJvci5yZXNwb25zZS5kYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBQcm92aWRlIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZXNcclxuICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9obyBBUEkgYWNjZXNzIGZvcmJpZGRlbiAtIGNoZWNrIHlvdXIgb3JnYW5pemF0aW9uIElEIGFuZCBwZXJtaXNzaW9ucycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9obyBBUEkgcmF0ZSBsaW1pdCBleGNlZWRlZCAtIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWm9obyBBUEkgc2VydmVyIGVycm9yIC0gcGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvaG8gQVBJIGVycm9yICR7ZXJyb3IucmVzcG9uc2Uuc3RhdHVzfTogJHtlcnJvci5yZXNwb25zZS5kYXRhPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbWFraW5nIFpvaG8gcmVxdWVzdCB0byAke2VuZHBvaW50fTpgLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGRhdGEgZnJvbSBab2hvOiAke2VuZHBvaW50fWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBhcHBseVJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gd2FpdCBiZXR3ZWVuIHJlcXVlc3RzXHJcbiAgICBpZiAodGhpcy5sYXN0UmVxdWVzdFRpbWUgPiAwKSB7XHJcbiAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gdGhpcy5sYXN0UmVxdWVzdFRpbWU7XHJcbiAgICAgIGlmICh0aW1lU2luY2VMYXN0UmVxdWVzdCA8IHRoaXMuTUlOX1JFUVVFU1RfSU5URVJWQUwpIHtcclxuICAgICAgICBjb25zdCB3YWl0VGltZSA9IHRoaXMuTUlOX1JFUVVFU1RfSU5URVJWQUwgLSB0aW1lU2luY2VMYXN0UmVxdWVzdDtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUmF0ZSBsaW1pdGluZzogd2FpdGluZyAke3dhaXRUaW1lfW1zIGJlZm9yZSBuZXh0IHJlcXVlc3RgKTtcclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgd2FpdFRpbWUpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiB3ZSd2ZSBleGNlZWRlZCB0aGUgcGVyLW1pbnV0ZSBsaW1pdFxyXG4gICAgaWYgKHRoaXMucmVxdWVzdENvdW50ID49IHRoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUpIHtcclxuICAgICAgY29uc3QgdGltZVNpbmNlRmlyc3RSZXF1ZXN0ID0gbm93IC0gdGhpcy5sYXN0UmVxdWVzdFRpbWU7XHJcbiAgICAgIGlmICh0aW1lU2luY2VGaXJzdFJlcXVlc3QgPCA2MDAwMCkgeyAvLyBMZXNzIHRoYW4gMSBtaW51dGVcclxuICAgICAgICBjb25zdCB3YWl0VGltZSA9IDYwMDAwIC0gdGltZVNpbmNlRmlyc3RSZXF1ZXN0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBSYXRlIGxpbWl0aW5nOiBleGNlZWRlZCAke3RoaXMuTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEV9IHJlcXVlc3RzIHBlciBtaW51dGUsIHdhaXRpbmcgJHt3YWl0VGltZX1tc2ApO1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB3YWl0VGltZSkpO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdENvdW50ID0gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBSZXNldCBjb3VudGVyIGlmIG1vcmUgdGhhbiAxIG1pbnV0ZSBoYXMgcGFzc2VkXHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0Q291bnQgPSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVJhdGVMaW1pdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5CQVNFX0RFTEFZICogTWF0aC5wb3coMiwgdGhpcy5yZXRyeUNvdW50KTtcclxuICAgIGNvbnNvbGUubG9nKGBSYXRlIGxpbWl0IGJhY2tvZmY6IHdhaXRpbmcgJHtkZWxheX1tcyBiZWZvcmUgcmV0cnlgKTtcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xyXG4gICAgXHJcbiAgICAvLyBSZXNldCByZXF1ZXN0IGNvdW50ZXJzIHRvIGFsbG93IGZyZXNoIHN0YXJ0XHJcbiAgICB0aGlzLnJlcXVlc3RDb3VudCA9IDA7XHJcbiAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IDA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcm9qZWN0cygpOiBQcm9taXNlPFpvaG9Qcm9qZWN0W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBhbGxQcm9qZWN0czogWm9ob1Byb2plY3RbXSA9IFtdO1xyXG4gICAgICBsZXQgcGFnZSA9IDE7XHJcbiAgICAgIGNvbnN0IHBlclBhZ2UgPSAyMDA7XHJcbiAgICAgIFxyXG4gICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGBwcm9qZWN0cz9wYWdlPSR7cGFnZX0mcGVyX3BhZ2U9JHtwZXJQYWdlfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gZGF0YS5wcm9qZWN0cz8ubWFwKChwcm9qZWN0OiBhbnkpID0+IHtcclxuICAgICAgICAgIC8vIExvZyB0aGUgZmlyc3QgcHJvamVjdCB0byBzZWUgYXZhaWxhYmxlIGZpZWxkc1xyXG4gICAgICAgICAgaWYgKHBhZ2UgPT09IDEgJiYgYWxsUHJvamVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTYW1wbGUgWm9obyBwcm9qZWN0IGRhdGE6JywgSlNPTi5zdHJpbmdpZnkocHJvamVjdCwgbnVsbCwgMikpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0LnByb2plY3RfaWQsXHJcbiAgICAgICAgICAgIHByb2plY3RfbmFtZTogcHJvamVjdC5wcm9qZWN0X25hbWUgfHwgcHJvamVjdC5uYW1lIHx8ICcnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcHJvamVjdC5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgc3RhdHVzOiBwcm9qZWN0LnN0YXR1cyB8fCAnYWN0aXZlJyxcclxuICAgICAgICAgICAgc3RhcnRfZGF0ZTogcHJvamVjdC5zdGFydF9kYXRlIHx8ICcnLFxyXG4gICAgICAgICAgICBlbmRfZGF0ZTogcHJvamVjdC5lbmRfZGF0ZSB8fCAnJyxcclxuICAgICAgICAgICAgYnVkZ2V0X2Ftb3VudDogcHJvamVjdC5idWRnZXRfYW1vdW50IHx8IDAsXHJcbiAgICAgICAgICAgIHJhdGVfcGVyX2hvdXI6IHByb2plY3QucmF0ZV9wZXJfaG91ciB8fCAwLFxyXG4gICAgICAgICAgICBjdXN0b21lcl9pZDogcHJvamVjdC5jdXN0b21lcl9pZCB8fCAnJyxcclxuICAgICAgICAgICAgY3VzdG9tZXJfbmFtZTogcHJvamVjdC5jdXN0b21lcl9uYW1lIHx8ICcnLFxyXG4gICAgICAgICAgICBzaWduZWRfZmVlOiB1bmRlZmluZWQsIC8vIFJlbW92ZSBab2hvIHNpZ25lZCBmZWUsIG9ubHkgdXNlIHVzZXItZW50ZXJlZCBkYXRhXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pIHx8IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGFsbFByb2plY3RzID0gYWxsUHJvamVjdHMuY29uY2F0KHByb2plY3RzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBpZiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmRcclxuICAgICAgICBpZiAocHJvamVjdHMubGVuZ3RoIDwgcGVyUGFnZSkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHBhZ2UrKztcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYEZldGNoZWQgJHthbGxQcm9qZWN0cy5sZW5ndGh9IHByb2plY3RzIGZyb20gWm9ob2ApO1xyXG4gICAgICByZXR1cm4gYWxsUHJvamVjdHM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9qZWN0czonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFByb2plY3RzV2l0aFJldmVudWVCdWRnZXQoKTogUHJvbWlzZTxab2hvUHJvamVjdFtdPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgcHJvamVjdHMgd2l0aCByZXZlbnVlIGJ1ZGdldCBkYXRhLi4uJyk7XHJcbiAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0cygpO1xyXG4gICAgICBcclxuICAgICAgLy8gTG9nIHByb2plY3RzIHRoYXQgaGF2ZSByZXZlbnVlX2J1ZGdldCBkYXRhXHJcbiAgICAgIGNvbnN0IHByb2plY3RzV2l0aFJldmVudWVCdWRnZXQgPSBwcm9qZWN0cy5maWx0ZXIocHJvamVjdCA9PiB7XHJcbiAgICAgICAgY29uc3QgaGFzUmV2ZW51ZUJ1ZGdldCA9IHByb2plY3Quc2lnbmVkX2ZlZSAmJiBwcm9qZWN0LnNpZ25lZF9mZWUgPiAwO1xyXG4gICAgICAgIGlmIChoYXNSZXZlbnVlQnVkZ2V0KSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvamVjdCAke3Byb2plY3QucHJvamVjdF9uYW1lfSBoYXMgcmV2ZW51ZSBidWRnZXQ6ICQke3Byb2plY3Quc2lnbmVkX2ZlZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhc1JldmVudWVCdWRnZXQ7XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7cHJvamVjdHNXaXRoUmV2ZW51ZUJ1ZGdldC5sZW5ndGh9IHByb2plY3RzIHdpdGggcmV2ZW51ZSBidWRnZXQgZGF0YWApO1xyXG4gICAgICByZXR1cm4gcHJvamVjdHM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9qZWN0cyB3aXRoIHJldmVudWUgYnVkZ2V0OicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVidWdQcm9qZWN0RmllbGRzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ0RlYnVnZ2luZyBab2hvIHByb2plY3QgZmllbGRzLi4uJyk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCdwcm9qZWN0cz9wYWdlPTEmcGVyX3BhZ2U9NScpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGRhdGEucHJvamVjdHMgJiYgZGF0YS5wcm9qZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0F2YWlsYWJsZSBmaWVsZHMgaW4gWm9obyBwcm9qZWN0IHJlc3BvbnNlOicpO1xyXG4gICAgICAgIGNvbnN0IHNhbXBsZVByb2plY3QgPSBkYXRhLnByb2plY3RzWzBdO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHNhbXBsZVByb2plY3QpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGAgICR7a2V5fTogJHtzYW1wbGVQcm9qZWN0W2tleV19ICgke3R5cGVvZiBzYW1wbGVQcm9qZWN0W2tleV19KWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIHNwZWNpZmljYWxseSBmb3IgcmV2ZW51ZV9idWRnZXRcclxuICAgICAgICBpZiAoc2FtcGxlUHJvamVjdC5yZXZlbnVlX2J1ZGdldCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kIHJldmVudWVfYnVkZ2V0IGZpZWxkOiAke3NhbXBsZVByb2plY3QucmV2ZW51ZV9idWRnZXR9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinYwgcmV2ZW51ZV9idWRnZXQgZmllbGQgbm90IGZvdW5kIGluIFpvaG8gcmVzcG9uc2UnKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdmFpbGFibGUgYnVkZ2V0LXJlbGF0ZWQgZmllbGRzOicpO1xyXG4gICAgICAgICAgT2JqZWN0LmtleXMoc2FtcGxlUHJvamVjdCkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2J1ZGdldCcpIHx8IGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyZXZlbnVlJykpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAke2tleX06ICR7c2FtcGxlUHJvamVjdFtrZXldfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHByb2plY3RzIGZvdW5kIGluIFpvaG8gcmVzcG9uc2UnKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVidWdnaW5nIHByb2plY3QgZmllbGRzOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFByb2plY3RzV2l0aEVzdGltYXRlcygpOiBQcm9taXNlPFpvaG9Qcm9qZWN0W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0cygpO1xyXG4gICAgICBcclxuICAgICAgLy8gRm9yIHRoZSBmaXJzdCBmZXcgcHJvamVjdHMsIHRyeSB0byBnZXQgZXN0aW1hdGVzIHRvIHNlZSBpZiB0aGF0IGNvbnRhaW5zIHRoZSBzaWduZWQgZmVlXHJcbiAgICAgIGNvbnN0IHByb2plY3RzV2l0aEVzdGltYXRlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAgIHByb2plY3RzLnNsaWNlKDAsIDUpLm1hcChhc3luYyAocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgZXN0aW1hdGVzID0gYXdhaXQgdGhpcy5nZXRQcm9qZWN0RXN0aW1hdGVzKHByb2plY3QucHJvamVjdF9pZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsRXN0aW1hdGVBbW91bnQgPSBlc3RpbWF0ZXMucmVkdWNlKChzdW0sIGVzdGltYXRlKSA9PiBzdW0gKyAoZXN0aW1hdGUudG90YWwgfHwgMCksIDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFByb2plY3QgJHtwcm9qZWN0LnByb2plY3RfbmFtZX0gZXN0aW1hdGVzOmAsIGVzdGltYXRlcy5sZW5ndGgsICd0b3RhbCBhbW91bnQ6JywgdG90YWxFc3RpbWF0ZUFtb3VudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIC4uLnByb2plY3QsXHJcbiAgICAgICAgICAgICAgc2lnbmVkX2ZlZTogcHJvamVjdC5zaWduZWRfZmVlIHx8IHRvdGFsRXN0aW1hdGVBbW91bnQgfHwgMCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGVzdGltYXRlcyBmb3IgcHJvamVjdCAke3Byb2plY3QucHJvamVjdF9pZH06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgLy8gUmV0dXJuIGFsbCBwcm9qZWN0cywgd2l0aCB0aGUgZmlyc3QgNSBoYXZpbmcgdXBkYXRlZCBzaWduZWQgZmVlcyBmcm9tIGVzdGltYXRlc1xyXG4gICAgICByZXR1cm4gW1xyXG4gICAgICAgIC4uLnByb2plY3RzV2l0aEVzdGltYXRlcyxcclxuICAgICAgICAuLi5wcm9qZWN0cy5zbGljZSg1KVxyXG4gICAgICBdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHMgd2l0aCBlc3RpbWF0ZXM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcm9qZWN0c1dpdGhJbnZvaWNlVG90YWxzKCk6IFByb21pc2U8Wm9ob1Byb2plY3RbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgW3Byb2plY3RzLCBpbnZvaWNlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgdGhpcy5nZXRQcm9qZWN0cygpLFxyXG4gICAgICAgIHRoaXMuZ2V0SW52b2ljZXMoKSxcclxuICAgICAgXSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDYWxjdWxhdGUgc2lnbmVkIGZlZSBhcyB0b3RhbCBvZiBhbGwgaW52b2ljZXMgZm9yIGVhY2ggcHJvamVjdFxyXG4gICAgICBjb25zdCBwcm9qZWN0c1dpdGhJbnZvaWNlVG90YWxzID0gcHJvamVjdHMubWFwKHByb2plY3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RJbnZvaWNlcyA9IGludm9pY2VzLmZpbHRlcihpbnZvaWNlID0+IGludm9pY2UucHJvamVjdF9pZCA9PT0gcHJvamVjdC5wcm9qZWN0X2lkKTtcclxuICAgICAgICBjb25zdCB0b3RhbEludm9pY2VBbW91bnQgPSBwcm9qZWN0SW52b2ljZXMucmVkdWNlKChzdW0sIGludm9pY2UpID0+IHN1bSArIGludm9pY2UuYW1vdW50LCAwKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgUHJvamVjdCAke3Byb2plY3QucHJvamVjdF9uYW1lfSBpbnZvaWNlczpgLCBwcm9qZWN0SW52b2ljZXMubGVuZ3RoLCAndG90YWwgYW1vdW50OicsIHRvdGFsSW52b2ljZUFtb3VudCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLnByb2plY3QsXHJcbiAgICAgICAgICBzaWduZWRfZmVlOiBwcm9qZWN0LnNpZ25lZF9mZWUgfHwgdG90YWxJbnZvaWNlQW1vdW50IHx8IDAsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcHJvamVjdHNXaXRoSW52b2ljZVRvdGFscztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3RzIHdpdGggaW52b2ljZSB0b3RhbHM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRJbnZvaWNlcygpOiBQcm9taXNlPFpvaG9JbnZvaWNlW10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCdpbnZvaWNlcycpO1xyXG4gICAgICByZXR1cm4gZGF0YS5pbnZvaWNlcz8ubWFwKChpbnZvaWNlOiBhbnkpID0+ICh7XHJcbiAgICAgICAgaW52b2ljZV9pZDogaW52b2ljZS5pbnZvaWNlX2lkLFxyXG4gICAgICAgIHByb2plY3RfaWQ6IGludm9pY2UucHJvamVjdF9pZCxcclxuICAgICAgICBpbnZvaWNlX251bWJlcjogaW52b2ljZS5pbnZvaWNlX251bWJlcixcclxuICAgICAgICBkYXRlOiBpbnZvaWNlLmRhdGUsXHJcbiAgICAgICAgYW1vdW50OiBpbnZvaWNlLnRvdGFsLFxyXG4gICAgICAgIHN0YXR1czogaW52b2ljZS5zdGF0dXMsXHJcbiAgICAgICAgYmlsbGVkX2Ftb3VudDogaW52b2ljZS5iaWxsZWRfYW1vdW50IHx8IDAsXHJcbiAgICAgICAgdW5iaWxsZWRfYW1vdW50OiBpbnZvaWNlLnVuYmlsbGVkX2Ftb3VudCB8fCAwLFxyXG4gICAgICB9KSkgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBpbnZvaWNlczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFByb2plY3RJbnZvaWNlcyhwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8Wm9ob0ludm9pY2VbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHByb2plY3RzLyR7cHJvamVjdElkfS9pbnZvaWNlc2ApO1xyXG4gICAgICByZXR1cm4gZGF0YS5pbnZvaWNlcz8ubWFwKChpbnZvaWNlOiBhbnkpID0+ICh7XHJcbiAgICAgICAgaW52b2ljZV9pZDogaW52b2ljZS5pbnZvaWNlX2lkLFxyXG4gICAgICAgIHByb2plY3RfaWQ6IGludm9pY2UucHJvamVjdF9pZCxcclxuICAgICAgICBpbnZvaWNlX251bWJlcjogaW52b2ljZS5pbnZvaWNlX251bWJlcixcclxuICAgICAgICBkYXRlOiBpbnZvaWNlLmRhdGUsXHJcbiAgICAgICAgYW1vdW50OiBpbnZvaWNlLnRvdGFsLFxyXG4gICAgICAgIHN0YXR1czogaW52b2ljZS5zdGF0dXMsXHJcbiAgICAgICAgYmlsbGVkX2Ftb3VudDogaW52b2ljZS5iaWxsZWRfYW1vdW50IHx8IDAsXHJcbiAgICAgICAgdW5iaWxsZWRfYW1vdW50OiBpbnZvaWNlLnVuYmlsbGVkX2Ftb3VudCB8fCAwLFxyXG4gICAgICB9KSkgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9qZWN0IGludm9pY2VzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UHJvamVjdERldGFpbHMocHJvamVjdElkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHByb2plY3RzLyR7cHJvamVjdElkfWApO1xyXG4gICAgICBjb25zb2xlLmxvZyhgUHJvamVjdCAke3Byb2plY3RJZH0gZGV0YWlsczpgLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvamVjdCBkZXRhaWxzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcm9qZWN0RXN0aW1hdGVzKHByb2plY3RJZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHByb2plY3RzLyR7cHJvamVjdElkfS9lc3RpbWF0ZXNgKTtcclxuICAgICAgY29uc29sZS5sb2coYFByb2plY3QgJHtwcm9qZWN0SWR9IGVzdGltYXRlczpgLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgIHJldHVybiBkYXRhLmVzdGltYXRlcyB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgZXN0aW1hdGVzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UHJvamVjdENvbnRyYWN0cyhwcm9qZWN0SWQ6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGBwcm9qZWN0cy8ke3Byb2plY3RJZH0vY29udHJhY3RzYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBQcm9qZWN0ICR7cHJvamVjdElkfSBjb250cmFjdHM6YCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xyXG4gICAgICByZXR1cm4gZGF0YS5jb250cmFjdHMgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9qZWN0IGNvbnRyYWN0czonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE5ldyBtZXRob2QgdG8gZ2V0IFByb2ZpdCAmIExvc3Mgc3RhdGVtZW50XHJcbiAgYXN5bmMgZ2V0UHJvZml0QW5kTG9zcyhzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGByZXBvcnRzL3Byb2ZpdGFuZGxvc3M/ZnJvbV9kYXRlPSR7c3RhcnREYXRlfSZ0b19kYXRlPSR7ZW5kRGF0ZX1gKTtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2ZpdCAmIExvc3MgZGF0YTonLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgUHJvZml0ICYgTG9zczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTmV3IG1ldGhvZCB0byBnZXQgQ2FzaCBGbG93IHN0YXRlbWVudFxyXG4gIGFzeW5jIGdldENhc2hGbG93KHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYHJlcG9ydHMvY2FzaGZsb3c/ZnJvbV9kYXRlPSR7c3RhcnREYXRlfSZ0b19kYXRlPSR7ZW5kRGF0ZX1gKTtcclxuICAgICAgY29uc29sZS5sb2coJ0Nhc2ggRmxvdyBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBDYXNoIEZsb3c6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE5ldyBtZXRob2QgdG8gZ2V0IEJhbGFuY2UgU2hlZXRcclxuICBhc3luYyBnZXRCYWxhbmNlU2hlZXQoZGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KGByZXBvcnRzL2JhbGFuY2VzaGVldD9kYXRlPSR7ZGF0ZX1gKTtcclxuICAgICAgY29uc29sZS5sb2coJ0JhbGFuY2UgU2hlZXQgZGF0YTonLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgQmFsYW5jZSBTaGVldDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTmV3IG1ldGhvZCB0byBnZXQgQ2hhcnQgb2YgQWNjb3VudHNcclxuICBhc3luYyBnZXRDaGFydE9mQWNjb3VudHMoKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJ2NoYXJ0b2ZhY2NvdW50cycpO1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2hhcnQgb2YgQWNjb3VudHMgZGF0YTonLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgIHJldHVybiBkYXRhLmNoYXJ0b2ZhY2NvdW50cyB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIENoYXJ0IG9mIEFjY291bnRzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTmV3IG1ldGhvZCB0byBnZXQgSm91cm5hbCBFbnRyaWVzIGZvciBhIGRhdGUgcmFuZ2VcclxuICBhc3luYyBnZXRKb3VybmFsRW50cmllcyhzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoYGpvdXJuYWxlbnRyaWVzP2Zyb21fZGF0ZT0ke3N0YXJ0RGF0ZX0mdG9fZGF0ZT0ke2VuZERhdGV9YCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdKb3VybmFsIEVudHJpZXMgZGF0YTonLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgIHJldHVybiBkYXRhLmpvdXJuYWxlbnRyaWVzIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgSm91cm5hbCBFbnRyaWVzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTmV3IG1ldGhvZCB0byBnZXQgY29tcHJlaGVuc2l2ZSBmaW5hbmNpYWwgbWV0cmljc1xyXG4gIGFzeW5jIGdldEZpbmFuY2lhbE1ldHJpY3Moc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZyk6IFByb21pc2U8e1xyXG4gICAgcmV2ZW51ZTogbnVtYmVyO1xyXG4gICAgZXhwZW5zZXM6IG51bWJlcjtcclxuICAgIGdyb3NzUHJvZml0OiBudW1iZXI7XHJcbiAgICBuZXRQcm9maXQ6IG51bWJlcjtcclxuICAgIG9wZXJhdGluZ0luY29tZTogbnVtYmVyO1xyXG4gICAgY2FzaEZsb3c6IG51bWJlcjtcclxuICAgIGFjY291bnRzUmVjZWl2YWJsZTogbnVtYmVyO1xyXG4gICAgYWNjb3VudHNQYXlhYmxlOiBudW1iZXI7XHJcbiAgICBjYXNoQmFsYW5jZTogbnVtYmVyO1xyXG4gIH0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFtwbERhdGEsIGNmRGF0YSwgYnNEYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB0aGlzLmdldFByb2ZpdEFuZExvc3Moc3RhcnREYXRlLCBlbmREYXRlKSxcclxuICAgICAgICB0aGlzLmdldENhc2hGbG93KHN0YXJ0RGF0ZSwgZW5kRGF0ZSksXHJcbiAgICAgICAgdGhpcy5nZXRCYWxhbmNlU2hlZXQoZW5kRGF0ZSlcclxuICAgICAgXSk7XHJcblxyXG4gICAgICAvLyBFeHRyYWN0IGZpbmFuY2lhbCBtZXRyaWNzIGZyb20gdGhlIHJlc3BvbnNlc1xyXG4gICAgICBjb25zdCByZXZlbnVlID0gcGxEYXRhPy5yZXZlbnVlPy50b3RhbCB8fCAwO1xyXG4gICAgICBjb25zdCBleHBlbnNlcyA9IHBsRGF0YT8uZXhwZW5zZXM/LnRvdGFsIHx8IDA7XHJcbiAgICAgIGNvbnN0IGdyb3NzUHJvZml0ID0gcmV2ZW51ZSAtIGV4cGVuc2VzO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2FsY3VsYXRlIG5ldCBwcm9maXQgKG1heSBuZWVkIGFkanVzdG1lbnQgYmFzZWQgb24gYWN0dWFsIFpvaG8gcmVzcG9uc2Ugc3RydWN0dXJlKVxyXG4gICAgICBjb25zdCBuZXRQcm9maXQgPSBncm9zc1Byb2ZpdCAtIChwbERhdGE/Lm9wZXJhdGluZ19leHBlbnNlcz8udG90YWwgfHwgMCk7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGluZ0luY29tZSA9IGdyb3NzUHJvZml0IC0gKHBsRGF0YT8ub3BlcmF0aW5nX2V4cGVuc2VzPy50b3RhbCB8fCAwKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEV4dHJhY3QgY2FzaCBmbG93IGRhdGFcclxuICAgICAgY29uc3QgY2FzaEZsb3cgPSBjZkRhdGE/Lm5ldF9jYXNoX2Zsb3cgfHwgMDtcclxuICAgICAgY29uc3QgYWNjb3VudHNSZWNlaXZhYmxlID0gYnNEYXRhPy5jdXJyZW50X2Fzc2V0cz8uYWNjb3VudHNfcmVjZWl2YWJsZSB8fCAwO1xyXG4gICAgICBjb25zdCBhY2NvdW50c1BheWFibGUgPSBic0RhdGE/LmN1cnJlbnRfbGlhYmlsaXRpZXM/LmFjY291bnRzX3BheWFibGUgfHwgMDtcclxuICAgICAgY29uc3QgY2FzaEJhbGFuY2UgPSBic0RhdGE/LmN1cnJlbnRfYXNzZXRzPy5jYXNoX2FuZF9iYW5rIHx8IDA7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHJldmVudWUsXHJcbiAgICAgICAgZXhwZW5zZXMsXHJcbiAgICAgICAgZ3Jvc3NQcm9maXQsXHJcbiAgICAgICAgbmV0UHJvZml0LFxyXG4gICAgICAgIG9wZXJhdGluZ0luY29tZSxcclxuICAgICAgICBjYXNoRmxvdyxcclxuICAgICAgICBhY2NvdW50c1JlY2VpdmFibGUsXHJcbiAgICAgICAgYWNjb3VudHNQYXlhYmxlLFxyXG4gICAgICAgIGNhc2hCYWxhbmNlXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmaW5hbmNpYWwgbWV0cmljczonLCBlcnJvcik7XHJcbiAgICAgIC8vIFJldHVybiBkZWZhdWx0IHZhbHVlcyBpZiBBUEkgY2FsbHMgZmFpbFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHJldmVudWU6IDAsXHJcbiAgICAgICAgZXhwZW5zZXM6IDAsXHJcbiAgICAgICAgZ3Jvc3NQcm9maXQ6IDAsXHJcbiAgICAgICAgbmV0UHJvZml0OiAwLFxyXG4gICAgICAgIG9wZXJhdGluZ0luY29tZTogMCxcclxuICAgICAgICBjYXNoRmxvdzogMCxcclxuICAgICAgICBhY2NvdW50c1JlY2VpdmFibGU6IDAsXHJcbiAgICAgICAgYWNjb3VudHNQYXlhYmxlOiAwLFxyXG4gICAgICAgIGNhc2hCYWxhbmNlOiAwXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gbWFudWFsbHkgcmVmcmVzaCB0b2tlbiAoZm9yIHRlc3RpbmcpXHJcbiAgYXN5bmMgZm9yY2VSZWZyZXNoVG9rZW4oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgIHRoaXMudG9rZW5FeHBpcnkgPSAwO1xyXG4gICAgdGhpcy5sYXN0UmVmcmVzaFRpbWUgPSBEYXRlLm5vdygpOyAvLyBUcmFjayBtYW51YWwgcmVmcmVzaCB0aW1lXHJcbiAgICBhd2FpdCB0aGlzLmdldEFjY2Vzc1Rva2VuKCk7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdG9rZW4gc3RhdHVzIGZvciBkZWJ1Z2dpbmdcclxuICBnZXRUb2tlblN0YXR1cygpOiB7IGhhc1Rva2VuOiBib29sZWFuOyBleHBpcmVzSW46IG51bWJlcjsgaXNFeHBpcmVkOiBib29sZWFuIH0ge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGhhc1Rva2VuOiAhIXRoaXMuYWNjZXNzVG9rZW4sXHJcbiAgICAgIGV4cGlyZXNJbjogdGhpcy50b2tlbkV4cGlyeSAtIG5vdyxcclxuICAgICAgaXNFeHBpcmVkOiBub3cgPj0gdGhpcy50b2tlbkV4cGlyeSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gZ2V0IGF1dG8tcmVmcmVzaCBzdGF0dXNcclxuICBnZXRBdXRvUmVmcmVzaFN0YXR1cygpOiB7IGlzQWN0aXZlOiBib29sZWFuOyBuZXh0UmVmcmVzaEluOiBudW1iZXIgfSB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgY29uc3QgdGltZVNpbmNlTGFzdFJlZnJlc2ggPSBub3cgLSB0aGlzLmxhc3RSZWZyZXNoVGltZTtcclxuICAgIGNvbnN0IG5leHRSZWZyZXNoSW4gPSBNYXRoLm1heCgwLCB0aGlzLkFVVE9fUkVGUkVTSF9JTlRFUlZBTCAtIHRpbWVTaW5jZUxhc3RSZWZyZXNoKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNBY3RpdmU6ICEhdGhpcy5hdXRvUmVmcmVzaFRpbWVyLFxyXG4gICAgICBuZXh0UmVmcmVzaEluLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIFB1YmxpYyBtZXRob2QgdG8gc3RhcnQgYXV0by1yZWZyZXNoXHJcbiAgZW5hYmxlQXV0b1JlZnJlc2goKTogdm9pZCB7XHJcbiAgICB0aGlzLl9zdGFydEF1dG9SZWZyZXNoKCk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIHN0b3AgYXV0by1yZWZyZXNoXHJcbiAgZGlzYWJsZUF1dG9SZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fc3RvcEF1dG9SZWZyZXNoKCk7XHJcbiAgfVxyXG5cclxuICAvLyBQdWJsaWMgbWV0aG9kIHRvIGdldCBjb21wcmVoZW5zaXZlIHN0YXR1c1xyXG4gIGdldFN0YXR1cygpOiB7IFxyXG4gICAgaGFzVG9rZW46IGJvb2xlYW47IFxyXG4gICAgZXhwaXJlc0luOiBudW1iZXI7IFxyXG4gICAgaXNFeHBpcmVkOiBib29sZWFuO1xyXG4gICAgYXV0b1JlZnJlc2g6IHsgaXNBY3RpdmU6IGJvb2xlYW47IG5leHRSZWZyZXNoSW46IG51bWJlciB9O1xyXG4gIH0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4udGhpcy5nZXRUb2tlblN0YXR1cygpLFxyXG4gICAgICBhdXRvUmVmcmVzaDogdGhpcy5nZXRBdXRvUmVmcmVzaFN0YXR1cygpLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB6b2hvU2VydmljZSA9IG5ldyBab2hvU2VydmljZSgpOyBcclxuXHJcbi8vIEV4cG9ydCB0aGUgZnVuY3Rpb25zIHRoYXQgYXJlIGJlaW5nIGltcG9ydGVkIGluIHBhZ2UudHN4XHJcbmV4cG9ydCBjb25zdCBmZXRjaFByb2plY3RzID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2xpZW50OiBGZXRjaGluZyBwcm9qZWN0cyBmcm9tIEFQSScpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wcm9qZWN0cycpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgXHJcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0NsaWVudDogU3VjY2Vzc2Z1bGx5IGZldGNoZWQnLCByZXN1bHQuY291bnQsICdwcm9qZWN0cycpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdDbGllbnQ6IEFQSSByZXR1cm5lZCBlcnJvcjonLCByZXN1bHQuZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQ2xpZW50OiBFcnJvciBmZXRjaGluZyBwcm9qZWN0czonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZmV0Y2hJbnZvaWNlcyA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ0NsaWVudDogRmV0Y2hpbmcgaW52b2ljZXMgZnJvbSBBUEknKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvaW52b2ljZXMnKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIFxyXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQ6IFN1Y2Nlc3NmdWxseSBmZXRjaGVkJywgcmVzdWx0LmNvdW50LCAnaW52b2ljZXMnKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcignQ2xpZW50OiBBUEkgcmV0dXJuZWQgZXJyb3I6JywgcmVzdWx0LmVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvcik7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0NsaWVudDogRXJyb3IgZmV0Y2hpbmcgaW52b2ljZXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59OyAiXSwibmFtZXMiOlsiYXhpb3MiLCJab2hvU2VydmljZSIsImNvbnN0cnVjdG9yIiwiYWNjZXNzVG9rZW4iLCJ0b2tlbkV4cGlyeSIsInJlZnJlc2hQcm9taXNlIiwiVE9LRU5fUkVGUkVTSF9CVUZGRVIiLCJhdXRvUmVmcmVzaFRpbWVyIiwiQVVUT19SRUZSRVNIX0lOVEVSVkFMIiwibGFzdFJlZnJlc2hUaW1lIiwicmVxdWVzdENvdW50IiwibGFzdFJlcXVlc3RUaW1lIiwiTUFYX1JFUVVFU1RTX1BFUl9NSU5VVEUiLCJNSU5fUkVRVUVTVF9JTlRFUlZBTCIsInJldHJ5Q291bnQiLCJNQVhfUkVUUklFUyIsIkJBU0VfREVMQVkiLCJfc3RhcnRBdXRvUmVmcmVzaCIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwibm93IiwiZm9yY2VSZWZyZXNoVG9rZW4iLCJlcnJvciIsIl9zdG9wQXV0b1JlZnJlc2giLCJnZXRBY2Nlc3NUb2tlbiIsInJlZnJlc2hBY2Nlc3NUb2tlbiIsInRva2VuIiwiZm9ybURhdGEiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcHBlbmQiLCJwcm9jZXNzIiwiZW52IiwiWk9IT19SRUZSRVNIX1RPS0VOIiwiWk9IT19DTElFTlRfSUQiLCJaT0hPX0NMSUVOVF9TRUNSRVQiLCJyZXNwb25zZSIsInBvc3QiLCJoZWFkZXJzIiwiZGF0YSIsImFjY2Vzc190b2tlbiIsImV4cGlyZXNfaW4iLCJNYXRoIiwicm91bmQiLCJFcnJvciIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnQiLCJhcHBseVJhdGVMaW1pdCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJnZXQiLCJwYXJhbXMiLCJvcmdhbml6YXRpb25faWQiLCJaT0hPX09SR0FOSVpBVElPTl9JRCIsInRpbWVvdXQiLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJheGlvc0Vycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsInN0YXR1cyIsImVycm9yX2Rlc2NyaXB0aW9uIiwiaGFuZGxlUmF0ZUxpbWl0IiwibmV3VG9rZW4iLCJyZXRyeVJlc3BvbnNlIiwicmVmcmVzaEVycm9yIiwidGltZVNpbmNlTGFzdFJlcXVlc3QiLCJ3YWl0VGltZSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGltZVNpbmNlRmlyc3RSZXF1ZXN0IiwiZGVsYXkiLCJwb3ciLCJnZXRQcm9qZWN0cyIsImFsbFByb2plY3RzIiwicGFnZSIsInBlclBhZ2UiLCJwcm9qZWN0cyIsIm1hcCIsInByb2plY3QiLCJsZW5ndGgiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvamVjdF9pZCIsInByb2plY3RfbmFtZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInN0YXJ0X2RhdGUiLCJlbmRfZGF0ZSIsImJ1ZGdldF9hbW91bnQiLCJyYXRlX3Blcl9ob3VyIiwiY3VzdG9tZXJfaWQiLCJjdXN0b21lcl9uYW1lIiwic2lnbmVkX2ZlZSIsInVuZGVmaW5lZCIsImNvbmNhdCIsImdldFByb2plY3RzV2l0aFJldmVudWVCdWRnZXQiLCJwcm9qZWN0c1dpdGhSZXZlbnVlQnVkZ2V0IiwiZmlsdGVyIiwiaGFzUmV2ZW51ZUJ1ZGdldCIsImRlYnVnUHJvamVjdEZpZWxkcyIsInNhbXBsZVByb2plY3QiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInJldmVudWVfYnVkZ2V0IiwidG9Mb3dlckNhc2UiLCJnZXRQcm9qZWN0c1dpdGhFc3RpbWF0ZXMiLCJwcm9qZWN0c1dpdGhFc3RpbWF0ZXMiLCJhbGwiLCJzbGljZSIsImVzdGltYXRlcyIsImdldFByb2plY3RFc3RpbWF0ZXMiLCJ0b3RhbEVzdGltYXRlQW1vdW50IiwicmVkdWNlIiwic3VtIiwiZXN0aW1hdGUiLCJ0b3RhbCIsImdldFByb2plY3RzV2l0aEludm9pY2VUb3RhbHMiLCJpbnZvaWNlcyIsImdldEludm9pY2VzIiwicHJvamVjdHNXaXRoSW52b2ljZVRvdGFscyIsInByb2plY3RJbnZvaWNlcyIsImludm9pY2UiLCJ0b3RhbEludm9pY2VBbW91bnQiLCJhbW91bnQiLCJpbnZvaWNlX2lkIiwiaW52b2ljZV9udW1iZXIiLCJkYXRlIiwiYmlsbGVkX2Ftb3VudCIsInVuYmlsbGVkX2Ftb3VudCIsImdldFByb2plY3RJbnZvaWNlcyIsInByb2plY3RJZCIsImdldFByb2plY3REZXRhaWxzIiwiZ2V0UHJvamVjdENvbnRyYWN0cyIsImNvbnRyYWN0cyIsImdldFByb2ZpdEFuZExvc3MiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZ2V0Q2FzaEZsb3ciLCJnZXRCYWxhbmNlU2hlZXQiLCJnZXRDaGFydE9mQWNjb3VudHMiLCJjaGFydG9mYWNjb3VudHMiLCJnZXRKb3VybmFsRW50cmllcyIsImpvdXJuYWxlbnRyaWVzIiwiZ2V0RmluYW5jaWFsTWV0cmljcyIsInBsRGF0YSIsImNmRGF0YSIsImJzRGF0YSIsInJldmVudWUiLCJleHBlbnNlcyIsImdyb3NzUHJvZml0IiwibmV0UHJvZml0Iiwib3BlcmF0aW5nX2V4cGVuc2VzIiwib3BlcmF0aW5nSW5jb21lIiwiY2FzaEZsb3ciLCJuZXRfY2FzaF9mbG93IiwiYWNjb3VudHNSZWNlaXZhYmxlIiwiY3VycmVudF9hc3NldHMiLCJhY2NvdW50c19yZWNlaXZhYmxlIiwiYWNjb3VudHNQYXlhYmxlIiwiY3VycmVudF9saWFiaWxpdGllcyIsImFjY291bnRzX3BheWFibGUiLCJjYXNoQmFsYW5jZSIsImNhc2hfYW5kX2JhbmsiLCJnZXRUb2tlblN0YXR1cyIsImhhc1Rva2VuIiwiZXhwaXJlc0luIiwiaXNFeHBpcmVkIiwiZ2V0QXV0b1JlZnJlc2hTdGF0dXMiLCJ0aW1lU2luY2VMYXN0UmVmcmVzaCIsIm5leHRSZWZyZXNoSW4iLCJtYXgiLCJpc0FjdGl2ZSIsImVuYWJsZUF1dG9SZWZyZXNoIiwiZGlzYWJsZUF1dG9SZWZyZXNoIiwiZ2V0U3RhdHVzIiwiYXV0b1JlZnJlc2giLCJ6b2hvU2VydmljZSIsImZldGNoUHJvamVjdHMiLCJmZXRjaCIsInJlc3VsdCIsImpzb24iLCJzdWNjZXNzIiwiY291bnQiLCJmZXRjaEludm9pY2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/zoho.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/form-data","vendor-chunks/get-intrinsic","vendor-chunks/asynckit","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/es-set-tostringtag","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftop-projects%2Froute&page=%2Fapi%2Ftop-projects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftop-projects%2Froute.ts&appDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CJonathan%5CDesktop%5CBilling&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();