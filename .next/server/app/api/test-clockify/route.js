"use strict";(()=>{var e={};e.id=4234,e.ids=[4234],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91905:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var s={};r.r(s),r.d(s,{GET:()=>u});var o=r(49303),n=r(88716),i=r(60670),a=r(87070),c=r(88403);function l(e){if(!e)return 0;let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);return t?parseInt(t[1]||"0")+parseInt(t[2]||"0")/60+parseInt(t[3]||"0")/3600:0}async function u(e){try{console.log("\uD83E\uDDEA Testing Clockify service..."),console.log("\uD83D\uDD11 Environment variables:"),console.log("CLOCKIFY_API_KEY:",process.env.CLOCKIFY_API_KEY?"✅ Set":"❌ Missing"),console.log("CLOCKIFY_WORKSPACE_ID:",process.env.CLOCKIFY_WORKSPACE_ID?"✅ Set":"❌ Missing");let e=c.ZP.getConfigurationStatus();if(console.log("\uD83D\uDCCB Service config status:",e),!e.configured)return a.NextResponse.json({success:!1,error:"Clockify service not configured",configStatus:e,environment:{hasApiKey:!!process.env.CLOCKIFY_API_KEY,hasWorkspaceId:!!process.env.CLOCKIFY_WORKSPACE_ID}});console.log("⏰ Testing Clockify service methods...");try{let t=await c.ZP.getUser();console.log("✅ User fetch successful:",{id:t.id,name:t.name});let r=await c.ZP.getProjects();console.log("✅ Projects fetch successful:",{count:r.length});let s=new Date;s.setDate(s.getDate()-7);let o=new Date,n=await c.ZP.getAllTimeEntries(s.toISOString(),o.toISOString());console.log("✅ Time entries fetch successful:",{count:n.length});let i=n.reduce((e,t)=>{let r=t.timeInterval?.duration||"PT0H0M",s=l(r);return e.totalHours+=s,e.billableHours+=t.billable?s:0,e.entriesWithZeroDuration+=0===s?1:0,e.entriesWithValidDuration+=s>0?1:0,e},{totalHours:0,billableHours:0,entriesWithZeroDuration:0,entriesWithValidDuration:0}),u=n.slice(0,5).map(e=>({id:e.id,description:e.description,billable:e.billable,duration:e.timeInterval?.duration,startTime:e.timeInterval?.start,endTime:e.timeInterval?.end,hours:l(e.timeInterval?.duration||"PT0H0M"),rawEntry:e}));return a.NextResponse.json({success:!0,message:"Clockify service test successful",configStatus:e,data:{user:{id:t.id,name:t.name},projectsCount:r.length,timeEntriesCount:n.length,durationAnalysis:i,sampleEntries:u}})}catch(t){return console.error("❌ Clockify service method error:",t),a.NextResponse.json({success:!1,error:"Clockify service method failed",message:t instanceof Error?t.message:"Unknown error",configStatus:e},{status:500})}}catch(e){return console.error("❌ Test endpoint error:",e),a.NextResponse.json({success:!1,error:"Test endpoint failed",message:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/test-clockify/route",pathname:"/api/test-clockify",filename:"route",bundlePath:"app/api/test-clockify/route"},resolvedPagePath:"C:\\Users\\Jonathan\\Desktop\\Billing\\app\\api\\test-clockify\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:m}=d,f="/api/test-clockify/route";function h(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,8403],()=>r(91905));module.exports=s})();