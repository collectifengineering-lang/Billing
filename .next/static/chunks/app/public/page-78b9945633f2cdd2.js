(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[685],{63774:function(e,t,a){Promise.resolve().then(a.bind(a,50356))},50356:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(57437),s=a(2265),d=a(69064);function o(){let[e,t]=(0,s.useState)({}),[a,o]=(0,s.useState)({}),[l,n]=(0,s.useState)(!0),[i,c]=(0,s.useState)(null),[u,x]=(0,s.useState)("");(0,s.useEffect)(()=>{m()},[]);let m=async()=>{try{n(!0);let[e,a]=await Promise.all([fetch("/api/statuses"),fetch("/api/comments")]);if(e.ok){let a=await e.json();t(a)}if(a.ok){let e=await a.json();o(e)}}catch(e){console.error("Error fetching data:",e),d.Am.error("Failed to load data")}finally{n(!1)}},p=(t,r,s)=>{var d,o;let l="status"===t?(null===(d=e[r])||void 0===d?void 0:d[s])||"":(null===(o=a[r])||void 0===o?void 0:o[s])||"";c({type:t,projectId:r,month:s}),x(l)},g=async()=>{if(i)try{let e="status"===i.type?"/api/statuses":"/api/comments",a="status"===i.type?{projectId:i.projectId,month:i.month,status:u}:{projectId:i.projectId,month:i.month,comment:u};(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?("status"===i.type?t(e=>({...e,[i.projectId]:{...e[i.projectId],[i.month]:u}})):o(e=>({...e,[i.projectId]:{...e[i.projectId],[i.month]:u}})),d.Am.success("".concat("status"===i.type?"Status":"Comment"," updated successfully"))):d.Am.error("Failed to update")}catch(e){console.error("Error updating:",e),d.Am.error("Failed to update")}finally{c(null),x("")}},h=()=>{c(null),x("")},b=e=>{"Enter"===e.key?g():"Escape"===e.key&&h()},y=new Set([...Object.keys(e),...Object.keys(a)]),f=new Set;Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>f.add(e))}),Object.values(a).forEach(e=>{Object.keys(e).forEach(e=>f.add(e))});let k=Array.from(y).sort(),j=Array.from(f).sort();return l?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Loading public data..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-4",children:"Public Project Statuses"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"View and edit project statuses and comments. No authentication required."})]}),(0,r.jsx)("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border border-gray-200 dark:border-slate-700 rounded-2xl shadow-xl overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-700/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Project ID"}),j.map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:e},e))]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-gray-200 dark:divide-slate-700",children:k.map(t=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors duration-200",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t}),j.map(s=>{var d,o;return(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Status:"}),(null==i?void 0:i.type)==="status"&&i.projectId===t&&i.month===s?(0,r.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),onKeyDown:b,onBlur:g,className:"ml-2 px-3 py-1 text-xs border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoFocus:!0}):(0,r.jsx)("button",{onClick:()=>p("status",t,s),className:"ml-2 px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40 min-w-[60px] text-left transition-colors duration-200",children:(null===(d=e[t])||void 0===d?void 0:d[s])||"Click to add"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Comment:"}),(null==i?void 0:i.type)==="comment"&&i.projectId===t&&i.month===s?(0,r.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),onKeyDown:b,onBlur:g,className:"ml-2 px-3 py-1 text-xs border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",autoFocus:!0}):(0,r.jsx)("button",{onClick:()=>p("comment",t,s),className:"ml-2 px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/40 min-w-[60px] text-left transition-colors duration-200",children:(null===(o=a[t])||void 0===o?void 0:o[s])||"Click to add"})]})]})},s)})]},t))})]})})})]})})}}},function(e){e.O(0,[64,971,117,744],function(){return e(e.s=63774)}),_N_E=e.O()}]);