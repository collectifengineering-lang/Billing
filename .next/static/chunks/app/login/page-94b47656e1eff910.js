(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{45161:function(e,r,t){Promise.resolve().then(t.bind(t,66374))},66374:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var n=t(57437),i=t(2265),s=t(99376),c=t(90483);function o(){let{user:e,loading:r,signIn:t}=(0,c.a)(),o=(0,s.useRouter)(),[a,l]=(0,i.useState)(null);(0,i.useEffect)(()=>{!r&&e&&o.push("/")},[e,r,o]);let u=async()=>{try{l(null),await t()}catch(e){console.error("Sign in error:",e),l(e instanceof Error?e.message:"Sign in failed")}};return r?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?null:(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),(0,n.jsxs)("div",{className:"mt-8 space-y-6",children:[a&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"ml-3",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Authentication Error"}),(0,n.jsxs)("div",{className:"mt-2 text-sm text-red-700",children:[(0,n.jsx)("p",{children:a}),a.includes("environment variables")&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("p",{className:"font-medium",children:"To fix this:"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside mt-1 space-y-1",children:[(0,n.jsxs)("li",{children:["Create a ",(0,n.jsx)("code",{className:"bg-red-100 px-1 rounded",children:".env.local"})," file in the project root"]}),(0,n.jsx)("li",{children:"Add your Azure AD configuration:"})]}),(0,n.jsx)("pre",{className:"mt-2 bg-red-100 p-2 rounded text-xs overflow-x-auto",children:"NEXT_PUBLIC_AZURE_AD_CLIENT_ID=your-client-id\nNEXT_PUBLIC_AZURE_AD_TENANT_ID=your-tenant-id"})]})]})]})]})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in with Azure AD"})})]})]})})}},90483:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return x},a:function(){return v}});var n=t(57437),i=t(2265),s=t(96244);let c="72ed6933-6bc6-430e-a75a-cb5d2e1c20e1",o="e4748cdc-321b-4db0-bc36-141b121a9117";c&&o||(console.warn("Azure AD environment variables are not set. Authentication will not work."),console.warn("Please set NEXT_PUBLIC_AZURE_AD_CLIENT_ID and NEXT_PUBLIC_AZURE_AD_TENANT_ID in your .env.local file"));let a={auth:{clientId:c||"dummy-client-id",authority:"https://login.microsoftonline.com/".concat(o||"dummy-tenant-id"),redirectUri:window.location.origin},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}},l=new s.Lx(a),u={scopes:["User.Read"]};async function d(){try{if(!c||!o)throw Error("Azure AD environment variables are not configured. Please set NEXT_PUBLIC_AZURE_AD_CLIENT_ID and NEXT_PUBLIC_AZURE_AD_TENANT_ID in your .env.local file");return await l.loginRedirect(u),null}catch(e){throw console.error("Sign in error:",e),e}}async function h(){try{await l.logoutPopup()}catch(e){console.error("Sign out error:",e)}}async function m(){try{let e=l.getActiveAccount();if(!e)return null;return{id:e.localAccountId,name:e.name||"",email:e.username||"",isAdmin:!0,isBasic:!0}}catch(e){return console.error("Get auth user error:",e),null}}let f=(0,i.createContext)(void 0);function x(e){let{children:r}=e,[t,s]=(0,i.useState)(null),[c,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{await l.initialize();let e=await l.handleRedirectPromise();e&&(console.log("Redirect response received:",e),l.setActiveAccount(e.account));let r=await m();s(r)}catch(e){console.error("Auth initialization error:",e)}finally{o(!1)}})()},[]);let a=async()=>{try{o(!0),await d()}catch(e){console.error("Sign in error:",e),o(!1)}},u=async()=>{try{o(!0),await h(),s(null)}catch(e){console.error("Sign out error:",e)}finally{o(!1)}};return(0,n.jsx)(f.Provider,{value:{user:t,loading:c,signIn:a,signOut:u},children:r})}function v(){let e=(0,i.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},99376:function(e,r,t){"use strict";var n=t(35475);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[244,971,117,744],function(){return e(e.s=45161)}),_N_E=e.O()}]);